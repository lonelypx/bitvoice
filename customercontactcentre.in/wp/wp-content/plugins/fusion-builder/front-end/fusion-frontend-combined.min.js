function openShortcodeGenerator(e){var i,t,o,n;"object"==typeof e&&void 0!==e[0].$el&&(e=e[0].$el),o="#"+e.parent().parent().find(".wp-editor-area").attr("id"),n=e.closest(".fusion-builder-module-settings").attr("data-element-cid"),window.cursorPosition=0,window.editorArea=o,FusionPageBuilderApp.shortcodeGenerator=!0,FusionPageBuilderApp.isTinyMceActive()?window.SCmoduleContentEditorMode="tinymce":window.SCmoduleContentEditorMode="html","tinymce"!==window.SCmoduleContentEditorMode&&(window.cursorPosition=jQuery(o).getCursorPosition()),t={collection:FusionPageBuilderElements,view:this,targetCid:n},i=new FusionPageBuilder.GeneratorElementsView(t),jQuery(i.render().el).dialog({title:"Select Element",draggable:!1,modal:!0,resizable:!1,dialogClass:"fusion-builder-dialog fusion-builder-large-library-dialog fusion-builder-element-library-dialog",open:function(e,t){window.FusionApp.dialog.resizeDialog()},close:function(e,t){i.remove()}})}jQuery,window.fusionBuilderInsertIntoEditor=function(e,t){var i,o;"tinymce"!==window.SCmoduleContentEditorMode||""!==t&&void 0!==t?("excerpt"===(i=null===t||""===t||void 0===t?jQuery(window.editorArea):jQuery("#"+t)).attr("id")&&(FusionPageBuilderApp.fromExcerpt=!0),void 0===window.cursorPosition?0===i.getCursorPosition()?i.val(e+i.val()):i.val().length===i.getCursorPosition()?i.val(i.val()+e):i.val(i.val().slice(0,i.getCursorPosition())+e+i.val().slice(i.getCursorPosition())):i.val([i.val().slice(0,window.cursorPosition),e,i.val().slice(window.cursorPosition)].join("")),i.trigger("change")):void 0!==window.tinyMCE&&((o=FusionPageBuilderApp.shortcodeGeneratorActiveEditor).focus(),"excerpt"===o.id&&(FusionPageBuilderApp.fromExcerpt=!0),window.tinyMCE.activeEditor.execCommand("mceInsertContent",!1,e),window.tinyMCE.activeEditor.execCommand("mceCleanup",!1)),!1===FusionPageBuilderApp.manuallyAdded&&(FusionPageBuilderApp.shortcodeGeneratorActiveEditor="")},jQuery,jQuery.fn.getCursorPosition=function(){var e,t,i=jQuery(this).get(0),o=0;return"selectionStart"in i?o=i.selectionStart:"selection"in document&&(i.focus(),e=document.selection.createRange(),t=document.selection.createRange().text.length,e.moveStart("character",-i.value.length),o=e.text.length-t),o};var FusionPageBuilder=FusionPageBuilder||{};jQuery,FusionPageBuilder.BuilderHistory=window.wp.Backbone.View.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-front-end-history").html()),className:"fusion-builder-history-list submenu-trigger-target",tagName:"ul",initialize:function(){var e=FusionApp.data;this.fusionCommands=new Array("[]"),this.fusionCommandsStates=new Array("[]"),this.maxSteps=25,this.currStep=1,this.allElements=e.postDetails.post_content,this.fusionHistoryState="",this.tracking="on",this.trackingPaused="off",this.unsavedStep=1,this.fusionCommands[this.currStep]={allElements:e.postDetails.post_content},this.fusionCommandsStates[this.currStep]=fusionBuilderText.empty,this.listenTo(FusionEvents,"fusion-history-pause-tracking",this.pauseTracking),this.listenTo(FusionEvents,"fusion-history-resume-tracking",this.resumeTracking),this.listenTo(FusionEvents,"fusion-history-save-step",this.saveHistoryStep),this.listenTo(FusionEvents,"fusion-history-turn-on-tracking",this.turnOnTracking),this.listenTo(FusionEvents,"fusion-history-turn-off-tracking",this.turnOffTracking),this.listenTo(FusionEvents,"fusion-history-go-to-step",this.historyStep),this.listenTo(FusionEvents,"fusion-history-clear",this.clearEditor),this.listenTo(FusionEvents,"fusion-history-capture-editor",this.captureEditor),this.listenTo(FusionEvents,"fusion-history-undo",this.doUndo),this.listenTo(FusionEvents,"fusion-history-redo",this.doRedo),this.listenTo(FusionEvents,"fusion-app-saved",this.clearEditor),this.listenTo(FusionEvents,"fusion-builder-reset",this.resetStates),this.listenTo(FusionEvents,"fusion-element-removed",this.resetStates)},resetStates:function(i){var o=this;"object"==typeof this.fusionCommands&&_.each(this.fusionCommands,function(e,t){void 0!==i&&i&&("param"!==e.type||void 0===e.cid||i!==e.cid)||(o.fusionCommands[t]={allElements:e.allElements})})},render:function(){var t=this;return this.$el.html(this.template({steps:this.fusionCommandsStates,currentStep:this.currStep})),this.$el.attr("aria-expanded",!1),this.$el.find("li").on("click",function(e){e&&e.preventDefault(),t.historyStep(e)}),this.updateUI(),this},saveHistoryStep:function(e,t){this.fusionHistoryState=e,this.turnOnTracking(),this.captureEditor(t),this.turnOffTracking()},captureEditor:function(e){"object"!=typeof e&&(e={}),"undefined"!=typeof FusionPageBuilderApp&&(FusionPageBuilderApp.builderToShortcodes(),this.isTrackingOn()&&!this.isTrackingPaused()&&(this.currStep==this.maxSteps?(this.fusionCommands.shift(),this.fusionCommandsStates.shift()):(this.currStep+=1,this.unsavedStep+=1),this.currStep!==this.fusionCommands.length&&(this.fusionCommandsStates.length=this.currStep,this.fusionCommands.length=this.currStep),this.allElements=FusionApp.data.postDetails.post_content,e.allElements=this.allElements,this.fusionCommands[this.currStep]=e,this.fusionCommandsStates[this.currStep]=this.fusionHistoryState,FusionApp.contentChange("page","builder-content"),this.fusionHistoryState="",this.render()))},turnOnTracking:function(){this.tracking="on"},turnOffTracking:function(){this.tracking="off"},pauseTracking:function(){this.trackingPaused="on"},resumeTracking:function(){this.trackingPaused="off"},canApplyStep:function(e){return"object"==typeof e&&void 0!==e.type&&("param"===e.type||"add-element"===e.type||"remove-element"===e.type||"move-element"===e.type)},canApplySteps:function(e){var t=this,i=!(e<this.currStep),o=[],n=!0;return o=i?this.fusionCommands.slice(this.currStep+1,e+1):this.fusionCommands.slice(e+1,this.currStep+1),_.each(o,function(e){t.canApplyStep(e)||(n=!1)}),n},applySteps:function(e){var t=this,i=!(e<this.currStep),o=[];o=i?this.fusionCommands.slice(this.currStep+1,e+1):this.fusionCommands.slice(e+1,this.currStep+1).reverse(),_.each(o,function(e){t.applyStep(e,i)})},applyStep:function(e,t){var i,o;switch(t=void 0!==t&&t,e.type){case"param":(i=window.FusionPageBuilderViewManager.getView(e.cid))&&(i.model.get("params"),t?(i.historyUpdateParam(e.param,e.newValue),FusionEvents.trigger("fusion-param-changed",e.param,e.newValue),FusionEvents.trigger("fusion-param-changed-"+e.cid,e.param,e.newValue)):(i.historyUpdateParam(e.param,e.oldValue),FusionEvents.trigger("fusion-param-changed",e.param,e.oldValue),FusionEvents.trigger("fusion-param-changed-"+e.cid,e.param,e.oldValue)));break;case"add-element":t?FusionPageBuilderApp.collection.add(e.model):(i=window.FusionPageBuilderViewManager.getView(e.model.cid))&&i.removeElement();break;case"remove-element":t?(i=window.FusionPageBuilderViewManager.getView(e.model.cid))&&i.removeElement():FusionPageBuilderApp.collection.add(e.model);break;case"move-element":(i=window.FusionPageBuilderViewManager.getView(e.cid)).$el.addClass("ignore-me"),t?(o=window.FusionPageBuilderViewManager.getView(e.newParent),i&&o&&(o.$el.find(".fusion-builder-column-content").first().find("> span, > div").not(".ignore-me").eq(e.newIndex-1).after(i.$el),FusionPageBuilderApp.onDropCollectionUpdate(i.model,e.newIndex,e.newParent))):(o=window.FusionPageBuilderViewManager.getView(e.oldParent),i&&o&&(o.$el.find(".fusion-builder-column-content").first().find("> span, > div").not(".ignore-me").eq(e.oldIndex-1).after(i.$el),FusionPageBuilderApp.onDropCollectionUpdate(i.model,e.oldIndex,e.oldParent))),i.$el.removeClass("ignore-me")}},updateActiveStyling:function(){FusionApp.builderToolbarView.$el.find(".fusion-builder-history-list li").removeClass("fusion-history-active-state"),FusionApp.builderToolbarView.$el.find(".fusion-builder-history-list").find('[data-state-id="'+this.currStep+'"]').addClass("fusion-history-active-state")},fullContentReplace:function(e){this.resetStates(),FusionPageBuilderApp.clearBuilderLayout(),FusionPageBuilderApp.$el.find(".fusion_builder_container").remove(),FusionPageBuilderApp.createBuilderLayout(e)},doUndo:function(e){var t,i={};e&&e.preventDefault(),this.hasUndo()&&(this.turnOffTracking(),i=this.fusionCommands[this.currStep],this.canApplyStep(i)?(this.applyStep(i,!1),this.currStep-=1):(this.currStep-=1,(t="object"==typeof(i=this.fusionCommands[this.currStep])&&i.allElements)&&"[]"!==t&&this.fullContentReplace(t)),this.updateActiveStyling(),FusionPageBuilderApp.wireframeActive&&FusionEvents.trigger("fusion-undo-state"))},doRedo:function(e){var t;e&&e.preventDefault(),this.hasRedo()&&(this.turnOffTracking(),this.currStep+=1,window.historyStep=this.fusionCommands[this.currStep],t="object"==typeof window.historyStep&&window.historyStep.allElements,this.canApplyStep(window.historyStep)?this.applyStep(window.historyStep,!0):t&&"[]"!==t&&this.fullContentReplace(t),this.updateActiveStyling())},historyStep:function(e){var t,i;e&&e.preventDefault(),t=jQuery(e.currentTarget).data("state-id"),this.turnOffTracking(),this.canApplySteps(t)?(this.applySteps(t),this.currStep=t):(this.currStep=t,(i="object"==typeof this.fusionCommands[this.currStep]&&this.fusionCommands[this.currStep].allElements)&&"[]"!==i&&(this.fullContentReplace(i),FusionPageBuilderApp.wireframeActive&&FusionEvents.trigger("fusion-undo-state"))),this.updateActiveStyling()},isTrackingOn:function(){return"on"===this.tracking},isTrackingPaused:function(){return"on"===this.trackingPaused},logStacks:function(){},clearEditor:function(){this.fusionCommands=new Array("[]"),this.fusionCommandsStates=new Array("[]"),this.currStep=1,this.unsavedStep=1,this.fusionHistoryState="",this.fusionCommands[this.currStep]={allElements:FusionApp.data.postDetails.post_content},this.fusionCommandsStates[this.currStep]=fusionBuilderText.empty,this.render()},hasUndo:function(){return 1!==this.currStep},hasRedo:function(){return this.currStep<this.fusionCommands.length-1},getCommands:function(){return this.fusionCommands},updateUI:function(){1<this.unsavedStep?FusionApp.builderToolbarView.$el.find("#fusion-builder-toolbar-history-menu").attr("data-has-unsaved",!0):FusionApp.builderToolbarView.$el.find("#fusion-builder-toolbar-history-menu").attr("data-has-unsaved",!1),this.updateActiveStyling()}});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.BuilderToolbar=window.wp.Backbone.View.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-front-end-toolbar").html()),className:"fusion-toolbar-nav fb",tagName:"ul",events:{"click .fusion-builder-clear-layout":"clearLayout","click .fusion-builder-open-library":"openLibrary","click .fusion-builder-save-template":"openLibrary","click #fusion-builder-toolbar-new-post .add-new":"newPost","click .fusion-builder-preferences":"openPreferences","click #fusion-builder-toolbar-history-menu":"preventDefault","click .fusion-preview-only-link":"generatePreview"},toggleWireframe:function(e){void 0!==e&&e.preventDefault(),FusionPageBuilderApp.wireframe.toggleWireframe()},initialize:function(){this.builderHistory=new FusionPageBuilder.BuilderHistory,this.listenTo(FusionEvents,"fusion-post_title-changed",this.updatePreviewTitle)},render:function(){return this.$el.html(this.template()),this.$el.find(".fusion-builder-history-container").append(this.builderHistory.render().el),this.moveWireframe(),this.delegateEvents(),this},moveWireframe:function(){FusionApp.toolbarView.$el.find(".fusion-wireframe-holder").remove(),FusionApp.toolbarView.$el.find(".fusion-builder-preview-viewport").after(this.$el.find(".fusion-wireframe-holder")),FusionApp.toolbarView.$el.find(".fusion-builder-wireframe-toggle").on("click",this.toggleWireframe)},generatePreview:function(e){var t=jQuery(e.currentTarget);void 0!==e&&(e.preventDefault(),e.stopPropagation()),t.attr("data-disabled")||(t.attr("data-disabled",!0),"undefined"!=typeof FusionPageBuilderApp&&FusionPageBuilderApp.builderToShortcodes(),this.sidebarView&&this.setGoogleFonts(),FusionApp.formPost(FusionApp.getAjaxData("fusion_app_preview_only"),!1,"_blank"),t.removeAttr("data-disabled"))},openLibrary:function(e){var t={model:{target:jQuery(e.currentTarget).data("target"),focus:jQuery(e.currentTarget).data("focus")}};void 0!==e&&(e.preventDefault(),e.stopPropagation()),jQuery(".fusion-builder-dialog").length&&jQuery(".fusion-builder-dialog").is(":visible")?FusionApp.multipleDialogsNotice():new FusionPageBuilder.LibraryView(t).render()},clearLayout:function(e){e&&e.preventDefault(),FusionApp.confirmationPopup({title:fusionBuilderText.are_you_sure,content:fusionBuilderText.are_you_sure_you_want_to_delete_this_layout,actions:[{label:fusionBuilderText.cancel,classes:"cancel",callback:function(){FusionApp.confirmationPopup({action:"hide"})}},{label:fusionBuilderText.remove,classes:"delete-layout",callback:function(){jQuery(".ui-dialog-content").length&&jQuery(".ui-dialog-content").dialog("close"),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.layout_cleared),FusionPageBuilderApp.clearLayout(e),FusionApp.confirmationPopup({action:"hide"})}}]})},newPost:function(t){var e=jQuery(t.currentTarget).data("post-type");t&&t.preventDefault(),jQuery.ajax({type:"POST",url:fusionAppConfig.ajaxurl,dataType:"JSON",data:{action:"fusion_create_post",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,post_type:e},success:function(e){FusionApp.checkLink(t,e.permalink)}})},openPreferences:function(e){void 0!==e&&(e.preventDefault(),e.stopPropagation()),jQuery(".fusion-builder-dialog").length&&jQuery(".fusion-builder-dialog").is(":visible")?FusionApp.multipleDialogsNotice():(new FusionPageBuilder.PreferencesView).render()},preventDefault:function(e){e.preventDefault()},updatePreviewTitle:function(){this.$el.find(".fusion-preview-only-link strong").html(FusionApp.getPost("post_title"))}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,FusionPageBuilder.Element=Backbone.Model.extend({defaults:{type:"element"}});FusionPageBuilder=FusionPageBuilder||{};jQuery,FusionPageBuilder.ExtraShortcodes=Backbone.Model.extend({defaults:{elementCount:0,shortcodes:{}},addData:function(e){var t=this,i=t.get("shortcodes"),o=t.get("elementCount");_.each(e,function(e){e.id=o,e.matcher=t.convert(e.shortcode),i[o]=e,o++}),this.set({elementCount:o}),this.set({shortcodes:i})},addShortcode:function(e,t,i){var o=this.get("shortcodes"),n=this.get("elementCount"),a=this.get("elementCount");return o[n]={shortcode:e,output:t,matcher:this.convert(e),id:n,tag:i},n++,this.set({elementCount:n}),this.set({shortcodes:o}),a},byId:function(e){return this.get("shortcodes")[e]},byShortcode:function(e){var t=this.get("shortcodes"),i=_.findWhere(t,{shortcode:e});return void 0===i&&(e=this.convert(e),i=_.findWhere(t,{matcher:e})),i},byOutput:function(e){var t=this.get("shortcodes");return _.findWhere(t,{ouput:e})},getAll:function(){return this.get("shortcodes")},convert:function(e){return(e=(e=(e=(e=e.replace(/ /g,"")).replace(/\r?\n|\r/g,"")).replace(/(<p[^>]+?>|<p>|<\/p>)/g,"")).replace(/(<br[^>]+?>|<br>|<\/br>)/g,"")).trim()}});FusionPageBuilder=FusionPageBuilder||{};jQuery,FusionPageBuilder.Collection=Backbone.Collection.extend({model:FusionPageBuilder.Element}),window.FusionPageBuilderElements=new FusionPageBuilder.Collection;FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.BaseView=window.wp.Backbone.View.extend({modalDialogMoreView:null,events:{},initialize:function(){},beforeRender:function(){},filterRender:function(e){return e},onRender:function(){},onInit:function(){},beforeRemove:function(){},onCancel:function(){},refreshJs:function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-element-render-"+this.model.attributes.element_type,this.model.attributes.cid)},updateResponsiveTypography:function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-force-typography-update")},reRender:function(e){e&&"object"==typeof e&&e.preventDefault(),this.patchView(e),this.model.get("inline_editor")&&!this.activeInlineEditing&&(FusionPageBuilderApp.inlineEditorHelpers.liveEditorEvent(this),this.activeInlineEditing=!1)},patchView:function(){var e,t,i="",o="",n={};"generated_element"!==this.model.get("type")&&(t=this.$el.outerHeight(),this.beforePatch(),FusionPageBuilderApp.disableDocumentWrite(),this.renderWireframePreview(),(o=(i=this.getElementContent()).clone()).html(this.getTemplate()),e=FusionPageBuilderApp._diffdom.diff(i[0],o[0]),"function"==typeof this.patcherFilter&&(e=this.patcherFilter(e)),FusionPageBuilderApp._diffdom.apply(i[0],e),"fusion_builder_column"!==this.model.get("element_type")&&(n={currentModel:this.model,handleType:"changeView",difference:e},fusionGlobalManager.handleMultiGlobal(n)),i.removeClass("fusion-loader"),FusionPageBuilderApp.enableDocumentWrite(),this.afterPatch(),t!==this.$el.outerHeight()&&"function"==typeof this._triggerColumn&&this._triggerColumn())},patcherFilter:function(e){var t=[],i=["aria-multiline","contenteditable","data-inline-fontsize","data-medium-editor-index","data-medium-editor-element","data-medium-focused","data-placeholder","medium-editor-index","role","spellcheck"],o=!1;return this.activeInlineEditing&&(_.each(e,function(e){if("removeAttribute"!==e.action||-1===jQuery.inArray(e.name,i))return"modifyAttribute"===e.action&&-1!==e.oldValue.indexOf("medium-editor-element")&&-1===e.oldValue.indexOf("medium-editor-element")?(e.newValue=e.newValue+" medium-editor-element",t.push(e),void(o=!0)):void t.push(e);o=!0}),e=t,this.activeInlineEditing=o,this.autoSelectEditor=!o),e},beforePatch:function(){},afterPatch:function(){},renderInlineSettings:function(){var e;void 0!==FusionPageBuilderApp.inlineEditors&&FusionPageBuilderApp.inlineEditors.shortcodeAdded&&void 0!==(e=this.model.inlineCollection.find(function(e){return"true"==e.get("params").open_settings}))&&(e.parentView=this,e.$target=this.$el.find('.fusion-disable-editing[data-id="'+e.get("cid")+'"]'),delete e.attributes.params.open_settings,"undefined"!=typeof FusionApp&&"off"!==FusionApp.preferencesData.open_settings&&(e.set("added",!0),FusionPageBuilderApp.inlineEditorHelpers.getInlineElementSettings(e)))},getTemplate:function(){var e=this.getTemplateAtts();if(void 0!==this.elementTemplate)return this.elementTemplate(e)},filterTemplateAtts:function(e){return e},getElementContent:function(){switch(this.model.get("type")){case"fusion_builder_column":case"fusion_builder_container":case"fusion_builder_column_inner":return this.$el;case"element":return"multi_element_child"!==this.model.get("multi")?this.$el.find(".fusion-builder-element-content"):this.$el.find(".fusion-builder-child-element-content")}},settings:function(e){var t,o,i,n,a,s=this,r={model:this.model,collection:this.collection},l="generated_element"===this.model.get("type"),u=localStorage.getItem("resizePopupClass");e&&e.preventDefault(),this.onSettingsOpen(),t=fusionAllElements[this.model.get("element_type")].custom_settings_view_name,"multi_element_child"===this.model.get("multi")&&(i=FusionPageBuilderViewManager.getView(this.model.get("parent")))&&"generated_element"===i.model.get("type")&&(l=!0,r.model.set("type","generated_element"),r.model.set("display","dialog")),o=void 0!==t&&""!==t?new FusionPageBuilder[t](r):new FusionPageBuilder.ElementSettingsView(r),"fusion_builder_column"!==this.model.get("element_type")&&"fusion_builder_column_inner"!==this.model.get("element_type")||(this.columnSpacing(),this.paddingDrag(),this.marginDrag(),this.$el.removeClass("active"),this.$el.closest(".fusion-builder-container").removeClass("fusion-column-sizer-active")),"fusion_builder_container"===this.model.get("element_type")&&(this.paddingDrag(),this.marginDrag()),"fusion_builder_container"!==this.model.get("element_type")&&"fusion_builder_column"!==this.model.get("element_type")&&"fusion_builder_column_inner"!==this.model.get("element_type")||this.$el.addClass("fusion-builder-element-edited"),n="undefined"!==this.model.get("multi")&&"multi_element_child"===this.model.get("multi")?" fusion-builder-child-element":"",a=this.getDialogTitle(),FusionPageBuilderApp.SettingsHelpers.shouldRenderSettings(o)&&("dialog"===FusionApp.preferencesData.editing_mode||l?jQuery(o.render().el).dialog({title:a,width:FusionApp.dialog.dialogData.width,height:FusionApp.dialog.dialogData.height,position:FusionApp.dialog.dialogData.position,dialogClass:"fusion-builder-dialog fusion-builder-settings-dialog"+n,minWidth:320,type:this.model.get("type"),dragStop:function(e,t){FusionApp.dialog.saveDialogPosition(t.offset)},resizeStart:function(){FusionApp.dialog.addResizingClasses()},resizeStop:function(e,t){var i=jQuery(e.target).closest(".ui-dialog");FusionApp.dialog.saveDialogSize(t.size),t.size.width<450&&!i.hasClass("fusion-builder-dialog-narrow")?i.addClass("fusion-builder-dialog-narrow"):450<=t.size.width&&i.hasClass("fusion-builder-dialog-narrow")&&i.removeClass("fusion-builder-dialog-narrow"),FusionApp.dialog.removeResizingClasses()},open:function(e){var t=jQuery(e.target),i=t.closest(".ui-dialog");FusionApp.dialog.addResizingHoverEvent(),o.$el.find(".has-group-options").length&&i.addClass("fusion-builder-group-options"),t.find(".fusion-builder-section-name").blur(),jQuery(".ui-dialog").not(i).hide(),jQuery(".fusion-back-menu-item").on("click",function(){o.openParent(),s.onSettingsClose()}),s.modalDialogMoreView=new FusionPageBuilder.modalDialogMore({model:s.model}),FusionPageBuilderApp.SettingsHelpers.renderDialogMoreOptions(o),null!==u&&(jQuery("body").addClass(u),s.modalDialogMoreView.resizePopup(u)),jQuery("#fb-preview")[0].contentWindow.jQuery("body").addClass("fusion-dialog-ui-active"),i.width()<450&&!i.hasClass("fusion-builder-dialog-narrow")?i.addClass("fusion-builder-dialog-narrow"):450<=i.width()&&i.hasClass("fusion-builder-dialog-narrow")&&i.removeClass("fusion-builder-dialog-narrow"),FusionApp.dialog.maybeRepositionDialog(i)&&FusionApp.dialog.saveDialogPosition(i.offset())},dragStart:function(e){jQuery(e.target).trigger("click")},beforeClose:function(e){FusionApp.dialogCloseResets(o),s.modalDialogMoreView=null,o.saveSettings(e),FusionEvents.trigger("fusion-content-changed")}}):(o.model.set("title",a),o.model.set("display","sidebar"),FusionApp.sidebarView.renderElementSettings(o)))},getDialogTitle:function(){var e,t=fusionAllElements[this.model.get("element_type")].name;return"multi_element_child"===this.model.get("multi")&&(t="Item",void 0!==(e=jQuery.extend(!0,{},this.model.get("params"))).title&&e.title.length?t=e.title:void 0!==e.title_front&&e.title_front.length?t=e.title_front:void 0!==e.name&&e.name.length?t=e.name:void 0!==e.image&&e.image.length?-1!==(t=e.image).indexOf("/")&&-1===t.indexOf("[")&&(t=(t=t.split("/")).slice(-1)[0]):"image"===this.model.attributes.element_name&&void 0!==e.element_content&&e.element_content.length?-1!==(t=e.element_content).indexOf("/")&&-1===t.indexOf("[")&&(t=(t=t.split("/")).slice(-1)[0]):void 0!==e.video&&e.video.length?t=e.video:void 0!==e.element_content&&e.element_content.length&&(t=e.element_content),t=jQuery("<div/>").html(t).text(),t=(t=jQuery("<div/>").html(t).text())&&15<t.length?t.substring(0,15)+"...":t,t=_.fusionUcFirst(t)),t},renderWireframePreview:function(){var e,t,i,o=this.model.get("element_type");FusionPageBuilderApp.wireframeActive&&("fusion_builder_container"===o&&(t=this.model.get("params"),i=fusionBuilderText.empty_section,""!==t.background_image&&(i=fusionBuilderText.empty_section_with_bg),this.$el.find(".fusion-builder-empty-section").html(i)),void 0!==fusionAllElements[o].preview&&(void 0!==this.previewView&&this.previewView?this.previewView.render():(e={model:this.model,collection:FusionPageBuilderElements},this.previewView=new FusionPageBuilder.ElementPreviewView(e),this.$el.find(".fusion-builder-module-preview").html(this.previewView.render().el))))},onSettingsOpen:function(){},onSettingsClose:function(){var e=jQuery(".ui-dialog:not( .fusion-video-dialog ):not( .fusion-builder-preferences-dialog )").first();0<e.length&&!jQuery("body").hasClass("fusion-settings-dialog-large")&&(jQuery(e).css("width",FusionApp.dialog.dialogData.width+"px"),jQuery(e).css("height",FusionApp.dialog.dialogData.height+"px"),jQuery(e).position({my:FusionApp.dialog.dialogData.position.my,at:FusionApp.dialog.dialogData.position.at,of:window}))},renderContent:function(){},addLoadingOverlay:function(){var e=this.$el.find(".fusion-builder-element-content");e.hasClass("fusion-loader")||(e.addClass("fusion-loader"),e.append('<span class="fusion-builder-loader"></span>'))},removeElement:function(e){var t=this.model.get("parent");e&&(e.preventDefault(),FusionEvents.trigger("fusion-content-changed")),FusionPageBuilderViewManager.removeView(this.model.get("cid")),this.model.destroy(),FusionEvents.trigger("fusion-element-removed",this.model.get("cid")),this.triggerColumn(t),this.remove()},openLibrary:function(e){var t={model:{target:jQuery(e.currentTarget).data("target"),focus:jQuery(e.currentTarget).data("focus"),element_cid:this.model.get("cid"),element_name:void 0!==this.model.get("admin_label")&&""!==this.model.get("admin_label")?this.model.get("admin_label"):""}};e&&(e.preventDefault(),e.stopPropagation(),FusionPageBuilderApp.sizesHide(e)),new FusionPageBuilder.LibraryView(t).render(),FusionPageBuilderApp.removeContextMenu()},disableLink:function(e){jQuery(e.target).closest(".fusion-builder-module-controls-container").length||(e.preventDefault(),FusionApp.modifierActive&&FusionApp.checkLink(e))},droppableElement:function(){var t=this,l=this.$el,i=this.model.get("cid"),e=jQuery("#fb-preview")[0].contentWindow.jQuery("body");l&&(void 0!==this.elementTarget&&this.elementTarget.length||(this.elementTarget=this.$el.find(".fusion-element-target")),l.draggable({appendTo:FusionPageBuilderApp.$el,zIndex:999999,delay:100,cursorAt:{top:15,left:15},iframeScroll:!0,containment:e,cancel:".fusion-live-editable, .fusion-builder-live-child-element:not( [data-fusion-no-dragging] )",helper:function(){var e=FusionPageBuilderApp.DraggableHelpers.draggableClasses(i);return jQuery('<div class="fusion-element-helper '+e+'" data-cid="'+i+'"><span class="'+fusionAllElements[t.model.get("element_type")].icon+'"></span></div>')},start:function(){e.addClass("fusion-element-dragging fusion-active-dragging"),l.addClass("fusion-being-dragged"),l.prev(".fusion-builder-live-element").find(".target-after").addClass("target-disabled")},stop:function(){setTimeout(function(){e.removeClass("fusion-element-dragging fusion-active-dragging")},10),l.removeClass("fusion-being-dragged"),FusionPageBuilderApp.$el.find(".target-disabled").removeClass("target-disabled")}}),this.elementTarget.droppable({tolerance:"touch",hoverClass:"ui-droppable-active",accept:".fusion-builder-live-element, .fusion_builder_row_inner",drop:function(e,t){var i,o,n=jQuery(e.target).closest(".fusion-builder-column").data("cid"),a=FusionPageBuilderViewManager.getView(n),s=t.draggable.data("cid"),r=FusionPageBuilderViewManager.getView(s);jQuery(e.target).hasClass("target-after")?l.after(t.draggable):l.before(t.draggable),o=t.draggable.parent().children(".fusion-builder-live-element, .fusion_builder_row_inner").index(t.draggable),FusionPageBuilderApp.onDropCollectionUpdate(r.model,o,n),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.moved+" "+fusionAllElements[r.model.get("element_type")].name+" "+fusionBuilderText.element),i={currentModel:r.model,handleType:"save",attributes:r.model.attributes},fusionGlobalManager.handleMultiGlobal(i),FusionEvents.trigger("fusion-content-changed"),a._equalHeights()}}),FusionPageBuilderApp.wireframeActive&&this.disableDroppableElement())},disableDroppableElement:function(){var e=this.$el;void 0!==e.draggable("instance")&&e.draggable("disable"),void 0!==this.elementTarget&&this.elementTarget.length&&void 0!==this.elementTarget.droppable("instance")&&this.elementTarget.droppable("disable")},enableDroppableElement:function(){var e=this.$el;void 0!==e.draggable("instance")&&void 0!==this.elementTarget&&this.elementTarget.length&&void 0!==this.elementTarget.droppable("instance")?(e.draggable("enable"),this.elementTarget.droppable("enable")):this.droppableElement()},wireFrameToggled:function(){FusionPageBuilderApp.wireframeActive?(this.renderWireframePreview(),this.disableDroppableElement()):this.enableDroppableElement()},getEditLabel:function(){var e=fusionBuilderText.element_settings,t=this.model.get("element_type");return void 0!==fusionAllElements[t]&&(e=(e=fusionBuilderText.custom_element_settings).replace("%s",fusionAllElements[t].name)),e},preventDefault:function(e){e.preventDefault()},updateDragSettings:function(e,t){var i,o,n=jQuery('[data-element-cid="'+this.model.get("cid")+'"] '+e);n.length&&((i=n.closest(".fusion_builder_module_settings")).find('.fusion-tabs-menu a[href="#design"]').parent().hasClass("current")||i.find('.fusion-tabs-menu a[href="#design"]').parent().trigger("click"),(o=i.find('.fusion-tabs-menu a[href="#design"]').closest(".fusion-sidebar-section, .ui-dialog-content")).scrollTop(n.position().top+o.scrollTop()),n.val(t).trigger("change"))},baseInit:function(){var e=this.model.get("element_type");this.initialValue={},this.logHistory={},"string"==typeof e&&-1===jQuery.inArray(e,FusionPageBuilderApp.inlineElements)&&(this.listenTo(FusionEvents,"fusion-global-update-"+e,this.updateDefault),this.listenTo(FusionEvents,"fusion-extra-update-"+e,this.updateExtra))},triggerAjaxCallbacks:function(e){var t=this,i={},o={skip:void 0!==e&&e};void 0!==fusionAllElements[this.model.get("element_type")].has_ajax&&(_.each(fusionAllElements[this.model.get("element_type")].has_ajax,function(e){(i={})[e.action]={},i[e.action].function=e.function,i[e.action].param_name=e.param_name,i[e.action].action=e.action}),_.each(i,function(e){FusionApp.callback[e.function](e.param_name,t.model.attributes.params[e.param_name],t.model.attributes,o,t.model.get("cid"),e.action,t.model,t)}))},updateExtra:function(){this.reRender()},updateDefault:function(e,t){var i=jQuery.extend(this.model.attributes,{}),o=!0,n=!1,a=this.model.get("params");void 0!==a[e]&&""!==a[e]&&"default"!==a[e]||(!1!==(n=FusionPageBuilderApp.getCallbackFunction(i,e,t,this,!0))&&"function"==typeof FusionApp.callback[n.function]&&(o=this.doCallbackFunction(n,!1,e,t,i,!0)),o&&this.reRender())},historyUpdateParam:function(e,t){var i,o=jQuery.extend(this.model.attributes,{}),n=!0;this.changeParam(e,t,!1,!0),!1!==(i=FusionPageBuilderApp.getCallbackFunction(o,e,t,this,!0))&&"function"==typeof FusionApp.callback[i.function]&&(n=this.doCallbackFunction(i,!1,e,t,o,!0)),n&&this.reRender()},updateParam:function(e,t,i){var o=jQuery.extend(this.model.attributes,{}),n=!0,a=FusionPageBuilderApp.getCallbackFunction(o,e,t,this);return!1!==a&&"function"==typeof FusionApp.callback[a.function]?n=this.doCallbackFunction(a,i,e,t,o):this.changeParam(e,t),n},setInitialValue:function(e){void 0!==this.initialValue&&void 0===this.initialValue[e]&&void 0!==e&&(this.initialValue[e]=this.model.get("params")[e])},logChangeEvent:function(e,t,i){this.logHistory._param=this.logHistory._param||{},e in this.logHistory._param||(this.logHistory._param[e]=_.debounce(_.bind(function(e,t,i){var o={type:"param",param:e,newValue:t,cid:this.model.get("cid")},n=fusionAllElements[this.model.get("element_type")],a=n.params[e],s="object"==typeof a?a.heading:e;void 0!==i?s=i:"object"!=typeof a&&jQuery(".multi-builder-dimension #"+e).length&&"object"==typeof(a=n.params[jQuery(".multi-builder-dimension #"+e).closest(".multi-builder-dimension").attr("id")])&&"string"==typeof a.heading&&(s=a.heading),o.oldValue=this.initialValue[e],delete this.initialValue[e],FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.edited+" "+n.name+" - "+s,o)},this),500)),this.logHistory._param[e](e,t,i)},changeParam:function(e,t,i,o){var n;o||this.model.get("inlineElement")?this.model.attributes.params[e]=t:(this.setInitialValue(e),this.model.attributes.params[e]=t,"multi_element_child"===this.model.get("multi")&&(n=FusionPageBuilderViewManager.getView(this.model.get("parent")))&&"function"==typeof n.updateElementContent&&n.updateElementContent(),this.logChangeEvent(e,t,i))},doCallbackFunction:function(e,t,i,o,n,a){var s,r=!0;return e.args=void 0===e.args?{}:e.args,e.ajax=void 0!==e.ajax&&e.ajax,e.action=void 0!==e.action&&e.action,a=void 0!==a&&a,e.args.skip=a,e.ajax?(r=!1,this.addLoadingOverlay(),this._triggerCallback(t,e,i,o,n.cid,n)):s=FusionApp.callback[e.function](i,o,e.args,this),void 0!==s&&void 0!==s.render&&(r=s.render),r},triggerCallback:function(e,t,i,o,n,a){void 0===a&&(a=jQuery.extend(this.model.attributes,{})),void 0!==a&&delete a.view,"fusion_do_shortcode"!==t.function?FusionApp.callback[t.function](i,o,a,t.args,n,t.action,this.model,this):FusionApp.callback[t.function](n,t.content,t.parent)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.BaseRowView=window.wp.Backbone.View.extend({createVirtualRows:function(){this.updateVirtualRows(),this.assignColumn()},updateVirtualRows:function(){var t,i={},o={},n=[],a=0,s=0,e=this.model.get("rows");this.model.children.each(function(e){o={},t=(t=(t=(t=e.attributes.params.type)||"1_1").split("_"))[0]/t[1],1<(a+=t)&&(s+=1,a=t),o={cid:e.attributes.cid},void 0===i[s]?i[s]=[o]:i[s].push(o),n[e.attributes.cid]=s}),this.model.set("columns",n),this.model.set("rows",i),"object"==typeof e&&this.model.set("oldRows",e)},assignColumn:function(){var t,u=this,d=this.model.get("oldRows"),i=!1;this.model.children.each(function(e){(t=jQuery.extend(!0,{},e.get("params"))).first=!1,t.last=!1,e.set("params",t)}),_.each(this.model.get("rows"),function(e,s){var r=e.length-1,l=!0;_.each(e,function(t,e){var i=!1,o=!1,n=u.model.children.find(function(e){return e.get("cid")==t.cid}),a=jQuery.extend(!0,{},n.get("params"));0===e&&(i=!0),r===e&&(o=!0),a.first=i,a.last=o,n.set("params",a),l&&("object"==typeof d&&void 0!==d[s]&&void 0!==d[s][e]&&d[s][e].cid===t.cid||(l=!1))}),!l&&FusionPageBuilderApp.loaded&&(!1===i&&(i=[]),_.each(e,function(e){i.push(e.cid)}))}),this.model.set("updatedCols",i)},getVirtualRowByCID:function(e){return this.model.get("rows")[this.model.get("columns")[e]]},updateColumnsPreview:function(){var n=this.model.get("updatedCols"),a=this;!0===FusionPageBuilderApp.loaded&&this.model.children.each(function(e){var t,i,o;!1!==n&&!_.contains(n,e.attributes.cid)||(t=FusionPageBuilderViewManager.getView(e.attributes.cid),i=a.getVirtualRowByCID(t.model.get("cid")),o=[],t.$el.removeClass("fusion-column-last"),t.$el.removeClass("fusion-column-first"),!0===t.model.attributes.params.last&&t.$el.addClass("fusion-column-last"),!0===t.model.attributes.params.first&&t.$el.addClass("fusion-column-first"),_.each(i,function(t){var e;t=t.cid,e=a.collection.find(function(e){return e.get("cid")==t}).attributes.params.spacing,o.push(e)}),t.columnSpacingPreview(o))})},setRowData:function(){this.createVirtualRows(),this.updateColumnsPreview()},setSingleRowData:function(e){var t=this.getVirtualRowByCID(e);_.each(t,function(e){FusionPageBuilderViewManager.getView(e.cid).reRender()})}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.BaseColumnView=FusionPageBuilder.BaseView.extend({beforePatch:function(){FusionPageBuilderApp.wireframeActive&&this.$el.find(".fusion-builder-column-content").removeClass("ui-sortable")},afterPatch:function(){void 0!==this.model.attributes.selectors&&(this.model.get("dragging")&&(this.model.attributes.selectors.style+=";display: none;",this.model.attributes.selectors.class+=" ignore-me-column"),this.$el.removeAttr("data-animationType"),this.$el.removeAttr("data-animationDuration"),this.$el.removeAttr("data-animationOffset"),this.setElementAttributes(this.$el,this.model.attributes.selectors)),this.forceAppendChildren&&(this.appendChildren(),this.forceAppendChildren=!1),this.droppableColumn(),this._refreshJs(),FusionPageBuilderApp.wireframeActive&&this.$el.find(".fusion-builder-column-content").addClass("ui-sortable")},marginDrag:function(){var o,t,n,e,a=this.$el,s=this,r=!1,l="fusion_builder_column_inner"===this.model.get("type")?a.closest(".fusion-builder-row-container-inner").width():a.closest(".fusion-row").width(),u="column";this.$el.hasClass("resizable-active")||("fusion_builder_column"===this.model.get("type")?(n=fusionAllElements.fusion_builder_column.defaults,e=jQuery.extend(!0,{},fusionAllElements.fusion_builder_column.extras),n.margin_top=e.col_margin.top,n.margin_bottom=e.col_margin.bottom):n=fusionAllElements.fusion_builder_column_inner.defaults,_.each({top:"s",bottom:"s"},function(e,i){t=void 0!==s.model.attributes.params["margin_"+i]&&""!==s.model.attributes.params["margin_"+i]?s.model.attributes.params["margin_"+i]:n["margin_"+i],(r=-1!==t.indexOf("%"))&&(t=l/100*parseFloat(t)),"bottom"===i&&(parseInt(t,10)<20?a.find("> .fusion-column-margin-bottom, > .fusion-column-padding-bottom").addClass("fusion-overlap"):a.find("> .fusion-column-margin-bottom, > .fusion-column-padding-bottom").removeClass("fusion-overlap")),a.find("> .fusion-column-margin-"+i).css("display","block"),a.find("> .fusion-column-margin-"+i).height(t),a.find("> .fusion-column-margin-"+i).resizable({handles:e,minHeight:0,minWidth:0,grid:r?[l/100,10]:"",resize:function(e,t){r=void 0!==s.model.attributes.params["margin_"+i]&&-1!==s.model.attributes.params["margin_"+i].indexOf("%"),jQuery(t.element).closest(".fusion-builder-"+u).addClass("resizable-active"),o=(o="top"===i||"bottom"===i?t.size.height:t.size.width)<0?0:o,o+="px",r&&(o=0===parseFloat(o)?"0%":Math.round(parseFloat(parseFloat(o)/(l/100)))+"%"),"bottom"===i&&(t.size.height<20?(jQuery(t.element).addClass("fusion-overlap"),a.find("> .fusion-column-padding-bottom").addClass("fusion-overlap")):(jQuery(t.element).removeClass("fusion-overlap"),a.find("> .fusion-column-padding-bottom").removeClass("fusion-overlap"))),a.css("margin-"+i,o),jQuery(t.element).find(".fusion-spacing-tooltip, .fusion-column-spacing").addClass("active"),jQuery(t.element).find(".fusion-spacing-tooltip").text(o),s.updateDragSettings("#margin_"+i,o)},stop:function(e,t){jQuery(t.element).closest(".fusion-builder-"+u).removeClass("resizable-active"),jQuery(t.element).find(".fusion-spacing-tooltip, .fusion-column-spacing").removeClass("active"),jQuery(t.element).find(".fusion-builder-column-inner").find(".fusion-element-spacing .ui-resizable").length&&jQuery(t.element).closest(".fusion-builder-column-inner").find(".fusion-element-spacing .ui-resizable").resizable("destroy")}})}))},paddingDrag:function(){var a,t,s=this.$el,r=this,l=!1,u=s.find(".fusion-column-wrapper").first().width(),d=u/100,c="column";this.$el.hasClass("resizable-active")||_.each({top:"s",right:"w",bottom:"s",left:"e"},function(e,n){t=void 0!==r.model.attributes.params["padding_"+n]&&""!==r.model.attributes.params["padding_"+n]?r.model.attributes.params["padding_"+n]:"0px",(l=void 0!==t&&-1!==t.indexOf("%"))&&(t=u/100*parseFloat(t)),"top"===n&&(parseInt(t,10)<20?s.find("> .fusion-column-margin-top, > .fusion-column-padding-top").addClass("fusion-overlap"):s.find("> .fusion-column-margin-top, > .fusion-column-padding-top").removeClass("fusion-overlap")),s.find("> .fusion-column-padding-"+n).css("display","block"),"top"===n||"bottom"===n?s.find("> .fusion-column-padding-"+n).height(t):s.find("> .fusion-column-padding-"+n).width(t),s.find("> .fusion-column-padding-"+n).resizable({handles:e,minHeight:0,minWidth:0,resize:function(e,t){var i,o="top"===n||"bottom"===n?"height":"width";i=r.model.attributes.params["padding_"+n],(l=void 0!==i&&-1!==i.indexOf("%"))&&(t.size[o]=Math.round(t.size[o]/d)*d),jQuery(t.element).closest(".fusion-builder-"+c).addClass("resizable-active"),a=(a=t.size[o])<0?0:a,a+="px",l&&(a=0===parseFloat(a)?"0%":Math.round(parseFloat(parseFloat(a)/(u/100)))+"%"),"top"===n&&(t.size.height<20?(jQuery(t.element).addClass("fusion-overlap"),s.find("> .fusion-column-margin-top").addClass("fusion-overlap")):(jQuery(t.element).removeClass("fusion-overlap"),s.find("> .fusion-column-margin-top").removeClass("fusion-overlap"))),"right"===n&&(t.size.width<20&&s.find("> .fusion-column-spacing .fusion-spacing-value").width()<20?(jQuery(t.element).addClass("fusion-overlap"),s.find("> .fusion-column-spacing").addClass("fusion-overlap")):(jQuery(t.element).removeClass("fusion-overlap"),s.find("> .fusion-column-spacing").removeClass("fusion-overlap"))),jQuery(t.element).find(".fusion-spacing-tooltip, .fusion-column-spacing").addClass("active"),jQuery(t.element).find(".fusion-spacing-tooltip").text(a),r.updateDragSettings("#padding_"+n,a)},stop:function(e,t){jQuery(t.element).closest(".fusion-builder-"+c).removeClass("resizable-active"),jQuery(t.element).find(".fusion-spacing-tooltip, .fusion-column-spacing").removeClass("active"),jQuery(t.element).find(".fusion-builder-column-inner").find(".fusion-element-spacing .ui-resizable").length&&jQuery(t.element).closest(".fusion-builder-column-inner").find(".fusion-element-spacing .ui-resizable").resizable("destroy")}})})},destroyResizable:function(){this.destroySpacingResizable(),this.destroyMarginResizable(),this.destroyPaddingResizable()},destroySpacingResizable:function(){var e;(e=this.$el.find("> .fusion-column-spacing .fusion-spacing-value")).hasClass("ui-resizable")&&(e.resizable("destroy"),e.hide(),this.columnSpacer=!1)},destroyMarginResizable:function(){this.$el.find("> .fusion-element-spacing").each(function(e,t){jQuery(t).hasClass("ui-resizable")&&-1!==jQuery(t).attr("class").indexOf("fusion-column-margin-")&&(jQuery(t).resizable("destroy"),jQuery(t).hide())})},destroyPaddingResizable:function(){this.$el.find("> .fusion-element-spacing").each(function(e,t){jQuery(t).hasClass("ui-resizable")&&-1!==jQuery(t).attr("class").indexOf("fusion-column-padding-")&&(jQuery(t).resizable("destroy"),jQuery(t).hide())})},columnSpacing:function(e){var i,t,o,n,a,s,r,l,u,d=!1,c=this.$el,g=this;r=this.$el.find("> .fusion-column-spacing .fusion-spacing-value"),e&&"event"!==e&&e.preventDefault(),jQuery("#fb-preview").width()<FusionApp.settings.content_break_point&&FusionApp.settings.responsive?r.hide():(r.show(),this.$el.hasClass("fusion-column-last")||"yes"!==this.model.attributes.params.spacing&&"no"!==this.model.attributes.params.spacing&&(void 0!==(a=this.model.attributes.params.spacing)&&""!==a||(a="4%"),"no"===a&&(a="0"),this.columnSpacer&&-1===a.indexOf("%")||(o=FusionPageBuilderViewManager.getView(this.model.get("parent")),i="fusion_builder_column_inner"===this.model.get("type")?o.$el.find(".fusion-builder-row-container-inner").width():o.$el.find(".fusion-row").width(),this.columnSpacer&&i===this.parentWidth||(this.parentWidth=i,-1!==(t=n=a).indexOf("%")&&(d=!0,n=(t=parseFloat(t)/100)*i),l=i-100,r.hasClass("ui-resizable")&&r.resizable("destroy"),r.width(n),r.resizable({handles:"e",minWidth:0,maxWidth:l,grid:d?[i/100,10]:"",create:function(){0===c.find("> .fusion-column-spacing .fusion-spacing-value").width()?c.find("> .fusion-column-spacing").addClass("empty"):c.find("> .fusion-column-spacing.empty").length&&c.find("> .fusion-column-spacing").removeClass("empty")},resize:function(e,t){t.size.width=t.size.width<0?0:t.size.width,0===s?c.find("> .fusion-column-spacing").addClass("empty"):c.find("> .fusion-column-spacing.empty").length&&c.find("> .fusion-column-spacing").removeClass("empty"),s=t.size.width+"px",d&&(s=Math.round(parseFloat(t.size.width/(i/100)))+"%"),c.css("margin-right",s),jQuery('[data-element-cid="'+g.model.get("cid")+'"]').length&&jQuery('[data-element-cid="'+g.model.get("cid")+'"] [data-option-id="spacing"] #spacing').val(s).trigger("change"),c.find("> .fusion-column-spacing .fusion-spacing-tooltip, > .fusion-column-spacing").addClass("active"),c.find("> .fusion-column-spacing .fusion-spacing-tooltip").text(s),c.addClass("active-drag"),g._toolTipHide(),t.size.width<20&&c.find("> .fusion-column-padding-right").width()<20?(jQuery(t.element).parent().addClass("fusion-overlap"),c.find("> .fusion-column-padding-right").addClass("fusion-overlap")):(jQuery(t.element).parent().removeClass("fusion-overlap"),c.find("> .fusion-column-padding-right").removeClass("fusion-overlap"))},stop:function(e,t){c.removeClass("active-drag")}}),u=void 0===this.model.attributes.params.padding_right||""===this.model.attributes.params.padding_right?"0px":this.model.attributes.params.padding_right,parseInt(u,10)<20&&("0%"===u||-1===u.indexOf("%"))&&parseInt(n,10)<20?c.find("> .fusion-column-padding-right, > .fusion-column-spacing").addClass("fusion-overlap"):c.find("> .fusion-column-padding-right, > .fusion-column-spacing").removeClass("fusion-overlap"),this.columnSpacer=!0))))},sizeSelect:function(e){var t,i,o=FusionPageBuilderViewManager.getView(this.model.get("parent"));e&&e.preventDefault(),t=jQuery(e.target).data("column-size"),this.model.attributes.params.type=t,this.$el.find(".column-sizes").hide(),this.$el.removeClass("active"),this.$el.attr("data-column-size",t),i=t.replace("_","/"),this.reRender(),o.setRowData(),"fusion_builder_column_inner"!==this.model.get("type")&&this.renderSectionSeps(),this.$el.find(".column-sizes .column-size").removeClass("active-size"),this.$el.find(".column-size-"+t).addClass("active-size"),this.$el.closest(".fusion-builder-container").removeClass("fusion-column-sizer-active"),jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-column-resized",this.model.get("cid")),FusionEvents.trigger("fusion-column-resized"),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.resized_column+" "+i)},pxCheck:function(e){return void 0!==e&&("0"===e||0===e||-1!==e.indexOf("px"))},percentageCheck:function(e){return void 0!==e&&("0"===e||0===e||-1!==e.indexOf("%"))},addValues:function(e,t){return parseFloat(e)+parseFloat(t)},addModule:function(e){var i,t,o;e&&(e.preventDefault(),e.stopPropagation(),FusionPageBuilderApp.sizesHide(e)),FusionPageBuilderApp.parentColumnId=this.model.get("cid"),t={model:this.model,collection:this.collection,view:this,attributes:{"data-parent_cid":this.model.get("cid")}},jQuery(e.currentTarget).closest(".fusion-builder-empty-column").length||FusionPageBuilderApp.wireframeActive||((o=jQuery(e.currentTarget).closest(".fusion-builder-live-element")).length?t.targetElement=o:t.targetElement=jQuery(e.currentTarget).closest(".fusion-builder-nested-element")),i=new FusionPageBuilder.ElementLibraryView(t),jQuery(i.render().el).dialog({title:"Select Element",draggable:!1,modal:!0,resizable:!1,dialogClass:"fusion-builder-dialog fusion-builder-large-library-dialog fusion-builder-element-library-dialog",resizeStart:function(e,t){FusionApp.dialog.addResizingClasses()},resizeStop:function(e,t){FusionApp.dialog.removeResizingClasses()},open:function(e,t){FusionApp.dialog.resizeDialog(),FusionApp.dialog.addResizingHoverEvent()},close:function(e,t){i.remove()}})},getTemplate:function(){var e=this.getTemplateAtts();return this.template(e)},getTemplateAtts:function(){var e,t,i,o,n,a,s,r,l,u,d,c,g,p,f,m,h=jQuery.extend(!0,{},this.model.get("params")),b={},v="",y="",w="fusion-builder-column-"+this.model.get("cid"),x="fusion-column-wrapper",F="",P="",A="",C="",B={},k="",j="",E="",V="",Q="",S=!1,T={.1666:"13.3333%",.8333:"82.6666%",.2:"16.8%",.4:"37.6%",.6:"58.4%",.8:"79.2%",.25:"22%",.75:"74%",.3333:"30.6666%",.6666:"65.3333%",.5:"48%",1:"100%"};switch(B.class="",void 0===h.type&&(h.type=this.model.attributes.params.type),fusionAllElements[this.model.get("type")]&&(e=jQuery.extend(!0,{},fusionAllElements[this.model.get("type")].defaults,_.fusionCleanParameters(h))),"fusion_builder_column_inner"===this.model.get("type")&&(Q=" fusion-nested-column-content"),(i=_.fusionAnimations(e))&&((B=jQuery.extend(B,i)).class+=" "+B.animation_class,delete B.animation_class),(e=e||{}).type=e.type||"1_1",e.type){case"1_1":v=1,w+=" fusion-one-full";break;case"1_4":v=.25,w+=" fusion-one-fourth";break;case"3_4":v=.75,w+=" fusion-three-fourth";break;case"1_2":v=.5,w+=" fusion-one-half";break;case"1_3":v=.3333,w+=" fusion-one-third";break;case"2_3":v=.6666,w+=" fusion-two-third";break;case"1_5":v=.2,w+=" fusion-one-fifth";break;case"2_5":v=.4,w+=" fusion-two-fifth";break;case"3_5":v=.6,w+=" fusion-three-fifth";break;case"4_5":v=.8,w+=" fusion-four-fifth";break;case"5_6":v=.8333,w+=" fusion-five-sixth";break;case"1_6":v=.1666,w+=" fusion-one-sixth"}return""!==e.margin_bottom&&(e.margin_bottom=_.fusionGetValueWithUnit(e.margin_bottom)),""!==e.margin_top&&(e.margin_top=_.fusionGetValueWithUnit(e.margin_top)),e.border_size&&(e.border_size=_.fusionValidateAttrValue(e.border_size,"px")),""!==e.padding&&(e.padding=_.fusionGetValueWithUnit(e.padding)),e.border_radius_top_left=e.border_radius_top_left?_.fusionGetValueWithUnit(e.border_radius_top_left):"0px",e.border_radius_top_right=e.border_radius_top_right?_.fusionGetValueWithUnit(e.border_radius_top_right):"0px",e.border_radius_bottom_left=e.border_radius_bottom_left?_.fusionGetValueWithUnit(e.border_radius_bottom_left):"0px",e.border_radius_bottom_right=e.border_radius_bottom_right?_.fusionGetValueWithUnit(e.border_radius_bottom_right):"0px",m="0px 0px 0px 0px"==(m=e.border_radius_top_left+" "+e.border_radius_top_right+" "+e.border_radius_bottom_right+" "+e.border_radius_bottom_left)?"":m,void 0===h.padding&&(e=_.fusionGetPadding(e)),o=100*v+"%","yes"===e.spacing||""===e.spacing?e.spacing="4%":"no"===e.spacing&&(e.spacing="0px"),e.spacing=_.fusionGetValueWithUnit(e.spacing),0===parseFloat(e.spacing)&&(w+=" fusion-spacing-no"),(a=FusionPageBuilderViewManager.getView(this.model.get("parent"))).model.get("rows"),void 0!==(C=a.getVirtualRowByCID(this.model.get("cid")))&&(s=C.length+1),"object"==typeof C&&(S=C.every(function(e){return"yes"===e||"no"===e})),"object"==typeof C&&(V=[],g=C.length,p=g-1,_.each(C,function(t,e){p!==e&&(f=a.model.children.find(function(e){return e.get("cid")==t.cid}),d=void 0===(d=f.attributes.params.spacing)||""===d?"4%":d,V.push(d)),1===g&&V.push("")}),V=V.join(" + "),S||(V=V.replace(/yes/g,"4%").replace(/no/g,"0%")),k="( ( "+V+" ) * "+v+" ) "),e.last||S&&"0px"===e.spacing?void 0!==s&&1<s?S?"0px"!==e.spacing&&void 0!==T[v]?y+="width:"+T[v]+";":y+="width:"+o+";":y+="width:"+o+";width:calc("+o+" - "+k+");":void 0===s&&"undefined"!==T[v]&&(y+="width:"+T[v]+";"):(u="right",FusionPageBuilderApp.$el.hasClass("rtl")&&(u="left"),y+=S?"width:"+T[v]+"; margin-"+u+": "+e.spacing+";":"width:"+o+";width:calc("+o+" - "+k+");margin-"+u+": "+e.spacing+";"),(l="")!==e.background_color&&(c=jQuery.Color(e.background_color).alpha(),(""===e.background_image||c<1&&0!==c)&&(w+=" fusion-blend-mode",l="background-color:"+e.background_color+";","none"===e.hover_type||""===e.hover_type&&""===e.link?F+=l:P+=l)),(r="")!==e.background_image&&(r+="background-image: url('"+e.background_image+"');"),""!==e.background_position&&(r+="background-position:"+e.background_position+";"),""!==e.background_repeat&&(r+="background-repeat:"+e.background_repeat+";","no-repeat"===e.background_repeat&&(r+="-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;")),(!cssua.ua.ie&&!cssua.ua.edge||"none"!==e.hover_type||""!==e.hover_type&&"none"!==e.hover_type||""!==e.link)&&(P+=r),""!==e.border_color&&""!==e.border_size&&""!==e.border_style&&(e.border_position="all"!==e.border_position?"-"+e.border_position:"",F+="border"+e.border_position+":"+e.border_size+" "+e.border_style+" "+e.border_color+";","liftup"===e.hover_type&&(P+="border"+e.border_position+":"+e.border_size+" "+e.border_style+" "+e.border_color+";",w+=" fusion-column-liftup-border")),m&&(F+="overflow:hidden;border-radius:"+m+";",P+="border-radius:"+m+";",x+=" fusion-column-has-overflow-hidden","liftup"===e.hover_type?E='<style type="text/css">.fusion-builder-column-'+this.model.get("cid")+" .hover-type-liftup:before{border-radius:"+m+";}</style>":"zoomin"!==e.hover_type&&"zoomout"!==e.hover_type&&""===e.link||(j+='style="overflow:hidden;border-radius:'+m+';"')),"yes"===e.box_shadow&&(e.box_shadow_horizontal=_.fusionGetValueWithUnit(e.box_shadow_horizontal),e.box_shadow_vertical=_.fusionGetValueWithUnit(e.box_shadow_vertical),e.box_shadow_blur=_.fusionGetValueWithUnit(e.box_shadow_blur),e.box_shadow_spread=_.fusionGetValueWithUnit(e.box_shadow_spread),e.box_shadow=e.box_shadow_horizontal+" "+e.box_shadow_vertical+" "+e.box_shadow_blur+" "+e.box_shadow_spread+" "+e.box_shadow_color+" "+e.box_shadow_style,"liftup"===e.hover_type?P+="box-shadow:"+e.box_shadow.trim()+";":(F+="box-shadow:"+e.box_shadow.trim()+";",x+=" fusion-column-has-shadow")),""!==e.padding&&(F+="padding: "+e.padding+";"),""!==e.margin_top&&(y+="margin-top:"+e.margin_top+";"),""!==e.margin_bottom&&(y+="margin-bottom:"+e.margin_bottom+";"),void 0!==e.class&&""!==e.class&&(w+=" "+e.class),w=_.fusionVisibilityAtts(e.hide_on_mobile,w),(e.link&&""!==e.link||"none"!==e.hover_type&&""!==e.hover_type)&&(w+=" fusion-column-inner-bg-wrapper"),e.first&&(w+=" fusion-column-first"),e.last&&(w+=" fusion-column-last"),""!==e.link&&(A+='href="'+e.link+'"'),"_blank"===e.target?A+=' rel="noopener noreferrer" target="_blank"':"lightbox"===e.target&&(A+=' data-rel="prettyPhoto"'),"none"===e.min_height&&(w+=" fusion-column-no-min-height"),F=""!==F?F:"",n='<span class="fusion-builder-module-controls-container"><span class="fusion-builder-controls fusion-builder-module-controls"><a href="#" class="fusion-builder-add-element"><span class="fusiona-plus"></span><span class="fusion-column-tooltip"><span class="fusion-tooltip-text">'+fusionBuilderText.add_element+'</span></span></a></span></span><div class="fusion-droppable fusion-droppable-horizontal fusion-element-target target-replace fusion-element-target-column"></div>',n='<div class="fusion-builder-column-content'+Q+'" data-cid="'+this.model.get("cid")+'"><span class="fusion-builder-empty-column">'+n+"</span></div>","yes"===e.center_content&&(n='<div class="fusion-column-content-centered"><div class="fusion-column-content">'+n+"</div></div>"),n+='<div class="fusion-clearfix"></div>',""!==e.id&&(B.id=e.id),""!==e.type&&(B.class+=" "+e.type),""!==y&&(B.style=y),B.class+=" fusion-layout-column fusion_builder_column fusion_builder_column_"+e.type+" "+w,y='<style type="text/css">',y+=".fusion-column-wrapper-"+this.model.get("cid")+" {"+F+"}",y+="</style>",t=(t=this.model.attributes.params.type)?t.replace("_","/"):"",this.model.set("selectors",B),e.margin_bottom=void 0===e.margin_bottom||""===e.margin_bottom?"0px":e.margin_bottom,e.padding_top=void 0===e.padding_top||""===e.padding_top?"0px":e.padding_top,b.cid=this.model.get("cid"),b.layout=t,b.wrapper_classes=x,b.inner_content=n,b.wrapper_style_bg=P,b.hover_type=e.hover_type,b.link=e.link,b.background_image=e.background_image,b.background_color_style=l,b.href_link=A,b.isGlobal=void 0!==e.fusion_global?"yes":"no",b.style=y,b.background_image_style=r,b.innerBgStyle=j,b.liftUpStyleTag=E,b},sizesShow:function(e){var t=this.$el.closest(".fusion-builder-container"),i=this.$el.find(".column-sizes");e&&(e.preventDefault(),e.stopPropagation()),i.removeClass("fusion-expand-to-bottom"),this.$el.hasClass("active")?(this.$el.removeClass("active"),t.removeClass("fusion-column-sizer-active")):(this.$el.addClass("active"),t.addClass("fusion-column-sizer-active"),this.$el.offset().top-121<54&&i.addClass("fusion-expand-to-bottom"))},offsetClass:function(){this.$el.offset().top<100?this.$el.addClass("fusion-content-bottom"):100<this.$el.offset().top&&this.$el.hasClass("fusion-content-bottom")&&this.$el.removeClass("fusion-content-bottom")},fallbackColumnSpacing:function(e,t){var i="100%",o=i,n="0%";switch(this.model.attributes.params.type,"yes"===this.model.attributes.params.spacing&&(n="4%"),this.model.attributes.params.type){case"1_1":o=i="100%";break;case"1_4":i="22%",o="25%";break;case"3_4":i="74%",o="75%";break;case"1_2":i="48%",o="50%";break;case"1_3":i="30.6666%",o="33.3333%";break;case"2_3":i="65.3333%",o="66.6666%";break;case"1_5":i="16.8%",o="20%";break;case"2_5":i="37.6%",o="40%";break;case"3_5":i="58.4%",o="60%";break;case"4_5":i="79.2%",o="80%";break;case"5_6":i="82.6666%",o="83.3333%";break;case"1_6":i="13.3333%",o="16.6666%"}"4%"===n||this.model.attributes.params.last&&!t||(i=o),this.$el.css("width",i),e.css("width",i),e.css("margin-right",n),this.$el.css("margin-right",n)},dimensionColumnSpacing:function(e,t,i){var o,n,a,s=[];e.pop(),o=t=t[0]/t[1],"object"==typeof e&&(e.every(this.pxCheck)?(n=e.reduce(this.addValues,0)*o+"px",this.$el.css("width","calc( "+100*t+"% - "+n+" )"),i.css("width","calc( "+100*t+"% - "+n+" )")):e.every(this.percentageCheck)?(t=100*t-e.reduce(this.addValues,0)*o,this.$el.css("width",t+"%"),i.css("width",t+"%")):(_.each(e,function(e){e=void 0===e||""===e?"4%":e,s.push(e)}),n=s.join(" + "),this.$el.css("width","calc( "+100*t+"% - ( ( "+n+" ) * "+o+" )"),i.css("width","calc( "+100*t+"% - ( ( "+n+" ) * "+o+" )"))),a=this.model.attributes.params.spacing,void 0!==this.model.attributes.params.spacing&&"yes"!==this.model.attributes.params.spacing&&""!==this.model.attributes.params.spacing||(a="4%"),"no"===this.model.attributes.params.spacing&&(a="0"),i.css("margin-right",a),this.$el.css("margin-right",a)},validColumnSpacing:function(e){return!("yes"!==e&&"no"!==e&&!/\d/.test(e)&&""!==e)},patcherFilter:function(e){var t=[],i=this;return _.each(e,function(e){"removeElement"===e.action?(void 0===e.element.attributes.class||-1===e.element.attributes.class.indexOf("fusion-column-content-centered")&&-1===e.element.attributes.class.indexOf("fusion-column-content-centered")||(i.forceAppendChildren=!0),(void 0===e.element.attributes.class||-1===e.element.attributes.class.indexOf("fusion-spacing-value")&&-1===e.element.attributes.class.indexOf("fusion-element-spacing")&&-1===e.element.attributes.class.indexOf("fusion-builder-live-element")&&-1===e.element.attributes.class.indexOf("fusion-builder-live-element")&&-1===e.element.attributes.class.indexOf("fusion_builder_row_inner")&&-1===e.element.attributes.class.indexOf("fusion_builder_row_inner"))&&t.push(e)):"addElement"===e.action?(void 0===e.element.attributes.class||-1===e.element.attributes.class.indexOf("fusion-column-content-centered")&&-1===e.element.attributes.class.indexOf("fusion-column-content-centered")||(i.forceAppendChildren=!0),(void 0===e.element.attributes.class||-1===e.element.attributes.class.indexOf("fusion-spacing-value")&&-1===e.element.attributes.class.indexOf("fusion-element-spacing"))&&t.push(e)):t.push(e)}),t},equalHeights:function(e){e=void 0===e?this.model.attributes.cid:e,setTimeout(function(){jQuery(document).trigger("fusion-content-changed",e),jQuery(window).trigger("fusion-content-changed",e),jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-content-changed",e)},300)},toolTipHide:function(){this.$el.find(".fusion-spacing-tooltip, .fusion-column-spacing").removeClass("active")},resizeSpacer:function(){this.columnSpacer&&this.columnSpacing()},columnSpacingPreview:function(i){var o,e=void 0!==this.model.attributes.params.type?this.model.attributes.params.type.split("_"):["1","1"],n=!0,t=jQuery('.fusion-builder-column-placeholder[data-cid="'+this.model.get("cid")+'"]'),a=!0;_.each(i,function(e,t){e="no"===(e="yes"===(o=e)?"4%":e)?"0":e,n=n&&o!==e,a=a&&0===parseInt(e,10),i[t]=e}),n?this.fallbackColumnSpacing(t,a):this.dimensionColumnSpacing(i,e,t)},getContent:function(){return this.getColumnContent()}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ColumnView=FusionPageBuilder.BaseColumnView.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-column-template").html()),events:{"click .fusion-builder-column-settings:not(.fusion-builder-column-inner .fusion-builder-column-setting)":"settings","click .fusion-builder-column-size:not(.fusion-builder-column-inner .fusion-builder-column-size)":"sizesShow","hover .fusion-builder-column-content":"offsetClass","click .column-size:not(.fusion-builder-column-inner .column-size)":"sizeSelect","click .fusion-builder-add-element:not(.fusion-builder-column-inner .fusion-builder-add-element)":"addModule","click .fusion-builder-column-remove:not(.fusion-builder-column-inner .fusion-builder-column-remove)":"removeColumn","click .fusion-builder-column-clone:not(.fusion-builder-column-inner .fusion-builder-column-clone)":"cloneColumn","click .fusion-builder-column-save:not(.fusion-builder-column-inner .fusion-builder-column-save)":"openLibrary","click .fusion-builder-column-drag:not(.fusion-builder-column-inner .fusion-builder-column-drag)":"preventDefault"},initialize:function(){var e=""!==this.model.get("params").spacing?e:"4%";this.renderedYet=!1,this.columnSpacer=!1,this.forceAppendChildren=!1,this.listenTo(FusionEvents,"fusion-view-update-fusion_builder_column",this.reRender),this.listenTo(FusionEvents,"fusion-param-changed-"+this.model.get("cid"),this.onOptionChange),this._triggerCallback=_.debounce(_.bind(this.triggerCallback,this),200),this._toolTipHide=_.debounce(_.bind(this.toolTipHide,this),500),this.$el.attr("data-cid",this.model.get("cid")),this.$el.attr("id","fusion-column-"+this.model.get("cid")),this.$el.attr("data-column-size",this.model.attributes.params.type),this.$el.attr("data-column-spacing",e),void 0!==this.model.attributes.params&&void 0!==this.model.attributes.params.fusion_global&&(this.$el.attr("fusion-global-layout",this.model.attributes.params.fusion_global),this.$el.removeClass("fusion-global-column").addClass("fusion-global-column")),this.model.children=new FusionPageBuilder.Collection,this.listenTo(this.model.children,"add",this.addChildView),this.currentClasses="",this._refreshJs=_.debounce(_.bind(this.refreshJs,this),300),this._equalHeights=_.debounce(_.bind(this.equalHeights,this),300),this.listenTo(FusionEvents,"fusion-wireframe-toggle",this.wireFrameToggled),this.baseInit()},render:function(){var e,t=this,i=this.getTemplateAtts();return this.$el.html(this.template(i)),void 0!==this.model.attributes.selectors&&this.setElementAttributes(this.$el,this.model.attributes.selectors),e=this.model.attributes.params.type,this.$el.find(".column-size-"+e).addClass("active-size"),this.appendChildren(),setTimeout(function(){t.droppableColumn(),t.sortableElements(),t.disableSortableElements()},100),this.renderedYet&&this._refreshJs(),this.renderedYet=!0,this},droppableColumn:function(){var i,e,t,a=this,u=this.$el;u&&(i=this.model.get("cid"),e=u.find(".fusion-column-target"),t=jQuery("#fb-preview")[0].contentWindow.jQuery("body"),u.draggable({appendTo:FusionPageBuilderApp.$el,zIndex:999999,delay:100,cursorAt:{top:15,left:15},iframeScroll:!0,containment:t,cancel:".fusion-builder-live-element, .fusion_builder_row_inner",helper:function(){var e=FusionPageBuilderApp.DraggableHelpers.draggableClasses(i),t="";return u.css("margin-top")&&(t='style="transform: translateY('+u.css("margin-top")+');"'),jQuery('<div><div class="fusion-column-helper '+e+'" data-cid="'+i+'"'+t+'><span class="fusiona-column"></span></div></div>')},start:function(){t.addClass("fusion-column-dragging fusion-active-dragging"),u.addClass("fusion-being-dragged")},stop:function(){setTimeout(function(){t.removeClass("fusion-column-dragging fusion-active-dragging")},10),u.removeClass("fusion-being-dragged")}}),e.droppable({tolerance:"touch",hoverClass:"ui-droppable-active",accept:".fusion-builder-column",drop:function(e,t){var i,o,n,a=t.draggable.data("cid"),s=FusionPageBuilderViewManager.getView(a),r=s.model.get("parent"),l=u;jQuery(e.target).hasClass("target-after")?l.after(t.draggable):u.before(t.draggable),i=t.draggable.closest(".fusion-builder-row").data("cid"),o=FusionPageBuilderViewManager.getView(i),n=t.draggable.parent().children(".fusion-builder-column").index(t.draggable),FusionPageBuilderApp.onDropCollectionUpdate(s.model,n,i),o.setRowData(),i!==r&&FusionPageBuilderViewManager.getView(r).setRowData(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.column+" order changed"),setTimeout(function(){s.droppableColumn()},300)}}),u.find(".fusion-element-target-column").droppable({tolerance:"touch",hoverClass:"ui-droppable-active",accept:".fusion-builder-live-element, .fusion_builder_row_inner",drop:function(e,t){var i,o,n=FusionPageBuilderViewManager.getView(t.draggable.data("cid"));u.find(".fusion-builder-column-content:not(.fusion_builder_row_inner .fusion-builder-column-content ):not( .fusion-nested-column-content )").append(t.draggable),i=t.draggable.parent().children(".fusion-builder-live-element, .fusion_builder_row_inner").index(t.draggable),FusionPageBuilderApp.onDropCollectionUpdate(n.model,i,a.model.get("cid")),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.moved+" "+fusionAllElements[n.model.get("element_type")].name+" "+fusionBuilderText.element),o={currentModel:n.model,handleType:"save",attributes:n.model.attributes},fusionGlobalManager.handleMultiGlobal(o),FusionEvents.trigger("fusion-content-changed"),a._equalHeights()}}),FusionPageBuilderApp.wireframeActive&&this.disableDroppableColumn())},onOptionChange:function(e,t,i){var o=this.model.get("parent"),n=this.model.get("cid"),a=!1;switch((void 0===i||void 0!==i&&("change"!==i.type||"change"===i.type&&void 0!==i.srcElement))&&(a=!0),e){case"spacing":this.model.attributes.params[e]=t,this.validColumnSpacing(t)&&FusionPageBuilderViewManager.getView(o).setSingleRowData(n),!0===a&&("yes"===t||"no"===t?this.destroySpacingResizable():(this.columnSpacer=!1,this.columnSpacing()));break;case"margin_top":case"margin_bottom":this.model.attributes.params[e]=t,!0===a&&(this.destroyMarginResizable(),this.marginDrag());break;case"padding_top":case"padding_right":case"padding_bottom":case"padding_left":this.model.attributes.params[e]=t,!0===a&&(this.destroyPaddingResizable(),this.paddingDrag());break;case"background_color":if(0===jQuery.Color(t).alpha()||1===jQuery.Color(t).alpha()){this.$el.removeClass("fusion-blend-mode");break}this.$el.addClass("fusion-blend-mode");break;case"border_size":case"border_color":case"border_style":case"border_position":this.model.attributes.params[e]=t;break;case"padding":-1===jQuery(i.target).attr("name").indexOf("_")&&(this.model.attributes.params[e]=t,this.renderSectionSeps(i),this._refreshJs())}},renderSectionSeps:function(){var e=FusionPageBuilderViewManager.getChildViews(this.model.get("cid"));_.each(e,function(e){"fusion_section_separator"===e.model.get("element_type")&&e.reRender()})},refreshJs:function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-element-render-fusion_builder_column",this.model.attributes.cid)},borderStyle:function(e){var t=this.model.attributes.params.border_size+"px",i=this.model.attributes.params.border_color,o=this.model.attributes.params.border_style,n=this.model.attributes.params.border_position,a=["top","right","bottom","left"],s="lift_up"===this.model.attributes.params.hover_type?this.$el.find(".fusion-column-wrapper, .fusion-column-inner-bg-image"):this.$el.find(".fusion-column-wrapper");e&&e.preventDefault(),this.$el.find(".fusion-column-wrapper, .fusion-column-inner-bg-image").css("border",""),"all"===n?_.each(a,function(e){s.css("border-"+e,t+" "+o+" "+i)}):_.each(a,function(e){e===n?s.css("border-"+e,t+" "+o+" "+i):s.css("border-"+e,"none")})},setElementAttributes:function(i,e){var o=this;i.removeClass(this.currentClasses),"object"==typeof e&&i.length&&_.each(e,function(e,t){"class"===t?(o.currentClasses=e,i.addClass(e)):"id"===t?i.attr("id",e):"style"===t?i.attr("style",e):-1!==t.indexOf("data")&&(t=t.replace(/_/g,"-"),i.attr(t,e))})},cloneColumn:function(e){var t,r=jQuery.extend(!0,{},this.model.attributes);e&&e.preventDefault(),r.created="manually",r.cid=FusionPageBuilderViewManager.generateCid(),r.targetElement=this.$el,r.cloned=!0,r.at_index=FusionPageBuilderApp.getCollectionIndex(this.$el),FusionPageBuilderApp.collection.add(r),this.$el.find(".fusion-builder-live-element:not(.fusion-builder-column-inner .fusion-builder-live-element), .fusion-builder-nested-element").each(function(){var e,t,i,o,n,a,s;jQuery(this).hasClass("fusion-builder-live-element")?(e=jQuery(this),t=void 0===e.data("cid")?e.find(".fusion-builder-data-cid").data("cid"):e.data("cid"),i=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}),(o=jQuery.extend(!0,{},i.attributes)).created="manually",o.cid=FusionPageBuilderViewManager.generateCid(),o.parent=r.cid,o.from="fusion_builder_column",delete o.targetElementPosition,FusionPageBuilderApp.collection.add(o)):jQuery(this).hasClass("fusion_builder_row_inner")&&(a=void 0===(n=jQuery(this)).data("cid")?n.find(".fusion-builder-data-cid").data("cid"):n.data("cid"),void 0!==(s=FusionPageBuilderViewManager.getView(a))&&s.cloneNestedRow("",r.cid))}),e&&(FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.cloned+" "+fusionBuilderText.column),(t=FusionPageBuilderViewManager.getView(this.model.get("parent"))).createVirtualRows(),t.updateColumnsPreview(),FusionEvents.trigger("fusion-content-changed")),this._refreshJs()},appendChildren:function(){var t,i,o=this;this.model.children.each(function(e){t=e.attributes.cid,i=FusionPageBuilderViewManager.getView(t),o.$el.find(".fusion-builder-column-content:not(.fusion_builder_row_inner .fusion-builder-column-content ):not( .fusion-nested-column-content )").append(i.$el)}),this.delegateChildEvents()},getColumnContent:function(){var e,i="",o={};return _.each(this.model.get("params"),function(e,t){o[t]="undefined"===e?"":e}),e={min_height:"",last:"no",hover_type:"none",link:"",border_position:"all"},_.each(e,function(e,t){void 0===o[t]&&(o[t]=e)}),i+='[fusion_builder_column type="'+this.model.attributes.params.type+'"',_.each(o,function(e,t){i+=" "+t+'="'+e+'"'}),i+="]",this.$el.find(".fusion-builder-live-element:not(.fusion-builder-column-inner .fusion-builder-live-element), .fusion-builder-nested-element").each(function(){var e;jQuery(this).hasClass("fusion-builder-live-element")?i+=FusionPageBuilderApp.generateElementShortcode(jQuery(this),!1):void 0!==(e=FusionPageBuilderViewManager.getView(jQuery(this).data("cid")))&&(i+=e.getInnerRowContent())}),i+="[/fusion_builder_column]"},removeColumn:function(e){var t,i=this.model.get("parent");e&&e.preventDefault(),t=FusionPageBuilderViewManager.getChildViews(this.model.get("cid")),_.each(t,function(e){"fusion_builder_row"===e.model.get("type")||"fusion_builder_row_inner"===e.model.get("type")?e.removeRow():e.removeElement()}),FusionPageBuilderViewManager.removeView(this.model.get("cid")),this._equalHeights(i),FusionEvents.trigger("fusion-element-removed",this.model.get("cid")),this.model.destroy(),this.remove(),e&&(FusionPageBuilderViewManager.getView(i).setRowData(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.deleted+" "+fusionBuilderText.column),FusionEvents.trigger("fusion-content-changed"))},addChildView:function(e){var t,i={model:e,collection:FusionPageBuilderElements,attributes:{"data-cid":e.get("cid")}},o=":not(.fusion_builder_row_inner .fusion-builder-column-content)";t=void 0!==e.get("multi")&&"multi_element_parent"===e.get("multi")?void 0!==FusionPageBuilder[e.get("element_type")]?new(FusionPageBuilder[e.get("element_type")])(i):new FusionPageBuilder.ParentElementView(i):void 0!==FusionPageBuilder[e.get("element_type")]?new(FusionPageBuilder[e.get("element_type")])(i):"fusion_builder_row_inner"===e.get("element_type")?new FusionPageBuilder.InnerRowView(i):new FusionPageBuilder.ElementView(i),FusionPageBuilderViewManager.addView(e.get("cid"),t),void 0!==this.model&&"fusion_builder_column_inner"===this.model.get("type")&&(o=""),_.isUndefined(e.get("targetElement"))||void 0!==e.get("from")?void 0===e.get("targetElementPosition")||"end"===e.get("targetElementPosition")?this.$el.find(".fusion-builder-column-content"+o).append(t.render().el):this.$el.find(".fusion-builder-column-content"+o).find(".fusion-builder-empty-column").first().after(t.render().el):void 0===e.get("targetElementPosition")||"after"===e.get("targetElementPosition")?e.get("targetElement").after(t.render().el):e.get("targetElement").before(t.render().el),"off"!==window.FusionApp.preferencesData.open_settings&&void 0!==e.get("added")&&("fusion_builder_row_inner"===e.get("type")?jQuery("body").hasClass("fusion-builder-ui-wireframe")||t.editRow():t.settings())},delegateChildEvents:function(){var t,i;this.model.children.each(function(e){t=e.attributes.cid,(i=FusionPageBuilderViewManager.getView(t)).delegateEvents(),"function"==typeof i.droppableElement&&i.droppableElement(),"function"==typeof i.droppableColumn&&i.droppableColumn(),void 0!==i.model.get("multi")&&"multi_element_parent"===i.model.get("multi")&&(i.delegateChildEvents(),i.sortableChildren())})},getSaveLabel:function(){return fusionBuilderText.save_column},getCategory:function(){return"columns"},fallbackColumnSpacing:function(e,t){var i="100%",o=i,n="0%";switch(this.model.attributes.params.type,"yes"===this.model.attributes.params.spacing&&(n="4%"),this.model.attributes.params.type){case"1_1":o=i="100%";break;case"1_4":i="22%",o="25%";break;case"3_4":i="74%",o="75%";break;case"1_2":i="48%",o="50%";break;case"1_3":i="30.6666%",o="33.3333%";break;case"2_3":i="65.3333%",o="66.6666%";break;case"1_5":i="16.8%",o="20%";break;case"2_5":i="37.6%",o="40%";break;case"3_5":i="58.4%",o="60%";break;case"4_5":i="79.2%",o="80%";break;case"5_6":i="82.6666%",o="83.3333%";break;case"1_6":i="13.3333%",o="16.6666%"}"4%"===n||this.model.attributes.params.last&&!t||(i=o),this.$el.css("width",i),e.css("width",i),e.css("margin-right",n),this.$el.css("margin-right",n)},scrollHighlight:function(e){var t=this,i=jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-one-page-text-link"),o=this.$el;e=void 0===e||e,setTimeout(function(){e&&i.length&&"function"==typeof i.fusion_scroll_to_anchor_target&&i.attr("href","#fusion-column-"+t.model.get("cid")).fusion_scroll_to_anchor_target(15),o.addClass("fusion-active-highlight"),setTimeout(function(){o.removeClass("fusion-active-highlight")},6e3)},10)},disableDroppableColumn:function(){var e=this.$el,t=e.find(".fusion-column-target");void 0!==e.draggable("instance")&&e.draggable("destroy"),void 0!==t.droppable("instance")&&t.droppable("destroy"),void 0!==e.find(".fusion-element-target-column").droppable("instance")&&e.find(".fusion-element-target-column").droppable("destroy")},enableDroppableColumn:function(){this.droppableColumn()},sortableElements:function(){var i=this;this.$el.find(".fusion-builder-column-content").sortable({items:".fusion-builder-live-element:not(.fusion_builder_row_inner .fusion-builder-live-element), .fusion_builder_row_inner",connectWith:".fusion-builder-column-content",cancel:".fusion-builder-settings, .fusion-builder-clone, .fusion-builder-row-clone, .fusion-builder-remove, .fusion-builder-add-element, .fusion-builder-insert-column, .fusion-builder-save-module-dialog, .fusion-builder-row-remove, .fusion-builder-save-inner-row-dialog-button, .fusion_builder_row_inner .fusion-builder-row-content",tolerance:"pointer",appendTo:FusionPageBuilderApp.$el,helper:"clone",disabled:!FusionPageBuilderApp.wireframeActive,over:function(e){i.onSortOver(e)},update:function(e,t){i.onSortUpdate(e,t)},stop:function(e,t){i.onSortStop(e,t)}})}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ContainerView=FusionPageBuilder.BaseView.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-container-template").html()),className:function(){var e="fusion-builder-container fusion-builder-data-cid",t=_.fusionCleanParameters(jQuery.extend(!0,{},this.model.get("params")));return"yes"===t.hundred_percent_height_scroll&&"yes"===t.hundred_percent_height&&(e+=" scrolling-helper"),e},events:{"click .fusion-builder-container-settings":"settings","click .fusion-builder-container-remove":"removeContainer","click .fusion-builder-container-clone":"cloneContainer","click .fusion-builder-container-add":"addContainer","click .fusion-builder-container-save":"openLibrary","paste .fusion-builder-section-name":"renameContainer","keydown .fusion-builder-section-name":"renameContainer","click .fusion-builder-toggle":"toggleContainer","click .fusion-builder-publish-tooltip":"publish","click .fusion-builder-unglobal-tooltip":"unglobalize","click .fusion-builder-container-drag":"preventDefault"},initialize:function(){var e=this.model.get("cid"),t=this.$el;t.attr("data-cid",e),t.attr("id","fusion-container-"+e),void 0!==this.model.attributes.params&&void 0!==this.model.attributes.params.fusion_global&&(t.attr("fusion-global-layout",this.model.attributes.params.fusion_global),this.$el.removeClass("fusion-global-container").addClass("fusion-global-container")),this.listenTo(FusionEvents,"fusion-view-update-fusion_builder_container",this.reRender),this.listenTo(FusionEvents,"fusion-param-changed-"+this.model.get("cid"),this.onOptionChange),this._triggerCallback=_.debounce(_.bind(this.triggerCallback,this),200),this.model.children=new FusionPageBuilder.Collection,this.listenTo(this.model.children,"add",this.addChildView),this.listenTo(FusionEvents,"fusion-wireframe-toggle",this.wireFrameToggled),this.renderedYet=FusionPageBuilderApp.loaded,this._refreshJs=_.debounce(_.bind(this.refreshJs,this),300),this._triggerScrollUpdate=_.debounce(_.bind(this.triggerScrollUpdate,this),300),this.typingTimer,this.doneTypingInterval=800,this.scrollingSections=!1,this.settingsControlsOffset=0,this.width=t.width(),t.on("hover",_.bind(this.setSettingsControlsOffset,this)),this.deprecatedParams(),this.baseInit()},setSettingsControlsOffset:function(e){void 0===e&&0!==this.settingsControlsOffset&&this.width===this.$el.width()||void 0===window.frames[0].getStickyHeaderHeight||(this.settingsControlsOffset="off"!==FusionApp.preferencesData.sticky_header?window.frames[0].getStickyHeaderHeight(!0)+15+"px":"15px",this.width=this.$el.width(),this.$el.find(".fusion-builder-module-controls-container-wrapper .fusion-builder-module-controls-type-container").css("top",this.settingsControlsOffset)),this.$el.find(".fusion-builder-empty-container").is(":visible")?this.$el.find(".fusion-builder-module-controls-container-wrapper .fusion-builder-module-controls-type-container").css("margin-top","8.5px"):this.$el.find(".fusion-builder-module-controls-container-wrapper .fusion-builder-module-controls-type-container").css("margin-top","")},render:function(){var e=this,t=this.getTemplateAtts();return this.$el.html(this.template(t)),this.appendChildren(),this.renderedYet&&(this._refreshJs(),jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-option-change-equal_height_columns",this.model.attributes.cid)),void 0!==this.model.attributes.params.admin_toggled&&"yes"===this.model.attributes.params.admin_toggled&&(this.$el.addClass("fusion-builder-section-folded"),this.$el.find(".fusion-builder-toggle > span").toggleClass("fusiona-caret-up").toggleClass("fusiona-caret-down")),this.onRender(),this.renderedYet=!0,setTimeout(function(){e.droppableContainer()},100),this._triggerScrollUpdate(),this},droppableContainer:function(){var i=this.$el,t=this.model.get("cid"),e=jQuery("#fb-preview")[0].contentWindow.jQuery("body");i&&(i.draggable({appendTo:FusionPageBuilderApp.$el,zIndex:999999,delay:100,cursorAt:{top:15,left:15},iframeScroll:!0,containment:e,cancel:".fusion-builder-column",helper:function(){var e=FusionPageBuilderApp.DraggableHelpers.draggableClasses(t);return jQuery('<div class="fusion-container-helper '+e+'" data-cid="'+t+'"><span class="fusiona-container"></span></div>')},start:function(){e.addClass("fusion-container-dragging fusion-active-dragging"),i.addClass("fusion-being-dragged"),i.prev(".fusion-builder-container").length&&i.prev(".fusion-builder-container").addClass("hide-target-after"),i.prev(".fusion-fusion-builder-next-pager").length&&i.prev(".fusion-fusion-builder-next-page").addClass("hide-target-after")},stop:function(){setTimeout(function(){e.removeClass("fusion-container-dragging fusion-active-dragging")},10),i.removeClass("fusion-being-dragged"),FusionPageBuilderApp.$el.find(".hide-target-after").removeClass("hide-target-after")}}),i.find(".fusion-container-target").droppable({tolerance:"touch",hoverClass:"ui-droppable-active",accept:".fusion-builder-container, .fusion-builder-next-page",drop:function(e,t){jQuery(e.target).hasClass("target-after")?i.after(t.draggable):i.before(t.draggable),FusionEvents.trigger("fusion-content-changed"),FusionPageBuilderApp.scrollingContainers(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.full_width_section+" order changed")}}),FusionPageBuilderApp.wireframeActive&&this.disableDroppableContainer())},enableDroppableContainer:function(){var e=this.$el;void 0!==e.draggable("instance")&&void 0!==e.find(".fusion-container-target").droppable("instance")?(e.draggable("enable"),e.find(".fusion-container-target").droppable("enable")):this.droppableContainer()},disableDroppableContainer:function(){var e=this.$el;void 0!==e.draggable("instance")&&e.draggable("disable"),void 0!==e.find(".fusion-container-target").droppable("instance")&&e.find(".fusion-container-target").droppable("disable")},wireFrameToggled:function(){FusionPageBuilderApp.wireframeActive?this.disableDroppableContainer():this.enableDroppableContainer()},getTemplate:function(){var e=this.getTemplateAtts();return this.template(e)},deprecatedParams:function(){var e=this.model.get("params");e=_.fusionContainerMapDeprecatedArgs(e),this.model.set("params",e)},getTemplateAtts:function(){var e,t,i,o,n,a,s,r,l,u=fusionAllElements[this.model.get("element_type")],d=jQuery.extend(!0,{},this.model.attributes),c=jQuery.extend(!0,{},this.model.get("params")),g={},p="",f=fusionAllElements.fusion_builder_container.defaults,m="fusion-fullwidth fullwidth-box",h="",b=!1,v="",y="",w="",x="",F="",P=this.model.get("cid");return e=jQuery.extend(!0,{},fusionAllElements.fusion_builder_container.extras),FusionPageBuilderApp.$el.find("#main").hasClass("width-100")&&void 0!==e.container_padding_100?(f.padding_top=e.container_padding_100.top,f.padding_right=e.container_padding_100.right,f.padding_bottom=e.container_padding_100.bottom,f.padding_left=e.container_padding_100.left):FusionPageBuilderApp.$el.find("#main").hasClass("width-100")||void 0===e.container_padding_default||(f.padding_top=e.container_padding_default.top,f.padding_right=e.container_padding_default.right,f.padding_bottom=e.container_padding_default.bottom,f.padding_left=e.container_padding_default.left),c=_.fusionCleanParameters(c),u&&void 0!==u.defaults&&(g=jQuery.extend(!0,{},f,c)),(t=jQuery.Color(g.background_color).alpha())<1&&0!==t&&(m+=" fusion-blend-mode"),(cssua.ua.ie||cssua.ua.edge)&&t<1&&(m+=" fusion-ie-mode"),void 0!==g.video_mp4&&""!==g.video_mp4&&(v+='<source src="'+g.video_mp4+'" type="video/mp4">',b=!0),void 0!==g.video_webm&&""!==g.video_webm&&(v+='<source src="'+g.video_webm+'" type="video/webm">',b=!0),void 0!==g.video_ogv&&""!==g.video_ogv&&(v+='<source src="'+g.video_ogv+'" type="video/ogg">',b=!0),void 0!==g.video_url&&""!==g.video_url&&(b=!0),!0===b&&(m+=" video-background",""!==g.video_url?(n=_.fusionGetVideoProvider(g.video_url),l="yes"===g.video_loop?1:0,"youtube"===n.type?h+="<div style='visibility: hidden' id='video-"+P+"' data-youtube-video-id='"+n.id+"' data-mute='"+g.video_mute+"' data-loop='"+l+"' data-loop-adjustment='"+g.video_loop_refinement+"' data-video-aspect-ratio='"+g.video_aspect_ratio+"'><div id='video-"+P+"-inner'></div></div>":"vimeo"===n.type&&(h+='<div id="video-'+P+'" data-vimeo-video-id="'+n.id+'" data-mute="'+g.video_mute+'" data-video-aspect-ratio="'+g.video_aspect_ratio+' }}" style="visibility:hidden;"><iframe id="video-iframe-'+P+'" src="//player.vimeo.com/video/'+n.id+"?api=1&player_id=video-iframe-"+P+"&html5=1&autopause=0&autoplay=1&badge=0&byline=0&loop="+l+'&title=0" frameborder="0"></iframe></div>')):(a='preload="auto" autoplay playsinline',"yes"===g.video_loop&&(a+=" loop"),"yes"===g.video_mute&&(a+=" muted"),""!==g.video_preview_image&&(h+='<div class="fullwidth-video-image" style="background-image: url(\''+g.video_preview_image+"');\"></div>"),h+='<div class="fullwidth-video"><video '+a+">"+v+"</video></div>"),""!==g.background_color&&t<1&&(h+='<div class="fullwidth-overlay" style="background-color:'+g.background_color+';"></div>')),""===g.background_color||"yes"===g.fade&&""!==g.background_image&&!1===b||(p+="background-color: "+g.background_color+";"),""!==g.background_image&&"yes"!==g.fade&&(p+="background-image: url('"+g.background_image+"');"),""!==g.background_position&&(p+="background-position: "+g.background_position+";"),""!==g.background_repeat&&(p+="background-repeat: "+g.background_repeat+";"),jQuery.each(["top","right","bottom","left"],function(e,t){void 0!==g[r="padding_"+t]&&!1===g[r].indexOf("%")&&!1===g[r].indexOf("px")&&(g[r]+="px"),""!==g[r]&&("yes"===g.hundred_percent_height&&"yes"===g.hundred_percent_height_center_content&&(x+="padding-"+t+":"+_.fusionCheckValue(g[r])+";"),p+="padding-"+t+":"+_.fusionCheckValue(g[r])+";")}),""!==g.margin_bottom&&(p+="margin-bottom: "+_.fusionCheckValue(g.margin_bottom)+";"),""!==g.margin_top&&(p+="margin-top: "+_.fusionCheckValue(g.margin_top)+";"),""===g.border_size&&(g.border_size=0),p+="border-top-width:"+_.fusionValidateAttrValue(g.border_size,"px")+";",p+="border-bottom-width:"+_.fusionValidateAttrValue(g.border_size,"px")+";",p+="border-color:"+g.border_color+";",p+="border-top-style:"+g.border_style+";",p+="border-bottom-style:"+g.border_style+";","yes"===g.fade&&""!==g.background_image&&!1===b&&(s="",m+=" faded-background",g.background_parallax&&(s+="background-attachment:"+g.background_parallax+";"),g.background_color&&(s+="background-color:"+g.background_color+";"),g.background_image&&(s+="background-image: url("+g.background_image+");"),g.background_position&&(s+="background-position:"+g.background_position+";"),g.background_repeat&&(s+="background-repeat:"+g.background_repeat+";"),"no-repeat"===g.background_repeat&&(s+="-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;"),h+='<div class="fullwidth-faded" style="'+s+'"></div>'),""!==g.background_image&&!1===b&&"no-repeat"===g.background_repeat&&(p+="-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;"),this.$el.find(".fusion-bg-parallax").length&&(void 0!==this.$el.find(".fusion-bg-parallax").data("parallax-index")&&jQuery("#fb-preview")[0].contentWindow._fusionImageParallaxImages.splice(this.$el.find(".fusion-bg-parallax").data("parallax-index"),1),this.$el.find(".fusion-bg-parallax").remove(),this.$el.find(".parallax-inner").remove()),!1===b&&""!==g.background_image&&(w+=' data-bg-align="'+g.background_position+'"',w+=' data-direction="'+g.background_parallax+'"',w+=' data-mute="'+("mute"===g.video_mute?"true":"false")+'"',w+=' data-opacity="'+g.opacity+'"',w+=' data-velocity="'+-1*g.parallax_speed+'"',w+=' data-mobile-enabled="'+("yes"===g.enable_mobile?"true":"false")+'"',w+=' data-break_parents="'+g.break_parents+'"',w+=' data-bg-image="'+g.background_image+'"',w+=' data-bg-repeat="'+(""!==g.background_repeat&&"no-repeat"!==g.background_repeat?"true":"false")+'"',w+=' data-bg-height="'+g.data_bg_height+'"',w+=' data-bg-width="'+g.data_bg_width+'"',jQuery.Color(g.background_color).alpha()<1&&(w+=' data-bg-color="'+g.background_color+'"'),"none"!==g.background_parallax&&"fixed"!==g.background_parallax&&(y='<div class="fusion-bg-parallax" '+w+"></div>"),""!==g.background_parallax&&(m+=" fusion-parallax-"+g.background_parallax),g.background_parallax&&(p+="background-attachment:"+g.background_parallax+";")),""!==g.class&&(m+=" "+g.class),m+="yes"===g.hundred_percent?" hundred-percent-fullwidth":" nonhundred-percent-fullwidth",m+="yes"===g.hundred_percent_height_scroll&&"yes"===g.hundred_percent_height?" fusion-scrolling-section-edit":"",m+="yes"===g.hundred_percent_height?" non-hundred-percent-height-scrolling":"",m+="yes"===g.hundred_percent_height&&"yes"!==g.hundred_percent_height_center_content?" hundred-percent-height":"",m+="yes"===g.hundred_percent_height&&"yes"===g.hundred_percent_height_center_content?" hundred-percent-height-center-content":"","yes"===g.equal_height_columns&&(m+=" fusion-equal-height-columns"),"yes"===g.hundred_percent_height&&"yes"===g.hundred_percent_height_center_content&&(m+=" hundred-percent-height non-hundred-percent-height-scrolling"),g.margin_bottom=""===g.margin_bottom?"0px":g.margin_bottom,g.padding_top=""===g.padding_top?"0px":g.padding_top,i=parseInt(g.padding_top,10)<20&&("0%"===g.padding_top||-1===g.padding_top.indexOf("%"))?"fusion-overlap":"",o=parseInt(g.margin_bottom,10)<20&&("0%"===g.margin_bottom||-1===g.margin_bottom.indexOf("%"))?"fusion-overlap":"",m=_.fusionVisibilityAtts(g.hide_on_mobile,m),p=""!==p?' style="'+p+'"':"",""!==g.id&&(F=g.id),d.extras=e,d.id=F,d.classes=m,d.style=p,d.outer_html=h,d.parallax_helper=y,d.menu_anchor=g.menu_anchor,d.status=g.status,d.cid=this.model.get("cid"),d.content_styles=g.content_styles,d.hundred_percent_height=g.hundred_percent_height,d.hundred_percent_height_center_content=g.hundred_percent_height_center_content,d.topOverlap=i,d.bottomOverlap=o,d.admin_label=""!==g.admin_label?_.unescape(g.admin_label):fusionBuilderText.full_width_section,d.centerContentClass="",d.contentStyle=x,d.hundred_percent_height_scroll=g.hundred_percent_height_scroll,d.isGlobal=void 0!==g.fusion_global?"yes":"no",d.scrollPosition="right"===FusionApp.settings.header_position||jQuery("#fb-preview")[0].contentWindow.jQuery("body").hasClass("rtl")?"scroll-navigation-left":"scroll-navigation-right",d},triggerScrollUpdate:function(){setTimeout(function(){FusionPageBuilderApp.scrollingContainers()},100)},beforePatch:function(){this.$el.find(".fusion-bg-parallax").length&&"object"==typeof jQuery("#fb-preview")[0].contentWindow._fusionImageParallaxImages&&void 0!==this.$el.find(".fusion-bg-parallax").attr("data-parallax-index")&&jQuery("#fb-preview")[0].contentWindow._fusionImageParallaxImages.splice(this.$el.find(".fusion-bg-parallax").attr("data-parallax-index"),1)},afterPatch:function(){var e=this;this.appendChildren(),this.refreshJs(),this._triggerScrollUpdate(),setTimeout(function(){e.droppableContainer()},100),"yes"===this.model.attributes.params.hundred_percent_height&&"yes"===this.model.attributes.params.hundred_percent_height_scroll?this.$el.addClass("scrolling-helper"):this.$el.removeClass("scrolling-helper"),this.setSettingsControlsOffset(!0)},refreshJs:function(e){e=void 0===e?this.model.attributes.cid:e,jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-element-render-fusion_builder_container",e),jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-reinit-carousels",e)},addContainer:function(e){var t,i,o,n;e&&(e.preventDefault(),FusionPageBuilderApp.newContainerAdded=!0),t=FusionPageBuilderViewManager.generateCid(),i=fusionAllElements.fusion_builder_container.params,o={},_.each(i,function(e){n=_.isObject(e.value)?e.default:e.value,o[e.param_name]=n,"dimension"===e.type&&_.isObject(e.value)&&_.each(e.value,function(e,t){o[t]=e})}),this.collection.add([{type:"fusion_builder_container",added:"manually",element_type:"fusion_builder_container",cid:t,params:o,view:this,created:"auto"}]),FusionPageBuilderViewManager.getView(t).addRow(),FusionPageBuilderApp.scrollingContainers()},addRow:function(){this.collection.add([{type:"fusion_builder_row",element_type:"fusion_builder_row",added:"manually",cid:FusionPageBuilderViewManager.generateCid(),parent:this.model.get("cid"),view:this,element_content:""}])},removeContainer:function(e,t){var i;e&&e.preventDefault(),i=FusionPageBuilderViewManager.getChildViews(this.model.get("cid")),_.each(i,function(e){"fusion_builder_row"===e.model.get("type")&&e.removeRow()}),FusionPageBuilderViewManager.removeView(this.model.get("cid")),this.model.destroy(),FusionEvents.trigger("fusion-element-removed",this.model.get("cid")),this.remove(),FusionPageBuilderViewManager.countElementsByType("fusion_builder_container")<1&&void 0===t&&(FusionPageBuilderApp.blankPage=!0,FusionPageBuilderApp.clearBuilderLayout(!0)),e&&(FusionPageBuilderApp.scrollingContainers(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.deleted_section),FusionEvents.trigger("fusion-content-changed"))},cloneContainer:function(e){var a;e&&e.preventDefault(),(a=jQuery.extend(!0,{},this.model.attributes)).cid=FusionPageBuilderViewManager.generateCid(),a.created="manually",a.view=this,FusionPageBuilderApp.collection.add(a),this.$el.find(".fusion-builder-row-container:not(.fusion_builder_row_inner .fusion-builder-row-container)").each(function(){var e,t=jQuery(this),i=t.data("cid"),o=FusionPageBuilderElements.find(function(e){return e.get("cid")==i}),n=jQuery.extend(!0,{},o.attributes);n.created="manually",n.cid=FusionPageBuilderViewManager.generateCid(),n.parent=a.cid,FusionPageBuilderApp.collection.add(n),e=FusionPageBuilderViewManager.getView(n.cid),t.find(".fusion-builder-column-outer").each(function(){var e=jQuery(this),t=e.data("cid"),i=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}),s=jQuery.extend(!0,{},i.attributes);s.created="manually",s.cid=FusionPageBuilderViewManager.generateCid(),s.parent=n.cid,s.from="fusion_builder_container",s.cloned=!0,delete s.targetElementPosition,FusionPageBuilderApp.collection.add(s),e.find(".fusion-builder-column-content:not( .fusion-nested-column-content )").children(".fusion-builder-live-element, .fusion_builder_row_inner").each(function(){var e,t,i,o,n,a;jQuery(this).hasClass("fusion-builder-live-element")?(e=jQuery(this),t=e.data("cid"),i=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}),(o=jQuery.extend(!0,{},i.attributes)).created="manually",o.cid=FusionPageBuilderViewManager.generateCid(),o.parent=s.cid,o.from="fusion_builder_container",delete o.targetElementPosition,FusionPageBuilderApp.collection.add(o)):jQuery(this).hasClass("fusion_builder_row_inner")&&(n=jQuery(this).data("cid"),void 0!==(a=FusionPageBuilderViewManager.getView(n))&&a.cloneNestedRow("",s.cid))})}),e.setRowData()}),FusionPageBuilderApp.scrollingContainers(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.cloned_section),FusionEvents.trigger("fusion-content-changed"),this._refreshJs(a.cid)},addChildView:function(e){var t,i={model:e,collection:FusionPageBuilderElements};t=new FusionPageBuilder.RowView(i),FusionPageBuilderViewManager.addView(e.get("cid"),t),this.$el.find(".fusion-builder-container-content").length?this.$el.find(".fusion-builder-container-content").append(t.render().el):this.$el.find("> .fusion-builder-add-element").hide().end().append(t.render().el),"manually"===e.get("created")&&"row_inner"===e.get("element_type")&&e.set("view",FusionPageBuilderViewManager.getView(e.get("parent")),{silent:!0})},appendChildren:function(){var t,i,o=this;this.model.children.each(function(e){t=e.attributes.cid,i=FusionPageBuilderViewManager.getView(t),o.$el.find(".fusion-builder-container-content").append(i.$el),i.delegateEvents(),i.delegateChildEvents(),i.droppableColumn()})},onOptionChange:function(e,t,i){var o=!1;switch((void 0===i||void 0!==i&&("change"!==i.type||"change"===i.type&&void 0!==i.srcElement))&&(o=!0),e){case"background_color":0===jQuery.Color(t).alpha()||1===jQuery.Color(t).alpha()?this.$el.find(".fusion-fullwidth").removeClass("fusion-blend-mode"):this.$el.find(".fusion-fullwidth").addClass("fusion-blend-mode"),jQuery.Color(t).alpha()<1&&this.$el.find(".parallax-inner").length?this.$el.find(".parallax-inner").css("background-color",t):1===jQuery.Color(t).alpha()&&this.$el.find(".parallax-inner").length&&this.$el.find(".parallax-inner").css("background-color","transparent");break;case"margin_top":case"margin_bottom":this.model.attributes.params[e]=t,!0===o&&(this.destroyMarginResizable(),this.marginDrag());break;case"padding_top":case"padding_right":case"padding_bottom":case"padding_left":this.model.attributes.params[e]=t,!0===o&&(this.destroyPaddingResizable(),this.paddingDrag())}},getContent:function(){var i="";return i+=FusionPageBuilderApp.generateElementShortcode(this.$el,!0),this.$el.find(".fusion_builder_row").each(function(){var e=jQuery(this);i+="[fusion_builder_row]",e.find(".fusion-builder-column-outer").each(function(){var e=jQuery(this).data("cid"),t=FusionPageBuilderViewManager.getView(e);i+=t.getColumnContent()}),i+="[/fusion_builder_row]"}),i+="[/fusion_builder_container]"},getSaveLabel:function(){return fusionBuilderText.save_section},getCategory:function(){return"sections"},marginDrag:function(){var o,t,n=this.$el,a=this,s=!1,r=n.closest(".fusion-row").width();this.$el.hasClass("active")||_.each({top:"s",bottom:"s"},function(e,i){void 0!==a.model.attributes.params["margin_"+i]&&(t=a.model.attributes.params["margin_"+i],(s=-1!==a.model.attributes.params["margin_"+i].indexOf("%"))&&(t=r/100*parseFloat(a.model.attributes.params["margin_"+i]),n.find(".fusion-container-margin-"+i).css("height",t),"bottom"===i&&t<20&&n.find(".fusion-container-margin-bottom, .fusion-container-padding-bottom").addClass("fusion-overlap"))),n.find(".fusion-container-margin-"+i).css("display","block"),n.find(".fusion-container-margin-"+i).height(t),n.find(".fusion-container-margin-"+i).resizable({handles:e,minHeight:0,minWidth:0,grid:s?[r/100,10]:"",resize:function(e,t){jQuery(t.element).addClass("active"),s=void 0!==a.model.attributes.params["margin_"+i]&&-1!==a.model.attributes.params["margin_"+i].indexOf("%"),jQuery(t.element).closest(".fusion-builder-container").addClass("active"),o=(o="top"===i||"bottom"===i?t.size.height:t.size.width)<0?0:o,o+="px",s&&(o=0===parseFloat(o)?"0%":Math.round(parseFloat(parseFloat(o)/(r/100)))+"%"),"bottom"===i&&(t.size.height<20?(jQuery(t.element).addClass("fusion-overlap"),n.find(".fusion-container-padding-bottom").addClass("fusion-overlap")):(jQuery(t.element).removeClass("fusion-overlap"),n.find(".fusion-container-padding-bottom").removeClass("fusion-overlap"))),n.find(".fusion-fullwidth").css("margin-"+i,o),jQuery(t.element).find(".fusion-spacing-tooltip, .fusion-column-spacing").addClass("active"),jQuery(t.element).find(".fusion-spacing-tooltip").text(o),a.updateDragSettings("#margin_"+i,o)},stop:function(e,t){jQuery(t.element).removeClass("active"),jQuery(t.element).closest(".fusion-builder-container").removeClass("active"),jQuery(t.element).closest(".fusion-builder-container").find(".fusion-column-spacing .ui-resizable").length&&jQuery(t.element).closest(".fusion-builder-container").find(".fusion-column-spacing .ui-resizable").resizable("destroy")}})})},paddingDrag:function(){var n,t,i,e,a=this.$el,s=this,r=!1,l=a.closest(".fusion-row").width(),u=l/100;this.$el.hasClass("active")||(i=fusionAllElements.fusion_builder_container.defaults,e=jQuery.extend(!0,{},fusionAllElements.fusion_builder_container.extras),FusionPageBuilderApp.$el.find("#main").hasClass("width-100")&&void 0!==e.container_padding_100&&(i.padding_right=e.container_padding_100.right,i.padding_left=e.container_padding_100.left),_.each({top:"s",right:"w",bottom:"s",left:"e"},function(e,o){t=void 0!==s.model.attributes.params["padding_"+o]&&""!==s.model.attributes.params["padding_"+o]?s.model.attributes.params["padding_"+o]:i["padding_"+o],(r=void 0!==t&&-1!==t.indexOf("%"))&&(t=l/100*parseFloat(t),"top"===o||"bottom"===o?a.find(".fusion-container-padding-"+o).css("height",t):a.find(".fusion-container-padding-"+o).css("width",t),"top"===o&&t<20&&a.find(".fusion-container-margin-top, .fusion-container-padding-top").addClass("fusion-overlap")),a.find(".fusion-container-padding-"+o).css("display","block"),"top"===o||"bottom"===o?a.find(".fusion-container-padding-"+o).height(t):a.find(".fusion-container-padding-"+o).width(t),a.find(".fusion-container-padding-"+o).resizable({handles:e,minHeight:0,minWidth:0,create:function(){"top"===o&&(parseInt(t,10)<20&&!r?a.find(".fusion-container-margin-top, .fusion-container-padding-top").addClass("fusion-overlap"):a.find(".fusion-container-margin-top, .fusion-container-padding-top").removeClass("fusion-overlap"))},resize:function(e,t){var i="top"===o||"bottom"===o?"height":"width";r&&(t.size[i]=Math.round(t.size[i]/u)*u),jQuery(t.element).addClass("active"),jQuery(t.element).closest(".fusion-builder-container").addClass("active"),n=(n=t.size[i])<0?0:n,n+="px",r&&(n=0===parseFloat(n)?"0%":Math.round(parseFloat(parseFloat(n)/(l/100)))+"%"),"top"===o&&(t.size.height<20?(jQuery(t.element).addClass("fusion-overlap"),a.find(".fusion-container-margin-top").addClass("fusion-overlap")):(jQuery(t.element).removeClass("fusion-overlap"),a.find(".fusion-container-margin-top").removeClass("fusion-overlap"))),a.find(".fusion-fullwidth").css("padding-"+o,n),jQuery(t.element).find(".fusion-spacing-tooltip, .fusion-column-spacing").addClass("active"),jQuery(t.element).find(".fusion-spacing-tooltip").text(n),s.updateDragSettings("#padding_"+o,n)},stop:function(e,t){jQuery(t.element).removeClass("active"),jQuery(t.element).closest(".fusion-builder-container").removeClass("active"),jQuery(t.element).closest(".fusion-builder-container").find(".fusion-column-spacing .ui-resizable").length&&jQuery(t.element).closest(".fusion-builder-container").find(".fusion-column-spacing .ui-resizable").resizable("destroy")}})}))},destroyResizable:function(){this.destroyMarginResizable(),this.destroyPaddingResizable()},destroyMarginResizable:function(){var e=this.$el.find(".fusion-container-margin-top, .fusion-container-margin-bottom");jQuery.each(e,function(e,t){jQuery(t).hasClass("ui-resizable")&&(jQuery(t).resizable("destroy"),jQuery(t).hide())})},destroyPaddingResizable:function(){var e=this.$el.find(".fusion-container-padding-top, .fusion-container-padding-right, .fusion-container-padding-bottom, .fusion-container-padding-left");jQuery.each(e,function(e,t){jQuery(t).hasClass("ui-resizable")&&(jQuery(t).resizable("destroy"),jQuery(t).hide())})},patcherFilter:function(e){var t=[];return _.each(e,function(e){"removeElement"===e.action?void 0!==e.element.attributes&&-1!==e.element.attributes.class.indexOf("fusion-container-spacing")||t.push(e):"addElement"===e.action&&-1!==e.element.attributes.class.indexOf("fusion-container-spacing")||t.push(e)}),t},renameContainer:function(e){var t,i,o;if(13==(e.keyCode||e.which))return e.preventDefault(),this.$el.find(".fusion-builder-section-name").blur(),!1;o=fusionBuilderText.edited+" "+fusionAllElements[this.model.get("element_type")].name+" "+fusionBuilderText.element,t=this.model,i=this.$el.find(".fusion-builder-section-name"),clearTimeout(this.typingTimer),this.typingTimer=setTimeout(function(){t.attributes.params.admin_label=i.val(),FusionEvents.trigger("fusion-content-changed"),FusionEvents.trigger("fusion-history-save-step",o)},this.doneTypingInterval)},toggleContainer:function(e){var t,i=jQuery(e.currentTarget);e&&e.preventDefault(),this.$el.toggleClass("fusion-builder-section-folded"),i.find("span").toggleClass("fusiona-caret-up").toggleClass("fusiona-caret-down"),this.$el.hasClass("fusion-builder-section-folded")?this.model.attributes.params.admin_toggled="yes":this.model.attributes.params.admin_toggled="no",t=fusionBuilderText.edited+" "+fusionAllElements[this.model.get("element_type")].name+" "+fusionBuilderText.element,FusionEvents.trigger("fusion-content-changed"),FusionEvents.trigger("fusion-history-save-step",t)},scrollHighlight:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-one-page-text-link"),t=this.$el;setTimeout(function(){e.length&&"function"==typeof e.fusion_scroll_to_anchor_target&&e.attr("href","#fusion-container-"+this.model.get("cid")).fusion_scroll_to_anchor_target(15),t.addClass("fusion-active-highlight"),setTimeout(function(){t.removeClass("fusion-active-highlight")},6e3)},10)},publish:function(e){var t=jQuery(e.currentTarget).data("cid"),i=FusionPageBuilderViewManager.getView(t),o=i.model.get("params");FusionApp.confirmationPopup({title:fusionBuilderText.publish_container,content:fusionBuilderText.publish_confirmation_text,actions:[{label:fusionBuilderText.no,classes:"no",callback:function(){FusionApp.confirmationPopup({action:"hide"})}},{label:fusionBuilderText.yes,classes:"yes",callback:function(){o.status="published",i.model.set("params",o),i.$el.find('a[data-cid="'+t+'"].fusion-builder-publish-tooltip').remove(),FusionEvents.trigger("fusion-history-turn-on-tracking"),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.container_published),FusionEvents.trigger("fusion-content-changed"),FusionApp.confirmationPopup({action:"hide"})}}]})},unglobalize:function(e){var t=jQuery(e.currentTarget).data("cid"),i=FusionPageBuilderViewManager.getView(t),o=i.model.get("params");e.preventDefault(),FusionApp.confirmationPopup({title:fusionBuilderText.remove_global,content:fusionBuilderText.are_you_sure_you_want_to_remove_global,actions:[{label:fusionBuilderText.no,classes:"no",callback:function(){FusionApp.confirmationPopup({action:"hide"})}},{label:fusionBuilderText.yes,classes:"yes",callback:function(){delete o.fusion_global,i.model.set("params",o),i.$el.removeClass("fusion-global-container fusion-global-column fusion-global-nested-row fusion-global-element fusion-global-parent-element"),i.$el.find('a[data-cid="'+t+'"].fusion-builder-unglobal-tooltip').remove(),i.$el.removeAttr("fusion-global-layout"),FusionEvents.trigger("fusion-history-turn-on-tracking"),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.removed_global),FusionEvents.trigger("fusion-content-changed"),FusionApp.confirmationPopup({action:"hide"})}}]})}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ContextMenuView=window.wp.Backbone.View.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-context-menu").html()),className:"fusion-builder-context-menu",events:{'click [data-action="edit"]':"editTrigger",'click [data-action="save"]':"saveTrigger",'click [data-action="clone"]':"cloneTrigger",'click [data-action="remove"]':"removeTrigger",'click [data-action="copy"]':"copy",'click [data-action="paste-before"]':"pasteBefore",'click [data-action="paste-after"]':"pasteAfter",'click [data-action="paste-start"]':"pasteStart",'click [data-action="paste-end"]':"pasteEnd"},initialize:function(){this.copyData={data:{type:!1,content:!1}},this.getCopy(),this.elWidth=130,this.elHeight=257},render:function(){var e=this.model.event.pageX,t=this.model.event.pageY;return this.$el.html(this.template(jQuery.extend(!0,this.copyData,this.model.parent.attributes))),this.model.event.pageX+this.elWidth>jQuery("#fb-preview").width()&&(e=jQuery("#fb-preview").width()-this.elWidth),this.model.event.pageY+this.elHeight>jQuery(jQuery("#fb-preview")[0].contentWindow.document).height()&&(t=jQuery(jQuery("#fb-preview")[0].contentWindow.document).height()-this.elHeight),this.$el.css({top:t+"px",left:e+"px"}),this},editTrigger:function(e){"fusion_builder_row_inner"===this.model.parent.attributes.element_type?FusionPageBuilderApp.wireframeActive?this.model.parentView.editNestedColumn(e):this.model.parentView.editRow(e):this.model.parentView.settings(e)},saveTrigger:function(e){this.model.parentView.openLibrary(e)},cloneTrigger:function(e){switch(this.model.parent.attributes.element_type){case"fusion_builder_container":this.model.parentView.cloneContainer(e);break;case"fusion_builder_column_inner":case"fusion_builder_column":this.model.parentView.cloneColumn(e);break;case"fusion_builder_row_inner":this.model.parentView.cloneNestedRow(e);break;default:this.model.parentView.cloneElement(e)}},removeTrigger:function(e){switch(this.model.parent.attributes.element_type){case"fusion_builder_container":this.model.parentView.removeContainer(e);break;case"fusion_builder_column_inner":case"fusion_builder_column":this.model.parentView.removeColumn(e);break;case"fusion_builder_row_inner":this.model.parentView.removeRow(e);break;default:this.model.parentView.removeElement(e)}},copy:function(){var e,t=this.model.parent.attributes.element_type,i=this.model.parentView.getContent(),o=jQuery("<textarea>");jQuery("body").append(o),o.val(i).select(),document.execCommand("copy"),o.remove(),e={type:t,content:i},this.storeCopy(e)},storeCopy:function(e){"undefined"!=typeof Storage&&(localStorage.setItem("fusionCopyContent",e.content),localStorage.setItem("fusionCopyType",e.type),this.getCopy())},getCopy:function(){"undefined"!=typeof Storage&&localStorage.getItem("fusionCopyContent")&&(this.copyData.data.content=localStorage.getItem("fusionCopyContent"),this.copyData.data.type=localStorage.getItem("fusionCopyType"))},pasteAfter:function(){this.paste("after")},pasteBefore:function(){this.paste("before")},pasteStart:function(){this.paste("start")},pasteEnd:function(){this.paste("end")},paste:function(e){var t,i,o,n=this.copyData.data,a=n.type,s=n.content,r=FusionPageBuilderApp.getElementType(a),l=!1;"after"===e||"before"===e?(t=this.model.parent.attributes.parent,l=this.model.parentView.$el,"fusion_builder_container"===this.model.parent.attributes.type&&(t=this.model.parent.attributes.cid,FusionPageBuilderApp.targetContainerCID=this.model.parent.attributes.cid)):(t=this.model.parent.attributes.cid,l=!1,"fusion_builder_container"===this.model.parent.attributes.type&&(t=this.model.parentView.$el.find(".fusion-builder-row-container").first().data("cid"))),FusionPageBuilderApp.shortcodesToBuilder(s,t,!1,!1,l,e),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.pasted+" "+fusionAllElements[a].name+" "+fusionBuilderText.element),FusionEvents.trigger("fusion-content-changed"),"fusion_builder_column"!==a&&"fusion_builder_column_inner"!==a||(o=FusionPageBuilderViewManager.getView(t))&&(o.createVirtualRows(),o.updateColumnsPreview()),"child_element"===r&&("after"===e||"before"===e?(i=FusionPageBuilderViewManager.getView(t)).render():this.model.parentView.render()),"element"!==r&&"parent_element"!==r||(i=FusionPageBuilderViewManager.getView(t))&&i._equalHeights(i.model.attributes.parent),window.fusionGlobalManager.handleMultiGlobal({currentModel:this.model.parentView.model,handleType:"save",attributes:this.model.parentView.model})},removeMenu:function(e){e&&e.preventDefault(),FusionPageBuilderApp.contextMenuView=!1,this.remove()}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ContextMenuInlineView=window.wp.Backbone.View.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-context-menu-inline").html()),className:"fusion-builder-context-menu fusion-builder-inline-context-menu",events:{'click [data-action="edit"]':"editShortcodeInline",'click [data-action="remove-node"]':"removeNode",'click [data-action="remove-style"]':"removeStyle"},initialize:function(){this.elWidth=105,this.elHeight=36},render:function(){var e=this.model.event.pageX,t=this.model.event.pageY,i=this.model.$target.find(" > *"),o=i.offset(),n=this;return t=o.top-this.elHeight-20,e=o.left+(i.width()-this.elWidth)/2,this.$el.html(this.template(this.model.attributes)),this.$el.css({top:t+"px",left:e+"px"}),setTimeout(function(){n.$el.addClass("fusion-builder-inline-context-menu-loaded")},50),this},editShortcodeInline:function(e){e&&e.preventDefault(),FusionPageBuilderApp.inlineEditorHelpers.getInlineElementSettings(this.model)},removeNode:function(e){var t,i,o,n,a=this.model.parentView.model.get("params");e&&e.preventDefault(),t=this.model.$target.closest(".fusion-live-editable"),this.model.$target.remove(),i=void 0!==(n=FusionPageBuilderApp.inlineEditors.getEditor(t.data("medium-editor-editor-index")))?n.getContent():t.html(),o=t.data("param"),i=i.replace(/&quot;/g,"'"),i=FusionPageBuilderApp.htmlToShortcode(i,this.model.parentView.model.get("cid")),a[o]=i,this.model.parentView.model.set("params",a),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.deleted+" "+fusionAllElements[this.model.get("element_type")].name+" "+fusionBuilderText.element)},removeStyle:function(e){e&&e.preventDefault(),FusionPageBuilderApp.inlineEditorHelpers.removeStyle(this.model),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.deleted+" "+fusionAllElements[this.model.get("element_type")].name+" "+fusionBuilderText.element)},removeMenu:function(e){e&&e.preventDefault(),FusionPageBuilderApp.contextMenuView=!1,this.remove()}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ElementView=FusionPageBuilder.BaseView.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-element-template").html()),className:"fusion-builder-live-element fusion-builder-data-cid",events:{"click .fusion-builder-remove":"removeElement","click .fusion-builder-clone":"cloneElement","click .fusion-builder-settings":"settings","click .fusion-builder-container-save":"openLibrary","click .fusion-builder-element-save":"openLibrary","click .fusion-builder-element-content a:not(.fusion-lightbox)":"disableLink","click .fusion-builder-element-drag":"preventDefault"},initialize:function(){var e;this.model.inlineCollection=new FusionPageBuilder.Collection,e=this.model.get("element_type"),this.renderedYet=FusionPageBuilderApp.reRenderElements,this.listenTo(FusionEvents,"fusion-view-update",this.reRender),this.listenTo(FusionEvents,"fusion-view-update-"+this.model.get("cid"),this.reRender),jQuery("#tmpl-"+this.model.attributes.element_type+"-shortcode").length?(this.model.set("noTemplate",!1),this.elementTemplate=FusionPageBuilder.template(jQuery("#tmpl-"+this.model.attributes.element_type+"-shortcode").html())):(this.model.set("noTemplate",!0),this.elementTemplate=FusionPageBuilder.template(jQuery("#tmpl-fusion_shortcode-shortcode").html())),this.model.set("editLabel",this.getEditLabel()),this.elementIsCloning=!1,this.$el.attr("data-cid",this.model.get("cid")),this.$el.attr("data-type",e),-1!==jQuery.inArray(e,["fusion_button","fusion_fontawesome","fusion_imageframe","fusion_text"])&&this.$el.addClass("fusion-builder-live-element-inline"),void 0!==this.model.attributes.params&&void 0!==this.model.attributes.params.fusion_global&&(this.$el.attr("fusion-global-layout",this.model.attributes.params.fusion_global),this.$el.removeClass("fusion-global-element").addClass("fusion-global-element")),this._refreshJs=_.debounce(_.bind(this.refreshJs,this),300),this._triggerCallback=_.debounce(_.bind(this.triggerCallback,this),200),this._updateResponsiveTypography=_.debounce(_.bind(this.updateResponsiveTypography,this),200),this._triggerColumn=_.debounce(_.bind(this.triggerColumn,this),300),this.listenTo(FusionEvents,"fusion-wireframe-toggle",this.wireFrameToggled),this.needsQuery(),this.baseInit(),this.onInit(),this.activeInlineEditing=!1,this.autoSelectEditor=!1,this.model.set("inlineEditors",[])},render:function(){var e=this;return FusionPageBuilderApp.disableDocumentWrite(),this.beforeRender(),this.$el.html(this.template(this.model.attributes)),this.renderContent(),this.renderedYet&&(this._refreshJs(),this.triggerColumn(),setTimeout(function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-typography-reset",e.model.get("cid")),jQuery("#fb-preview").width()<800&&e._updateResponsiveTypography()},100)),this.onRender(),this.needsGoogle(),this.renderedYet=!0,FusionPageBuilderApp.enableDocumentWrite(),setTimeout(function(){e.droppableElement(),e.activeInlineEditing||(FusionPageBuilderApp.inlineEditorHelpers.liveEditorEvent(e),e.activeInlineEditing=!1),FusionPageBuilderApp.inlineEditorHelpers.inlineEditorAllowed(e.model.get("element_type"))&&e.renderInlineSettings()},100),this},reRender:function(e){var t=this,i=fusionAllElements[this.model.get("element_type")];e&&"object"==typeof e&&e.preventDefault(),void 0===i.callback||void 0!==this.model.get("query_data")?(this.patchView(e),setTimeout(function(){t.droppableElement(),t.activeInlineEditing||FusionPageBuilderApp.inlineEditorHelpers.liveEditorEvent(t),t.activeInlineEditing=!1},100)):this.triggerQuery(i.callback)},needsQuery:function(){var e,t=fusionAllElements[this.model.get("element_type")];void 0!==t.callback&&void 0===this.model.get("query_data")&&void 0===this.model.get("markup")&&(e=t.callback,this.triggerQuery(e)),this.model.get("noTemplate")&&void 0===this.model.get("markup")&&this.model.set("shortcode",FusionPageBuilderApp.generateElementShortcode(this.$el))},triggerQuery:function(e){e.args=void 0===e.args?"":e.args,e.ajax=void 0!==e.ajax&&e.ajax,e.action=void 0!==e.action&&e.action,e.cid=this.model.get("cid"),e.ajax&&("generated_element"!==this.model.get("type")&&(FusionPageBuilderApp.shortcodeAjax=!0),this._triggerCallback(!1,e))},needsGoogle:function(){var t,i,o=":regular",e=this.$el.find("[data-fusion-google-font]");e.length&&e.each(function(){var e=jQuery(this).attr("data-fusion-google-font");e=e.replace(/"/g,"&quot"),t=e,t+=o,i=(t+="").replace(/:/g,"").replace(/"/g,"").replace(/'/g,"").replace(/ /g,"").replace(/,/,""),jQuery("#fb-preview").contents().find("#"+i).length||jQuery("#fb-preview").contents().find("head").append('<script id="'+i+'">WebFont.load({google:{families:["'+t+'"]},context:FusionApp.previewWindow,active: function(){ jQuery( window ).trigger( "fusion-font-loaded"); },});<\/script>')})},triggerColumn:function(e){var t=void 0===e?this.model.attributes.parent:e;setTimeout(function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-content-changed",t)},300)},getTemplateAtts:function(){var e=fusionAllElements[this.model.get("element_type")],t=jQuery.extend(!0,{},this.model.attributes),i=jQuery.extend(!0,{},this.model.get("params")),o={},n={};return e&&void 0!==e.defaults&&(o=jQuery.extend(!0,{},e.defaults,_.fusionCleanParameters(i)),void 0!==e.extras&&(n=jQuery.extend(!0,{},e.extras))),t.values=o,t.extras=n,t=this.filterTemplateAtts(t)},renderContent:function(){var e,t=this.$el.find(".fusion-builder-element-content"),i=fusionAllElements[this.model.get("element_type")];if(this.renderWireframePreview(),void 0!==i.callback&&void 0===this.model.get("query_data")&&!0===i.callback.ajax)return this.renderedYet||void 0===this.model.get("markup")?(this.addLoadingOverlay(),void this.triggerQuery(i.callback)):(e=this.model.get("markup"),void t.html(e.output+'<div class="fusion-clearfix"></div>'));t.html(this.getTemplate())},removeElement:function(e,t){var i,o=this.model.get("parent"),n=FusionPageBuilderElements.find(function(e){return e.get("cid")==o});e&&(e.preventDefault(),FusionEvents.trigger("fusion-content-changed"),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.deleted+" "+fusionAllElements[this.model.get("element_type")].name+" "+fusionBuilderText.element)),this.beforeRemove(),FusionApp.deleteScripts(this.model.get("cid")),FusionPageBuilderApp.inlineEditorHelpers.removeLiveEditors(this),FusionPageBuilderViewManager.removeView(this.model.get("cid")),this.model.destroy(),FusionEvents.trigger("fusion-element-removed",this.model.get("cid")),this.triggerColumn(o),this.remove(),n.children.length&&void 0===t&&(i={currentModel:n.children.models[0],handleType:"save",attributes:n.children.models[0].attributes},fusionGlobalManager.handleMultiGlobal(i))},cloneElement:function(e){var t,i,o;e&&e.preventDefault(),!0!==this.elementIsCloning&&(this.elementIsCloning=!0,(t=jQuery.extend(!0,{},this.model.attributes)).created="manually",t.cid=FusionPageBuilderViewManager.generateCid(),t.targetElement=this.$el,t.at_index=FusionPageBuilderApp.getCollectionIndex(this.$el),"undefined"!==t.from&&delete t.from,i=FusionPageBuilderApp.collection.add(t),this.elementIsCloning=!1,o={currentModel:i,handleType:"save",attributes:i.attributes},fusionGlobalManager.handleMultiGlobal(o),e&&(FusionEvents.trigger("fusion-content-changed"),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.cloned+" "+fusionAllElements[this.model.get("element_type")].name+" "+fusionBuilderText.element)),this.triggerColumn())},getContent:function(){return FusionPageBuilderApp.generateElementShortcode(this.$el,!1)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ParentElementView=FusionPageBuilder.BaseView.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-element-parent-template").html()),className:"fusion-builder-live-element fusion-builder-data-cid",events:{"click .fusion-builder-remove":"removeElement","click .fusion-builder-clone":"cloneElement","click .fusion-builder-settings":"settings","click .fusion-builder-add-child":"addChildElement","click .fusion-builder-element-save":"openLibrary","click a":"disableLink","click .fusion-builder-element-drag":"preventDefault"},initialize:function(){this.model.children=new FusionPageBuilder.Collection,this.listenTo(this.model.children,"add",this.addChildView),this.emptyPlaceholderText=void 0!==fusionAllElements[this.model.get("element_type")]?fusionBuilderText.empty_parent.replace("%s",fusionAllElements[this.model.get("element_type")].name):"",this.listenTo(FusionEvents,"fusion-view-update",this.reRender),this.listenTo(FusionEvents,"fusion-view-update-"+this.model.get("cid"),this.reRender),this.listenTo(FusionEvents,"fusion-view-update-"+this.model.get("element_type"),this.reRender),this._triggerCallback=_.debounce(_.bind(this.triggerCallback,this),200),jQuery("#tmpl-"+this.model.attributes.element_type+"-shortcode").length?(this.model.set("noTemplate",!1),this.elementTemplate=FusionPageBuilder.template(jQuery("#tmpl-"+this.model.attributes.element_type+"-shortcode").html())):(this.model.set("noTemplate",!0),this.elementTemplate=FusionPageBuilder.template(jQuery("#tmpl-fusion_shortcode-shortcode").html())),this.elementIsCloning=!1,this.mouseDown=!1,this.fetchIds=[],this.childIds=[],this.updateGallery=!1,this.model.set("editLabel",this.getEditLabel()),this.$el.attr("data-cid",this.model.get("cid")),this.$el.attr("data-type",this.model.get("element_type")),void 0!==this.model.attributes.params&&void 0!==this.model.attributes.params.fusion_global&&(this.$el.attr("fusion-global-layout",this.model.attributes.params.fusion_global),this.$el.removeClass("fusion-global-parent-element").addClass("fusion-global-parent-element")),this.baseInit(),this.renderedYet=FusionPageBuilderApp.reRenderElements,this._refreshJs=_.debounce(_.bind(this.refreshJs,this),300),this.listenTo(FusionEvents,"fusion-wireframe-toggle",this.wireFrameToggled),this.model.set("sortable",void 0===fusionAllElements[this.model.get("element_type")].sortable||fusionAllElements[this.model.get("element_type")].sortable),this.onInit()},render:function(e){var t=this;return this.$el.html(this.template(this.model.attributes)),this.renderContent(),"string"!=typeof e&&"ajax"!==e&&this.generateChildElements(),this.model.get("noTemplate")||setTimeout(function(){t.sortableChildren()},100),this.renderedYet&&this._refreshJs(),this.onRender(),this.renderedYet=!0,setTimeout(function(){t.droppableElement()},100),this},sortableChildren:function(){var a=this,e=a.$el.find(".fusion-child-element");!1!==this.model.get("sortable")&&(e.on("mousedown",function(e){jQuery(e.originalEvent.target).hasClass("fusion-live-editable")||(a.mouseDown=!0)}),e.on("mousemove",function(){a.mouseDown&&e.css({overflow:"auto"})}),e.on("mouseup",function(){a.mouseDown=!1,e.css({overflow:""})}),this.$el.find(".fusion-builder-element-content").sortable({items:".fusion-builder-live-child-element",tolerance:"pointer",appendTo:e,containment:e,cursor:"grabbing",cancel:".fusion-live-editable",zIndex:99999999,helper:"clone",scroll:!1,revert:100,start:function(){FusionPageBuilderApp.$el.addClass("fusion-builder-dragging"),e.addClass("fusion-parent-sortable")},update:function(e,t){var i,o=FusionPageBuilderViewManager.getView(t.item.data("cid")),n=t.item.parent().children(".fusion-builder-live-child-element").index(t.item);a.updateElementContent(),FusionPageBuilderApp.onDropCollectionUpdate(o.model,n,a.model.get("cid")),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.moved+" "+fusionAllElements[o.model.get("element_type")].name+" "+fusionBuilderText.element),i={currentModel:a.model,handleType:"save",attributes:a.model.attributes},fusionGlobalManager.handleMultiGlobal(i),FusionEvents.trigger("fusion-content-changed")},stop:function(){a.mouseDown=!1,e.css({overflow:""}),e.removeClass("fusion-parent-sortable"),FusionPageBuilderApp.$el.removeClass("fusion-builder-dragging")}}))},updateElementContent:function(){var e,t="";this.model.get("noTemplate")?(e=FusionPageBuilderViewManager.getChildViews(this.model.get("cid")),_.each(e,function(e){t+=e.getContent()})):this.$el.find(".fusion-builder-live-child-element").each(function(){var e=jQuery(this);t+=FusionPageBuilderApp.generateElementShortcode(e,!1)}),this.model.attributes.params.element_content=t},getTemplateAtts:function(){var e=jQuery.extend(!0,{},this.model.attributes),t=jQuery.extend(!0,{},this.model.get("params")),i={},o={},n=fusionAllElements[this.model.get("element_type")];if(void 0!==this.elementTemplate)return n&&void 0!==n.defaults&&(i=jQuery.extend(!0,{},n.defaults,_.fusionCleanParameters(t)),void 0!==n.extras&&(o=jQuery.extend(!0,{},n.extras))),e.values=i,e.extras=o,e.thisModel=this.model,e=this.filterTemplateAtts(e)},renderContent:function(){void 0!==this.elementTemplate&&this.$el.find(".fusion-builder-element-content").html(this.getTemplate()),this.renderWireframePreview()},removeChildren:function(e){var t=FusionPageBuilderViewManager.getChildViews(this.model.get("cid"));e&&e.preventDefault(),_.each(t,function(e){e.removeElement("","Automated")})},removeElement:function(e,t){var i,o=this.model.get("parent"),n=FusionPageBuilderElements.find(function(e){return e.get("cid")==o});e&&e.preventDefault(),this.beforeRemove(),this.removeChildren(),FusionPageBuilderViewManager.removeView(this.model.get("cid")),FusionEvents.trigger("fusion-element-removed",this.model.get("cid")),this.model.destroy(),this.remove(),e&&FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.deleted+" "+fusionAllElements[this.model.get("element_type")].name+" "+fusionBuilderText.element),n.children.length&&void 0===t&&(i={currentModel:n.children.models[0],handleType:"save",attributes:n.children.models[0].attributes},fusionGlobalManager.handleMultiGlobal(i))},cloneElement:function(e){var t,i,o;e&&e.preventDefault(),!0!==this.elementIsCloning&&(this.elementIsCloning=!0,(t=jQuery.extend(!0,{},this.model.attributes)).created="manually",t.cid=FusionPageBuilderViewManager.generateCid(),t.targetElement=this.$el,"undefined"!==t.from&&delete t.from,i=FusionPageBuilderApp.collection.add(t),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.cloned+" "+fusionAllElements[this.model.get("element_type")].name+" "+fusionBuilderText.element),this.elementIsCloning=!1,o={currentModel:i,handleType:"save",attributes:i.attributes},fusionGlobalManager.handleMultiGlobal(o),e&&FusionEvents.trigger("fusion-content-changed"))},noTemplateAjaxUpdate:function(){this.updateElementContent(),FusionApp.callback.fusion_do_shortcode(this.model.get("cid"),this.getContent())},generateChildElements:function(h){var b=this,v=this.model.get("params"),e=this.model.attributes.params.element_content,t=jQuery.map(fusionMultiElements,function(e,t){return e}).join("|"),i=window.wp.shortcode.regexp(t),y=FusionPageBuilderApp.regExpShortcode(t),w=!1,x=void 0!==e&&e.match(i),F={};this.removeChildren(),b.model.children.reset(null),e&&(_.each(x,function(e,t){var i,o,n,a,s,r,l,u=e.match(y),d=u[2],c=""!==u[3]?window.wp.shortcode.attrs(u[3]):"",g=u[5],p=(FusionPageBuilderViewManager.generateCid(),{params:{}}),f="div",m=void 0!==fusionAllElements[d].allow_generator?fusionAllElements[d].allow_generator:"";if(void 0!==fusionAllElements[d].tag_name&&(f=fusionAllElements[d].tag_name),w=t+1===x.length,i={type:"element",element_type:d,cid:FusionPageBuilderViewManager.generateCid(),view:b,created:"auto",multi:"multi_element_child",child_element:"true",allow_generator:m,inline_editor:FusionPageBuilderApp.inlineEditorHelpers.inlineEditorAllowed(d),params:{},parent:b.model.get("cid"),tag_name:f,last:w},-1===d.indexOf("fusion_builder_")&&(void 0!==(l=FusionPageBuilderApp.extraShortcodes.byShortcode(u[0]))?i.markup=l:i.shortcode=u[0]),_.isObject(c.named)){for(o in c.named)n=o,p.params[n]=c.named[o];i=_.extend(i,p)}i.params.element_content=g,void 0!==fusionAllElements[d].selectors&&(i.selectors=jQuery.extend(!0,{},fusionAllElements[d].selectors)),void 0!==fusionAllElements[d].option_dependency&&(a=fusionAllElements[d].option_dependency,s=p.params[a],r=p.params.element_content,p.params[s]=r),!0===h&&"fusion_content_box"===moduleType&&(i.params.iconcolor="",i.params.backgroundcolor="",i.params.circlecolor="",i.params.circlebordercolor="",i.params.circlebordersize="",i.params.outercirclebordercolor="",i.params.outercirclebordersize="",i.params.animation_type=v.animation_type,i.params.animation_direction=v.animation_direction,i.params.animation_speed=v.animation_speed,i.params.link_target=v.link_target),F[i.cid]=i}),this.onGenerateChildElements(F),_.each(F,function(e){b.model.children.add([e])}))},onGenerateChildElements:function(e){},addChildElement:function(e){var t,i,o,n,a,s,r,l={},u="div";e&&e.preventDefault(),a=fusionMultiElements[this.model.get("element_type")],t=fusionAllElements[a].params,n=void 0!==fusionAllElements[a].allow_generator?fusionAllElements[a].allow_generator:"",_.each(t,function(e){i=_.isObject(e.value)?e.default:e.value,l[e.param_name]=i}),void 0!==fusionAllElements[a].tag_name&&(u=fusionAllElements[a].tag_name),o={type:"element",element_type:a,cid:FusionPageBuilderViewManager.generateCid(),view:this,created:"manually",multi:"multi_element_child",child_element:"true",params:l,allow_generator:n,inline_editor:FusionPageBuilderApp.inlineEditorHelpers.inlineEditorAllowed(a),parent:this.model.get("cid"),tag_name:u,last:!0},void 0!==fusionAllElements[a].selectors&&(o.selectors=jQuery.extend(!0,{},fusionAllElements[a].selectors)),void 0!==e&&jQuery(e.currentTarget).closest(".fusion-builder-live-child-element").length&&!FusionPageBuilderApp.wireframeActive&&(o.targetElement=jQuery(e.currentTarget).closest(".fusion-builder-live-child-element")),s=this.model.children.add([o]),this.model.get("noTemplate")&&this.noTemplateAjaxUpdate(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.added+" "+fusionAllElements[a].name+" "+fusionBuilderText.element),r={currentModel:s[0],handleType:"changeOption"},fusionGlobalManager.handleMultiGlobal(r),FusionEvents.trigger("fusion-content-changed"),this.childViewAdded()},afterPatch:function(){var e=this;this.generateChildElements(),setTimeout(function(){e.droppableElement()},100)},addChildView:function(e){var t,i={model:e,collection:FusionPageBuilderElements};t=void 0!==FusionPageBuilder[e.get("element_type")]?new(FusionPageBuilder[e.get("element_type")])(i):new FusionPageBuilder.ChildElementView(i),FusionPageBuilderViewManager.addView(e.get("cid"),t),void 0!==e.get("targetElement")?void 0===e.get("targetElementPosition")||"after"===e.get("targetElementPosition")?e.get("targetElement").after(t.render().el):e.get("targetElement").before(t.render().el):void 0===e.get("targetElementPosition")||"end"===e.get("targetElementPosition")?this.$el.find(".fusion-child-element").append(t.render().el):this.$el.find(".fusion-child-element").prepend(t.render().el),this.appendContents(t),this.updateElementContent()},childViewAdded:function(){},childViewRemoved:function(){},childViewCloned:function(){},appendContents:function(e){var i,o,t,n=this,a=e.model.get("extraAppend");if(void 0!==a){if(i=a.contents,o=a.selector,t=a.existing,"object"==typeof a.existing)return void _.each(a.existing,function(e,t){n.$el.find(o).remove(e),n.$el.find(o).append(i[t])});this.$el.find(o).remove(t),this.$el.find(o).append(i)}},delegateChildEvents:function(){var t;this.model.children.each(function(e){t=e.attributes.cid,FusionPageBuilderViewManager.getView(t).delegateEvents()})},setContent:function(e){this.model.attributes.params.element_content=e,this.render()},getContent:function(){return FusionPageBuilderApp.generateElementShortcode(this.$el,!1)},appendChildren:function(t){var i,o,n=this;this.model.children.each(function(e){i=e.attributes.cid,o=FusionPageBuilderViewManager.getView(i),n.$el.find(t).append(o.$el),o.reRender()}),this.delegateChildEvents()}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ChildElementView=FusionPageBuilder.BaseView.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-child-element-template").html()),className:"fusion-builder-live-child-element fusion-builder-data-cid",tagName:function(){return this.model.get("tag_name")},events:{"click .fusion-builder-remove-child":"removeElement","click .fusion-builder-clone-child":"cloneElement","click .fusion-builder-settings-child":"settings","click a":"disableLink"},initialize:function(){var t=this.model.get("parent"),e=FusionPageBuilderElements.find(function(e){return e.get("cid")==t});this.model.inlineCollection=new FusionPageBuilder.Collection,this._triggerCallback=_.debounce(_.bind(this.triggerCallback,this),200),this.listenTo(FusionEvents,"fusion-child-view-update",this.reRender),this.listenTo(FusionEvents,"fusion-view-update-"+this.model.get("cid"),this.reRender),this.listenTo(FusionEvents,"fusion-view-update-"+this.model.get("element_type"),this.reRender),jQuery("#tmpl-"+this.model.attributes.element_type+"-shortcode").length?(this.model.set("noTemplate",!1),this.elementTemplate=FusionPageBuilder.template(jQuery("#tmpl-"+this.model.attributes.element_type+"-shortcode").html())):(this.model.set("noTemplate",!0),this.elementTemplate=FusionPageBuilder.template(jQuery("#tmpl-fusion_shortcode-shortcode").html())),this.elementIsCloning=!1,this.model.set("editLabel",this.getEditLabel()),this._refreshJs=_.debounce(_.bind(this.refreshJs,this),300),this.$el.attr("data-cid",this.model.get("cid")),this.$el.attr("data-parent-cid",this.model.get("parent")),this.$el.attr("data-element-type",this.model.get("element_type")),void 0!==this.model.attributes.params&&void 0!==this.model.attributes.params.fusion_global&&(this.$el.attr("fusion-global-layout",this.model.attributes.params.fusion_global),this.$el.removeClass("fusion-global-child-element").addClass("fusion-global-child-element")),e.get("sortable")||this.$el.attr("data-fusion-no-dragging",!0),this.model.set("sortable",e.get("sortable")),this.baseInit(),this.onInit(),this.activeInlineEditing=!1,this.autoSelectEditor=!1,this.model.set("inlineEditors",[])},render:function(){var e=this;return this.$el.html(this.template(this.model.attributes)),this.renderContent(),void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),void 0!==this.model.attributes.extraAppend&&this.updateExtraContents(),this.$el.find(".fusion-builder-module-controls-container").on("hover",_.bind(this.changeParentContainerControlsZindex,this)),this.onRender(),this._refreshJs(),setTimeout(function(){e.activeInlineEditing||(FusionPageBuilderApp.inlineEditorHelpers.liveEditorEvent(e),e.activeInlineEditing=!1)},100),this},afterPatch:function(){this._refreshJs()},changeParentContainerControlsZindex:function(e){"mouseenter"===e.type?this.$el.closest(".fusion-builder-container").find(".fusion-builder-module-controls-container-wrapper").css("z-index","0"):this.$el.closest(".fusion-builder-container").find(".fusion-builder-module-controls-container-wrapper").removeAttr("style")},updateExtraContents:function(){var i=this,e=this.model.get("extraAppend"),o=e.contents,t=e.existing;"object"==typeof e.existing?_.each(t,function(e,t){i.updateSingleExtraContent(e,o[t])}):this.updateSingleExtraContent(t,o),void 0!==this.model.attributes.extraAppend.trigger&&this.$el.find('a[id="'+this.model.attributes.extraAppend.trigger.replace("#","")+'"]').closest("li").trigger("click")},updateSingleExtraContent:function(e,t){this.$el.closest(".fusion-builder-live-element").find(e).length&&this.$el.closest(".fusion-builder-live-element").find(e).replaceWith(FusionPageBuilderApp.renderContent(t,this.model.get("cid"),this.model.get("parent")))},removeExtraContents:function(){var e,t,i,o=this.$el.closest(".fusion-builder-live-element");void 0!==this.model.attributes.extraAppend&&void 0!==this.model.attributes.extraAppend.existing&&((e=o.find(this.model.attributes.extraAppend.existing)).hasClass("active")&&"fusion_tab"===this.model.get("element_type")&&(i=e.siblings().first()).length&&(i.addClass("active in"),t=i.attr("id"),o.find('[href="#'+t+'"]').closest(".fusion-builder-live-child-element").addClass("active")),e.remove())},setElementAttributes:function(i,e){var o;"object"==typeof e&&i.length&&_.each(e,function(e,t){"class"===t?i.attr("class",e):"id"===t?i.attr("id",e):"style"===t?i.attr("style",e):-1!==t.indexOf("data")&&(o=t.replace("data-",""),i.data(o)&&(i=jQuery("#fb-preview")[0].contentWindow.jQuery(i)).data(o,e),t=t.replace(/_/g,"-"),i.attr(t,e))})},getTemplateAtts:function(){var e,t=jQuery.extend(!0,{},this.model.attributes),i=jQuery.extend(!0,{},this.model.get("params")),o={},n={},a=fusionAllElements[this.model.get("element_type")],s=this.model.get("parent"),r={},l="";if(void 0!==this.elementTemplate)return(e=FusionPageBuilderElements.find(function(e){return e.get("cid")==s}))&&void 0!==fusionAllElements[e.get("element_type")]&&(r=jQuery.extend(!0,{},fusionAllElements[e.get("element_type")].defaults,_.fusionCleanParameters(e.get("params")))),a&&void 0!==a.defaults&&(void 0!==r.element_content&&(l=r.element_content,delete r.element_content),o=jQuery.extend(!0,{},a.defaults,r,_.fusionCleanParameters(i)),r.element_content=l,void 0!==a.extras&&(n=jQuery.extend(!0,{},a.extras))),t.parentValues=r,t.values=o,t.extras=n,t.thisModel=this.model,t.parentModel=e,t=this.filterTemplateAtts(t)},renderContent:function(){void 0===this.elementTemplate?this.$el.find(".fusion-builder-child-element-content").html("no template found"):this.$el.find(".fusion-builder-child-element-content").html(this.getTemplate())},removeElement:function(e,t){var i,o=this.model.get("parent"),n=FusionPageBuilderViewManager.getView(this.model.get("parent")),a=FusionPageBuilderElements.find(function(e){return e.get("cid")==o});e&&e.preventDefault(),this.beforeRemove(),this.removeExtraContents(),FusionPageBuilderViewManager.removeView(this.model.get("cid")),FusionPageBuilderApp.inlineEditorHelpers.removeLiveEditors(this),this.model.destroy(),FusionEvents.trigger("fusion-element-removed",this.model.get("cid")),this.remove(),e&&(this.forceUpdateParent(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.deleted+" "+fusionAllElements[this.model.get("element_type")].name+" "+fusionBuilderText.element)),a.children.length&&void 0===t&&(i={currentModel:a.children.models[0],handleType:"save",attributes:a.children.models[0].attributes},fusionGlobalManager.handleMultiGlobal(i)),e&&n.childViewCloned()},forceUpdateParent:function(){var e=FusionPageBuilderViewManager.getView(this.model.get("parent"));void 0!==e&&(e.updateElementContent(),e.refreshJs()),this.ajaxUpdateParent(e)},ajaxUpdateParent:function(e){(e=void 0===e?FusionPageBuilderViewManager.getView(this.model.get("parent")):e).model.get("noTemplate")&&e.noTemplateAjaxUpdate()},cloneElement:function(e){var t,i,o,n,a=FusionPageBuilderViewManager.getView(this.model.get("parent")),s=this;i=this.collection.find(function(e){return e.get("cid")==s.model.get("parent")}),e&&e.preventDefault(),!0!==this.elementIsCloning&&(this.elementIsCloning=!0,(t=jQuery.extend(!0,{},this.model.attributes)).created="manually",t.cid=FusionPageBuilderViewManager.generateCid(),t.targetElement=this.$el,t.at_index=FusionPageBuilderApp.getCollectionIndex(this.$el),"undefined"!==t.from&&delete t.from,FusionPageBuilderApp.addToChildCollection(t),o=i.children.find(function(e){return e.get("cid")==t.cid}),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.cloned+" "+fusionAllElements[this.model.get("element_type")].name+" "+fusionBuilderText.element),n={currentModel:o,handleType:"save",attributes:o.attributes},fusionGlobalManager.handleMultiGlobal(n),this.elementIsCloning=!1,this.forceUpdateParent(),e&&FusionEvents.trigger("fusion-content-changed"),a.childViewCloned())},getContent:function(){return FusionPageBuilderApp.generateElementShortcode(this.$el,!1)},isFirstChild:function(){var t=this;return 0===FusionPageBuilderApp.collection.find(function(e){return e.get("cid")===t.model.get("parent")}).children.indexOf(this.model)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.RowView=FusionPageBuilder.BaseRowView.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-row-template").html()),className:"fusion_builder_row",events:{"click .fusion-builder-insert-column":"displayColumnsOptions"},initialize:function(){this.model.set("rows",{}),this.model.children=new FusionPageBuilder.Collection,this.listenTo(this.model.children,"add",this.addChildView),this.listenTo(FusionEvents,"fusion-builder-loaded",this.updateColumnsPreview),this.listenTo(FusionEvents,"fusion-wireframe-toggle",this.wireFrameToggled)},render:function(){var e=this;return this.$el.html(this.template(this.model.attributes)),this.appendChildren(),setTimeout(function(){e.droppableColumn()},100),"manually"!==this.model.get("created")&&this.displayContainerLibrary(),this},displayColumnsOptions:function(e){var t,i;e&&e.preventDefault(),FusionPageBuilderApp.parentRowId=this.model.get("cid"),t={model:this.model,collection:this.collection},jQuery(e.currentTarget).closest(".fusion-builder-column").length&&!FusionPageBuilderApp.wireframeActive&&(t.targetElement=jQuery(e.currentTarget).closest(".fusion-builder-column")),i=new FusionPageBuilder.ColumnLibraryView(t),jQuery(i.render().el).dialog({title:"Select Column",width:FusionApp.dialog.dialogWidth,height:FusionApp.dialog.dialogHeight,draggable:!1,modal:!0,resizable:!1,dialogClass:"fusion-builder-dialog fusion-builder-large-library-dialog fusion-builder-columns-library-dialog",open:function(){FusionApp.dialog.resizeDialog()},close:function(){i.remove()}})},displayContainerLibrary:function(e){var t,i,o;e&&e.preventDefault(),FusionPageBuilderApp.parentRowId=this.model.get("cid"),o=FusionPageBuilderViewManager.getView(this.model.get("parent")),t={model:this.model,collection:this.collection},i=new FusionPageBuilder.ContainerLibraryView(t),jQuery(i.render().el).dialog({title:"Select Container",width:FusionApp.dialog.dialogWidth,height:FusionApp.dialog.dialogHeight,draggable:!1,modal:!0,resizable:!1,dialogClass:"fusion-builder-dialog fusion-builder-large-library-dialog fusion-builder-container-library-dialog",open:function(){FusionApp.dialog.resizeDialog()},close:function(){o.removeContainer(),i.remove()}})},removeRow:function(e){var t;e&&e.preventDefault(),t=FusionPageBuilderViewManager.getChildViews(this.model.get("cid")),_.each(t,function(e){e.removeColumn()}),FusionPageBuilderViewManager.removeView(this.model.get("cid")),this.model.destroy(),this.remove(),this.setRowData(),e&&FusionEvents.trigger("fusion-content-changed")},droppableColumn:function(){var s=this.$el,r=this;s&&s.find(".fusion-column-target").droppable({tolerance:"touch",hoverClass:"ui-droppable-active",accept:".fusion-builder-column",drop:function(e,t){var i,o=t.draggable.data("cid"),n=FusionPageBuilderViewManager.getView(o),a=n.model.get("parent");s.find(".fusion-builder-empty-container").after(t.draggable),i=t.draggable.parent().children(".fusion-builder-column").index(t.draggable),FusionPageBuilderApp.onDropCollectionUpdate(n.model,i,r.model.get("cid")),r.setRowData(),r.model.get("cid")!==a&&FusionPageBuilderViewManager.getView(a).setRowData(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.column+" order changed"),setTimeout(function(){n.droppableColumn()},300)}})},appendChildren:function(){var t,i,o=this;this.model.children.each(function(e){t=e.attributes.cid,i=FusionPageBuilderViewManager.getView(t),o.$el.find(".fusion-builder-row-container").append(i.$el),i.delegateEvents()})},addChildView:function(e){var t,i={model:e,collection:FusionPageBuilderElements,attributes:{"data-cid":e.get("cid")}};i.className="fusion-builder-column fusion-builder-column-outer fusion-builder-column-"+e.attributes.params.type,t=new FusionPageBuilder.ColumnView(i),this.createVirtualRows(),_.isUndefined(e.get("cloned"))||!0!==e.get("cloned")||(e.targetElement=t.$el,e.unset("cloned")),FusionPageBuilderViewManager.addView(e.get("cid"),t),_.isUndefined(e.get("targetElement"))||void 0!==e.get("from")?(void 0===e.get("targetElementPosition")||"end"===e.get("targetElementPosition")?this.$el.find(".fusion-builder-row-container").append(t.render().el):this.$el.find(".fusion-builder-row-container").prepend(t.render().el),e.unset("from")):void 0===e.get("targetElementPosition")||"after"===e.get("targetElementPosition")?e.get("targetElement").after(t.render().el):e.get("targetElement").before(t.render().el),this.updateColumnsPreview()},delegateChildEvents:function(){var t,i;this.model.children.each(function(e){t=e.attributes.cid,(i=FusionPageBuilderViewManager.getView(t)).delegateEvents(),i.delegateChildEvents(),i.droppableColumn()})},wireFrameToggled:function(){FusionPageBuilderApp.wireframeActive?this.enableSortableColumns():this.disableSortableColumns()},disableSortableColumns:function(){var e=this.$el.find(".fusion-builder-row-container");void 0!==e.sortable("instance")&&(e.enableSelection(),e.sortable("disable"))},sortableColumns:function(){var e=this.$el.find(".fusion-builder-row-container"),i=".fusion-builder-column-outer",o=this;e.sortable({cancel:".fusion-builder-column-settings, .fusion-builder-column-size, .fusion-builder-column-clone, .fusion-builder-column-save, .fusion-builder-column-remove, .fusion-builder-add-element, .column-sizes",items:i,connectWith:".fusion-builder-row-container",tolerance:"pointer",appendTo:e.parent(),helper:"clone",update:function(e,t){o.onSortUpdate(e,t)},stop:function(e,t){o.onSortStop(e,t,i)}}).disableSelection()}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,FusionPageBuilder.ElementSettingsView=window.wp.Backbone.View.extend({className:"fusion_builder_module_settings",template:FusionPageBuilder.template(jQuery("#fusion-builder-block-module-settings-template").html()),optionHasChanged:!1,events:{'click [id$="fusion_shortcodes_text_mode"]':"activateSCgenerator","change input":"optionChange","keyup input:not(.fusion-slider-input)":"optionChange","change select":"optionChange","keyup textarea":"optionChange","change textarea":"optionChange","paste textarea":"optionChangePaste","fusion-change input":"optionChange","click .upload-image-remove":"removeImage","click .option-preview-toggle":"previewToggle","click .insert-slider-video":"addSliderVideo","click .fusion-panel-shortcut:not(.dialog-more-menu-item)":"defaultPreview","click .fusion-panel-description":"showHideDescription","click #fusion-close-element-settings":"saveSettings","click .fusion-builder-go-back":"openParent"},initialize:function(){this.onSettingsCallback(),this.elementView=FusionPageBuilderViewManager.getView(this.model.get("cid")),this.loadComplete=!1,this.codeEditorOption=!1,this.changesPaused=!1,this._refreshJs=_.debounce(_.bind(this.refreshJs,this),300),void 0!==fusionAllElements[this.model.get("element_type")].has_ajax&&void 0===this.model.get("query_data")&&this.elementView.triggerAjaxCallbacks(!0),this.tabsRendered={},this.initOptions=_.debounce(_.bind(this.debouncedInitOptions,this),50),this.listenTo(FusionEvents,"fusion-tab-changed",this.initOptions),this.listenTo(FusionEvents,"fusion-inline-edited",this.forceChange),this.childSortableView=!1,this.activeStates={},this.$targetEl=void 0!==this.elementView&&this.elementView.$el,this._tempStateRemove=_.debounce(_.bind(this.tempStateRemove,this),3e3),this.parentValues=!!this.getParentValues()&&this.getParentValues(),this.$el.attr("data-cid",this.model.get("cid")),this.type="EO",this.onInit(),this.listenTo(FusionEvents,"fusion-element-removed",this.removeView),this.listenTo(FusionEvents,"fusion-preview-refreshed",this.saveSettings),this.listenTo(FusionEvents,"fusion-close-settings-"+this.model.get("cid"),this.saveSettings),this.listenTo(FusionEvents,"fusion-param-changed-"+this.model.get("cid"),this.paramChanged),"dialog"===FusionApp.preferencesData.editing_mode||"generated_element"===this.model.get("type")||this.$el.hasClass("fusion-builder-settings-chart-table-dialog")||this.$el.addClass("fusion-builder-custom-tab"),"generated_element"===this.model.get("type")&&FusionEvents.trigger("fusion-history-pause-tracking"),this.newElement=!1,void 0!==this.model.get("added")&&(this.newElement=!0)},render:function(){return this.renderOptions(),this.initOptions(),this.model.unset("added"),this.dependencies=new FusionPageBuilder.Dependencies(fusionAllElements[this.model.get("element_type")].params,this),FusionApp.dialog.dialogTabs(this.$el),this.loadComplete=!0,"undefined"!==this.model.get("multi")&&"multi_element_parent"===this.model.get("multi")&&this.appendChildSortables(),FusionEvents.trigger("fusion-settings-modal-open"),this.checkPageTemplate(),this.inlineHistoryListener(),this},reRender:function(){var e=this.$el.closest(".ui-dialog");this.tabsRendered={},this.destroyOptions(),this.render(),e.length?(e.find(".ui-dialog-titlebar + .fusion-builder-modal-top-container").remove(),e.find(".ui-dialog-titlebar").after(this.$el.find(".fusion-builder-modal-top-container"))):FusionPageBuilderApp.SettingsHelpers.renderDialogMoreOptions(this)},inlineHistoryListener:function(){var e,t=this;this.model.get("inlineElement")&&void 0!==this.model.parentView&&(e=this.model.parentView.model.get("cid"),setTimeout(function(){t.listenTo(FusionEvents,"fusion-param-changed-"+e,function(){t.removeView(e)})},1e3))},forceChange:function(){this.optionHasChanged=!0},appendChildSortables:function(){var e,t={model:this.model,collection:this.collection,attributes:{settingsView:this}};e=new FusionPageBuilder.ElementSettingsParent(t),this.$el.find(".fusion-child-sortables").html(e.render().el),this.childSortableView=e},onSettingsCallback:function(){var e,t,i;void 0!==fusionAllElements[this.model.get("element_type")].on_settings&&(e=fusionAllElements[this.model.get("element_type")].on_settings,"function"==typeof FusionPageBuilderApp[e]&&(t=this.model.get("params"),i=FusionPageBuilderApp[e](t,this),this.model.set("params",i)))},optionChangePaste:function(e){var t=this;setTimeout(function(){t.optionChange(e)},200)},optionChange:function(e){var t,i,o;this.changesPaused||(i=(t=jQuery(e.target)).closest(".fusion-builder-option"),o=this.getParamName(t,i),jQuery(e.target).hasClass("fusion-skip-debounce")||!this.model.get("noTemplate")&&!jQuery(e.target).hasClass("fusion-debounce-change")?this.optionChanged(e):_.fusionDebounce(this.optionChanged(e),500,o))},customOnChangeCallback:function(){var e;void 0!==fusionAllElements[this.model.get("element_type")].on_change&&(e=fusionAllElements[this.model.get("element_type")].on_change,"function"==typeof FusionApp.callback[e]&&(this.model.attributes=FusionApp.callback[e](jQuery.extend(!0,{},this.model.attributes),this)))},getParamName:function(e,t){var i=t.data("option-id");return e.closest(".fusion-builder-option.dimension").length&&!e.closest(".single-builder-dimension").length&&(i=e.attr("name")),i},getParamValue:function(e){var i=e.val();return e.closest(".fusion-builder-option.code").length&&(i=this.codeEditorOption[e.closest(".fusion-builder-option.code").attr("data-index")].getValue(),1===Number(FusionApp.settings.disable_code_block_encoding)&&(i=FusionPageBuilderApp.base64Encode(i))),e.hasClass("fusion-builder-raw-textarea")&&(i=FusionPageBuilderApp.base64Encode(i)),e.hasClass("fusion-multi-select-option")&&(i=[],jQuery.each(e.parent().find("> .fusion-multi-select-option:checked"),function(e,t){i.push(jQuery(t).val())}),i=i.join(",")),i},shouldContinue:function(e,t,i,o){var n,a=!!this.$el.find(".fusion-tab-content.active").length&&this.$el.find(".fusion-tab-content.active").attr("id");return e.closest(".fusion-builder-option.repeater").length&&!e.hasClass("fusion-repeater-value")?(n=e.closest(".repeater-row").index(),this.setRepeaterValue(e.closest(".fusion-builder-option.repeater").find(".fusion-repeater-value"),t,n,i),!1):!(!e.hasClass("fusion-always-update")&&(e.hasClass("fusion-hide-from-atts")||a&&(void 0===this.tabsRendered[a]||!0!==this.tabsRendered[a])||!1===this.loadComplete||!t||i===o[t]||""===i&&void 0===o[t]||e.hasClass("fusion-using-default")&&""!==i&&void 0!==i))},optionChanged:function(e){var t,i,o,n=jQuery(e.target),a=n.closest(".fusion-builder-option"),s=!0,r=this.model.get("params");jQuery.extend(this.model.attributes,{}),this.customOnChangeCallback(),t=this.getParamName(n,a),o=this.getParamValue(n,t,o,r),void 0===r[t]||r[t],this.shouldContinue(n,t,o,r)&&(this.optionHasChanged=!0,void 0!==this.elementView&&"function"==typeof this.elementView.onOptionChange&&this.elementView.onOptionChange(t,o,e),this.model.get("inlineElement")||void 0!==this.elementView&&(s=this.elementView.updateParam(t,o,e)),this.triggerTemporaryState(a),"generated_element"!==this.model.get("type")&&(this.model.get("inlineElement")&&(r[t]=o,this.model.set("params",r),FusionPageBuilderApp.inlineEditorHelpers.processInlineElement(this.model,t)),s&&void 0!==this.elementView&&!n.hasClass("skip-update")&&(-1!==this.model.get("element_type").indexOf("fusion_builder_column")&&"spacing"===t||this.elementView.reRender()),this._refreshJs(t),this.triggerActiveStates(),this.settingChanged=!0,this.childSortableView&&this.childSortableView.render(),i={currentModel:this.model,handleType:"changeOption",Name:t,Value:o},fusionGlobalManager.handleMultiGlobal(i)))},getParentValues:function(){var e;return"multi_element_child"===this.model.get("multi")&&"undefined"!==(e=FusionPageBuilderViewManager.getView(this.model.get("parent")))&&e.model.get("params")},refreshJs:function(e){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-option-change-"+e,this.model.attributes.cid)},destroyOptions:function(){var t=this;this.$el.find(".wp-color-picker").each(function(){jQuery(this).closest(".wp-picker-active").length&&jQuery(this).wpColorPicker("close")}),this.$el.find(".fusion-builder-code-block").each(function(e){t.codeEditorOption[e]&&t.codeEditorOption[e].toTextArea()}),this.$el.find(".fusion-editor-field").each(function(){var e=jQuery(this).attr("id");jQuery(this).hasClass("fusion-init")&&t.fusionBuilderMCEremoveEditor(e)})},activateSCgenerator:function(e){openShortcodeGenerator(jQuery(e.target))},renderOptions:function(){var e=this.model,t=jQuery.extend(!0,{},this.model.attributes);"undefined"!==e.attributes.params.settings_lvl&&"parent"===e.attributes.params.settings_lvl&&e.attributes.params,"function"==typeof this.filterAttributes&&(t=this.filterAttributes(t)),this.$el.html(this.template({atts:t}))},debouncedInitOptions:function(e){var t=!!this.$el.find(".fusion-tab-content.active").length&&this.$el.find(".fusion-tab-content.active").attr("id"),i=t?this.$el.find(".fusion-tab-content.active"):this.$el,o=void 0!==e&&e.length?e:i,n=this;t&&!0===this.tabsRendered||void 0!==this.tabsRendered[t]&&this.tabsRendered[t]||!0===this.tabsRendered||(this.textFieldPlaceholder(o),this.optionDateTimePicker(o),this.optionColorpicker(o),this.optionIconpicker(o),this.optionCodeBlock(o),this.optionDimension(o),this.optionSelect(o),this.optionMultiSelect(o),this.optionUpload(o),this.optionMultiUpload(o),this.optionEditor(o),this.optionCheckboxButtonSet(o),this.optionRadioButtonSet(o),this.optionLinkSelector(o),this.optionRange(o),this.optionSortableText(o),"fusion_woo_shortcodes"===this.model.get("element_type")&&!0===FusionPageBuilderApp.shortcodeGenerator&&o.find("#element_content").attr("id","generator_element_content"),o.find(".uploadattachment .fusion-builder-upload-button").on("click",function(){alert(fusionBuilderText.to_add_images)}),void 0===e&&this.optionRepeater("builder"),setTimeout(function(){o.find("select, input, textarea, radio").filter(":eq(0)").not("[data-placeholder]").focus()},1),t?setTimeout(function(){n.tabsRendered[t]=!0},500):this.tabsRendered=!0)},insertGeneratedShortcode:function(e){var t,i,o,n;e&&e.preventDefault(),this.removeActiveStates(),t=this.model.attributes,void 0!==fusionAllElements[this.model.get("element_type")].escape_html&&!0===fusionAllElements[this.model.get("element_type")].escape_html&&(t.params.element_content=_.escape(t.params.element_content)),void 0!==fusionAllElements[this.model.get("element_type")].on_save&&(i=fusionAllElements[this.model.get("element_type")].on_save,"function"==typeof FusionApp.callback[i]&&(t=FusionApp.callback[i](t,this))),n=FusionPageBuilderApp.generateElementShortcode(this.model,!1,!0),FusionEvents.trigger("fusion-history-resume-tracking"),this.openGeneratorTarget(),fusionBuilderInsertIntoEditor(n,FusionPageBuilderApp.shortcodeGeneratorEditorID),this.destroyOptions(),"multi_element_child"===this.model.get("multi")?(this.model.set(t),FusionEvents.trigger("fusion-multi-element-edited"),FusionEvents.trigger("fusion-multi-child-update-preview"),void 0!==(o=FusionPageBuilderViewManager.getView(this.model.get("parent")))&&o.updateElementContent()):"multi_element_parent"===this.model.get("multi")&&this.model.set(t),FusionPageBuilderApp.manuallyAdded&&(FusionPageBuilderApp.shortcodeGenerator=FusionPageBuilderApp.manualGenerator,FusionPageBuilderApp.shortcodeGeneratorEditorID=FusionPageBuilderApp.manualEditor,FusionPageBuilderApp.manuallyAdded=!1),void 0!==this.model&&void 0!==this.model.get("multi")&&"multi_element_child"===this.model.get("multi")&&FusionEvents.trigger("fusion-child-changed"),this.remove(),FusionPageBuilderApp.shortcodeGenerator="",FusionPageBuilderViewManager.removeView(this.model.get("cid")),FusionEvents.trigger("fusion-settings-modal-save")},removeView:function(e){(e===this.model.get("cid")||void 0!==this.model.parentView&&this.model.parentView&&e===this.model.parentView.model.get("cid"))&&(this.destroyOptions(),FusionEvents.trigger("fusion-settings-removed",this.model.get("cid")),this.remove())},saveSettings:function(e){var t,i,o,n;e&&e.preventDefault(),this.destroyOptions(),this.removeActiveStates(),t=this.model.attributes,"fusion_builder_container"!==this.model.get("element_type")&&"fusion_builder_column"!==this.model.get("element_type")&&"fusion_builder_column_inner"!==this.model.get("element_type")||(this.elementView.destroyResizable(),this.elementView.$el.removeClass("fusion-builder-element-edited")),void 0!==fusionAllElements[this.model.get("element_type")].escape_html&&!0===fusionAllElements[this.model.get("element_type")].escape_html&&(t.params.element_content=_.escape(t.params.element_content)),void 0!==fusionAllElements[this.model.get("element_type")].on_save&&(i=fusionAllElements[this.model.get("element_type")].on_save,"function"==typeof FusionApp.callback[i]&&(t=FusionApp.callback[i](t,this))),"multi_element_child"===this.model.get("multi")?(this.model.set(t),FusionEvents.trigger("fusion-multi-element-edited"),FusionEvents.trigger("fusion-multi-child-update-preview"),void 0!==(o=FusionPageBuilderViewManager.getView(this.model.get("parent")))&&(o.updateElementContent(),e&&void 0!==e.currentTarget&&(jQuery(e.currentTarget).hasClass("fusiona-close-fb")||jQuery(e.currentTarget).hasClass("ui-dialog-titlebar-close"))&&FusionEvents.trigger("fusion-close-settings-"+this.model.get("parent")))):"multi_element_parent"===this.model.get("multi")&&this.model.set(t),this.remove(),void 0!==this.elementView&&this.elementView.onSettingsClose(),n={currentModel:this.model,handleType:"save",attributes:this.model.attributes},fusionGlobalManager.handleMultiGlobal(n),FusionPageBuilderApp.manuallyAdded&&(FusionPageBuilderApp.shortcodeGenerator=FusionPageBuilderApp.manualGenerator,FusionPageBuilderApp.shortcodeGeneratorEditorID=FusionPageBuilderApp.manualEditor,FusionPageBuilderApp.manuallyAdded=!1),void 0!==this.model&&void 0!==this.model.get("multi")&&"multi_element_child"===this.model.get("multi")&&FusionEvents.trigger("fusion-child-changed"),FusionEvents.trigger("fusion-settings-modal-save",this.model.get("cid"))},openParent:function(e){var t=FusionPageBuilderViewManager.getView(this.model.get("parent"));t&&t.settings(),this.saveSettings(e)},openGeneratorTarget:function(){var e=FusionPageBuilderViewManager.getView(this.model.get("target"));e&&"dialog"===FusionApp.preferencesData.editing_mode&&e.settings()},closeGeneratorModal:function(){this.model.destroy(),FusionEvents.trigger("fusion-history-resume-tracking"),FusionEvents.trigger("fusion-settings-modal-cancel"),this.openGeneratorTarget(),this.remove()},fusionBuilderMCEremoveEditor:function(e){void 0!==window.tinyMCE&&(window.tinyMCE.execCommand("mceRemoveEditor",!1,e),void 0!==window.tinyMCE.get(e)&&window.tinyMCE.remove("#"+e))},beforeProcessDependencies:function(){var e,t,i,o=this.$el,n=this.model.get("element_type");void 0!==n&&"fusion_section_separator"===n&&(e=o.find("#divider_type"),t=e.closest("ul").find('li[data-option-id="divider_candy"]').find(".fusion-option-divider_candy").find('.ui-button[data-value="bottom,top"]'),i=e.closest("ul").find('li[data-option-id="divider_position"]').find(".fusion-option-divider_position").find('.ui-button[data-value="center"]'),"triangle"!==e.val()?t.hide():t.show(),"bigtriangle"!==e.val()?i.hide():i.show(),e.on("change paste keyup",function(){"triangle"!==jQuery(this).val()?t.hide():t.show(),"bigtriangle"!==jQuery(this).val()?(i.hide(),i.hasClass("ui-state-active")&&i.prev().click()):i.show()}))},addSliderVideo:function(e){var t,i,o=this.model.get("cid");e&&e.preventDefault(),FusionPageBuilderApp.manualGenerator=FusionPageBuilderApp.shortcodeGenerator,FusionPageBuilderApp.manualEditor=FusionPageBuilderApp.shortcodeGeneratorEditorID,FusionPageBuilderApp.manuallyAdded=!0,FusionPageBuilderApp.shortcodeGenerator=!0,FusionPageBuilderApp.shortcodeGeneratorEditorID="video",i=jQuery(e.currentTarget).data("type"),t=fusionAllElements[i].defaults,this.collection.add([{type:"generated_element",added:"manually",element_type:i,params:t,target:o}])},defaultPreview:function(e){var t=jQuery(e.currentTarget);e&&e.preventDefault(),FusionApp.sidebarView&&FusionApp.sidebarView.shortcutClick(t)},showHideDescription:function(e){var t=jQuery(e.currentTarget);t.closest(".fusion-builder-option").find(".description").slideToggle(250),t.toggleClass("active")},checkPageTemplate:function(){"fusion_builder_container"===this.model.get("element_type")&&("100-width.php"!==FusionApp.data.postMeta._wp_page_template?this.$el.find('li[data-option-id="hundred_percent"]').hide():this.$el.find('li[data-option-id="hundred_percent"]').show())},onInit:function(){},onCancel:function(){},paramChanged:function(e,t){var i,o,n,a,s=this,r=0<this.$el.find('li[data-option-id="'+e+'"]').length?this.$el.find('li[data-option-id="'+e+'"]'):this.$el.find("#"+e).closest(".fusion-builder-option"),l=!1;if(jQuery(".fusion-table-builder-chart").length&&jQuery(".fusion-table-builder-chart").closest(".ui-dialog-content").dialog("close"),r.length){switch(r.attr("data-option-type")&&(l=r.attr("data-option-type")),this.changesPaused=!0,l=l||r.attr("class").replace("fusion-builder-option","").trim()){case"iconpicker":r.find(".icon_preview.selected-element").removeClass("selected-element"),t&&2===t.split(" ").length&&r.find(".icon-"+t.split(" ")[0]).addClass("selected-element"),r.find("#"+e).val(t).trigger("change");break;case"upload":r.find("#"+e).val(t).trigger("change"),r.find(".fusion-builder-upload-preview img").remove(),t&&""!==t?(r.find(".fusion-upload-area:not( .fusion-uploaded-image )").addClass("fusion-uploaded-image"),r.find(".fusion-builder-upload-preview").prepend('<img src="'+t+'" />')):r.find(".fusion-upload-area").removeClass("fusion-uploaded-image");break;case"multiple_select":r.find(".fusion-select-preview").empty(),r.find('input[type="checkbox"]').prop("checked",!1),t&&""!==t&&(o=t.split(","),_.each(o,function(e){r.find('input[value="'+e+'"]').prop("checked",!0),r.find(".fusion-select-preview").append('<span class="fusion-preview-selected-value" data-value="'+e+'">'+r.find('input[value="'+e+'"]').attr("data-label")+'<span class="fusion-option-remove">x</span></span>')})),0===r.find(".fusion-select-preview .fusion-preview-selected-value").length?r.find(".fusion-select-preview-wrap").addClass("fusion-select-show-placeholder"):r.find(".fusion-select-preview-wrap").removeClass("fusion-select-show-placeholder"),r.find("#"+e).val(t).trigger("change");break;case"tinymce":r.find("#child_"+e).length&&(e="child_"+e),r.find("#"+e).val(t),r.find("#"+e).hasClass("fusion-editor-field")&&void 0!==window.tinyMCE&&window.tinyMCE.get(e)&&!window.tinyMCE.get(e).isHidden()&&(window.tinyMCE.get(e).getParam("wpautop",!0)&&void 0!==window.switchEditors&&(t=window.switchEditors.wpautop(t)),window.tinyMCE.get(e).setContent(t,{format:"html"}));break;case"date_time_picker":r.find("#"+e).val(t).trigger("change"),n=r.find(".fusion-date-picker"),a=r.find(".fusion-time-picker"),-1!==t.indexOf(" ")&&n.length&&a.length?(o=t.split(" "),n.val(o[0]),a.val(o[1])):n.length?n.val(t):a.length&&a.val(t);break;case"raw_textarea":try{t=FusionPageBuilderApp.base64Decode(t),r.find("#"+e).val(t).trigger("change")}catch(e){}break;case"code":if(void 0!==s.codeEditorOption[r.attr("data-index")])try{t=FusionPageBuilderApp.base64Decode(t),s.codeEditorOption[r.attr("data-index")].setValue(t)}catch(e){}break;case"range":void 0!==s.$rangeSlider[r.attr("data-index")]&&(void 0!==t&&""!==t||(t=s.$rangeSlider[r.attr("data-index")].noUiSlider.options.default),s.$rangeSlider[r.attr("data-index")].noUiSlider.set(t));break;case"checkbox_button_set":r.find(".button-set-value").val(t).trigger("change"),r.find(".ui-state-active").removeClass("ui-state-active"),"string"==typeof t&&""!==t?(o=t.split(","),_.each(o,function(e){r.find('[data-value="'+e+'"]').addClass("ui-state-active")})):"hide_on_mobile"===e&&r.find(".buttonset-item").addClass("ui-state-active");break;case"select":(i=r.find('.fusion-select-options .fusion-select-label[data-value="'+t+'"]')).length&&(r.find(".fusion-option-selected").removeClass("fusion-option-selected"),i.addClass("fusion-option-selected"),r.find(".fusion-select-preview").html(i.html()),r.find("#"+e).val(t).trigger("fusion-change"));break;case"colorpicker":case"colorpickeralpha":(i=r.find(".fusion-builder-color-picker-hex")).length&&i.val(t).trigger("change");break;case"radio_button_set":(i=r.find('.buttonset-item[data-value="'+t+'"]')).length&&(r.find(".ui-state-active").removeClass("ui-state-active"),i.addClass("ui-state-active"),r.find("#"+e).val(t).trigger("change"));break;case"dimension":(i=r.find("#"+e)).length&&i.val(t).trigger("change");break;default:r.find("#"+e).val(t).trigger("change")}this.changesPaused=!1}}}),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionCodeBlock),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionColorPicker),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionDimensionField),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionIconPicker),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionOptionUpload),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.radioButtonSet),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionRangeField),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionSelectField),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionCheckboxButtonSet),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionDateTimePicker),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionEditor),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionMultiSelect),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionSwitchField),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionTextFieldPlaceholder),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionLinkSelector),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionRepeaterField),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.options.fusionSortableText),_.extend(FusionPageBuilder.ElementSettingsView.prototype,FusionPageBuilder.fusionActiveStates);FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ElementSettingsParent=window.wp.Backbone.View.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-child-sortables").html()),events:{"click .fusion-builder-add-multi-child":"addChildElement","click .fusion-builder-multi-setting-remove":"removeChildElement","click .fusion-builder-multi-setting-clone":"cloneChildElement","click .fusion-builder-multi-setting-options":"editChildElement"},initialize:function(){this.elementView=FusionPageBuilderViewManager.getView(this.model.get("cid")),this.listenTo(FusionEvents,"fusion-child-changed",this.render),this.listenTo(this.model.children,"add",this.render),this.listenTo(this.model.children,"remove",this.render),this.listenTo(this.model.children,"sort",this.render),this.settingsView=this.attributes.settingsView},render:function(){return this.$el.html(this.template(this.model)),this.sortableOptions(),this},sortableOptions:function(){var i=this;this.$el.find(".fusion-builder-sortable-children").sortable({axis:"y",cancel:".fusion-builder-multi-setting-remove, .fusion-builder-multi-setting-options, .fusion-builder-multi-setting-clone",helper:"clone",update:function(){var e,t="";i.$el.find(".fusion-builder-sortable-children li").each(function(){e=FusionPageBuilderViewManager.getView(jQuery(this).data("cid")),t+=FusionPageBuilderApp.generateElementShortcode(e.$el,!1)}),i.elementView.setContent(t),i.render(),FusionEvents.trigger("fusion-history-save-step",window.fusionBuilderText.moved+" "+window.fusionAllElements[e.model.get("element_type")].name+" "+window.fusionBuilderText.element)}})},addChildElement:function(e){e.preventDefault(),this.elementView.addChildElement(),this.render(),this.settingsView.optionHasChanged=!0},removeChildElement:function(e){var t,i,o;t=jQuery(e.target).closest(".fusion-builder-data-cid").data("cid"),i=FusionPageBuilderViewManager.getView(t),e.preventDefault(),i.removeElement(e),this.render(),o={currentModel:i.model,handleType:"changeOption"},fusionGlobalManager.handleMultiGlobal(o),this.elementView.childViewRemoved(),this.settingsView.optionHasChanged=!0},cloneChildElement:function(e){var t,i,o;t=jQuery(e.target).closest(".fusion-builder-data-cid").data("cid"),i=FusionPageBuilderViewManager.getView(t),FusionPageBuilderViewManager.getView(this.model.get("cid")),e.preventDefault(),i.cloneElement(),this.render(),o={currentModel:i.model,handleType:"changeOption"},fusionGlobalManager.handleMultiGlobal(o),this.elementView.childViewCloned(),this.settingsView.optionHasChanged=!0},editChildElement:function(e){var t=jQuery(e.target).closest(".fusion-builder-data-cid").data("cid"),i=FusionPageBuilderViewManager.getView(t);e.preventDefault(),i.settings()}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ElementLibraryView=window.wp.Backbone.View.extend({className:"fusion_builder_modal_settings",events:{"click .fusion-builder-all-modules .fusion-builder-element:not(.fusion-builder-element-generator)":"addModule","click .fusion_builder_custom_elements_load":"addCustomModule","click .fusion-builder-column-layouts li":"addNestedColumns"},initialize:function(e){this.options=e,!(this.layoutIsLoading=!1)===FusionPageBuilderApp.shortcodeGenerator?this.template=FusionPageBuilder.template(jQuery("#fusion-builder-generator-modules-template").html()):"fusion_builder_column_inner"===this.model.get("element_type")?this.template=FusionPageBuilder.template(jQuery("#fusion-builder-nested-column-modules-template").html()):this.template=FusionPageBuilder.template(jQuery("#fusion-builder-modules-template").html())},render:function(){return this.$el.html(this.template(FusionPageBuilderApp.elements)),FusionPageBuilderApp.showSavedElements("elements",this.$el.find("#custom-elements")),FusionApp.elementSearchFilter(this.$el),FusionApp.dialog.dialogTabs(this.$el),this},addCustomModule:function(i){var o,e,n,a,s=this;i&&i.preventDefault(),!0!==this.layoutIsLoading&&(this.layoutIsLoading=!0,o=jQuery(i.currentTarget).closest("li").data("layout_id"),e=jQuery(i.currentTarget).find(".fusion_module_title").text(),n=jQuery(i.currentTarget).closest("li").hasClass("fusion-global"),void 0!==this.options.targetElement&&(a=this.options.targetElement),jQuery(i.currentTarget).parent(".fusion-builder-all-modules").css("opacity","0"),jQuery(i.currentTarget).parent(".fusion-builder-all-modules").prev("#fusion-loader").show(),jQuery.ajax({type:"POST",url:fusionAppConfig.ajaxurl,data:{action:"fusion_builder_load_layout",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,fusion_is_global:n,fusion_layout_id:o},success:function(e){var t=JSON.parse(e);void 0!==a?FusionPageBuilderApp.shortcodesToBuilder(t.post_content,FusionPageBuilderApp.parentColumnId,!1,!1,a,"after"):FusionPageBuilderApp.shortcodesToBuilder(t.post_content,FusionPageBuilderApp.parentColumnId),s.layoutIsLoading=!1,jQuery(i.currentTarget).parent(".fusion-builder-all-modules").css("opacity","1"),jQuery(i.currentTarget).parent(".fusion-builder-all-modules").prev("#fusion-loader").hide(),n&&setTimeout(fusionGlobalManager.handleGlobalsFromLibrary,500,o,FusionPageBuilderApp.parentColumnId)},complete:function(){FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.added_custom_element+e),FusionEvents.trigger("fusion-content-changed"),s.removeView()}}))},addModule:function(e){var t,i,o,n,a,s,r,l,u,d,c;e&&e.preventDefault(),(t=jQuery(e.currentTarget).find(".fusion_module_label").text())in fusionAllElements?(s=fusionAllElements[t].params,o=fusionAllElements[t].multi,n=fusionAllElements[t].shortcode,a=fusionAllElements[t].name,r=fusionAllElements[t].allow_generator,u=fusionAllElements[t].child_ui):r=n=o=s="",i={},_.each(s,function(e){i[e.param_name]=_.isObject(e.value)?e.default:e.value}),d={type:"element",added:"manually",cid:FusionPageBuilderViewManager.generateCid(),element_type:n,params:i,parent:this.attributes["data-parent_cid"],view:this.options.view,allow_generator:r,inline_editor:FusionPageBuilderApp.inlineEditorHelpers.inlineEditorAllowed(n),multi:o,child_ui:u,at_index:FusionPageBuilderApp.getCollectionIndex(this.options.targetElement)},void 0!==this.options.targetElement&&(d.targetElement=this.options.targetElement,d.targetElementPosition="after"),l=this.collection.add([d]),this.remove(),c={currentModel:l[0],handleType:"save",attributes:l[0].attributes},fusionGlobalManager.handleMultiGlobal(c),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.added+" "+a+" "+fusionBuilderText.element),FusionEvents.trigger("fusion-content-changed")},addNestedColumns:function(e){var t,i,o,n;e&&e.preventDefault(),n={type:"fusion_builder_row_inner",element_type:"fusion_builder_row_inner",added:"manually",cid:t=FusionPageBuilderViewManager.generateCid(),parent:this.model.get("cid"),view:this,at_index:FusionPageBuilderApp.getCollectionIndex(this.options.targetElement)},void 0!==this.options.targetElement&&(n.targetElement=this.options.targetElement,n.targetElementPosition="after"),this.collection.add([n]),o=FusionPageBuilderViewManager.getView(t),FusionPageBuilderApp.activeModal="column",i=(jQuery(e.target).is("li")?jQuery(e.target):jQuery(e.target).closest("li")).data("layout").split(","),_.size(i),_.each(i,function(e,t){o.addNestedColumn(e,!1)}),this.remove(),FusionEvents.trigger("fusion-content-changed"),o.setRowData(),e&&(FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.added_nested_columns),FusionEvents.trigger("fusion-content-changed")),setTimeout(function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-content-changed",o.$el.closest(".fusion-builder-column-outer").data("cid"))},300)},removeView:function(){this.remove()}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ColumnLibraryView=window.wp.Backbone.View.extend({className:"fusion_builder_modal_settings",template:FusionPageBuilder.template(jQuery("#fusion-builder-column-library-template").html()),events:{"click .fusion-builder-column-layouts li":"addColumns","click .fusion_builder_custom_columns_load":"addCustomColumn"},initialize:function(e){this.options=e},render:function(){return this.$el.html(this.template(this.model.toJSON())),FusionPageBuilderApp.showSavedElements("columns",this.$el.find("#custom-columns")),FusionApp.elementSearchFilter(this.$el),FusionApp.dialog.dialogTabs(this.$el),this},addCustomColumn:function(i){var e,o,t,n,a=this;i&&i.preventDefault(),FusionPageBuilderApp.activeModal="column",!0!==FusionPageBuilderApp.layoutIsLoading&&(FusionPageBuilderApp.layoutIsLoading=!0,e=this.model,o=jQuery(i.currentTarget).data("layout_id"),t=jQuery(i.currentTarget).find(".fusion_module_title").text(),n=jQuery(i.currentTarget).closest("li").hasClass("fusion-global"),jQuery(i.currentTarget).parent(".fusion-builder-all-modules").css("opacity","0"),jQuery(i.currentTarget).parent(".fusion-builder-all-modules").prev("#fusion-loader").show(),jQuery.ajax({type:"POST",url:fusionAppConfig.ajaxurl,data:{action:"fusion_builder_load_layout",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,fusion_is_global:n,fusion_layout_id:o},success:function(e){var t=JSON.parse(e);FusionPageBuilderApp.shortcodesToBuilder(t.post_content,FusionPageBuilderApp.parentRowId),FusionPageBuilderApp.layoutIsLoading=!1,jQuery(i.currentTarget).parent(".fusion-builder-all-modules").css("opacity","1"),jQuery(i.currentTarget).parent(".fusion-builder-all-modules").prev("#fusion-loader").hide(),n&&setTimeout(window.fusionGlobalManager.handleGlobalsFromLibrary,500,o,FusionPageBuilderApp.parentRowId)},complete:function(){e.unset("added"),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.added_custom_column+t),FusionEvents.trigger("fusion-content-changed"),a.removeView()}}))},addColumns:function(e){var i,t,o,n,a,s,r,l,u,d,c,g,p,f=[];e&&e.preventDefault(),FusionPageBuilderApp.activeModal="column",i=this,t=(jQuery(e.target).is("li")?jQuery(e.target):jQuery(e.target).closest("li")).data("layout").split(","),_.size(t),o=this.options.view,g=void 0!==this.options.targetElement&&this.options.targetElement,c=FusionPageBuilderApp.getCollectionIndex(g),_.each(t,function(e,t){n=fusionAllElements.fusion_builder_column.params,a={},u=FusionPageBuilderViewManager.generateCid(),f.push(u),_.each(n,function(e){s=_.isObject(e.value)?e.default:e.value,a[e.param_name]=s}),a.type=e,l={type:"fusion_builder_column",element_type:"fusion_builder_column",cid:u,parent:i.model.get("cid"),view:o,params:a,at_index:c},p&&(g=(g=FusionPageBuilderViewManager.getView(p)).$el),g&&(l.targetElement=g,l.targetElementPosition="after"),FusionPageBuilderApp.collection.add([l]),p=u,"new"===c?c=1:c++}),this.model.unset("added"),(r=FusionPageBuilderViewManager.getView(FusionPageBuilderApp.parentRowId))&&(r.createVirtualRows(),r.updateColumnsPreview()),FusionEvents.trigger("fusion-content-changed"),this.removeView(),e&&(_.each(f,function(e){(d=FusionPageBuilderViewManager.getView(e))&&d.scrollHighlight(e===u)}),!0===FusionPageBuilderApp.newContainerAdded?(window.fusionHistoryState=fusionBuilderText.added_section,FusionPageBuilderApp.newContainerAdded=!1):window.fusionHistoryState=fusionBuilderText.added_columns,FusionEvents.trigger("fusion-history-save-step",window.fusionHistoryState))},removeView:function(){this.remove()}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.NestedColumnLibraryView=window.wp.Backbone.View.extend({className:"fusion-builder-modal-settings-container",template:FusionPageBuilder.template(jQuery("#fusion-builder-nested-column-library-template").html()),events:{"click .fusion-builder-column-layouts li":"addNestedColumns","click .fusion-builder-modal-close":"closeModal"},initialize:function(e){this.options=e,this.listenTo(FusionEvents,"fusion-modal-view-removed",this.remove)},render:function(){return this.$el.html(this.template(FusionPageBuilderViewManager.toJSON())),this.$el.addClass("fusion-add-to-nested"),this},addNestedColumns:function(e){var t,i,o,n,a,s,r,l,u=this.attributes["data-parent_cid"];e&&e.preventDefault(),o=FusionPageBuilderViewManager.getView(u),void 0!==this.attributes["data-nested_column_cid"]?(n=FusionPageBuilderViewManager.getView(this.attributes["data-nested_column_cid"]),i=n.$el,a=n.$el):i=this.$el.closest(".fusion-builder-row-content").find(".fusion-builder-row-container-inner"),s=window.FusionPageBuilderApp.getCollectionIndex(a),t=(jQuery(e.target).is("li")?jQuery(e.target):jQuery(e.target).closest("li")).data("layout").split(","),_.size(t),_.each(t,function(e,t){r=o.addNestedColumn(e,i,a,s),l=FusionPageBuilderViewManager.getView(r),a=l.$el,s++}),o.createVirtualRows(),o.updateColumnsPreview(),this.remove(),FusionEvents.trigger("fusion-columns-added"),e&&(FusionEvents.trigger("fusion-history-turn-on-tracking"),window.fusionHistoryState=fusionBuilderText.added_nested_columns,FusionEvents.trigger("fusion-content-changed"))},closeModal:function(e){e.preventDefault(),this.remove()}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ContainerLibraryView=window.wp.Backbone.View.extend({className:"fusion_builder_modal_settings",template:FusionPageBuilder.template(jQuery("#fusion-builder-container-library-template").html()),events:{"click .fusion-builder-column-layouts li":"addColumns","click .fusion_builder_custom_sections_load":"addCustomSection","click .fusion-builder-section-next-page":"addNextPage"},initialize:function(e){this.options=e},render:function(){return this.$el.html(this.template(this.model.toJSON())),FusionPageBuilderApp.showSavedElements("sections",this.$el.find("#custom-sections")),FusionApp.elementSearchFilter(this.$el),FusionApp.dialog.dialogTabs(this.$el),this},addColumns:function(e){var i,t,o,n,a,s,r,l,u,d,c=[];e&&e.preventDefault(),FusionPageBuilderApp.activeModal="column",i=this,o=""!==(t=jQuery(e.target).is("li")?jQuery(e.target):jQuery(e.target).closest("li")).data("layout")&&t.data("layout").split(","),_.size(o),n=this.options.view,o&&_.each(o,function(e,t){a=fusionAllElements.fusion_builder_column.params,s={},u=FusionPageBuilderViewManager.generateCid(),c.push(u),_.each(a,function(e){r=_.isObject(e.value)?e.default:e.value,s[e.param_name]=r}),s.type=e,l={type:"fusion_builder_column",element_type:"fusion_builder_column",cid:u,parent:i.model.get("cid"),view:n,params:s},i.collection.add([l])}),this.model.unset("added"),FusionPageBuilderViewManager.getView(FusionPageBuilderApp.parentRowId).setRowData(),FusionEvents.trigger("fusion-content-changed"),this.removeView(),e&&(_.each(c,function(e){(d=FusionPageBuilderViewManager.getView(e))&&d.scrollHighlight(e===u)}),!0===FusionPageBuilderApp.newContainerAdded?(window.fusionHistoryState=fusionBuilderText.added_section,FusionPageBuilderApp.newContainerAdded=!1):window.fusionHistoryState=fusionBuilderText.added_columns,FusionEvents.trigger("fusion-history-save-step",window.fusionHistoryState),jQuery(".fusion-builder-live").removeClass("fusion-builder-blank-page-active"))},addCustomSection:function(i){var o,e,t,n,a=this.model,s=this.model.get("parent"),r=FusionPageBuilderViewManager.getView(s),l=this;t=r.$el.prev(".fusion-builder-container"),FusionPageBuilderApp.targetContainerCID=t.data("cid"),i&&i.preventDefault(),void 0!==r&&r.removeContainer(),!0!==FusionPageBuilderApp.layoutIsLoading&&(FusionPageBuilderApp.layoutIsLoading=!0,o=jQuery(i.currentTarget).data("layout_id"),e=jQuery(i.currentTarget).find(".fusion_module_title").text(),n=jQuery(i.currentTarget).closest("li").hasClass("fusion-global"),jQuery(i.currentTarget).parent(".fusion-builder-all-modules").css("opacity","0"),jQuery(i.currentTarget).parent(".fusion-builder-all-modules").prev("#fusion-loader").show(),jQuery.ajax({type:"POST",url:fusionAppConfig.ajaxurl,data:{action:"fusion_builder_load_layout",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,fusion_is_global:n,fusion_layout_id:o},success:function(e){var t=JSON.parse(e);FusionPageBuilderApp.shortcodesToBuilder(t.post_content,FusionPageBuilderApp.parentRowId),FusionPageBuilderApp.layoutIsLoading=!1,jQuery(i.currentTarget).parent(".fusion-builder-all-modules").css("opacity","1"),jQuery(i.currentTarget).parent(".fusion-builder-all-modules").prev("#fusion-loader").hide(),n&&setTimeout(fusionGlobalManager.handleGlobalsFromLibrary,500,o,FusionPageBuilderApp.parentRowId)},complete:function(){a.unset("added"),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.added_custom_section+e),jQuery(".fusion-builder-live").removeClass("fusion-builder-blank-page-active"),FusionEvents.trigger("fusion-content-changed"),l.removeView()}}))},addNextPage:function(e){var t,i,o=this.model.get("parent"),n=FusionPageBuilderViewManager.getView(o);e&&e.preventDefault(),t=n.$el.prev(".fusion-builder-container"),FusionPageBuilderApp.targetContainerCID=t.find(".fusion-builder-data-cid").data("cid"),i=FusionPageBuilderViewManager.generateCid(),this.collection.add([{type:"fusion_builder_next_page",added:"manually",module_type:"fusion_builder_next_page",cid:i,params:{},view:n,appendAfter:t,created:"auto"}]),void 0!==n&&(FusionPageBuilderApp.targetContainerCID="",n.removeContainer()),FusionEvents.trigger("fusion-content-changed"),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.added_nextpage),this.removeView()},removeView:function(){this.remove()}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.GeneratorElementsView=window.wp.Backbone.View.extend({className:"fusion_builder_modal_settings",template:FusionPageBuilder.template(jQuery("#fusion-builder-generator-modules-template").html()),events:{"click .fusion-builder-all-modules .fusion-builder-element":"addElement","click .fusion-builder-column-layouts .generator-column":"addColumns","click .fusion-builder-column-layouts .generator-section":"addContainer"},initialize:function(e){this.options=e,this.listenTo(FusionEvents,"fusion-modal-view-removed",this.remove)},render:function(){return this.$el.html(this.template(FusionPageBuilderApp.elements)),FusionApp.elementSearchFilter(this.$el),FusionApp.dialog.dialogTabs(this.$el),this},addElement:function(e){var t,i,o,n,a,s,r,l;e&&e.preventDefault(),(t=jQuery(e.currentTarget)).find(".fusion_module_title").text(),a=(i=t.find(".fusion_module_label").text())in fusionAllElements?(n=fusionAllElements[i].multi,fusionAllElements[i].shortcode):n=o="",r=jQuery.extend(!0,{},fusionAllElements[i].params),o={},_.each(r,function(e){var t;t=_.isObject(e.value)?e.default:e.value,o[e.param_name]=t}),l={type:"generated_element",added:"manually",element_type:a,params:o,view:this.options.view,multi:n,target:this.options.targetCid,cid:FusionPageBuilderViewManager.generateCid()},"undefined"!==o.element_content&&"undefined"!=typeof tinyMCE&&"undefined"!==tinyMCE.activeEditor&&void 0===n&&window.tinyMCE.activeEditor&&(s=window.tinyMCE.activeEditor.selection.getContent())&&(l.params.element_content=s,window.tinyMCE.activeEditor.selection.setContent(""),s="",delete l.added),this.collection.add(l),FusionPageBuilderApp.shortcodeGenerator="",FusionPageBuilderApp.shortcodeGeneratorEditorID="",this.remove()},addColumns:function(e){var o,t,n,i,a,s,r,l="[fusion_builder_row_inner]",u="fusion_builder_column_inner",d="[/fusion_builder_row_inner]";!FusionPageBuilderApp.builderActive&&jQuery(e.target).closest("#builder-regular-columns").length&&(u="fusion_builder_column",d=l=""),e&&e.preventDefault(),FusionPageBuilderApp.activeModal="column",o=this,t=(jQuery(e.target).is("li")?jQuery(e.target):jQuery(e.target).closest("li")).data("layout").split(","),_.size(t),n=this.options.view,i=fusionAllElements[u].params,a={},_.each(i,function(e){s=_.isObject(e.value)?e.default:e.value,a[e.param_name]=s}),_.each(t,function(e,t){var i;a.type=e,i={type:"generated_element",added:"manually",element_type:u,view:n,params:a},r=o.collection.add(i),l+=FusionPageBuilderApp.generateElementShortcode(r,!1,!0)}),l+=d,fusionBuilderInsertIntoEditor(l,FusionPageBuilderApp.shortcodeGeneratorEditorID),FusionPageBuilderApp.shortcodeGenerator="",FusionPageBuilderApp.shortcodeGeneratorEditorID="",this.remove()},addContainer:function(e){var t,i,o;e&&e.preventDefault(),FusionPageBuilderApp.activeModal="container",FusionPageBuilderViewManager.generateCid(),t=fusionAllElements.fusion_builder_container.params,i={},_.each(t,function(e){o=_.isObject(e.value)?e.default:e.value,i[e.param_name]=o}),this.collection.add([{type:"generated_element",added:"manually",element_type:"fusion_builder_container",params:i,view:this}])}})});FusionPageBuilder=FusionPageBuilder||{};!function(e){e(document).ready(function(){FusionPageBuilder.NestedColumnView=FusionPageBuilder.BaseColumnView.extend({template:FusionPageBuilder.template(e("#fusion-builder-inner-column-template").html()),events:{"click .fusion-builder-add-element":"addModule","click .fusion-builder-settings-column":"settings","click .fusion-builder-column-remove":"removeColumn","click .fusion-builder-column-clone":"cloneColumn","click .fusion-builder-column-size":"sizesShow","click .column-size":"sizeSelectWirefame","click .fusion-builder-column-drag":"preventDefault"},initialize:function(){this.$el.attr("data-cid",this.model.get("cid")),this.$el.attr("data-column-size",this.model.attributes.params.type),void 0!==this.model.attributes.params&&void 0!==this.model.attributes.params.fusion_global&&(this.$el.attr("fusion-global-layout",this.model.attributes.params.fusion_global),this.$el.removeClass("fusion-global-nested-column").addClass("fusion-global-nested-column")),this._triggerCallback=_.debounce(_.bind(this.triggerCallback,this),200),this.columnSpacer=!1,this.forceAppendChildren=!1,this.model.children=new FusionPageBuilder.Collection,this._refreshJs=_.debounce(_.bind(this.refreshJs,this),300),this._toolTipHide=_.debounce(_.bind(this.toolTipHide,this),500),this.listenTo(this.model.children,"add",this.addChildView),this.listenTo(FusionEvents,"fusion-wireframe-toggle",this.wireFrameToggled),this.listenTo(FusionEvents,"fusion-view-update-fusion_builder_column_inner",this.reRender),this.listenTo(FusionEvents,"fusion-param-changed-"+this.model.get("cid"),this.onOptionChange),this._equalHeights=_.debounce(_.bind(this.equalHeights,this),300),this.baseInit()},render:function(){var e=this,t=this.getTemplateAtts();return this.$el.html(this.template(t)),void 0!==this.model.attributes.selectors&&this.setElementAttributes(this.$el,this.model.attributes.selectors),this.appendChildren(),setTimeout(function(){e.droppableColumn(),e.sortableElements(),e.disableSortableElements()},100),this},droppableColumn:function(){var r=this,u=this.$el,t=this.model.get("cid"),e=u.find(".fusion-nested-column-target"),i=jQuery("#fb-preview")[0].contentWindow.jQuery("body");u.draggable({appendTo:FusionPageBuilderApp.$el,zIndex:999999,delay:100,cursorAt:{top:15,left:15},iframeScroll:!0,containment:i,cancel:".fusion-builder-live-element",helper:function(){var e=FusionPageBuilderApp.DraggableHelpers.draggableClasses(t);return jQuery('<div class="fusion-column-helper '+e+'" data-cid="'+t+'"><span class="fusiona-column"></span></div>')},start:function(){i.addClass("fusion-nested-column-dragging fusion-active-dragging"),u.addClass("fusion-being-dragged")},stop:function(){setTimeout(function(){i.removeClass("fusion-nested-column-dragging fusion-active-dragging")},10),u.removeClass("fusion-being-dragged")}}),e.droppable({tolerance:"touch",hoverClass:"ui-droppable-active",accept:".fusion-builder-column-inner",drop:function(e,t){var i,o,n,a=t.draggable.data("cid"),s=FusionPageBuilderViewManager.getView(a),r=s.model.get("parent"),l=u;jQuery(e.target).hasClass("target-after")?l.after(t.draggable):u.before(t.draggable),i=t.draggable.closest(".fusion-builder-row-content").data("cid"),o=FusionPageBuilderViewManager.getView(i),n=t.draggable.parent().children(".fusion-builder-column-inner").index(t.draggable),FusionPageBuilderApp.onDropCollectionUpdate(s.model,n,i),o.setRowData(),i!==r&&FusionPageBuilderViewManager.getView(r).setRowData(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.column+" order changed"),setTimeout(function(){s.droppableColumn()},300)}}),u.find(".fusion-element-target-column").droppable({tolerance:"touch",hoverClass:"ui-droppable-active",accept:".fusion-builder-live-element",drop:function(e,t){var i,o,n=r.model.get("cid"),a=t.draggable.data("cid"),s=FusionPageBuilderViewManager.getView(a);u.find(".fusion-nested-column-content").append(t.draggable),i=t.draggable.parent().children(".fusion-builder-live-element").index(t.draggable),FusionPageBuilderApp.onDropCollectionUpdate(s.model,i,n),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.moved+" "+fusionAllElements[s.model.get("element_type")].name+" "+fusionBuilderText.element),o={currentModel:s.model,handleType:"save",attributes:s.model.attributes},fusionGlobalManager.handleMultiGlobal(o),FusionEvents.trigger("fusion-content-changed"),r._equalHeights()}}),FusionPageBuilderApp.wireframeActive&&this.disableDroppableColumn()},disableDroppableColumn:function(){var e=this.$el,t=e.find(".fusion-column-target");void 0!==e.draggable("instance")&&e.draggable("destroy"),void 0!==t.droppable("instance")&&t.droppable("destroy"),void 0!==e.find(".fusion-element-target-column").droppable("instance")&&e.find(".fusion-element-target-column").droppable("destroy")},enableDroppableColumn:function(){this.droppableColumn()},refreshJs:function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-element-render-fusion_builder_column_inner",this.model.attributes.cid)},setElementAttributes:function(i,e){"object"==typeof e&&i.length&&_.each(e,function(e,t){"class"===t?i.addClass(e):"id"===t?i.attr("id",e):"style"===t?i.attr("style",e):-1!==t.indexOf("data")&&(t=t.replace(/_/g,"-"),i.attr(t,e))})},removeColumn:function(e){var t,i=FusionPageBuilderViewManager.getView(this.model.get("parent")),o=this.$el.closest(".fusion-builder-column-outer").data("cid");e&&e.preventDefault(),setTimeout(function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-content-changed",o)},300),t=FusionPageBuilderViewManager.getChildViews(this.model.get("cid")),_.each(t,function(e){e.removeElement()}),FusionPageBuilderViewManager.removeView(this.model.get("cid")),FusionEvents.trigger("fusion-element-removed",this.model.get("cid")),this.model.destroy(),this.remove(),i.setRowData(),e&&FusionEvents.trigger("fusion-content-changed")},appendChildren:function(){var t,i,o=this;this.model.children.each(function(e){t=e.attributes.cid,i=FusionPageBuilderViewManager.getView(t),o.$el.find(".fusion-builder-column-content").append(i.$el),i.delegateEvents()})},addChildView:function(e){var t,i={model:e,collection:FusionPageBuilderElements,attributes:{"data-cid":e.get("cid")}};t=void 0!==e.get("multi")&&"multi_element_parent"===e.get("multi")?void 0!==FusionPageBuilder[e.get("element_type")]?new(FusionPageBuilder[e.get("element_type")])(i):new FusionPageBuilder.ParentElementView(i):void 0!==FusionPageBuilder[e.get("element_type")]?new(FusionPageBuilder[e.get("element_type")])(i):new FusionPageBuilder.ElementView(i),FusionPageBuilderViewManager.addView(e.get("cid"),t),void 0!==this.model&&this.model.get("type"),_.isUndefined(e.get("targetElement"))||void 0!==e.get("from")?void 0===e.get("targetElementPosition")||"end"===e.get("targetElementPosition")?this.$el.find(".fusion-builder-column-content.fusion-nested-column-content").append(t.render().el):this.$el.find(".fusion-builder-column-content.fusion-nested-column-content").find(".fusion-builder-empty-column").after(t.render().el):void 0===e.get("targetElementPosition")||"after"===e.get("targetElementPosition")?e.get("targetElement").after(t.render().el):e.get("targetElement").before(t.render().el),"off"!==FusionApp.preferencesData.open_settings&&void 0!==e.get("added")&&t.settings()},cloneColumn:function(e){var n=jQuery.extend(!0,{},this.model.attributes),t=FusionPageBuilderViewManager.getView(this.model.get("parent"));e&&e.preventDefault(),n.created="manually",n.cid=FusionPageBuilderViewManager.generateCid(),n.targetElement=this.$el,n.cloned=!0,n.at_index=FusionPageBuilderApp.getCollectionIndex(this.$el),FusionPageBuilderApp.collection.add(n),this.$el.find(".fusion-builder-live-element").each(function(){var e,t,i,o;jQuery(this).hasClass("fusion-builder-live-element")&&(e=jQuery(this),t=void 0===e.data("cid")?e.find(".fusion-builder-data-cid").data("cid"):e.data("cid"),i=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}),(o=jQuery.extend(!0,{},i.attributes)).created="manually",o.cid=FusionPageBuilderViewManager.generateCid(),o.parent=n.cid,o.from="fusion_builder_column_inner",delete o.targetElementPosition,FusionPageBuilderApp.collection.add(o))}),e&&(FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.cloned+" "+fusionBuilderText.column),t.createVirtualRows(),t.updateColumnsPreview(),FusionEvents.trigger("fusion-content-changed")),this._refreshJs()},sizeSelectWirefame:function(e){var t=this.model.attributes.params.type,i="",o="",n="",a=this.getColumnSizeText(t),s="",r=FusionPageBuilderViewManager.getView(this.model.get("parent"));void 0!==e&&(e.preventDefault(),void 0!==(i=jQuery(e.currentTarget).attr("data-column-size"))&&(n=i.replace("_","/"),o=this.getColumnSizeText(i),this.$el.attr("data-column-size",i),this.$el.removeClass(a),this.$el.removeClass(t),this.$el.removeClass("fusion-builder-column-"+t),this.$el.removeClass("fusion_builder_column_"+t),this.$el.addClass(o),this.$el.addClass(i),this.$el.addClass("fusion-builder-column-"+i),this.$el.addClass("fusion_builder_column_"+i),this.$el.find(".fusion-builder-resize-inner-column").text(n),setTimeout(function(){r.$el.find(".fusion-builder-column-inner").each(function(){s+=jQuery(this).attr("data-column-size").replace("_","/")+" + "}),r.$el.find(".fusion-builder-module-preview p").html(s.slice(0,s.length-3))},100)),this.sizeSelect(e))},getColumnSizeText:function(e){var t="";switch(e){case"1_1":t="fusion-one-full";break;case"1_4":t="fusion-one-fourth";break;case"3_4":t="fusion-three-fourth";break;case"1_2":t="fusion-one-half";break;case"1_3":t="fusion-one-third";break;case"2_3":t="fusion-two-third";break;case"1_5":t="fusion-one-fifth";break;case"2_5":t="fusion-two-fifth";break;case"3_5":t="fusion-three-fifth";break;case"4_5":t="fusion-four-fifth";break;case"5_6":t="fusion-five-sixth";break;case"1_6":t="fusion-one-sixth"}return t},onOptionChange:function(e,t,i){var o=this.model.get("parent"),n=this.model.get("cid"),a=!1;switch((void 0===i||void 0!==i&&("change"!==i.type||"change"===i.type&&void 0!==i.srcElement))&&(a=!0),e){case"spacing":this.model.attributes.params[e]=t,this.validColumnSpacing(t)&&FusionPageBuilderViewManager.getView(o).setSingleRowData(n),!0===a&&("yes"===t||"no"===t?this.destroySpacingResizable():(this.columnSpacer=!1,this.columnSpacing()));break;case"margin_top":case"margin_bottom":this.model.attributes.params[e]=t,!0===a&&(this.destroyMarginResizable(),this.marginDrag());break;case"padding_top":case"padding_right":case"padding_bottom":case"padding_left":this.model.attributes.params[e]=t,!0===a&&(this.destroyPaddingResizable(),this.paddingDrag())}},sortableElements:function(){var i=this;this.$el.find(".fusion-builder-column-content").sortable({items:".fusion-builder-live-element",connectWith:".fusion-builder-column-inner .fusion-builder-column-content",cancel:".fusion-builder-settings, .fusion-builder-clone, .fusion-builder-remove, .fusion-builder-element-save, .fusion-builder-add-element, .fusion-builder-insert-column, .fusion-builder-save-module-dialog, .fusion-builder-inner-row-close",tolerance:"pointer",appendTo:i.$el.find(".fusion-builder-column-content").parent(),helper:"clone",over:function(e){i.onSortOver(e)},update:function(e,t){i.onSortUpdate(e,t)},stop:function(e,t){i.onSortStop(e,t)}})},getColumnContent:function(){var e,i={},o="";return _.each(this.model.get("params"),function(e,t){i[t]="undefined"===e||void 0===e?"":e}),e={min_height:"",last:"no",hover_type:"none",link:"",border_position:"all"},_.each(e,function(e,t){void 0===i[t]&&(i[t]=e)}),o+='[fusion_builder_column_inner type="'+i.type+'"',_.each(i,function(e,t){o+=" "+t+'="'+e+'"'}),o+="]",this.$el.find(".fusion-builder-live-element").each(function(){o+=FusionPageBuilderApp.generateElementShortcode(jQuery(this),!1)}),o+="[/fusion_builder_column_inner]"}})})}(jQuery);FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.InnerRowView=FusionPageBuilder.BaseRowView.extend({className:"fusion_builder_row_inner fusion_builder_column_element fusion-nested-columns fusion-builder-nested-element",template:FusionPageBuilder.template(jQuery("#fusion-builder-row-inner-template").html()),defaultZIndex:10,events:{"click .fusion-builder-row-remove":"removeRow","click .fusion-builder-row-save":"openLibrary","click .fusion-builder-row-clone":"cloneNestedRow","click .fusion-builder-row-settings":"editRow","click .fusion-builder-stop-editing":"stopEdit","click .fusion-builder-cancel-row":"cancelChanges","click .fusion-builder-row-add-child":"displayInnerColumn","click .fusion-builder-insert-inner-column":"displayInnerColumn","click .fusion-builder-settings":"editNestedColumn","click .fusion-builder-modal-save":"closeNestedPopupAndSave","click .fusion-builder-inner-row-close":"closeNestedPopup","click .fusion-builder-modal-close":"closeNestedPopup","mousedown .fusion-builder-nested-columns-settings-overlay":"overlayMousedown"},initialize:function(){this.model.set("rows",{}),this.$el.attr("data-cid",this.model.get("cid")),void 0!==this.model.attributes.params&&void 0!==this.model.attributes.params.fusion_global&&(this.$el.attr("fusion-global-layout",this.model.attributes.params.fusion_global),this.$el.removeClass("fusion-global-nested-row").addClass("fusion-global-nested-row")),this.listenTo(FusionEvents,"fusion-close-inner-modal",this.hideInnerRowDialog),this.model.children=new FusionPageBuilder.Collection,this.savedContent="",this.listenTo(this.model.children,"add",this.addChildView),this.listenTo(FusionEvents,"fusion-builder-loaded",this.updateColumnsPreview),this.listenTo(FusionEvents,"fusion-wireframe-toggle",this.wireFrameToggled)},render:function(){var e=this;return this.$el.html(this.template(this.model.toJSON())),setTimeout(function(){e.droppableColumn(),e.droppableElement(),e.updateWireframeUI()},100),this},updateWireframeUI:function(){var e=this.$el,t="";this.$el.find(".fusion-nested-column-preview-columns").remove(),e.find(".fusion-builder-column-inner").each(function(){t+=jQuery(this).data("column-size").replace("_","/")+" + "}),e.find(".fusion-nested-column-preview-title").after('<p class="fusion-nested-column-preview-columns">'+t.slice(0,t.length-3)+"</p>")},overlayMousedown:function(e){e.stopPropagation()},getContent:function(){return this.getInnerRowContent()},droppableColumn:function(){var l=this.$el;l.find(".fusion-nested-column-target").droppable({tolerance:"touch",hoverClass:"ui-droppable-active",accept:".fusion-builder-column",drop:function(e,t){var i,o=jQuery(e.target).closest(".fusion-builder-row-content").data("cid"),n=FusionPageBuilderViewManager.getView(o),a=t.draggable.data("cid"),s=FusionPageBuilderViewManager.getView(a),r=s.model.get("parent");i=t.draggable.parent().children(".fusion-builder-column").index(t.draggable),FusionPageBuilderApp.onDropCollectionUpdate(s.model,i,self.model.get("cid")),l.find(".fusion-builder-row-container-inner").append(t.draggable),n.setRowData(),o!==r&&FusionPageBuilderViewManager.getView(r).setRowData(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.column+" order changed"),setTimeout(function(){s.droppableColumn()},300)}})},disableDroppableElement:function(){var e=this.$el;void 0!==e.draggable("instance")&&e.draggable("disable"),void 0!==e.find("> .fusion-element-target").droppable("instance")&&e.find("> .fusion-element-target").droppable("disable")},enableDroppableElement:function(){var e=this.$el;void 0!==e.draggable("instance")&&void 0!==e.find("> .fusion-element-target").droppable("instance")?(e.draggable("enable"),e.find("> .fusion-element-target").droppable("enable")):this.droppableElement()},droppableElement:function(){var l=this.$el,t=this.model.get("cid"),e=jQuery("#fb-preview")[0].contentWindow.jQuery("body");l.draggable({appendTo:FusionPageBuilderApp.$el,zIndex:999999,delay:100,cursorAt:{top:15,left:15},iframeScroll:!0,containment:e,cancel:".fusion-live-editable, .fusion-builder-live-child-element:not( [data-fusion-no-dragging] )",helper:function(){var e=FusionPageBuilderApp.DraggableHelpers.draggableClasses(t);return jQuery('<div class="fusion-element-helper '+e+'" data-cid="'+t+'"><span class="fusiona-column"></span></div>')},start:function(){e.addClass("fusion-element-dragging fusion-active-dragging"),l.addClass("fusion-being-dragged"),l.prev(".fusion-builder-live-element").find(".target-after").addClass("target-disabled")},stop:function(){setTimeout(function(){e.removeClass("fusion-element-dragging fusion-active-dragging")},10),l.removeClass("fusion-being-dragged"),FusionPageBuilderApp.$el.find(".target-disabled").removeClass("target-disabled")}}),l.find(".fusion-element-target").droppable({tolerance:"touch",hoverClass:"ui-droppable-active",accept:".fusion-builder-live-element, .fusion_builder_row_inner",drop:function(e,t){var i,o,n=jQuery(e.target).closest(".fusion-builder-column").data("cid"),a=FusionPageBuilderViewManager.getView(n),s=t.draggable.data("cid"),r=FusionPageBuilderViewManager.getView(s);jQuery(e.target).hasClass("target-after")?l.after(t.draggable):l.before(t.draggable),o=t.draggable.parent().children(".fusion-builder-live-element, .fusion_builder_row_inner").index(t.draggable),FusionPageBuilderApp.onDropCollectionUpdate(r.model,o,n),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.moved+" "+fusionAllElements[r.model.get("element_type")].name+" "+fusionBuilderText.element),i={currentModel:r.model,handleType:"save",attributes:r.model.attributes},fusionGlobalManager.handleMultiGlobal(i),FusionEvents.trigger("fusion-content-changed"),a._equalHeights()}}),FusionPageBuilderApp.wireframeActive&&this.disableDroppableElement()},cloneNestedRow:function(e,t){var o,n;e&&e.preventDefault(),(o=jQuery.extend(!0,{},this.model.attributes)).created="manually",o.cid=FusionPageBuilderViewManager.generateCid(),o.at_index=FusionPageBuilderApp.getCollectionIndex(this.$el),e&&(o.targetElement=this.$el,o.targetElementPosition="after"),t&&(o.parent=t),FusionPageBuilderApp.collection.add(o),this.$el.find(".fusion-builder-column-inner").each(function(){var e=jQuery(this),t=e.data("cid"),i=FusionPageBuilderViewManager.getView(t);(n=jQuery.extend(!0,{},i.model.attributes)).created="manually",n.cid=FusionPageBuilderViewManager.generateCid(),n.parent=o.cid,FusionPageBuilderApp.collection.add(n),e.find(".fusion-builder-live-element").each(function(){var e=jQuery(this),t=void 0===e.data("cid")?e.find(".fusion-builder-data-cid").data("cid"):e.data("cid"),i=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}),o=jQuery.extend(!0,{},i.attributes);o.created="manually",o.cid=FusionPageBuilderViewManager.generateCid(),o.parent=n.cid,o.from="fusion_builder_row_inner",delete o.targetElementPosition,FusionPageBuilderApp.collection.add(o)})}),t||(FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.cloned_nested_columns),FusionEvents.trigger("fusion-content-changed"))},editRow:function(e){var t;e&&e.preventDefault(),this.savedContent=this.getInnerRowContent(),(t=FusionPageBuilderViewManager.getView(this.model.get("parent"))).$el.addClass("fusion-builder-editing-child"),t.$el.removeClass("active"),t.$el.closest(".fusion-builder-container").removeClass("fusion-column-sizer-active"),t.$el.closest(".fusion-builder-row").addClass("fusion-builder-row-editing-child"),this.$el.addClass("editing"),this.$el.append('<div class="fusion-row-overlay"></div>'),jQuery("body").addClass("nested-ui-active"),jQuery("#fb-preview")[0].contentWindow.jQuery("body").append('<div class="fusion-row-overlay"></div>'),jQuery("#fb-preview")[0].contentWindow.jQuery("body").addClass("nested-ui-active nested-columns-edited"),FusionEvents.trigger("fusion-history-pause-tracking")},stopEdit:function(e){e&&e.preventDefault(),this.removeEditUI(),this.closeChildrenSettings(),FusionEvents.trigger("fusion-history-resume-tracking"),!0===this.contentChanged()&&(window.fusionHistoryState=fusionBuilderText.edited+" "+fusionAllElements[this.model.get("element_type")].name+" "+fusionBuilderText.element,FusionEvents.trigger("fusion-history-save-step",window.fusionHistoryState))},contentChanged:function(){return this.getInnerRowContent()!==this.savedContent},removeEditUI:function(e){var t;e&&e.preventDefault(),(t=FusionPageBuilderViewManager.getView(this.model.get("parent"))).$el.removeClass("fusion-builder-editing-child"),t.$el.closest(".fusion-builder-row").removeClass("fusion-builder-row-editing-child"),this.$el.removeClass("editing"),this.$el.find(".fusion-row-overlay").remove(),jQuery("body").removeClass("nested-ui-active"),jQuery("#fb-preview")[0].contentWindow.jQuery("body").find(".fusion-row-overlay").remove(),jQuery("#fb-preview")[0].contentWindow.jQuery("body").removeClass("nested-ui-active nested-columns-edited")},closeChildrenSettings:function(){_.each(this.collection.models,function(e){("element"===e.attributes.type||"fusion_builder_column_inner"===e.attributes.type)&&0<jQuery('.fusion_builder_module_settings[data-cid="'+e.attributes.cid+'"]').length&&FusionEvents.trigger("fusion-close-settings-"+e.attributes.cid)})},getInnerRowContent:function(){var i="",e=this.$el,t=e.data("cid");return FusionPageBuilderElements.findWhere({cid:t}),i+="[fusion_builder_row_inner]",e.find(".fusion-builder-column-inner").each(function(){var e=jQuery(this).data("cid"),t=FusionPageBuilderViewManager.getView(e);i+=t.getColumnContent()}),i+="[/fusion_builder_row_inner]"},removeRow:function(e){var t;e&&e.preventDefault(),t=FusionPageBuilderViewManager.getChildViews(this.model.get("cid")),_.each(t,function(e){e.removeColumn()}),FusionPageBuilderViewManager.removeView(this.model.get("cid")),FusionEvents.trigger("fusion-element-removed",this.model.get("cid")),this.model.destroy(),this.remove(),e&&(FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.deleted_nested_columns),FusionEvents.trigger("fusion-content-changed"),this.removeEditUI())},cancelChanges:function(e){e&&e.preventDefault(),this.removeEditUI(),this.closeChildrenSettings(),!0===this.contentChanged()&&(FusionPageBuilderApp.shortcodesToBuilder(this.savedContent,this.model.get("parent"),"undefined","undefined",this.$el),this.removeRow()),FusionEvents.trigger("fusion-history-resume-tracking")},addNestedColumn:function(e,t,i,o){var n,a,s,r,l,u;return r=this.model.get("cid"),n=this.options.view,a=fusionAllElements.fusion_builder_column_inner.params,s={},_.each(a,function(e){l=_.isObject(e.value)?e.default:e.value,s[e.param_name]=l}),s.type=e,u={type:"fusion_builder_column_inner",element_type:"fusion_builder_column_inner",cid:FusionPageBuilderViewManager.generateCid(),parent:r,view:n,params:s,targetElement:i,at_index:o},u=jQuery.extend(!0,{},u),this.collection.add([u]),u.cid},addChildView:function(e){var t,i={model:e,collection:FusionPageBuilderElements,attributes:{"data-cid":e.get("cid")}};i.className="fusion-builder-column fusion-builder-column-inner fusion-builder-column-"+e.attributes.params.type,this.createVirtualRows(),t=new FusionPageBuilder.NestedColumnView(i),_.isUndefined(e.get("cloned"))||!0!==e.get("cloned")||(e.targetElement=t.$el,e.unset("cloned")),FusionPageBuilderViewManager.addView(e.get("cid"),t),_.isUndefined(e.get("targetElement"))||void 0!==e.get("from")?(void 0===e.get("targetElementPosition")||"end"===e.get("targetElementPosition")?this.$el.find(".fusion-builder-row-container-inner").append(t.render().el):this.$el.find(".fusion-builder-row-container-inner").prepend(t.render().el),e.unset("from")):void 0===e.get("targetElementPosition")||"after"===e.get("targetElementPosition")?e.get("targetElement").after(t.render().el):e.get("targetElement").before(t.render().el),this.updateColumnsPreview()},displayInnerColumn:function(e){var t,i,o;e&&e.preventDefault(),o=jQuery(e.currentTarget).closest(".fusion-builder-column-inner").data("cid"),FusionPageBuilderApp.parentRowId=this.model.get("cid"),i={model:this.model,collection:this.collection,view:this,attributes:{"data-modal_view":"nested_column_library","data-parent_cid":this.model.get("cid"),"data-nested_column_cid":o}},t=new FusionPageBuilder.NestedColumnLibraryView(i),jQuery(t.render().el).dialog({title:"Select Column",width:FusionApp.dialog.dialogWidth,height:FusionApp.dialog.dialogHeight,draggable:!1,modal:!0,resizable:!1,dialogClass:"fusion-builder-dialog fusion-builder-element-library-dialog",open:function(e){jQuery(e.target).find(".fusion-builder-modal-top-container").appendTo(".fusion-builder-element-library-dialog .ui-dialog-titlebar"),FusionApp.dialog.resizeDialog()},close:function(){t.remove()}})},editNestedColumn:function(e){e&&e.preventDefault(),this.savedContent=this.getInnerRowContent(),this.$el.find(".fusion-builder-row-content").addClass("fusion-builder-row-content-active"),this.$el.closest(".fusion-row").addClass("fusion-builder-row-active"),this.$el.closest(".fusion-builder-ui-wireframe").addClass("fusion-builder-nested-cols-dialog-open"),this.$el.closest(".fusion-builder-column").removeClass("active"),this.$el.closest(".fusion-builder-container").removeClass("fusion-column-sizer-active"),FusionEvents.trigger("fusion-history-turn-on-tracking"),FusionEvents.trigger("fusion-history-capture-editor"),FusionEvents.trigger("fusion-history-turn-off-tracking"),FusionEvents.trigger("fusion-history-pause-tracking")},closeNestedPopupAndSave:function(e){e&&e.preventDefault(),this.updateWireframeUI(),this.$el.find(".fusion-builder-row-content").removeClass("fusion-builder-row-content-active"),this.$el.closest(".fusion-row").removeClass("fusion-builder-row-active"),this.$el.closest(".fusion-builder-ui-wireframe").removeClass("fusion-builder-nested-cols-dialog-open")},closeNestedPopup:function(e){e&&e.preventDefault(),this.$el.find(".fusion-builder-row-content").removeClass("fusion-builder-row-content-active"),this.$el.closest(".fusion-row").removeClass("fusion-builder-row-active"),this.$el.closest(".fusion-builder-ui-wireframe").removeClass("fusion-builder-nested-cols-dialog-open"),!0===this.contentChanged()&&(FusionPageBuilderApp.shortcodesToBuilder(this.savedContent,this.model.get("parent"),"undefined","undefined",this.$el),this.removeRow()),FusionEvents.trigger("fusion-history-resume-tracking")},openLibrary:function(e){var t={model:{target:jQuery(e.currentTarget).data("target"),focus:jQuery(e.currentTarget).data("focus"),element_cid:this.model.get("cid"),element_name:void 0!==this.model.get("admin_label")&&""!==this.model.get("admin_label")?this.model.get("admin_label"):""}};e&&(e.preventDefault(),e.stopPropagation(),FusionPageBuilderApp.sizesHide(e)),new FusionPageBuilder.LibraryView(t).render(),FusionPageBuilderApp.removeContextMenu()},wireFrameToggled:function(){FusionPageBuilderApp.wireframeActive?(jQuery("body").hasClass("nested-ui-active")&&this.stopEdit(),this.enableSortableColumns(),this.disableDroppableElement(),this.updateWireframeUI()):(this.disableSortableColumns(),this.enableDroppableElement())},disableSortableColumns:function(){this.$el.find(".fusion-builder-row-container").sortable("disable")},sortableColumns:function(){var e=this.$el.find(".fusion-builder-row-container-inner"),i=".fusion-builder-column-inner",o=this;e.sortable({items:i,helper:"clone",cancel:".fusion-builder-settings-column, .fusion-builder-column-size, .fusion-builder-column-clone, .fusion-builder-column-remove, .fusion-builder-add-element, .fusion-builder-insert-column, .fusion-builder-save-column, .column-sizes, .fusion-builder-modal-save, .fusion-builder-inner-row-close",tolerance:"pointer",update:function(){o.onSortUpdate()},stop:function(e,t){o.onSortStop(e,t,i)}}).disableSelection()}})});FusionPageBuilder=FusionPageBuilder||{};!function(e){e(document).ready(function(){FusionPageBuilder.BlankPageView=window.wp.Backbone.View.extend({className:"fusion-builder-blank-page",template:FusionPageBuilder.template(e("#fusion-builder-blank-page-template").html()),events:{"click .fusion-builder-new-section-add":"addContainer","click .fusion-builder-video-button":"openVideoModal","click #fusion-load-template-dialog":"openLibrary"},initialize:function(){this.$el.attr("data-cid",this.model.get("cid"))},render:function(){var e=this.getColorScheme(FusionApp.settings.content_bg_color);return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass("fusion-builder-scheme-"+e),this.$el.find("#video-dialog").dialog({dialogClass:"fusion-builder-dialog fusion-video-dialog",autoOpen:!1,modal:!0,height:470,width:700}),this},getColorScheme:function(e){return e="string"!=typeof e?"#ffffff":e.replace("#",""),8388607.5<parseInt(e,16)?"light":"dark"},openVideoModal:function(e){e&&e.preventDefault(),jQuery("#video-dialog").dialog("open"),jQuery("#video-dialog iframe").focus(),jQuery("#video-dialog iframe")[0].contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")},addContainer:function(e){var t,i,o,n;e&&(e.preventDefault(),FusionPageBuilderApp.newContainerAdded=!0),t=FusionPageBuilderViewManager.generateCid(),i=fusionAllElements.fusion_builder_container.params,o={},_.each(i,function(e){n=_.isObject(e.value)?e.default:e.value,o[e.param_name]=n,"dimension"===e.type&&_.isObject(e.value)&&_.each(e.value,function(e,t){o[t]=e})}),this.collection.add([{type:"fusion_builder_container",added:"manually",element_type:"fusion_builder_container",cid:t,params:o,view:this,created:"auto"}]),FusionPageBuilderViewManager.getView(t).addRow(),this.removeBlankPageHelper()},openLibrary:function(e){var t={model:{target:jQuery(e.currentTarget).data("target"),focus:jQuery(e.currentTarget).data("focus")}};e&&(e.preventDefault(),e.stopPropagation(),FusionPageBuilderApp.sizesHide(e)),new FusionPageBuilder.LibraryView(t).render()},removeBlankPageHelper:function(e){e&&e.preventDefault(),FusionPageBuilderViewManager.removeView(this.model.get("cid")),this.model.destroy(),jQuery("#video-dialog").length&&jQuery("#video-dialog").dialog("destroy"),this.remove()}}),jQuery("body").on("click",".ui-dialog-titlebar-close",function(){var e=jQuery(this).closest(".ui-dialog");e.find("#video-dialog").length&&(e.find("#video-dialog iframe")[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),e.hide())})})}(jQuery);FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.PreferencesView=window.wp.Backbone.View.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-front-end-preferences").html()),events:{"click .fusion-panel-description":"showHideDescription","change .button-set-value":"optionChanged"},initialize:function(){},render:function(){var e=this;return this.$el.html(this.template()),this.$el=this.$el.dialog({title:"Preferences",width:600,height:FusionApp.dialog.dialogHeight,draggable:!1,resizable:!1,modal:!0,dialogClass:"fusion-builder-dialog fusion-builder-settings-dialog fusion-builder-preferences-dialog",open:function(e){var t=jQuery(e.target);FusionPageBuilder.options.radioButtonSet.optionRadioButtonSet(t),FusionApp.dialog.resizeDialog()},close:function(){e.saveChanges()}}).closest(".ui-dialog"),this},optionChanged:function(){var e,t={},i=[];for(this.$el.find("input").each(function(){t[jQuery(this).attr("id")]=jQuery(this).val(),t[jQuery(this).attr("id")]!==FusionApp.preferencesData[jQuery(this).attr("id")]&&i.push(jQuery(this).attr("id"))}),FusionApp.preferencesData=t,e=0;e<i.length;e++)FusionEvents.trigger("fusion-preferences-"+i[e]+"-updated")},saveChanges:function(){var e={};jQuery("li.fusion-builder-preferences").css("pointer-events","none"),this.$el.find("input").each(function(){e[jQuery(this).attr("id")]=jQuery(this).val()}),FusionApp.preferencesData=e,jQuery.ajax({type:"POST",url:fusionAppConfig.ajaxurl,dataType:"JSON",data:{action:"fusion_app_save_builder_preferences",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,preferences:e},success:function(e){FusionApp.preferences=e,jQuery("li.fusion-builder-preferences").css("pointer-events","auto")}}),this.removeView()},removeView:function(){this.$el.find(".fusion-save-element-fields").remove(),this.$el.find(".fusion-tabs-menu").appendTo("#fusion-builder-front-end-library"),this.remove()},showHideDescription:function(e){var t=jQuery(e.currentTarget);t.closest(".fusion-builder-option").find(".description").slideToggle(250),t.toggleClass("active")}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.ElementPreviewView=window.wp.Backbone.View.extend({className:"fusion_module_block_preview ",initialize:function(){jQuery("#"+fusionAllElements[this.model.attributes.element_type].preview_id).length?this.template=FusionPageBuilder.template(jQuery("#"+fusionAllElements[this.model.attributes.element_type].preview_id).html()):this.template=FusionPageBuilder.template(jQuery("#fusion-builder-block-module-default-preview-template").html())},render:function(){return this.$el.html(this.template(this.model.attributes)),this}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.NextPage=FusionPageBuilder.BaseView.extend({className:"fusion-builder-next-page",template:FusionPageBuilder.template(jQuery("#fusion-builder-next-page-template").html()),events:{"click .fusion-builder-delete-next-page":"removeNextPage","click .fusion-builder-next-page-toggle":"toggleNextPagePreview","click .fusion-builder-next-page-link":"changePageTrigger"},initialize:function(){var e=this.model.get("params");this.$el.attr("data-cid",this.model.get("cid")),FusionApp.data.next_page_elements_count<=FusionPageBuilderViewManager.countElementsByType("fusion_builder_next_page")&&(FusionApp.data.next_page_elements_count+=1),e.last&&this.$el.addClass("fusion-builder-next-page-last"),this.listenTo(FusionEvents,"fusion-wireframe-toggle",this.wireFrameToggled)},render:function(){var e=this,t=this.getTemplateAtts();return this.$el.html(this.template(t)),this.addPaginationLinks(),setTimeout(function(){e.droppableContainer()},100),this},droppableContainer:function(){var i=this.$el,t=this.model.get("cid"),e=jQuery("#fb-preview")[0].contentWindow.jQuery("body");i&&(i.draggable({appendTo:FusionPageBuilderApp.$el,zIndex:999999,delay:100,cursorAt:{top:15,left:15},iframeScroll:!0,containment:e,cancel:".fusion-builder-column",helper:function(){var e=FusionPageBuilderApp.DraggableHelpers.draggableClasses(t);return jQuery('<div class="fusion-container-helper '+e+'" data-cid="'+t+'"><span class="fusiona-container"></span></div>')},start:function(){e.addClass("fusion-container-dragging fusion-active-dragging"),i.addClass("fusion-being-dragged"),i.prev(".fusion-builder-container").length&&i.prev(".fusion-builder-container").addClass("hide-target-after"),i.prev(".fusion-fusion-builder-next-pager").length&&i.prev(".fusion-fusion-builder-next-page").addClass("hide-target-after")},stop:function(){setTimeout(function(){e.removeClass("fusion-container-dragging fusion-active-dragging")},10),i.removeClass("fusion-being-dragged"),FusionPageBuilderApp.$el.find(".hide-target-after").removeClass("hide-target-after")}}),i.find(".fusion-container-target").droppable({tolerance:"touch",hoverClass:"ui-droppable-active",accept:".fusion-builder-container, .fusion-builder-next-page",drop:function(e,t){jQuery(e.target).hasClass("target-after")?i.after(t.draggable):i.before(t.draggable),FusionEvents.trigger("fusion-content-changed"),FusionPageBuilderApp.scrollingContainers(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.nextpage+" Element order changed")}}),FusionPageBuilderApp.wireframeActive&&this.disableDroppableContainer())},enableDroppableContainer:function(){var e=this.$el;void 0!==e.draggable("instance")&&void 0!==e.find(".fusion-container-target").droppable("instance")?(e.draggable("enable"),e.find(".fusion-container-target").droppable("enable")):this.droppableContainer()},disableDroppableContainer:function(){var e=this.$el;void 0!==e.draggable("instance")&&e.draggable("disable"),void 0!==e.find(".fusion-container-target").droppable("instance")&&e.find(".fusion-container-target").droppable("disable")},wireFrameToggled:function(){FusionPageBuilderApp.wireframeActive?this.disableDroppableContainer():this.enableDroppableContainer()},getTemplateAtts:function(){var e={},t=Math.max(FusionApp.data.next_page_elements_count,FusionPageBuilderViewManager.countElementsByType("fusion_builder_next_page"));return e.pages=t,e=this.filterTemplateAtts(e)},addPaginationLinks:function(){var e,t=jQuery("#fb-preview").contents().find(".fusion-builder-next-page"),i="";for(e=1;e<=FusionApp.data.next_page_elements_count;e++)i=1===e?" current":"",this.$el.find(".fusion-builder-next-page-pagination").append('<a class="fusion-builder-next-page-link'+i+'" href="#" data-page="'+e+'">'+e+"</a>");t.find(".fusion-builder-next-page-pagination").eq(0).find(".fusion-builder-next-page-link").length<FusionApp.data.next_page_elements_count&&t.each(function(){jQuery(this).find(".fusion-builder-next-page-pagination").append('<a class="fusion-builder-next-page-link" href="#" data-page="'+FusionApp.data.next_page_elements_count+'">'+FusionApp.data.next_page_elements_count+"</a>")})},removeNextPage:function(e){var t=jQuery("#fb-preview").contents().find(".fusion-builder-next-page"),i=jQuery("#fb-preview").contents().find(".fusion-builder-container"),o=this.$el.hasClass("live-preview-active"),n=t.index(this.$el);e&&e.preventDefault(),FusionPageBuilderViewManager.removeView(this.model.get("cid")),this.model.destroy(),this.remove(),FusionApp.data.next_page_elements_count-=1,jQuery("#fb-preview").contents().find(".fusion-builder-next-page").each(function(){jQuery(this).find(".fusion-builder-next-page-link").eq(0).remove(),jQuery(this).find(".fusion-builder-next-page-link").each(function(e){jQuery(this).attr("data-page",e+1),jQuery(this).html(e+1)})}),o&&(jQuery(t.get(n)).length&&2<t.length?this.changePage(n):(i.show(),2===t.length&&this.toggleNextPagePreview())),FusionEvents.trigger("fusion-content-changed"),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.deleted_nextpage)},toggleNextPagePreview:function(e){var t=jQuery("#fb-preview").contents().find(".fusion-builder-next-page"),i=jQuery("#fb-preview").contents().find(".fusion-builder-next-page-last"),o=jQuery("#fb-preview").contents().find(".fusion-builder-container"),n=t.index(this.$el);e&&e.preventDefault(),this.$el.hasClass("live-preview-active")?(t.show(),i.hide(),o.show()):this.changePage(n),t.toggleClass("live-preview-active")},changePageTrigger:function(e){var t=parseInt(jQuery(e.target).html(),10)-1;e.preventDefault(),this.changePage(t)},changePage:function(e){var t=jQuery("#fb-preview").contents().find(".fusion-builder-next-page").eq(e),i=jQuery("#fb-preview").contents().find(".fusion-builder-next-page").eq(e-1),o=jQuery("#fb-preview").contents().find(".fusion-builder-next-page"),n=jQuery("#fb-preview").contents().find(".fusion-builder-container");o.removeClass("fusion-next-page-active"),o.find(".fusion-builder-next-page-link").removeClass("current"),o.hide(),n.hide(),t.addClass("fusion-next-page-active"),t.show(),t.find('.fusion-builder-next-page-link[data-page="'+(e+1)+'"]').addClass("current"),0===e?t.prevAll(".fusion-builder-container").show():(t.prevAll(".fusion-builder-container").show(),i.prevAll(".fusion-builder-container").hide())},nextPageTriggerEvent:function(e){FusionEvents.trigger("fusion-next-page"),e&&(e.preventDefault(),FusionEvents.trigger("fusion-next-page"))}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.keyBoardShorCutsView=window.wp.Backbone.View.extend({template:FusionPageBuilder.template(jQuery("#fusion-builder-front-end-keyboard-shortcuts").html()),events:{"click .fusion-open-prefernces-panel":"openPreferencePanel"},initialize:function(){},render:function(){var e=this;return this.$el.html(this.template()),this.$el=this.$el.dialog({title:"Keyboard Shortcuts",width:600,height:FusionApp.dialog.dialogHeight,draggable:!1,resizable:!1,modal:!0,dialogClass:"fusion-builder-large-library-dialog fusion-builder-dialog fusion-builder-keyboard-shortcuts-dialog",open:function(){FusionApp.dialog.resizeDialog()},close:function(){e.removeDialog()}}).closest(".ui-dialog"),this},removeDialog:function(){this.remove()},openPreferencePanel:function(){this.remove(),jQuery(".fusion-builder-preferences").trigger("click")}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.LibraryView=window.wp.Backbone.View.extend({el:"#fusion-builder-front-end-library",events:{"click .fusion-tabs-menu > li > a":"switchTab","change .fusion-builder-demo-select":"demoSelect","input .fusion-builder-demo-page-link":"demoSelectByURL","click .fusion-builder-demo-button-load":"loadDemoPage","click .ui-dialog-titlebar-close":"removeView","click .fusion-builder-layout-button-load":"loadLayout","click .fusion-builder-layout-button-save":"saveLayout","click .fusion-builder-layout-button-delete":"deleteLayout","click .fusion-builder-element-button-save":"saveElement"},initialize:function(){var t=this;jQuery(document).on("click",".fusion-builder-library-dialog .fusion-tabs-menu > li > a",function(e){t.switchTab(e)}),this.listenTo(FusionEvents,"fusion-show-loader",this.showLoader),this.listenTo(FusionEvents,"fusion-hide-loader",this.hideLoader)},showLoader:function(){jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-builder-live-editor").css("height","148px"),jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-builder-live-editor").append('<div class="fusion-builder-element-content fusion-loader"><span class="fusion-builder-loader"></span></div>'),jQuery("#fb-preview")[0].contentWindow.jQuery("#fusion_builder_container").hide()},hideLoader:function(){jQuery("#fb-preview")[0].contentWindow.jQuery("#fusion_builder_container").fadeIn("fast"),jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-builder-live-editor > .fusion-builder-element-content.fusion-loader").remove(),jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-builder-live-editor").removeAttr("style")},render:function(){var e=this;return this.$el=this.$el.dialog({title:"Fusion Builder Library",width:FusionApp.dialog.dialogWidth,height:FusionApp.dialog.dialogHeight,draggable:!1,resizable:!1,modal:!0,dialogClass:"fusion-builder-large-library-dialog fusion-builder-dialog fusion-builder-library-dialog",open:function(){FusionApp.dialog.resizeDialog()},close:function(){e.removeView()}}).closest(".ui-dialog"),this.appendSave(),this.targetTab(),this.focusInput(),this},targetTab:function(){void 0!==this.model.target?this.$el.find('.fusion-tabs-menu > li > a[href="'+this.model.target+'"]').trigger("click"):this.$el.find(".fusion-tabs-menu > li:first-child > a").trigger("click")},focusInput:function(){var e=this;void 0!==this.model.focus&&setTimeout(function(){e.$el.find(e.model.target).find(e.model.focus).focus()},200)},appendSave:function(){var e,t;void 0!==this.model.target&&void 0!==this.model.element_cid&&(t=void 0!==(e=FusionPageBuilderViewManager.getView(this.model.element_cid)).getSaveLabel?e.getSaveLabel():fusionBuilderText.save_element,jQuery(this.model.target).find(".fusion-builder-layouts-header-element-fields").append('<div class="fusion-save-element-fields"><div class="save-as-global"><label><input type="checkbox" id="fusion_save_global" name="fusion_save_global">'+fusionBuilderText.save_global+'</label></div><input type="text" value="'+this.model.element_name+'" id="fusion-builder-save-element-input" class="fusion-builder-save-element-input" placeholder="'+fusionBuilderText.enter_name+'" /><a href="#" class="fusion-builder-save-column fusion-builder-element-button-save" data-element-cid="'+this.model.element_cid+'">'+t+"</a></div>"))},switchTab:function(e){var t=jQuery(e.target),i=t.attr("href");e&&e.preventDefault(),FusionEvents.trigger("fusion-switch-element-option-tabs"),t.parent("li").addClass("current").removeClass("inactive"),t.parent("li").siblings().removeClass("current").addClass("inactive"),this.$el.find(".fusion-builder-layouts-tab").css("display","none"),this.$el.find(i).css("display","block")},demoSelect:function(e){var t=jQuery(e.target).val();jQuery("#fusion-builder-layouts-demos .fusion-page-layouts").addClass("hidden"),jQuery("#fusion-builder-demo-url-invalid").addClass("hidden"),jQuery(".fusion-builder-demo-page-link").val(""),jQuery("#fusion-builder-layouts-demos .demo-"+t).removeClass("hidden")},demoSelectByURL:function(e){var t,i,o,n=jQuery(e.target).val();"/"===(n=n.replace("https://","").replace("http://",""))[n.length-1]||_.isEmpty(n)||(n+="/"),i=(t=jQuery("#fusion-builder-layouts-demos").find('.fusion-page-layout[data-page-link="'+n+'"]')).closest(".fusion-page-layouts"),jQuery("#fusion-builder-layouts-demos .fusion-page-layouts").addClass("hidden"),jQuery("#fusion-builder-demo-url-invalid").addClass("hidden"),_.isEmpty(n)?(o=jQuery(".fusion-builder-demo-select").val(),jQuery("#fusion-builder-layouts-demos .demo-"+o).removeClass("hidden")):t.length?(i.show(),i.find(".fusion-page-layout").hide(),t.show()):jQuery("#fusion-builder-demo-url-invalid").removeClass("hidden")},loadDemoPage:function(e){var t,i,o,n,a=this,s=document.getElementById("fb-preview").contentWindow.document,r=s.write;s.write=function(){},document.write=function(){},e&&e.preventDefault(),FusionApp.confirmationPopup({title:fusionBuilderText.import_demo_page,content:fusionBuilderText.importing_single_page,actions:[{label:fusionBuilderText.cancel,classes:"no",callback:function(){FusionApp.confirmationPopup({action:"hide"})}},{label:fusionBuilderText.ok,classes:"yes",callback:function(){!0!==FusionPageBuilderApp.layoutIsLoading&&(FusionPageBuilderApp.layoutIsLoading=!0,FusionPageBuilderApp.loaded=!1,t=jQuery(e.currentTarget).data("page-name"),i=jQuery(e.currentTarget).data("demo-name"),o=jQuery(e.currentTarget).data("post-id"),jQuery.ajax({type:"POST",url:fusionAppConfig.ajaxurl,data:{action:"fusion_builder_load_demo",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,page_name:t,demo_name:i,post_id:o},beforeSend:function(){FusionEvents.trigger("fusion-show-loader"),FusionApp.confirmationPopup({action:"hide"}),a.$el.css("display","none"),a.$el.next(".ui-widget-overlay").css("display","none")},success:function(e){var t,i,o=!1;FusionPageBuilderApp.layoutLoaded(),i=void 0!==(t=JSON.parse(e)).custom_css&&t.custom_css,n=t.post_content,i&&(FusionApp.data.postMeta._fusion_builder_custom_css=i),jQuery.each(t.post_meta,function(e,t){o=!0,"pyre_sidebar_1"===e?FusionApp.data.postMeta.sbg_selected_sidebar_replacement=t[0]:"pyre_sidebar_2"===e&&(FusionApp.data.postMeta.sbg_selected_sidebar_2_replacement=t[0]),FusionApp.data.postMeta[e]=t[0]}),void 0!==t.page_template&&FusionApp.data.postMeta._wp_page_template!==t.page_template&&(FusionApp.data.postMeta._wp_page_template=t.page_template,o=!0),o&&FusionApp.contentChange("page","page-option"),FusionApp.data.postContent=n,FusionApp.contentChange("page","builder-content"),i&&"undefined"!=typeof avadaPanelIFrame&&avadaPanelIFrame.liveUpdatePageCustomCSS(i),FusionPageBuilderApp.clearBuilderLayout(!1),FusionPageBuilderApp.createBuilderLayout(n),o&&FusionApp.fullRefresh(),FusionPageBuilderApp.layoutIsLoading=!1},complete:function(){FusionEvents.trigger("fusion-hide-loader"),s.write=r,document.write=r,FusionPageBuilderApp.loaded=!0,FusionEvents.trigger("fusion-builder-loaded"),a.removeView()}}))}}]})},loadLayout:function(e){var t,a,s,i=this;e&&e.preventDefault(),!0!==FusionPageBuilderApp.layoutIsLoading&&(FusionPageBuilderApp.layoutIsLoading=!0,t=jQuery(e.currentTarget).closest(".fusion-page-layout"),a=jQuery(e.currentTarget).data("load-type"),FusionPageBuilderApp.builderToShortcodes(),s=FusionApp.getPost("post_content"),FusionPageBuilderApp.loaded=!1,jQuery.ajax({type:"POST",url:fusionAppConfig.ajaxurl,data:{action:"fusion_builder_load_layout",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,fusion_layout_id:t.data("layout_id")},beforeSend:function(){FusionEvents.trigger("fusion-show-loader"),i.$el.css("display","none"),i.$el.next(".ui-widget-overlay").css("display","none")},success:function(e){var t,i,o=!1,n=void 0!==FusionApp.data.postMeta._fusion_builder_custom_css?FusionApp.data.postMeta._fusion_builder_custom_css:"";FusionPageBuilderApp.layoutLoaded(),i=void 0!==(t=JSON.parse(e)).custom_css&&t.custom_css,"above"===a?(s=t.post_content+s,i&&(FusionApp.data.postMeta._fusion_builder_custom_css=i+"\n"+n)):"below"===a?(s+=t.post_content,i&&(FusionApp.data.postMeta._fusion_builder_custom_css=n+"\n"+i)):(s=t.post_content,i&&(FusionApp.data.postMeta._fusion_builder_custom_css=i),jQuery.each(t.post_meta,function(e,t){o=!0,"pyre_sidebar_1"===e?FusionApp.data.postMeta.sbg_selected_sidebar_replacement=t[0]:"pyre_sidebar_2"===e&&(FusionApp.data.postMeta.sbg_selected_sidebar_2_replacement=t[0]),FusionApp.data.postMeta[e]=t[0]}),void 0!==t.page_template&&FusionApp.data.postMeta._wp_page_template!==t.page_template&&(FusionApp.data.postMeta._wp_page_template=t.page_template,o=!0),o&&FusionApp.contentChange("page","page-option")),FusionApp.setPost("post_content",s),FusionApp.contentChange("page","builder-content"),o?FusionApp.fullRefresh(!1,{},{post_content:s}):(i&&"undefined"!=typeof avadaPanelIFrame&&avadaPanelIFrame.liveUpdatePageCustomCSS(i),FusionPageBuilderApp.clearBuilderLayout(!1),FusionPageBuilderApp.createBuilderLayout(s)),FusionPageBuilderApp.layoutIsLoading=!1},complete:function(){FusionPageBuilderApp.loaded=!0,FusionEvents.trigger("fusion-builder-loaded"),FusionEvents.trigger("fusion-hide-loader"),i.removeView()}}))},saveLayout:function(e){var t,i,o,n,a,s;e&&e.preventDefault(),FusionPageBuilderApp.builderToShortcodes(),t=FusionApp.getPost("post_content"),i=jQuery("#new_template_name").val(),o=jQuery("#fusion-builder-layouts-templates .fusion-page-layouts"),n=jQuery("#fusion_builder_main_container").data("post-id"),a=void 0!==FusionApp.data.postMeta._fusion_builder_custom_css?FusionApp.data.postMeta._fusion_builder_custom_css:"",s=void 0!==FusionApp.data.postMeta._wp_page_template?FusionApp.data.postMeta._wp_page_template:"",""!==i?(jQuery.ajax({type:"POST",url:fusionAppConfig.ajaxurl,dataType:"json",data:{action:"fusion_builder_save_layout",fusion_po_type:"object",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,fusion_layout_name:i,fusion_layout_content:t,fusion_layout_post_type:"fusion_template",fusion_current_post_id:n,fusion_custom_css:a,fusion_page_template:s,fusion_options:FusionApp.data.postMeta,fusion_front_end:!0},complete:function(e){o.prepend(e.responseText)}}),jQuery("#new_template_name").val("")):alert(fusionBuilderText.please_enter_template_name)},deleteLayout:function(e){var t;e&&(e.preventDefault(),FusionApp.confirmationPopup({title:fusionBuilderText.are_you_sure,content:fusionBuilderText.are_you_sure_you_want_to_delete_this,actions:[{label:fusionBuilderText.cancel,classes:"no",callback:function(){FusionApp.confirmationPopup({action:"hide"})}},{label:fusionBuilderText.im_sure,classes:"yes",callback:function(){!0!==FusionPageBuilderApp.layoutIsDeleting&&(FusionPageBuilderApp.layoutIsDeleting=!0,t=jQuery(e.currentTarget).closest(".fusion-page-layout"),jQuery.ajax({type:"POST",url:fusionAppConfig.ajaxurl,data:{action:"fusion_builder_delete_layout",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,fusion_layout_id:t.data("layout_id")},success:function(){t.remove(),FusionPageBuilderApp.layoutIsDeleting=!1}}),FusionApp.confirmationPopup({action:"hide"}))}}]}))},saveElement:function(e){var t=jQuery("#fusion-builder-save-element-input").val(),n=jQuery(this.model.target).find(".fusion-page-layouts"),a=jQuery(this.model.target).find("#fusion_save_global").is(":checked"),s=FusionPageBuilderViewManager.getView(this.model.element_cid),i=s.getContent(),r=void 0!==s.getCategory?s.getCategory():"elements",o=!1,l=null,u={};e&&e.preventDefault(),void 0!==s.model.attributes.params&&void 0!==s.model.attributes.params.fusion_global&&(l=s.model.attributes.params.fusion_global,delete(u=s.model.get("params")).fusion_global,s.model.set("params",u),i=s.getColumnContent(),u.fusion_global=l,s.model.set("params",u)),$.each(jQuery("ul.fusion-page-layouts.fusion-layout-columns li"),function(){var e=jQuery(this).find("h4.fusion-page-layout-title").html().split("<div ")[0];if(t.toLowerCase().trim()===e.toLowerCase().trim())return alert(fusionBuilderText.duplicate_element_name_error),!(o=!0)}),!0!==FusionPageBuilderApp.layoutIsSaving&&!0!==o&&(FusionPageBuilderApp.layoutIsSaving=!0,""!==t?jQuery.ajax({type:"POST",url:fusionAppConfig.ajaxurl,dataType:"json",data:{action:"fusion_builder_save_layout",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,fusion_layout_name:t,fusion_layout_content:i,fusion_layout_post_type:"fusion_element",fusion_layout_new_cat:r,fusion_save_global:a,fusion_front_end:!0},complete:function(e){var t,i=s.model.get("cid"),o=jQuery(e.responseText).attr("data-layout_id");FusionPageBuilderApp.layoutIsSaving=!1,n.prepend(e.responseText),jQuery(".fusion-save-element-fields").remove(),a&&(void 0===s.model.attributes.params&&(s.model.attributes.params={}),s.model.attributes.params.fusion_global=o,"sections"===r?(FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"] .fusion-builder-module-controls-type-container .fusion-builder-module-controls').after('<a href="#" class="fusion-builder-container-global fusion-builder-unglobal-tooltip" data-cid='+i+'><span class="fusiona-globe"></span><span class="fusion-container-tooltip"><span class="fusion-tooltip-text">'+fusionBuilderText.global_container+"</span></span></a>"),FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"] .fusion-builder-wireframe-utility-toolbar').first().append('<a href="#" class="fusion-builder-container-global fusion-builder-unglobal-tooltip" data-cid='+i+'><span class="fusiona-globe"></span><span class="fusion-container-tooltip"><span class="fusion-tooltip-text">'+fusionBuilderText.global_container+"</span></span></a>"),FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"]').addClass("fusion-global-container")):"columns"===r?(FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"] .fusion-builder-module-controls-inner.fusion-builder-column-controls-inner').after('<a href="#" class="fusion-builder-column-global fusion-builder-unglobal-tooltip" data-cid='+i+'><span class="fusiona-globe"></span><span class="fusion-column-tooltip"><span class="fusion-tooltip-text">'+fusionBuilderText.global_column+"</span></span></a>"),FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"] .fusion-builder-wireframe-utility-toolbar').first().append('<a href="#" class="fusion-builder-column-global fusion-builder-unglobal-tooltip" data-cid='+i+'><span class="fusiona-globe"></span><span class="fusion-column-tooltip"><span class="fusion-tooltip-text">'+fusionBuilderText.global_column+"</span></span></a>"),FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"]').addClass("fusion-global-column")):"elements"===r&&void 0!==s.model.get("multi")&&"multi_element_parent"===s.model.get("multi")?(FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"]').addClass("fusion-global-parent-element"),FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"] .fusion-builder-module-controls-inner').after('<a href="#" class="fusion-builder-element-global fusion-builder-unglobal-tooltip" data-cid='+i+'><span class="fusiona-globe"></span><span class="fusion-element-tooltip"><span class="fusion-tooltip-text">'+fusionBuilderText.global_element+"</span></span></a>"),FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"] .fusion-builder-wireframe-utility-toolbar').first().append('<a href="#" class="fusion-builder-element-global fusion-builder-unglobal-tooltip" data-cid='+i+'><span class="fusiona-globe"></span><span class="fusion-element-tooltip"><span class="fusion-tooltip-text">'+fusionBuilderText.global_element+"</span></span></a>")):"elements"===r&&"fusion_builder_row_inner"===s.model.get("element_type")?(FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"]').addClass("fusion-global-nested-row"),FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"] .fusion-builder-module-controls-inner').after('<a href="#" class="fusion-builder-element-global fusion-builder-unglobal-tooltip" data-cid='+i+'><span class="fusiona-globe"></span><span class="fusion-element-tooltip"><span class="fusion-tooltip-text">'+fusionBuilderText.global_element+"</span></span></a>"),FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"] .fusion-builder-wireframe-utility-toolbar').last().append('<a href="#" class="fusion-builder-element-global fusion-builder-unglobal-tooltip" data-cid='+i+'><span class="fusiona-globe"></span><span class="fusion-element-tooltip">'+fusionBuilderText.global_element+"</span></span></a>")):"elements"===r&&(FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"]').addClass("fusion-global-element"),FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"] .fusion-builder-module-controls-inner').after('<a href="#" class="fusion-builder-element-global fusion-builder-unglobal-tooltip" data-cid='+i+'><span class="fusiona-globe"></span><span class="fusion-element-tooltip"><span class="fusion-tooltip-text">'+fusionBuilderText.global_element+"</span></span></a>"),FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"] .fusion-builder-wireframe-utility-toolbar').first().append('<a href="#" class="fusion-builder-element-global fusion-builder-unglobal-tooltip" data-cid='+i+'><span class="fusiona-globe"></span><span class="fusion-element-tooltip"><span class="fusion-tooltip-text">'+fusionBuilderText.global_element+"</span></span></a>")),FusionPageBuilderApp.$el.find('div[data-cid="'+i+'"]').attr("fusion-global-layout",o),FusionEvents.trigger("fusion-element-added"),FusionPageBuilderApp.saveGlobal=!0,t={currentModel:s.model,handleType:"save",attributes:s.model.attributes},setTimeout(fusionGlobalManager.handleMultiGlobal,500,t),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.saved+" "+fusionAllElements[s.model.get("element_type")].name+" "+fusionBuilderText.as_global),void 0!==FusionApp.contentChange&&FusionApp.contentChange("page","builder-content"))}}):alert(fusionBuilderText.please_enter_element_name))},removeView:function(){this.$el.find(".fusion-save-element-fields").remove(),this.$el.find(".fusion-builder-modal-top-container").prependTo("#fusion-builder-front-end-library"),FusionApp.dialogCloseResets(this),this.remove()}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.Wireframe=Backbone.Model.extend({initialize:function(){this.listenTo(window.FusionEvents,"fusion-preview-update",this.updateWireframe),this.listenTo(window.FusionEvents,"fusion-builder-loaded",this.openWireframeAfterFullRefresh),this.listenTo(window.FusionEvents,"fusion-undo-state",this.setUpWireFrameAfterUndo)},updateWireframe:function(e,t){"site_width"===e&&jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-builder-ui-wireframe").find("#fusion_builder_container").css("max-width",t)},openWireframeAfterFullRefresh:function(){FusionPageBuilderApp.wireframeActive&&(jQuery("body").removeClass("fusion-builder-ui-wireframe"),jQuery("#fb-preview")[0].contentWindow.jQuery("body").removeClass("fusion-builder-ui-wireframe"),this.toggleWireframe())},setUpWireFrameAfterUndo:function(e){var t=jQuery("#fb-preview")[0].contentWindow,i=t.jQuery("body").find("#fusion_builder_container"),o=i.offset().top,n=t.jQuery("body").find(".fusion-header-wrapper"),a=n.length?n.offset().top+n.outerHeight():0;e&&e.preventDefault(),setTimeout(function(){t.jQuery("body").hasClass("fusion-builder-ui-wireframe")?(i.css("max-width",window.FusionApp.settings.site_width),o<a&&i.css("margin-top",a+25+"px")):i.css({"margin-top":"","max-width":""}),window.FusionEvents.trigger("fusion-wireframe-toggle")},100)},toggleWireframe:function(e){var t=jQuery("#fb-preview")[0].contentWindow,i=t.jQuery("body").find("#fusion_builder_container"),o=i.offset().top,n=t.jQuery("body").find(".fusion-header-wrapper"),a=n.length?n.offset().top+n.outerHeight():0;e&&e.preventDefault(),setTimeout(function(){jQuery("body").toggleClass("fusion-builder-ui-wireframe"),jQuery(".fusion-builder-wireframe-toggle").toggleClass("active"),t.jQuery("body").toggleClass("fusion-builder-ui-wireframe"),t.jQuery("body").hasClass("fusion-builder-ui-wireframe")?(FusionPageBuilderApp.wireframeActive=!0,i.css("max-width",window.FusionApp.settings.site_width),o<a&&i.css("margin-top",a+25+"px"),t.jQuery("body").hasClass("nested-columns-edited")&&FusionPageBuilderViewManager.getView(t.jQuery(".fusion-builder-nested-element.editing").data("cid")).stopEdit()):(FusionPageBuilderApp.wireframeActive=!1,i.css({"margin-top":"","max-width":""})),window.FusionEvents.trigger("fusion-wireframe-toggle")},100)}}),_.extend(FusionPageBuilder.BaseColumnView.prototype,{disableSortableElements:function(){var e=this.$el.find(".fusion-builder-column-content");void 0!==e.sortable("instance")&&e.sortable("disable"),e.removeClass("ui-sortable"),e.removeClass("ui-sortable-disabled")},enableSortableElements:function(){var e=this.$el.find(".fusion-builder-column-content");("fusion_builder_column"===this.model.get("element_type")?void 0!==e.sortable("instance"):e.data("sortable"))?(e.sortable("enable"),e.addClass("ui-sortable")):this.sortableElements()},wireFrameToggled:function(){FusionPageBuilderApp.wireframeActive?(this.disableDroppableColumn(),this.enableSortableElements()):(this.enableDroppableColumn(),this.disableSortableElements(),this._equalHeights())},onSortOver:function(e){1===jQuery(e.target).find(".fusion-builder-live-element, .fusion_builder_row_inner").length&&jQuery(e.target).find(".fusion-builder-column-content").append(".ui-sortable-placeholder")},onSortUpdate:function(){this._equalHeights()},onSortStop:function(e,t){var i,o=window.FusionPageBuilderViewManager.getView(t.item.data("cid")),n=t.item.parent().children(".fusion-builder-live-element, .fusion_builder_row_inner").index(t.item);window.FusionPageBuilderApp.onDropCollectionUpdate(o.model,n,t.item.parent().data("cid")),i={currentModel:o.model,handleType:"save",attributes:o.model.attributes},window.fusionGlobalManager.handleMultiGlobal(i),window.FusionEvents.trigger("fusion-history-save-step",window.fusionBuilderText.moved+" "+window.fusionAllElements[o.model.get("element_type")].name+" "+window.fusionBuilderText.element),window.FusionEvents.trigger("fusion-content-changed")}}),_.extend(FusionPageBuilder.BaseRowView.prototype,{enableSortableColumns:function(){var e=this.$el.find(".fusion-builder-row-container");("fusion_builder_row"===this.model.get("element_type")?void 0!==e.sortable("instance"):e.data("sortable"))?e.sortable("enable"):this.sortableColumns()},onSortUpdate:function(){},onSortStop:function(e,t,i){var o=t.item.data("cid"),n=window.FusionPageBuilderViewManager.getView(o),a=n.model.get("parent"),s=t.item.parent().data("cid"),r=t.item.parent().children(i).index(t.item);window.FusionPageBuilderApp.onDropCollectionUpdate(n.model,r,s),FusionPageBuilderViewManager.getView(s).setRowData(),s!==a&&FusionPageBuilderViewManager.getView(a).setRowData(),window.FusionEvents.trigger("fusion-history-save-step",window.fusionBuilderText.column+" order changed")}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,FusionPageBuilder.SettingsHelpers=Backbone.Model.extend({initialize:function(){this.openSettingsView=null,this.openChildSettingsView=null,this.modalDialogMoreView=null,this.listenTo(window.FusionEvents,"fusion-settings-modal-save",this.removeElementSettingsView),this.listenTo(window.FusionEvents,"fusion-settings-modal-cancel",this.removeElementSettingsView),this.listenTo(window.FusionEvents,"fusion-settings-removed",this.removeElementSettingsView),this.listenTo(window.FusionEvents,"fusion-preferences-editing_mode-updated",this.editingModeChanged)},shouldRenderSettings:function(e){var t,i,o=e.model.get("parent"),n="multi_element_child"===e.model.get("multi"),a=e.model.get("cid"),s="generated_element"===e.model.get("type"),r=!1,l="dialog"===window.FusionApp.preferencesData.editing_mode?jQuery(".fusion-builder-dialog.fusion-builder-settings-dialog .ui-dialog-content"):window.FusionApp.sidebarView.$el.find(".fusion-builder-custom-tab");return s?jQuery('.ui-dialog-content[data-cid="'+a+'"]').length?(jQuery('.ui-dialog-content[data-cid="'+a+'"]').closest(".ui-dialog").show(),!1):(jQuery('.ui-dialog-content:not( [data-cid="'+a+'"] )').length&&jQuery('.ui-dialog-content:not( [data-cid="'+a+'"] )').closest(".ui-dialog").hide(),!0):(l.length&&l.each(function(){if(t=jQuery(this).attr("data-cid"),i="dialog"===window.FusionApp.preferencesData.editing_mode?jQuery(this).closest(".fusion-builder-dialog.fusion-builder-settings-dialog"):jQuery(this),parseInt(a,10)===parseInt(t,10))return i.show(),void(r=!0);i.hide()}),r?("dialog"!==window.FusionApp.preferencesData.editing_mode&&window.FusionApp.sidebarView.openSidebarAndShowEOTab(),!1):(this.openSettingsView&&(n&&o===this.openSettingsView.model.get("cid")&&"multi_element_parent"===this.openSettingsView.model.get("multi")?"dialog"===window.FusionApp.preferencesData.editing_mode?this.openSettingsView.$el.closest(".fusion-builder-dialog.fusion-builder-settings-dialog").hide():this.openSettingsView.$el.hide():this.openSettingsView.saveSettings()),this.openChildSettingsView&&this.openChildSettingsView.saveSettings(),n?this.openChildSettingsView=e:this.openSettingsView=e,!0))},removeElementSettingsView:function(e){this.openSettingsView&&e===this.openSettingsView.model.get("cid")&&(this.openSettingsView=!1),this.openChildSettingsView&&e===this.openChildSettingsView.model.get("cid")&&(this.openChildSettingsView=!1)},renderDialogMoreOptions:function(e){var t="dialog"===window.FusionApp.preferencesData.editing_mode?e.$el.closest(".ui-dialog").find(".fusion-utility-menu-wrap"):e.$el.find(".fusion-utility-menu-wrap");this.modalDialogMoreView=new FusionPageBuilder.modalDialogMore({model:this.model}),jQuery(this.modalDialogMoreView.render({view:e}).el).appendTo(t),t.find(".fusion-utility-menu").off().on("click",function(e){(t=jQuery(this).closest(".fusion-utility-menu-wrap")).toggleClass("active"),e.stopPropagation(),window.FusionPageBuilderApp.sizesHide(e)})},editingModeChanged:function(){this.openSettingsView&&this.openSettingsView.saveSettings(),this.openChildSettingsView&&this.openChildSettingsView.saveSettings()}});FusionPageBuilder=FusionPageBuilder||{};_.mixin({fusionGetAttributes:function(e){var i="";return"string"==typeof e?'class="'+e+'"':(_.each(e,function(e,t){void 0!==e&&("valueless_attribute"===(e=e.toString())?i+=" "+t:0<e.length&&(e=e.replace(/\s\s+/g," "),i+=" "+t+'="'+e+'"'))}),i)},fusionCleanParameters:function(t){return Object.keys(t).forEach(function(e){t[e]&&"object"==typeof t[e]?_.fusionCleanParameters(t[e]):null!==t[e]&&""!==t[e]||delete t[e]}),t},fusionVisibilityAtts:function(i,t){var e,o=["small-visibility","medium-visibility","large-visibility"],n=o;return""===i&&(i=n),"no"===i&&(i=n),"yes"===i&&(n=n.filter(function(e){return"small-visibility"!==e}),i=n),"string"==typeof i&&(i=i.split(","),_.each(i,function(e,t){i[t]=e.replace(new RegExp(" ","g"),"")})),e=o,_.each(e,function(e){i&&-1===i.indexOf(e)&&("object"==typeof t?t.class+=" fusion-no-"+e:t+=" fusion-no-"+e)}),t},fusionGetAnimations:function(e){var t,i,o={};return(e=_.defaults(e,{type:"",direction:"left",speed:"0.1",offset:"bottom-in-view"})).type&&(o.animation_class="fusion-animated","static"===e.direction&&(e.direction=""),"bounce"!==e.type&&"flash"!==e.type&&"shake"!==e.type&&"rubberBand"!==e.type&&(t="In"+e.direction.charAt(0).toUpperCase()+e.direction.slice(1),e.type+=t),o["data-animationType"]=e.type,e.speed&&(o["data-animationDuration"]=e.speed)),e.offset&&(i=e.offset,"top-into-view"===e.offset?i="100%":"top-mid-of-view"===e.offset&&(i="50%"),o["data-animationOffset"]=i),o},fusionFontAwesome:function(e){var t={arrow:"angle-right",asterik:"asterisk",cross:"times","ban-circle":"ban","bar-chart":"bar-chart-o",beaker:"flask",bell:"bell-o","bell-alt":"bell","bitbucket-sign":"bitbucket-square","bookmark-empty":"bookmark-o",building:"building-o","calendar-empty":"calendar-o","check-empty":"square-o","check-minus":"minus-square-o","check-sign":"check-square",check:"check-square-o","chevron-sign-down":"chevron-circle-down","chevron-sign-left":"chevron-circle-left","chevron-sign-right":"chevron-circle-right","chevron-sign-up":"chevron-circle-up","circle-arrow-down":"arrow-circle-down","circle-arrow-left":"arrow-circle-left","circle-arrow-right":"arrow-circle-right","circle-arrow-up":"arrow-circle-up","circle-blank":"circle-o",cny:"rub","collapse-alt":"minus-square-o","collapse-top":"caret-square-o-up",collapse:"caret-square-o-down","comment-alt":"comment-o","comments-alt":"comments-o",copy:"files-o",cut:"scissors",dashboard:"tachometer","double-angle-down":"angle-double-down","double-angle-left":"angle-double-left","double-angle-right":"angle-double-right","double-angle-up":"angle-double-up",download:"arrow-circle-o-down","download-alt":"download","edit-sign":"pencil-square",edit:"pencil-square-o","ellipsis-horizontal":"ellipsis-h","ellipsis-vertical":"ellipsis-v","envelope-alt":"envelope-o","exclamation-sign":"exclamation-circle","expand-alt":"plus-square-o",expand:"caret-square-o-right","external-link-sign":"external-link-square","eye-close":"eye-slash","eye-open":"eye","facebook-sign":"facebook-square","facetime-video":"video-camera","file-alt":"file-o","file-text-alt":"file-text-o","flag-alt":"flag-o","folder-close-alt":"folder-o","folder-close":"folder","folder-open-alt":"folder-open-o",food:"cutlery",frown:"frown-o",fullscreen:"arrows-alt","github-sign":"github-square",group:"users","h-sign":"h-square","hand-down":"hand-o-down","hand-left":"hand-o-left","hand-right":"hand-o-right","hand-up":"hand-o-up",hdd:"hdd-o","heart-empty":"heart-o",hospital:"hospital-o","indent-left":"outdent","indent-right":"indent","info-sign":"info-circle",keyboard:"keyboard-o",legal:"gavel",lemon:"lemon-o",lightbulb:"lightbulb-o","linkedin-sign":"linkedin-square",meh:"meh-o","microphone-off":"microphone-slash","minus-sign-alt":"minus-square","minus-sign":"minus-circle","mobile-phone":"mobile",moon:"moon-o",move:"arrows",off:"power-off","ok-circle":"check-circle-o","ok-sign":"check-circle",ok:"check","paper-clip":"paperclip",paste:"clipboard","phone-sign":"phone-square",picture:"picture-o","pinterest-sign":"pinterest-square","play-circle":"play-circle-o","play-sign":"play-circle","plus-sign-alt":"plus-square","plus-sign":"plus-circle",pushpin:"thumb-tack","question-sign":"question-circle","remove-circle":"times-circle-o","remove-sign":"times-circle",remove:"times",reorder:"bars","resize-full":"expand","resize-horizontal":"arrows-h","resize-small":"compress","resize-vertical":"arrows-v","rss-sign":"rss-square",save:"floppy-o",screenshot:"crosshairs","share-alt":"share","share-sign":"share-square",share:"share-square-o","sign-blank":"square",signin:"sign-in",signout:"sign-out",smile:"smile-o","sort-by-alphabet-alt":"sort-alpha-desc","sort-by-alphabet":"sort-alpha-asc","sort-by-attributes-alt":"sort-amount-desc","sort-by-attributes":"sort-amount-asc","sort-by-order-alt":"sort-numeric-desc","sort-by-order":"sort-numeric-asc","sort-down":"sort-asc","sort-up":"sort-desc",stackexchange:"stack-overflow","star-empty":"star-o","star-half-empty":"star-half-o",sun:"sun-o","thumbs-down-alt":"thumbs-o-down","thumbs-up-alt":"thumbs-o-up",time:"clock-o",trash:"trash-o","tumblr-sign":"tumblr-square","twitter-sign":"twitter-square",unlink:"chain-broken",upload:"arrow-circle-o-up","upload-alt":"upload","warning-sign":"exclamation-triangle","xing-sign":"xing-square","youtube-sign":"youtube-square","zoom-in":"search-plus","zoom-out":"search-minus"},i=e;return""!==e&&(("icon-"===e.substr(0,5)||"fa-"!==e.substr(0,3))&&void 0!==t[(e=e.replace("icon-","fa-")).replace("fa-","")]?i="fa-"+t[e.replace("fa-","")]:"fa-"!==e.substr(0,3)&&(i="fa-"+e),-1===e.trim().indexOf(" ")&&(i="fa "+e)),i},fusionValidateAttrValue:function(e,t,i){var o,n,a="";return i=void 0===i||i,""!==(e=String(e))&&(e=e.trim(),o=parseFloat(e),n=e.replace(o,""),a=void 0===t||""===t?o:""===n?o+t:!(!i&&n!==t)&&e),a},fusionGetVideoProvider:function(e){var t,i;return t=!1,(i=(e=e.trim()).match(/youtube\.com\/watch\?v=([^\&\?\/]+)/))?void 0!==i[1]&&(t=i[1]):(i=e.match(/youtube\.com\/embed\/([^\&\?\/]+)/))?void 0!==i[1]&&(t=i[1]):(i=e.match(/youtube\.com\/v\/([^\&\?\/]+)/))?void 0!==i[1]&&(t=i[1]):(i=e.match(/youtu\.be\/([^\&\?\/]+)/))&&void 0!==i[1]&&(t=i[1]),!1!==t?{type:"youtube",id:t}:(i=e.match(/vimeo\.com\/(\w*\/)*(\d+)/))&&1<i.length?{type:"vimeo",id:i[i.length-1]}:(i=e.match(/^\d+$/))&&void 0!==i[0]?{type:"vimeo",id:i[0]}:{type:"youtube",id:e}},fusionCheckValue:function(e){return-1===e.indexOf("%")&&-1===e.indexOf("px")&&(e+="px"),e},fusionGetValueWithUnit:function(e,t,i){var o,n,a;return t=void 0!==t?t:"px",i=void 0!==i?i:"add",o=[],e=(e=void 0===e?"":e).trim(),-1!==jQuery.inArray(e,["auto","inherit","initial"])?e:isNaN(parseFloat(e))?void 0:1<(a=e.split(" ")).length?(_.each(a,function(e){e==(n=parseFloat(e))?e=n+t:"force_replace"===i&&(e=n+t),o.push(e)}),o.join(" ")):e==(n=parseFloat(e))?n+t:"force_replace"===i?n+t:e},fusionSingleDimension:function(e,t){if(4===(e=e.split(" ")).length){if("top"===t)return e[0];if("right"===t)return e[1];if("bottom"===t)return e[2];if("left"===t)return e[3]}else if(3===e.length){if("top"===t)return e[0];if("right"===t||"left"===t)return e[1];if("bottom"===t)return e[2]}else if(2===e.length){if("top"===t||"bottom"===t)return e[0];if("right"===t||"left"===t)return e[1]}return e[0]},fusionGetMasonryAttribute:function(e){var t,i,o={};return t=" - "+parseFloat(e.blog_grid_column_spacing)/2+"px","string"==typeof e.element_orientation_class&&-1!==e.element_orientation_class.indexOf("fusion-element-portrait")&&(t=""),i=parseFloat(e.blog_grid_column_spacing)+"px","transparent"!==e.timeline_color&&0!==jQuery.Color(e.timeline_color).alpha()&&(t=" - "+parseFloat(e.blog_grid_column_spacing)/2+"px","string"==typeof e.element_orientation_class&&-1!==e.element_orientation_class.indexOf("fusion-element-portrait")&&(t=" + 4px"),i=parseFloat(e.blog_grid_column_spacing)-2+"px","string"==typeof e.element_orientation_class&&-1!==e.element_orientation_class.indexOf("fusion-element-landscape")&&(i=parseFloat(e.blog_grid_column_spacing)-6+"px")),o.class="fusion-masonry-element-container",o.style=e.masonry_attribute_style+"padding-top:calc((100% + "+i+") * "+e.element_base_padding+t+");",o},fusionFeaturedImage:function(e){var t=FusionPageBuilder.template(jQuery("#tmpl-featured-image").html()),i={};return"object"!=typeof e||void 0===e.featured_images?"":(i.data=e,t(i))},fusionGetElementOrientationClass:function(e,t,i){var o="fusion-element-grid";return void 0!==e.imageWidth&&void 0!==e.imageHeight&&("1.0"===t?(1.6-.4,.4+.2>e.imageHeight/e.imageWidth?o="fusion-element-landscape":1.6-.4<e.imageHeight/e.imageWidth?o="fusion-element-portrait":e.imageWidth>i&&(o="fusion-element-landscape fusion-element-portrait")):t<e.imageWidth/e.imageHeight?o="fusion-element-landscape":t<e.imageHeight/e.imageWidth?o="fusion-element-portrait":e.imageWidth>i&&(o="fusion-element-landscape fusion-element-portrait")),o},fusionGetElementBasePadding:function(e){var t=.8,i={"fusion-element-grid":t,"fusion-element-landscape":t/2,"fusion-element-portrait":2*t};return void 0!==i[e]&&(t=i[e]),t},fusionRenderPostMetadata:function(e,t,i){var o="",n="";if(void 0!==i){if(t.post_meta&&"no"!==i.post_meta||!t.post_meta&&"yes"===i.post_meta){if(!(-1===jQuery.inArray(e,["alternate","grid_timeline"])||t.post_meta_author||t.post_meta_date||t.post_meta_cats||t.post_meta_tags||t.post_meta_comments))return"";t.post_meta_author&&(t.disable_date_rich_snippet_pages?o+='By <span class="vcard"><span class="fn">'+i.author_post_link+"</span></span>":o+="By <span>"+i.author_post_link+"</span>",o+='<span class="fusion-inline-sep">|</span>'),t.post_meta_date&&(o+=_.fusionRenderRichSnippets(i,!1,!1,!0),o+="<span>"+i.formatted_date+'</span><span class="fusion-inline-sep">|</span>'),t.post_meta_cats&&i.categories&&(o+=t.post_meta_tags?"Categories: "+i.categories:i.categories,o+='<span class="fusion-inline-sep">|</span>'),t.post_meta_tags&&i.tags&&(o+='<span class="meta-tags">'+window.fusionBuilderText.tags.replace("%s",i.tags)+'</span><span class="fusion-inline-sep">|</span>'),t.post_meta_comments&&"grid_timeline"!==e&&(o+='<span class="fusion-comments">'+i.comments+"</span>"),o?(o=""+o,"single"===e?n+='<div class="fusion-meta-info"><div class="fusion-meta-info-wrapper">'+o+"</div></div>":-1!==jQuery.inArray(e,["alternate","grid_timeline"])?n+='<p class="fusion-single-line-meta">'+o+"</p>":n+="recent_posts"===e?o:'<div class="fusion-alignleft">'+o+"</div>"):n+=""}else i.disable_date_rich_snippet_pages&&(n+=_.fusionRenderRichSnippets(i,!1));return n}},fusionRenderRichSnippets:function(e){var t="";if(void 0!==e)return e.disable_date_rich_snippet_pages&&(t=""),t},fusionGetBlogSlideshow:function(e){var t=FusionPageBuilder.template(jQuery("#tmpl-new-slideshow-blog-shortcode").html()),i={};return"object"!=typeof e?"":(i.data=e,t(i))},fusionGetFixedContent:function(e,t,i,o){var n,a,s=!1;return t=void 0!==t?t:"no",i=void 0!==i?i:55,o="yes"===(o=void 0!==o&&o)||o||"1"==o,e.read_more="null"==e.read_more?e.read_more:"","no"===t?e.full_content:(n=(n=o?e.excerpt_stripped:e.excerpt).replace(/\[/g,"&#91;").replace(/\]/g,"&#93;").replace(/\.\.\./g,"&#8230;"),a=e.read_more.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;").replace(/\.\.\./g,"&#8230;").trim(),-1!==n.indexOf(a)&&(s=!0,n=n.replace(a,"")),"characters"===e.excerpt_base.toLowerCase()?i<n.length&&(n=n.substring(0,i)):n=n.split(" ").splice(0,i).join(" "),s&&(n+=a),_.fusionFixHtml(n))},fusionFixHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerHTML},fusionUcFirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},fusionRawUrlEncode:function(e){return e+="",encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},fusionAutoCalculateAccentColor:function(e){var t=jQuery.Color(e),i=parseInt(100*t.lightness(),10);return 0<i?50<=i?t.lightness(i/200).toRgbaString():t.lightness(i/50).toRgbaString():t.lightness(70).toRgbaString()},fusionBuildSocialLinks:function(e,l,u,d){var c,g,t,i,o,p=!1,f="",n={},a=0;if(e=_.isUndefined(e)?"":e,d=_.isUndefined(d)?0:d,_.isUndefined(u.social_icon_boxed)||(u.icons_boxed=u.social_icon_boxed),""!=e&&jQuery.isArray(e)){if(_.each(u,function(e,t){n[t="social_icon_color_type"===(t="social_icon_boxed_colors"===(t="social_icon_colors"===(t="social_icon_boxed"===t?"icons_boxed":t)?"icon_colors":t)?"box_colors":t)?"color_type":t]=e}),"brand"===n.color_type)p=!0,(c=_.fusionSocialIcons(!0,!0)).mail={label:"Email Address",color:"#000000"},g={};else for(g=void 0!==n.icon_colors?n.icon_colors.split("|"):"",c=void 0!==n.box_colors?n.box_colors.split("|"):"",t=g.length,i=c.length,o=e.length,a=0;a<o;a++)1===t&&(g[a]=g[0]),1===i&&(c[a]=c[0]);_.each(e,function(e){_.each(e,function(e,s){var r;"custom"===s&&e?_.each(e,function(e,t){var i,o,n,a="";"yes"===u.icons_boxed&&(a=d<c.length?c[d]:"",!0===p&&(a=c[s].color?c[s].color:"")),i=u.social_media_icons,_.isObject(i)||(i={}),_.isUndefined(i.custom_title)&&(i.custom_title={}),_.isUndefined(i.custom_source)&&(i.custom_source={}),_.isUndefined(i.custom_title[t])&&(i.custom_title[t]=""),_.isUndefined(i.custom_source[t])&&(i.custom_source[t]=""),r={social_network:i.custom_title[t],social_link:e,icon_color:d<g.length?g[d]:"",box_color:a},_.isFunction(l)&&(r=l(r,u)),f+="<a "+_.fusionGetAttributes(r)+">",f+="<img",_.isUndefined(i.custom_source[t].url)||(f+=' src="'+i.custom_source[t].url+'"'),_.isUndefined(i.custom_title[t])||""==i.custom_title[t]||(f+=' alt="'+i.custom_title[t]+'"'),!_.isUndefined(i.custom_source[t].width)&&i.custom_source[t].width&&(o=parseInt(i.custom_source[t].width,10),f+=' width="'+o+'"'),"undefined"!==i.custom_source[t].height&&i.custom_source[t].height&&(n=parseInt(i.custom_source[t].height,10),f+=' height="'+n+'"'),f+=" /></a>"}):(r=1==p?{social_network:s,social_link:e,icon_color:"yes"===u.icons_boxed?"#ffffff":c[s].color,box_color:"yes"===u.icons_boxed?c[s].color:""}:{social_network:s,social_link:e,icon_color:d<g.length?g[d]:"",box_color:d<c.length?c[d]:""},_.isFunction(l)&&(r=l(r,u)),f+="<a "+_.fusionGetAttributes(r)+"></a>"),d++})})}return f},fusionSocialIcons:function(e,t){var i,o;return e=!!_.isUndefined(e)||e,t=!_.isUndefined(t)&&t,i={blogger:{label:"Blogger",color:"#f57d00"},deviantart:{label:"Deviantart",color:"#4dc47d"},digg:{label:"Digg",color:"#000000"},dribbble:{label:"Dribbble",color:"#ea4c89"},dropbox:{label:"Dropbox",color:"#007ee5"},facebook:{label:"Facebook",color:"#3b5998"},flickr:{label:"Flickr",color:"#0063dc"},forrst:{label:"Forrst",color:"#5b9a68"},instagram:{label:"Instagram",color:"#3f729b"},linkedin:{label:"LinkedIn",color:"#0077b5"},myspace:{label:"Myspace",color:"#000000"},paypal:{label:"Paypal",color:"#003087"},pinterest:{label:"Pinterest",color:"#bd081c"},reddit:{label:"Reddit",color:"#ff4500"},rss:{label:"RSS",color:"#f26522"},skype:{label:"Skype",color:"#00aff0"},soundcloud:{label:"Soundcloud",color:"#ff8800"},spotify:{label:"Spotify",color:"#2ebd59"},tumblr:{label:"Tumblr",color:"#35465c"},twitter:{label:"Twitter",color:"#55acee"},vimeo:{label:"Vimeo",color:"#1ab7ea"},vk:{label:"VK",color:"#45668e"},whatsapp:{label:"WhatsApp",color:"#77e878"},xing:{label:"Xing",color:"#026466"},yahoo:{label:"Yahoo",color:"#410093"},yelp:{label:"Yelp",color:"#af0606"},youtube:{label:"Youtube",color:"#cd201f"},email:{label:"Email Address",color:"#000000"}},e&&(i.custom={label:"Custom",color:""}),t||(o={},_.each(i,function(e){o.network_id=e.label}),i=o),i},fusionSortSocialNetworks:function(o,e){var n,a,s=[],t="";return e.social_media_icons_icon&&jQuery.isArray(e.social_media_icons_icon)&&(t=e.social_media_icons_icon.join("|")),jQuery.isArray(t)||(t=t.split("|")),jQuery.isArray(t)&&(_.each(o,function(e,t){var i;i="email"===t?"mail":t,_.isUndefined(o[t])||(n={},"custom"===t?o[e]&&(n[t]=o[e][t],(a={})[e]=n,s.push(a)):(n[i]=o[t],s.push(n),delete o[t]))}),_.each(o,function(e,t){"custom"!==t&&((n={})[t]=e,s.push(n))})),s},fusionGetSocialNetworks:function(i){var o={};return _.each({facebook:"facebook",twitter:"twitter",instagram:"instagram",linkedin:"linkedin",dribbble:"dribbble",rss:"rss",youtube:"youtube",pinterest:"pinterest",flickr:"flickr",vimeo:"vimeo",tumblr:"tumblr",digg:"digg",blogger:"blogger",skype:"skype",myspace:"myspace",deviantart:"deviantart",yahoo:"yahoo",reddit:"reddit",forrst:"forrst",paypal:"paypal",dropbox:"dropbox",soundcloud:"soundcloud",vk:"vk",whatsapp:"whatsapp",xing:"xing",yelp:"yelp",spotify:"spotify",email:"email"},function(e,t){void 0!==i[t]&&""!==i[t]&&(o[e]=i[t])}),i.show_custom&&"yes"===i.show_custom&&(o.custom={},jQuery.isArray(i.social_media_icons_icon)&&_.each(i.social_media_icons_icon,function(e,t){"custom"===e&&jQuery.isArray(i.social_media_icons_url)&&!_.isUndefined(i.social_media_icons_url[t])&&""!==i.social_media_icons_url[t]&&(i["custom_"+t]&&""!==i["custom_"+t]?o.custom[t]=i["custom_"+t]:o.custom[t]=i.social_media_icons_url[t])})),o},fusionGetPadding:function(e){return e.padding_top=void 0!==e.padding_top?_.fusionGetValueWithUnit(e.padding_top):"0px",e.padding_right=void 0!==e.padding_right?_.fusionGetValueWithUnit(e.padding_right):"0px",e.padding_bottom=void 0!==e.padding_bottom?_.fusionGetValueWithUnit(e.padding_bottom):"0px",e.padding_left=void 0!==e.padding_left?_.fusionGetValueWithUnit(e.padding_left):"0px",e.padding=e.padding_top+" "+e.padding_right+" "+e.padding_bottom+" "+e.padding_left,e},fusionGetMargin:function(e){return""!==e.margin_bottom&&(e.margin_bottom=_.fusionGetValueWithUnit(e.margin_bottom)),""!==e.margin_top&&(e.margin_top=_.fusionGetValueWithUnit(e.margin_top)),e},fusionAnimations:function(e,t){var i=!1;return e&&void 0!==e.animation_type&&""!==e.animation_type&&(i=_.fusionGetAnimations({type:e.animation_type,direction:e.animation_direction,speed:e.animation_speed,offset:e.animation_offset}),void 0!==(t=jQuery.extend(t,i)).class?t.class+=" "+t.animation_class:t.class=t.animation_class,delete t.animation_class),t},fusionPagination:function(e,t,i,o,n,a){var s,r,l,u,d,c="";if(a=void 0!==a?parseInt(a,10):2,t=void 0!==t?parseInt(t,10):1,i=parseInt(i,10),l=r=a,1!==(e=parseInt(e,10))){if("pagination"!==o&&"pagination"!==n.toLowerCase()?(c+='<div class="fusion-infinite-scroll-trigger"></div>',c+='<div class="pagination infinite-scroll clearfix">'):c+='<div class="pagination clearfix">',(u=t-i)<=0&&(u=0<t-1?t-1:1),e<(d=t+i)&&(d=e),"pagination"===o){if(1<t&&(c+='<a class="pagination-prev" href="#"><span class="page-prev"></span><span class="page-text">Previous</span></a>',0<r)){for(u<=r&&(r=u-1),s=1;s<=r;s++)c+='<a href="#" class="inactive">'+s+"</a>";0<r&&r<u-1&&(c+='<span class="pagination-dots paginations-dots-start">&middot;&middot;&middot;</span>')}for(s=u;s<=d;s++)c+=t==s?'<span class="current">'+s+"</span>":'<a href="#" class="inactive">'+s+"</a>";if(t<e){if(0<l)for(e-l<=d&&(l=e-d),d+1<e- --l&&(c+='<span class="pagination-dots paginations-dots-end">&middot;&middot;&middot;</span>'),s=e-l;s<=e;s++)c+='<a href="#" class="inactive">'+s+"</a>";c+='<a class="pagination-next" href="#"><span class="page-text">Next</span><span class="page-next"></span></a>'}}c+="</div>",c+='<div class="fusion-clearfix"></div>'}return c},fusionInlineEditor:function(e,i){var t=_.extend({cid:!1,param:"element_content",encoding:!1,"disable-return":!1,"disable-extra-spaces":!1,toolbar:"full",overrides:!1},e);return"number"!=typeof t.cid||(i["data-inline-parent-cid"]=t.cid,void 0!==i.class?i.class+=" fusion-live-editable":i.class="fusion-live-editable",t["disable-return"]&&(i["data-disable-return"]="true"),t["disable-extra-spaces"]&&(i["data-disable-extra-spaces"]="true"),t.encoding&&(i["data-encoding"]="true"),"object"==typeof t.overrides&&_.each(t.overrides,function(e,t){i["data-inline-override-"+t]=e}),i["data-toolbar"]=t.toolbar.toString(),i["data-param"]=t.param),i},fusionContainerMapDeprecatedArgs:function(i){return(void 0!==i.backgroundattachment&&"scroll"===i.backgroundattachment||void 0!==i.background_attachment&&"scroll"===i.background_attachment)&&(i.backgroundattachment="none",i.background_attachment="none"),_.each({backgroundposition:"background_position",backgroundattachment:"background_parallax",background_attachment:"background_parallax",bordersize:"border_size",bordercolor:"border_color",borderstyle:"border_style",paddingtop:"padding_top",paddingbottom:"padding_bottom",paddingleft:"padding_left",paddingright:"padding_right",backgroundcolor:"background_color",backgroundimage:"background_image",backgroundrepeat:"background_repeat",paddingBottom:"padding_bottom",paddingTop:"padding_top"},function(e,t){void 0===i[e]&&void 0!==i[t]&&(i[e]=i[t],delete i[t])}),i},autop:function(t,e){var i,o,n,a,s,r,l,u,d=[];if(void 0===t||""===t.trim())return"";if(e=void 0===e||e,-1!==(t+="\n").indexOf("<pre")){for(o=(i=t.split("</pre>")).pop(),t="",n=0;n<i.length;n++)-1!==(s=(a=i[n]).indexOf("<pre"))?(r="<pre wp-pre-tag-"+n+"></pre>",d.push([r,a.substr(s)+"</pre>"]),t+=a.substr(0,s)+r):t+=a;t+=o}return l="(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)",t=(t=(t=(t=t.replace(/<br\s*\/?>\s*<br\s*\/?>/g,"\n\n")).replace(new RegExp("(<"+l+"[\\s/>])","g"),"\n\n$1")).replace(new RegExp("(</"+l+">)","g"),"$1\n\n")).replace(/\r\n|\r/g,"\n"),-1!==(t=this.replaceInHtmlTags(t,{"\n":" \x3c!-- wpnl --\x3e "})).indexOf("<option")&&(t=(t=t.replace(/\s*<option/g,"<option")).replace(/<\/option>\s*/g,"</option>")),-1!==t.indexOf("</object>")&&(t=(t=(t=t.replace(/(<object[^>]*>)\s*/g,"$1")).replace(/\s*<\/object>/g,"</object>")).replace(/\s*(<\/?(?:param|embed)[^>]*>)\s*/g,"$1")),-1===t.indexOf("<source")&&-1===t.indexOf("<track")||(t=(t=(t=t.replace(/([<\[](?:audio|video)[^>\]]*[>\]])\s*/g,"$1")).replace(/\s*([<\[]\/(?:audio|video)[>\]])/g,"$1")).replace(/\s*(<(?:source|track)[^>]*>)\s*/g,"$1")),-1!==t.indexOf("<figcaption")&&(t=(t=t.replace(/\s*(<figcaption[^>]*>)/,"$1")).replace(/<\/figcaption>\s*/,"</figcaption>")),u=(t=t.replace(/\n\n+/g,"\n\n")).split(/\n\s*\n/).filter(Boolean),t="",u.forEach(function(e){t+="<p>"+e.replace(/^\n*|\n*$/g,"")+"</p>\n"}),t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<p>\s*<\/p>/g,"")).replace(/<p>([^<]+)<\/(div|address|form)>/g,"<p>$1</p></$2>")).replace(new RegExp("<p>\\s*(</?"+l+"[^>]*>)\\s*</p>","g"),"$1")).replace(/<p>(<li.+?)<\/p>/g,"$1")).replace(/<p><blockquote([^>]*)>/gi,"<blockquote$1><p>")).replace(/<\/blockquote><\/p>/g,"</p></blockquote>")).replace(new RegExp("<p>\\s*(</?"+l+"[^>]*>)","g"),"$1")).replace(new RegExp("(</?"+l+"[^>]*>)\\s*</p>","g"),"$1"),e&&(t=(t=(t=(t=t.replace(/<(script|style).*?<\/\\1>/g,function(e){return e[0].replace(/\n/g,"<WPPreserveNewline />")})).replace(/<br>|<br\/>/g,"<br />")).replace(/(<br \/>)?\s*\n/g,function(e,t){return t?e:"<br />\n"})).replace(/<WPPreserveNewline \/>/g,"\n")),t=(t=(t=t.replace(new RegExp("(</?"+l+"[^>]*>)\\s*<br />","g"),"$1")).replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)/g,"$1")).replace(/\n<\/p>$/g,"</p>"),Object.keys(d).length&&(t=t.replace(new RegExp(Object.keys(d).join("|"),"gi"),function(e){return d[e]})),-1!==t.indexOf("\x3c!-- wpnl --\x3e")&&(t=t.replace(/\s?<!-- wpnl -->\s?/g,"\n")),t},htmlSplit:function(e){for(var t,i=[],o=e,n=new RegExp("(<((?=!--|!\\[CDATA\\[)((?=!-)!(?:-(?!->)[^\\-]*)*(?:--\x3e)?|!\\[CDATA\\[[^\\]]*(?:](?!]>)[^\\]]*)*?(?:]]>)?)|[^>]*>?))");t=o.match(n);)i.push(o.slice(0,t.index)),i.push(t[0]),o=o.slice(t.index+t[0].length);return o.length&&i.push(o),i},replaceInHtmlTags:function(e,t){var i,o,n,a=this.htmlSplit(e),s=!1,r=Object.keys(t);for(i=1;i<a.length;i+=2)for(o=0;o<r.length;o++)if(n=r[o],-1!==a[i].indexOf(n)){a[i]=a[i].replace(new RegExp(n,"g"),t[n]),s=!0;break}return s&&(e=a.join("")),e},fusionDebounce:function(e,t,i){var o=_.memoize(function(){return _.debounce(e,t,i)});return function(e){o(e)(e)}}});FusionPageBuilder=FusionPageBuilder||{};jQuery,FusionPageBuilder.InlineEditorHelpers=Backbone.Model.extend({initialize:function(){this._reRenderElement=_.debounce(_.bind(this.reRenderElement,this),300),this._logChangeEvent=_.debounce(_.bind(this.logChangeEvent,this),500),this.initialValue=null},logChangeEvent:function(e,t,i,o){var n=o,a={type:"param",param:e,newValue:t,cid:i.parentView.model.get("cid")},s=window.fusionAllElements[i.get("element_type")],r="object"==typeof s.params[n]?s.params[n].heading:e;a.oldValue=this.initialValue,this.initialValue=null,window.FusionEvents.trigger("fusion-history-save-step",window.fusionBuilderText.edited+" "+s.name+" - "+r,a)},updateInlineShortcode:function(e,t,i,o){var n=i.parentView.model.attributes.params.element_content,a=n.replace(e,t);i.parentView.model.attributes.params.element_content=a,i.set("inlineElement",t),null===this.initialValue&&(this.initialValue=n),this._logChangeEvent("element_content",a,i,o)},processInlineElement:function(e,t){var i,o=jQuery("#fb-preview")[0].contentWindow.jQuery(e.parentView.$el).find('[data-id="'+e.get("cid")+'"]').find('[data-toggle="tooltip"]');o.length&&o.tooltip("destroy"),this.updateInlineShortcode(e.get("inlineElement"),FusionPageBuilderApp.generateElementShortcode(e,!1,!0),e,t),i=this.getInlineElementMarkup(e),e.parentView.$el.find('[data-id="'+e.get("cid")+'"]:not(.fusion-inline-ajax)').html("").append(i),jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-element-render-fusion_text",e.parentView.model.attributes.cid)},getInlineElementMarkup:function(e){var t={model:e};return(void 0!==FusionPageBuilder[e.get("element_type")]?new(FusionPageBuilder[e.get("element_type")])(t):new FusionPageBuilder.ElementView(t)).getTemplate()},getInlineElementSettings:function(e){var t={model:e},i=new FusionPageBuilder.ElementSettingsView(t);FusionPageBuilderApp.SettingsHelpers.shouldRenderSettings(i)&&("dialog"===window.FusionApp.preferencesData.editing_mode?jQuery(i.render().el).dialog({title:window.fusionAllElements[e.get("element_type")].name,width:window.FusionApp.dialog.dialogData.width,height:window.FusionApp.dialog.dialogData.height,position:window.FusionApp.dialog.dialogData.position,dialogClass:"fusion-builder-dialog fusion-builder-settings-dialog",dragStop:function(e,t){window.FusionApp.dialog.saveDialogPosition(t.offset)},resizeStop:function(e,t){window.FusionApp.dialog.saveDialogSize(t.size)},open:function(e){var t=jQuery(e.target),i=t.find(".fusion-builder-modal-top-container");t.closest(".ui-dialog").find(".ui-dialog-titlebar").append(i),FusionPageBuilderApp.$el.addClass("fusion-builder-no-ui")},dragStart:function(e){jQuery(e.target).trigger("click")},beforeClose:function(){i.saveSettings(),window.FusionEvents.trigger("fusion-content-changed"),FusionPageBuilderApp.$el.removeClass("fusion-builder-no-ui")}}):(i.model.set("title",window.fusionAllElements[e.get("element_type")].name),i.model.set("display","sidebar"),window.FusionApp.sidebarView.renderElementSettings(i)))},removeStyle:function(e){var t,i,o,n,a=e.parentView.model.get("params");t=e.$target.closest(".fusion-live-editable"),e.$target.replaceWith(e.attributes.params.element_content),i=void 0!==(n=FusionPageBuilderApp.inlineEditors.getEditor(t.data("medium-editor-editor-index")))?n.getContent():t.html(),o=t.data("param"),i=i.replace(/&quot;/g,"'"),i=FusionPageBuilderApp.htmlToShortcode(i,e.parentView.model.get("cid")),a[o]=i,e.parentView.model.set("params",a)},liveEditor:function(e){var t=e.$el.find('.fusion-live-editable:not([data-medium-editor-element="true"])');t.length&&t.each(function(){FusionPageBuilderApp.inlineEditors.addEditorInstance(jQuery(this),e)})},removeLiveEditors:function(e){var t=e.$el.find('[data-medium-editor-element="true"]'),i=e.model.get("inlineEditors");void 0!==i&&i.length&&_.each(i,function(e){FusionPageBuilderApp.inlineEditors.destroyEditor(e)}),t.length&&t.each(function(){FusionPageBuilderApp.inlineEditors.destroyEditor(jQuery(this).data("medium-editor-editor-index"))}),e.model.set("inlineEditors",[])},liveEditorEvent:function(e){var t=this,i=e.$el.find(".fusion-live-editable");t.removeLiveEditors(e),!0===e.model.get("inline_editor")&&e.$el&&(1===i.length&&e.autoSelectEditor?FusionPageBuilderApp.inlineEditors.addEditorInstance(i,e,!0):i.on("hover.inline-editor",function(){t.liveEditor(e)}),e.autoSelectEditor=!1)},getInlineHTML:function(t,e){var i;if(""===t||void 0===t)return"";try{i=jQuery(t)}catch(e){return t}return 0===i.length?i=jQuery("<span />").html(t):2===i.length&&(i=jQuery("<div />").html(t)),i.addClass("fusion-disable-editing fusion-inline-ajax").attr("contenteditable","false").attr("data-id",e),i[0].outerHTML},inlineEditorAllowed:function(e){return void 0!==window.fusionAllElements[e]&&void 0!==window.fusionAllElements[e].inline_editor&&window.fusionAllElements[e].inline_editor},updateParentElementParam:function(e,t,i,o){var n=window.FusionPageBuilderViewManager.getView(e),a=void 0!==n?n.model.get("params"):(!1).debounced=void 0!==o&&o;return!(void 0===e||void 0===t||void 0===i||!a||!t||(i===a[t]||(n.activeInlineEditing=!0,o?this._reRenderElement(n,t,i):this.reRenderElement(n,t,i)),0))},reRenderElement:function(e,t,i){e&&e.updateParam(t,i)&&e.reRender()},setOverrideParams:function(t,e){var i=MediumEditor.selection.getSelectionHtml(t.document),o=MediumEditor.selection.getSelectionElement(t.document),n=o?o.innerHTML.trim():"",a={};if(t.parentCid=!1,t.override=!1,o&&o.classList.contains("fusion-live-editable"))if("string"==typeof e){if(!o.getAttribute("data-inline-override-"+e)||i.trim()!==n&&jQuery("<div>"+i+"</div>").text().trim()!==jQuery("<div>"+n+"</div>").text().trim())return;t.override=o.getAttribute("data-inline-override-"+e),t.parentCid=o.getAttribute("data-inline-parent-cid")}else"object"==typeof e&&_.each(e,function(e){!o.getAttribute("data-inline-override-"+e)||i.trim()!==n&&jQuery("<div>"+i+"</div>").text().trim()!==jQuery("<div>"+n+"</div>").text().trim()?a[e]=!1:(a[e]=o.getAttribute("data-inline-override-"+e),t.parentCid=o.getAttribute("data-inline-parent-cid")),t.override=a})}});FusionPageBuilder=FusionPageBuilder||{};jQuery,_.extend(FusionPageBuilder.Callback.prototype,{fusion_preview:function(e,t,i,o){var n,a=i.property,s=window.fusionAllElements[o.model.get("element_type")];if(t||""===t)return i.skip||o.changeParam(e,t),""===t&&void 0!==s&&void 0!==s.defaults&&void 0!==s.defaults[e]&&(t=s.defaults[e]),void 0!==i.dimension&&(a=void 0!==i.property[e]?i.property[e]:e.replace(/_/g,"-")),void 0!==i.unit&&(t=_.fusionGetValueWithUnit(t,i.unit)),n=void 0===i.selector?o.$el:o.$el.find(i.selector),"string"==typeof a&&n.css(a,t),"object"==typeof a&&_.each(i.property,function(e){n.css(e,t)}),{render:!1}},fusion_add_id:function(e,t,i,o){return i.skip||o.changeParam(e,t),(void 0===i.selector?o.$el:o.$el.find(i.selector)).attr("id",t),{render:!1}},fusion_add_class:function(e,t,i,o){var n,a=o.model.attributes.params[e];return i.skip||o.changeParam(e,t),(n=void 0===i.selector?o.$el:o.$el.find(i.selector)).removeClass(a),n.addClass(t),{render:!1}},fusion_toggle_class:function(e,i,t,o){var n;return t.skip||o.changeParam(e,i),n=void 0===t.selector?o.$el:o.$el.find(t.selector),"object"==typeof t.classes&&_.each(t.classes,function(e,t){n.removeClass(e),i===t&&n.addClass(e)}),{render:!1}},fusion_ajax:function(t,i,e,o,n,a,s,r){var l=jQuery.extend(!0,{},e.params),u={};void 0===t||o.skip||(l[t]=i),u.params=jQuery.extend(!0,{},window.fusionAllElements[e.element_type].defaults,_.fusionCleanParameters(l)),jQuery.ajax({url:fusionAppConfig.ajaxurl,type:"post",dataType:"json",data:{action:a,model:u,fusion_load_nonce:fusionAppConfig.fusion_load_nonce},success:function(e){void 0===s&&(s=FusionPageBuilderElements.find(function(e){return e.get("cid")==n})),void 0===t||o.skip||r.changeParam(t,i),"image_id"!==t||void 0===e.image_data||void 0===e.image_data.url||o.skip||r.changeParam("image",e.image_data.url),s.set("query_data",e),"generated_element"!==s.get("type")&&(void 0===r&&(r=FusionPageBuilderViewManager.getView(n)),void 0!==r&&r.reRender())}})},fusion_do_shortcode:function(a,s,r,e){jQuery.ajax({url:fusionAppConfig.ajaxurl,type:"post",dataType:"json",data:{action:"get_shortcode_render",content:s,shortcodes:void 0!==e?e:"",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,cid:a},success:function(e){var t,i,o={},n=a;void 0!==r&&r&&(n=r),t=FusionPageBuilderElements.find(function(e){return e.get("cid")==n}),i=FusionPageBuilderViewManager.getView(n),o.output=FusionPageBuilderApp.addPlaceholder(s,e.content),i&&"function"==typeof i.filterOutput&&(o.output=i.filterOutput(o.output)),o.shortcode=s,t&&t.set("markup",o),"object"==typeof e.shortcodes&&_.each(e.shortcodes,function(e,t){FusionPageBuilderApp.extraShortcodes.addShortcode(t,FusionPageBuilderApp.addPlaceholder(t,e))}),void 0!==i&&i.reRender("ajax"),FusionPageBuilderApp.viewsToRerender&&(_.each(FusionPageBuilderApp.viewsToRerender,function(e){FusionPageBuilderViewManager.getView(e).reRender("ajax")}),FusionPageBuilderApp.viewsToRerender=[])}})},fusion_code_mirror:function(e,t,i,o){return i.skip||o.changeParam(e,t),FusionPageBuilderApp.base64Encode(FusionPageBuilderApp.base64Decode(t))===t&&(t=FusionPageBuilderApp.base64Decode(t)),o.syntaxHighlighter.getDoc().setValue(t),{render:!1}}});FusionPageBuilder=FusionPageBuilder||{};jQuery,FusionPageBuilder.Globals=Backbone.Model.extend({initialize:function(){},handleMultiGlobal:function(s){var r,e,l,u;void 0!==s.currentModel.attributes.params&&void 0!==s.currentModel.attributes.params.fusion_global?(r=s.currentModel.attributes.params.fusion_global,e=jQuery("#fb-preview")[0].contentWindow.jQuery('[fusion-global-layout="'+r+'"]').length,l=s.currentModel.get("cid"),u=FusionPageBuilderViewManager.getView(l),1<e&&jQuery.each(jQuery("#fb-preview")[0].contentWindow.jQuery('[fusion-global-layout="'+r+'"]'),function(){var t,e,i,o,n,a;l!==jQuery(this).data("cid")&&(t=jQuery(this).data("cid"),e=FusionPageBuilderViewManager.getView(t),i=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}),"close"===s.handleType?(o=jQuery.extend(!0,{},s.currentModel.get("params")),n=jQuery.extend(!0,{},s.currentModel.get("markup")),i.set("params",o),i.set("markup",n),void 0!==e&&void 0!==e.reRender&&e.reRender()):"save"===s.handleType?(i.set(s.attributes),i.set("cid",t),fusionGlobalManager.updateGlobalLayout(r,u.getContent()),void 0!==e&&void 0!==e.reRender&&e.reRender()):"changeView"===s.handleType?(e.beforePatch(),a=e.getElementContent(),FusionPageBuilderApp._diffdom.apply(a[0],s.difference),e.afterPatch()):"changeOption"===s.handleType&&(i.attributes.params[s.Name]=s.Value,void 0!==e&&void 0!==e.reRender&&e.reRender()))})):void 0!==s.currentModel.attributes.parent&&"changeView"!==s.handleType&&setTimeout(fusionGlobalManager.handleGlobalParents,500,s)},handleGlobalParents:function(e){var t,i=jQuery("#fb-preview")[0].contentWindow,o=e.currentModel.attributes.parent,n=FusionPageBuilderViewManager.getView(o),a={},s={};void 0!==(t=FusionPageBuilderElements.find(function(e){return e.get("cid")==o}))&&(void 0!==t.attributes.params&&void 0!==t.attributes.params.fusion_global&&1<i.jQuery('[fusion-global-layout="'+t.attributes.params.fusion_global+'"]').length&&(jQuery.each(i.jQuery('[fusion-global-layout="'+t.attributes.params.fusion_global+'"]'),function(){var e;o!==jQuery(this).data("cid")&&(e=jQuery(this).data("cid"),a=FusionPageBuilderViewManager.getView(e),void 0!==t.get("multi")&&"multi_element_parent"===t.get("multi")&&fusionGlobalManager.updateMultiElementParent(),void 0===t.get("element_type")||"fusion_builder_column"!==t.get("element_type")&&"fusion_builder_row_inner"!==t.get("element_type")&&"fusion_builder_container"!==t.get("element_type")||fusionGlobalManager.removeChildElements(i,e,t.get("element_type")),void 0!==t.get("element_type")&&"fusion_builder_column"===t.get("element_type")&&fusionGlobalManager.updateColumnElements(n.$el,e),void 0!==t.get("element_type")&&"fusion_builder_row_inner"===t.get("element_type")&&fusionGlobalManager.updateNestedColumnElements(n.$el,a),void 0!==t.get("element_type")&&"fusion_builder_container"===t.get("element_type")&&fusionGlobalManager.updateContainerElements(n.$el,a))}),"save"===e.handleType&&fusionGlobalManager.updateGlobalLayout(t.attributes.params.fusion_global,a.getContent())),void 0!==t.attributes.params&&void 0!==t.attributes.parent&&(s=FusionPageBuilderElements.find(function(e){return e.get("cid")==o}),e.currentModel=s,fusionGlobalManager.handleGlobalParents(e)))},updateMultiElementParent:function(e,t,i){e.attributes.params.element_content=t.attributes.params.element_content,i.generateChildElements()},removeChildElements:function(e,t,i){var o="fusion_builder_container"===i?".fusion-builder-remove, .fusion-builder-column-remove":".fusion-builder-remove";jQuery.each(e.jQuery('[data-cid="'+t+'"] .fusion-builder-module-controls'),function(){jQuery(this).find(o).trigger("click",["automated"])})},updateColumnElements:function(e,r){var t={},i={};e.find(".fusion-builder-live-element:not(.fusion-builder-column-inner .fusion-builder-live-element), .fusion-builder-nested-element").each(function(){var e,t,i,o,n,a,s;jQuery(this).hasClass("fusion-builder-live-element")?(e=jQuery(this),t=void 0===e.data("cid")?e.find(".fusion-builder-data-cid").data("cid"):e.data("cid"),i=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}),(o=jQuery.extend(!0,{},i.attributes)).created="manually",o.cid=FusionPageBuilderViewManager.generateCid(),o.parent=r,o.from="fusion_builder_column",delete o.targetElementPosition,FusionPageBuilderApp.collection.add(o)):jQuery(this).hasClass("fusion_builder_row_inner")&&(a=void 0===(n=jQuery(this)).data("cid")?n.find(".fusion-builder-data-cid").data("cid"):n.data("cid"),void 0!==(s=FusionPageBuilderViewManager.getView(a))&&s.cloneNestedRow("",r))}),i=FusionPageBuilderElements.find(function(e){return e.get("cid")==r}),(t=FusionPageBuilderViewManager.getView(i.get("parent"))).createVirtualRows(),t.updateColumnsPreview(),FusionEvents.trigger("fusion-content-changed")},updateNestedColumnElements:function(e,n){e.find(".fusion-builder-live-element").each(function(){var e={},t=jQuery(this),i=void 0===t.data("cid")?t.find(".fusion-builder-data-cid").data("cid"):t.data("cid"),o=FusionPageBuilderElements.find(function(e){return e.get("cid")==i});(e=jQuery.extend(!0,{},o.attributes)).created="manually",e.cid=FusionPageBuilderViewManager.generateCid(),e.parent=n.$el.find(".fusion-builder-column-inner").data("cid"),e.from="fusion_builder_row_inner",delete e.targetElementPosition,FusionPageBuilderApp.collection.add(e)})},updateContainerElements:function(e,o){e.find(".fusion-builder-column-outer").each(function(){var e=jQuery(this),t=e.data("cid"),i=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}),s=jQuery.extend(!0,{},i.attributes);s.created="manually",s.cid=FusionPageBuilderViewManager.generateCid(),s.parent=o.$el.find(".fusion-builder-row-container").data("cid"),s.from="fusion_builder_container",s.cloned=!0,FusionPageBuilderApp.collection.add(s),e.find(".fusion-builder-column-content:not( .fusion-nested-column-content )").children(".fusion-builder-live-element, .fusion_builder_row_inner").each(function(){var e,t,i,o,n,a;jQuery(this).hasClass("fusion-builder-live-element")?(e=jQuery(this),t=e.data("cid"),i=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}),(o=jQuery.extend(!0,{},i.attributes)).created="manually",o.cid=FusionPageBuilderViewManager.generateCid(),o.parent=s.cid,o.from="fusion_builder_container",delete o.targetElementPosition,FusionPageBuilderApp.collection.add(o)):jQuery(this).hasClass("fusion_builder_row_inner")&&(n=jQuery(this).data("cid"),void 0!==(a=FusionPageBuilderViewManager.getView(n))&&a.cloneNestedRow("",s.cid))})})},updateGlobalLayout:function(e,t){jQuery.ajax({type:"POST",url:fusionAppConfig.ajaxurl,dataType:"json",data:{action:"fusion_builder_update_layout",fusion_load_nonce:fusionAppConfig.fusion_load_nonce,fusion_layout_id:e,fusion_layout_content:t},complete:function(){}})},handleGlobalsFromLibrary:function(e,t){var i,o=jQuery("#fb-preview")[0].contentWindow.jQuery('[data-cid="'+t+'"] [fusion-global-layout="'+e+'"]').last().data("cid"),n={};void 0===o&&(o=jQuery("#fb-preview")[0].contentWindow.jQuery('[fusion-global-layout="'+e+'"]').last().data("cid")),void 0!==(i=FusionPageBuilderElements.find(function(e){return e.get("cid")==o}))&&(n={currentModel:i,handleType:"save",attributes:i.attributes},fusionGlobalManager.handleMultiGlobal(n))}});FusionPageBuilder=FusionPageBuilder||{};jQuery,FusionPageBuilder.DraggableHelpers=Backbone.Model.extend({initialize:function(){},draggableClasses:function(t){var e,i,o,n;switch(e=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}),o=_.fusionCleanParameters(jQuery.extend(!0,{},e.get("params"))),n=e.get("parent"),e.get("type")){case"fusion_builder_container":void 0!==o.fusion_global&&(i=" container-global-helper"),"yes"===o.hundred_percent_height_scroll&&"yes"===o.hundred_percent_height&&(i=" container-scrolling-helper");break;case"fusion_builder_column":FusionPageBuilderApp.DraggableHelpers.isHeightScroll(n)&&(i=" column-scrolling-helper"),void 0===o.fusion_global&&!FusionPageBuilderApp.DraggableHelpers.isGlobalParent(n)||(i=" column-global-helper");break;case"fusion_builder_row_inner":i=" row-inner-nested-helper",FusionPageBuilderApp.DraggableHelpers.isHeightScroll(n)&&(i=" row-inner-scrolling-helper"),void 0===o.fusion_global&&!FusionPageBuilderApp.DraggableHelpers.isGlobalParent(n)||(i=" row-inner-global-helper");break;case"fusion_builder_column_inner":i=" column-inner-nested-helper",FusionPageBuilderApp.DraggableHelpers.isHeightScroll(n)&&(i=" column-inner-scrolling-helper"),void 0===o.fusion_global&&!FusionPageBuilderApp.DraggableHelpers.isGlobalParent(n)||(i=" column-inner-global-helper");break;case"element":"fusion_builder_column_inner"===FusionPageBuilderElements.find(function(e){return e.get("cid")==n}).get("type")&&(i=" element-nested-helper"),FusionPageBuilderApp.DraggableHelpers.isHeightScroll(n)&&(i=" element-scrolling-helper"),void 0===o.fusion_global&&!FusionPageBuilderApp.DraggableHelpers.isGlobalParent(n)||(i=" element-global-helper")}return i},isGlobalParent:function(t){var e;return void 0!==(e=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}))&&(void 0!==_.fusionCleanParameters(jQuery.extend(!0,{},e.get("params"))).fusion_global||void 0!==e.get("parent")&&FusionPageBuilderApp.DraggableHelpers.isGlobalParent(e.get("parent")))},isHeightScroll:function(t){var e,i;return void 0!==(e=FusionPageBuilderElements.find(function(e){return e.get("cid")==t}))&&(i=_.fusionCleanParameters(jQuery.extend(!0,{},e.get("params"))),"fusion_builder_container"===e.get("type")&&"yes"===i.hundred_percent_height_scroll&&"yes"===i.hundred_percent_height||void 0!==e.get("parent")&&FusionPageBuilderApp.DraggableHelpers.isHeightScroll(e.get("parent")))}});FusionPageBuilder=FusionPageBuilder||{};jQuery,FusionPageBuilder.IsotopeManager=Backbone.Model.extend({defaults:{selector:"",container:"",itemSelector:"",layoutMode:"packery",isOriginLeft:!jQuery("body.rtl").length,resizable:!0,initLayout:!0,view:!1},initialize:function(){this.listenTo(window.FusionEvents,"fusion-frame-size-changed",this.updateLayout),this.listenTo(window.FusionEvents,"fusion-column-resized",this.updateLayout)},init:function(){var e=this,t=e.get("view").$el.find(e.get("selector"));e.set("container",t),t.data("isotope")||t.isotope({layoutMode:e.get("layoutMode"),itemSelector:e.get("itemSelector"),isOriginLeft:!jQuery("body.rtl").length,resizable:!0,initLayout:!0})},reInit:function(e){var t=this;void 0===e&&(e=300),t.destroyIsotope(),setTimeout(function(){t.init()},e)},destroyIsotope:function(){""!==this.get("container")&&this.get("container").data("isotope")&&(this.get("container").isotope("destroy"),this.get("container").removeData("isotope"))},append:function(e){""!==this.get("container")&&this.get("container").data("isotope")&&this.get("container").isotope("appended",e).isotope("layout")},remove:function(e){""!==this.get("container")&&this.get("container").data("isotope")&&this.get("container").isotope("remove",e).isotope("layout")},reloadItems:function(){""!==this.get("container")&&this.get("container").data("isotope")&&this.get("container").isotope("reloadItems").isotope("layout")},updateLayout:function(){""!==this.get("container")&&this.get("container").data("isotope")&&this.get("container").isotope("layout")}});FusionPageBuilder=FusionPageBuilder||{};!function(){var i=[],o=[];jQuery.fn.outerHTML=function(){return this.length?this[0].outerHTML||(e=this[0],(i=document.createElement("div")).appendChild(e.cloneNode(!0)),t=i.innerHTML,i=null,t):this;var e,t,i},_.each(fusionAllElements,function(e){var t;void 0===e.hide_from_builder&&void 0===e.generator_only&&(t={title:e.name,label:e.shortcode},i.push(t))}),_.each(fusionAllElements,function(e){var t;void 0===e.hide_from_builder&&(t={title:e.name,label:e.shortcode},void 0!==e.generator_only&&(t.generator_only=!0),o.push(t))}),i.sort(function(e,t){var i=e.title.toLowerCase(),o=t.title.toLowerCase();return i<o?-1:o<i?1:0}),o.sort(function(e,t){var i=e.title.toLowerCase(),o=t.title.toLowerCase();return i<o?-1:o<i?1:0}),window.FusionPageBuilderViewManager=jQuery.extend(!0,{},new FusionPageBuilder.ViewManager),FusionPageBuilder.AppView=Backbone.View.extend({model:FusionPageBuilder.Element,collection:FusionPageBuilderElements,elements:{modules:i,generator_elements:o},events:{contextmenu:"contextMenu"},template:FusionPageBuilder.template(jQuery("#fusion-builder-front-end-template").html()),initialize:function(){this.extraShortcodes=new FusionPageBuilder.ExtraShortcodes,this.inlineEditors=new FusionPageBuilder.InlineEditorManager,this.inlineEditorHelpers=new FusionPageBuilder.InlineEditorHelpers,this.DraggableHelpers=new FusionPageBuilder.DraggableHelpers,this.SettingsHelpers=new FusionPageBuilder.SettingsHelpers,this.wireframe=new FusionPageBuilder.Wireframe,this.postContent=!1,this.postID=!1,this.listenTo(this.collection,"add",this.addBuilderElement),this.listenTo(FusionEvents,"fusion-data-updated",this.updateData),this.listenTo(FusionEvents,"fusion-preview-toggle",this.previewToggle),this.previewMode=!1,this.listenTo(FusionEvents,"fusion-preview-update",this.setGlobalStyles),this.listenTo(FusionEvents,"fusion-wireframe-toggle",this.wireFrameToggled),this.listenTo(FusionEvents,"fusion-preview-resize",this.setStackedContentClass),this.listenTo(FusionEvents,"fusion-to-content_break_point-changed",this.setStackedContentClass),this.listenTo(FusionEvents,"fusion-to-header_position-changed",this.reInitScrollingSections),this.listenTo(window.FusionEvents,"fusion-preferences-droppables_visible-updated",this.toggleDroppablesVisibility),this.listenTo(window.FusionEvents,"fusion-preferences-sticky_header-updated",this.toggleStickyHeader),this.listenTo(window.FusionEvents,"fusion-preferences-tooltips-updated",this.toggleTooltips),this.listenTo(window.FusionEvents,"fusion-preferences-transparent_header-updated",this.toggleTransparentHeader),this.listenTo(FusionEvents,"fusion-content-changed",function(){fusionTriggerEvent("fusion-resize-stickyheader")}),this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this._fusion_do_shortcode=_.debounce(_.bind(FusionApp.callback.fusion_do_shortcode,this),300),this.blankPage=!1,this.render(),this.reRenderElements=!1,this.contextMenuView=!1,this.clipboard={},this.lastAjaxCid=!1,this.ajaxContentRequests=[],this._diffdom=new diffDOM({valueDiffing:!1}),jQuery(jQuery("#fb-preview")[0].contentWindow).on("resize",function(){FusionEvents.trigger("fusion-preview-resize")}),jQuery("#fb-preview")[0].contentWindow.jQuery("body").on("click",function(e){FusionPageBuilderApp.sizesHide(e)}),this.correctTooltipPosition(),this.loaded=!1,this.shortcodeAjax=!1,this.inlineElements=["fusion_highlight","fusion_tooltip","fusion_dropcap","fusion_popover","fusion_one_page_text_link"],this.documentWrite=!1,this.previewDocumentWrite=!1,this.wireframeActive=!1,this.viewsToRerender=[],this.listenTo(FusionEvents,"fusion-data-updated",this.resetRenderVariable)},resetRenderVariable:function(){this.reRenderElements=!1},getCallbackFunction:function(e,t,i,o,n){var a,s,r=fusionAllElements[o.model.get("element_type")],l=r.params[t];return void 0!==e.noTemplate&&e.noTemplate?(a={ajax:!0,function:"fusion_do_shortcode"},n=void 0!==n&&n,s=FusionPageBuilderViewManager.getView(e.cid),n||s.changeParam(t,i),void 0!==e.multi&&!1!==e.multi?(a.parent=this.getParentElementCid(e),a.content=this.getParentElementContent(e,o)):(a.parent=!1,a.content=FusionPageBuilderApp.generateElementShortcode(s.$el))):a=this.CheckIfCallback(r,l,o.model),a},getParentElementCid:function(e){return"multi_element_child"===e.multi?e.parent:e.cid},getParentElementContent:function(e,t){var i;return"multi_element_child"===e.multi?((i=FusionPageBuilderViewManager.getView(e.parent)).updateElementContent(),i.getContent()):t.getContent()},CheckIfCallback:function(e,t,i){return void 0!==t&&void 0!==t.callback?t.callback:void 0!==e&&void 0!==e.callback&&void 0===i.attributes.query_data&&e.callback},setGlobalStyles:function(e,t){var i="",o=!1,n=0;void 0!==t?o=t:void 0===e&&(o=!0),"hundredp_padding"!==e&&!o||(n=fusionGetPercentPaddingHorizontalNegativeMargin(),i+=".width-100 .fusion-builder-container:before,",i+=".width-100 .fusion-builder-container:after,",i+=".fusion-builder-live .width-100 .fusion-builder-container:hover > .fusion-builder-module-controls-container-wrapper,",i+=".fusion-builder-live .width-100 .fusion-builder-container .fusion-container-spacing.fusion-container-margin-top,",i+=".fusion-builder-live .width-100 .fusion-builder-container .fusion-container-spacing.fusion-container-margin-bottom,",i+=".fusion-builder-live .width-100 .fusion-builder-container .fusion-container-spacing.fusion-container-padding-top,",i+=".fusion-builder-live .width-100 .fusion-builder-container .fusion-container-spacing.fusion-container-padding-bottom,",i+=".fusion-builder-live .width-100 .fusion-builder-container .fusion-container-spacing.fusion-container-padding-right",i+="{margin-left:"+(n=fusionGetPercentPaddingHorizontalNegativeMarginIfSiteWidthPercent(0,n))+";margin-right:"+n+"}",i+=".fusion-builder-live .width-100 .fusion-builder-container .fusion-container-spacing.fusion-container-padding-left{margin-left:"+n+";}",i+=".fusion-builder-live .width-100 .fusion-builder-container .fusion-container-spacing.fusion-container-padding-right{margin-right:"+n+";}"),i&&(this.$el.children("style").length||this.$el.prepend("<style></style>"),this.$el.children("style").html(i))},correctTooltipPosition:function(){var l=this;this.$el.on("mouseenter",".fusion-builder-module-controls-type-container a, .fusion-builder-column-controls a, .fusion-builder-module-controls a, a.fusion-builder-add-element",function(){var e,t,i,o,n,a,s=jQuery(this).outerWidth(),r=jQuery(this).children(".fusion-container-tooltip, .fusion-column-tooltip, .fusion-element-tooltip");r.length&&(r.children(".fusion-tooltip-text").removeAttr("style"),e=r.outerWidth(),i=(t=r.offset().left)+e,n=0,a=l.$el.width(),jQuery(this).closest(".fusion-fullwidth:not(.video-background) .fusion-row").css("z-index","auto"),jQuery(this).closest(".fusion-builder-container").css("z-index","auto"),(o=r.closest(".fusion-carousel-wrapper")).length&&(a=(n=o.offset().left)+o.outerWidth()),t<n?r.children(".fusion-tooltip-text").css("margin-left",e/2+s+"px"):a<i&&r.children(".fusion-tooltip-text").css("margin-left","calc("+s+"px - "+e+"px)"),jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-footer-parallax").length&&"fixed"===jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-footer-parallax").css("position")&&(jQuery("#fb-preview")[0].contentWindow.jQuery("#main").css("z-index","auto"),jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-footer-parallax").css("z-index","-1"),jQuery("#fb-preview")[0].contentWindow.jQuery("#sliders-container").find('.tfs-slider[data-parallax="1"]').length&&jQuery("#fb-preview")[0].contentWindow.jQuery("#sliders-container").css("z-index","auto")))}),this.$el.on("mouseleave",".fusion-builder-module-controls-container a",function(){var e=jQuery(this).closest(".fusion-builder-module-controls-container").parent(".fusion-builder-live-element");e.length&&e.find(".fusion-modal.in").length||(jQuery(this).closest(".fusion-row").css("z-index",""),jQuery(this).closest(".fusion-builder-container").css("z-index","")),jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-footer-parallax").length&&(jQuery("#fb-preview")[0].contentWindow.jQuery("#main").css("z-index",""),jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-footer-parallax").css("z-index",""),jQuery("#fb-preview")[0].contentWindow.jQuery("#sliders-container").css("z-index",""))})},render:function(){return this.$el.find(".fusion-builder-live-editor").html(this.template()),this.delegateEvents(),this.setStackedContentClass(),this},updateData:function(){this.extraShortcodes.addData(FusionApp.data.shortcodeMap)},convertGalleryElement:function(e){var t=window.wp.shortcode.regexp("fusion_gallery"),s=this.regExpShortcode("fusion_gallery"),i=e.match(t),r=e,l=[];return _.each(i,function(e){var t,i=e.match(s),o=""!==i[3]?window.wp.shortcode.attrs(i[3]):"",n="",a="";void 0!==o.named.image_ids&&(t=o.named.image_ids.split(","),_.each(t,function(e){n+='[fusion_gallery_image image="" image_id="'+e+'" /]',l.push(e)}),a=e.replace("/]","]"+n+"[/fusion_gallery]").replace('image_ids="'+o.named.image_ids+'" ',""),r=r.replace(e,a))}),wp.media.query({post__in:l,posts_per_page:l.length}).more(),r},createBuilderLayout:function(e){var t=this;e=this.convertGalleryElement(e),this.shortcodesToBuilder(e),this.builderToShortcodes(),setTimeout(function(){t.scrollingContainers()},100)},initialBuilderLayout:function(o){var n=this;FusionPageBuilderViewManager.removeViews(),this.postContent=o.postDetails.post_content,this.postID=o.postDetails.post_id,n.updateData(o),setTimeout(function(){var e=n.postContent,t="",i=fusionBuilderText.unknown_error_link;try{n.setGlobalStyles("",!0),e=n.convertGalleryElement(e),e=n.validateContent(e),n.shortcodesToBuilder(e),n.updateData(o),setTimeout(function(){n.scrollingContainers(),n.reRenderElements=!0,0<FusionPageBuilderViewManager.countElementsByType("fusion_builder_next_page")&&FusionEvents.trigger("fusion-next-page"),n.loaded=!0,FusionEvents.trigger("fusion-builder-loaded")},100)}catch(o){("undefined"!==o.name&&"ContentException"===o.name?(t=fusionBuilderText.content_error_title,jQuery("<div>"+fusionBuilderText.content_error_description+"</div>")):(t=fusionBuilderText.unknown_error_title,"string"==typeof o.stack&&(i='<a href="#" class="copy-full-description">'+fusionBuilderText.unknown_error_copy+"</a>"),jQuery("<div>"+o+"<p>"+i+"</p></div>"))).dialog({title:'<span class="icon type-warning"><i class="fusiona-exclamation"></i></span>'+t,dialogClass:"fusion-builder-dialog fusion-builder-error-dialog fusion-builder-settings-dialog",autoOpen:!0,modal:!0,width:400,open:function(){jQuery(this).find(".copy-full-description").length&&jQuery(this).find(".copy-full-description").on("click",function(e){var t=jQuery("<textarea>"),i="";"string"==typeof o.message&&(i+=o.message+"\n"),"string"==typeof o.stack&&(i+=o.stack),e.preventDefault(),jQuery(this).after(t),t.val(i).focus().select(),document.execCommand("copy"),t.remove(),jQuery(this).html('<i class="fusiona-check"></i> '+fusionBuilderText.unknown_error_copied)})},close:function(){}}),n.fusionBuilderReset()}},50),window.fusionGlobalManager=void 0!==o.fusionGlobalManager&&!1!==o.fusionGlobalManager?o.fusionGlobalManager:new FusionPageBuilder.Globals},FBException:function(e,t){this.message=e,this.name=t},validateContent:function(i){var o,t,n,e=""===i,a="",s=[],r=[];if(void 0!==(i=(i=(i=i.replace(/\r?\n/g,"\r\n")).replace(/<p>\[/g,"[")).replace(/\]<\/p>/g,"]"))&&(i=i.trim()),-1!==i.indexOf("[fullwidth"))throw new this.FBException("Avada 4.0.3 or earlier fullwidth container used!","ContentException");return e||(i=(i=i.replace(/\[fusion\_text \/\]/g,"[fusion_text][/fusion_text]").replace(/\[\/fusion\_text\]\[\/fusion\_text\]/g,"[/fusion_text]")).replace(/\$\$/g,"&#36;&#36;"),a=i,a=wp.shortcode.replace("fusion_builder_container",a,function(){return"@|@"}),a=(a=wp.shortcode.replace("fusion_builder_next_page",a,function(){return"@|@"})).trim().split("@|@"),_.each(a,function(e){""!==e.trim()&&(i=i.replace(e,'[fusion_builder_container hundred_percent="no" equal_height_columns="no" menu_anchor="" hide_on_mobile="small-visibility,medium-visibility,large-visibility" class="" id="" background_color="" background_image="" background_position="center center" background_repeat="no-repeat" fade="no" background_parallax="none" parallax_speed="0.3" video_mp4="" video_webm="" video_ogv="" video_url="" video_aspect_ratio="16:9" video_loop="yes" video_mute="yes" overlay_color="" overlay_opacity="0.5" video_preview_image="" border_size="" border_color="" border_style="solid" padding_top="" padding_bottom="" padding_left="" padding_right=""][fusion_builder_row]'+e+"[/fusion_builder_row][/fusion_builder_container]"))}),a=wp.shortcode.replace("fusion_builder_container",i,function(e){r.push(e.content)}),_.each(r,function(e){e=wp.shortcode.replace("fusion_builder_row",e,function(e){return e.content}),e=(e=wp.shortcode.replace("fusion_builder_column",e,function(){return"@|@"})).trim().split("@|@"),_.each(e,function(e){""!==e.trim()&&"[fusion_builder_row][/fusion_builder_row]"!==e.trim()&&(t='[fusion_builder_column type="1_1" background_position="left top" background_color="" border_size="" border_color="" border_style="solid" border_position="all" spacing="yes" background_image="" background_repeat="no-repeat" padding="" margin_top="0px" margin_bottom="0px" class="" id="" animation_type="" animation_speed="0.3" animation_direction="left" hide_on_mobile="small-visibility,medium-visibility,large-visibility" center_content="no" last="no" min_height="" hover_type="none" link=""]'+e+"[/fusion_builder_column]",i=i.replace(e,t))})}),a=wp.shortcode.replace("fusion_builder_column_inner",i,function(e){s.push(e.content)}),a=wp.shortcode.replace("fusion_builder_column",i,function(e){s.push(e.content)}),_.each(s,function(t){o=fusionAllElements,_.each(o,function(e){void 0===e.generator_only&&(t=wp.shortcode.replace(e.shortcode,t,function(){return"@|@"}))}),t=t.trim().split("@|@"),_.each(t,function(e){""!==e.trim()&&(n="@=%~@","@"===e.slice(-1)&&(n="#=%~#"),i=i.replace(e,"[fusion_text]"+e.slice(0,-1)+n+e.slice(-1)+"[/fusion_text]"))})}),i=i.replace(/@=%~@/g,"").replace(/#=%~#/g,""),i=wp.shortcode.replace("fusion_text",i,function(e){if(o=fusionAllElements,a=e.content,_.each(o,function(e){void 0===e.generator_only&&(a=wp.shortcode.replace(e.shortcode,a,function(){return"|"}))}),!a.replace(/\|/g,"").length)return e.content})),i=i.replace(/&#36;&#36;/g,function(){return"$$"})},regExpShortcode:_.memoize(function(e){return new RegExp("\\[(\\[?)("+e+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")}),findShortcodeMatches:function(e,t){var i,o;return _.isObject(e)&&(e=e.value),i="",e=void 0!==e?e:"",o=window.wp.shortcode.regexp(t),void 0!==e&&""!==e&&(i=e.match(o)),i},fusionBuilderReset:function(){FusionPageBuilderElements.reset({}),this.collection.reset({}),FusionPageBuilderViewManager.clear(),this.$el.find("#fusion_builder_container").html(""),FusionEvents.trigger("fusion-builder-reset")},clearLayout:function(e){e&&e.preventDefault(),"[fusion_builder_blank_page][/fusion_builder_blank_page]"!==this.postContent&&(this.blankPage=!0,this.clearBuilderLayout(!0))},contextMenu:function(e){var t,i,o,n,a=this,s=jQuery(e.target),r=s.closest("[data-cid]"),l=s.hasClass("fusion-disable-editing")||s.parents(".fusion-disable-editing").length;if(this.removeContextMenu(),!s.hasClass("fusion-builder-blank-page")&&!s.parents(".fusion-builder-blank-page").length&&(s.hasClass("fusion-builder-row-container")&&(r=s=s.closest(".fusion-builder-container:not( .fusion-builder-row-container )")),r.length&&("fusion_text"!==r.data("type")||this.wireframeActive||s.parents(".fusion-builder-module-controls-container").length||l))){if(jQuery("body").hasClass("nested-ui-active")||this.$el.hasClass("fusion-builder-nested-cols-dialog-open")||!s.closest(".fusion_builder_row_inner").length||(r=s.closest(".fusion_builder_row_inner")),i=FusionPageBuilderViewManager.getView(r.data("cid")),l){if((r=s.hasClass("fusion-disable-editing")?s:s.parents(".fusion-disable-editing").first()).hasClass("fusion-inline-ajax"))return;t=r.data("id"),void 0!==(n=i.model.inlineCollection.find(function(e){return e.get("cid")==t}))&&(e.preventDefault(),n.event=e,n.$target=r,n.parentView=i,o={model:n},this.contextMenuView=new FusionPageBuilder.ContextMenuInlineView(o))}else e.preventDefault(),o={model:{parent:i.model,event:e,parentView:i}},this.contextMenuView=new FusionPageBuilder.ContextMenuView(o);void 0!==this.contextMenuView&&this.contextMenuView&&(this.$el.append(this.contextMenuView.render().el),this.$el.one("click",function(){a.removeContextMenu()}))}},removeContextMenu:function(){this.contextMenuView&&"function"==typeof this.contextMenuView.removeMenu&&this.contextMenuView.removeMenu()},showSavedElements:function(e,t){var i,o=jQuery("#fusion-builder-layouts-"+e).find(".fusion-page-layouts").clone();o.find("li").each(function(){i=jQuery(this).find(".fusion-builder-demo-button-load").attr("data-post-id"),jQuery(this).find(".fusion-layout-buttons").remove(),jQuery(this).find("h4").attr("class","fusion_module_title"),jQuery(this).attr("data-layout_id",i),jQuery(this).addClass("fusion_builder_custom_"+e+"_load"),""!==jQuery(this).attr("data-layout_type")&&jQuery(this).addClass("fusion-element-type-"+jQuery(this).attr("data-layout_type"))}),t.append('<div id="fusion-loader"><span class="fusion-builder-loader"></span></div>'),t.append('<ul class="fusion-builder-all-modules fusion-builder-library-list fusion-builder-library-list-'+e+'">'+o.html()+'<li class="spacer fusion-builder-element"></li><li class="spacer fusion-builder-element"></li><li class="spacer fusion-builder-element"></li><li class="spacer fusion-builder-element"></li></div>')},renderContent:function(n,a,s){var e,r,l=this,t=void 0!==s&&s,u=[],d=!1;return(s=FusionPageBuilderViewManager.getView(a))&&"function"==typeof s.filterRenderContent&&(n=s.filterRenderContent(n)),void 0===n?"":-1===n.indexOf("[")?n:(void 0!==s&&(s.model.inlineCollection.reset(),r=this.inlineEditorHelpers.inlineEditorAllowed(s.model.get("element_type"))),e=this.shortcodesToBuilder(n,!1,!1,!0),_.each(e,function(e){var t,i,o;"fusion_clients"===e.settings.element_type&&(d=!0),-1!==jQuery.inArray(e.settings.element_type,FusionPageBuilderApp.inlineElements)?(e.settings.cid=FusionPageBuilderViewManager.generateCid(),e.settings.parent=a,e.settings.inlineElement=e.content,i=new FusionPageBuilder.Element(e.settings),s.model.inlineCollection.add(i),o=l.inlineEditorHelpers.getInlineElementMarkup(i),n=r?n.replace(e.content,'<span class="fusion-disable-editing fusion-inline-element" contenteditable="false" data-id="'+e.settings.cid+'">'+o+"</span>"):n.replace(e.content,o)):void 0===(t=FusionPageBuilderApp.extraShortcodes.byShortcode(e.content))?u.push(e.content):n=r?n.replace(e.content,l.inlineEditorHelpers.getInlineHTML(t.output,t.id)):n.replace(e.content,t.output)}),u.length&&(n=l.ajaxRenderShortcode(a,n,t,u)),n=FusionApp.removeScripts(n,a),setTimeout(function(){FusionApp.injectScripts(a),d&&jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-element-render-fusion_images",a)},200),"undefined"!==n?n:'<div id="fusion-loader"><span class="fusion-builder-loader"></span></div>')},ajaxRenderShortcode:function(e,t,i,o){var n,a,s;if(-1!==this.ajaxContentRequests.indexOf(t))return a=void 0!==i&&i?i:e,s=void 0!==(n=FusionPageBuilderElements.find(function(e){return e.get("cid")==a}))&&n.get("markup"),this.viewsToRerender.push(e),s?s.output:t;e===this.lastAjaxCid?this._fusion_do_shortcode(e,t,i,o):FusionApp.callback.fusion_do_shortcode(e,t,i,o),this.ajaxContentRequests.push(t),this.lastAjaxCid=e},addPlaceholder:function(e,t){var i,o;return-1!==e.indexOf("rev_slider")?(i=e.match(/alias\=\"(.*?)\"/),o=fusionBuilderText.slider_placeholder):-1!==e.indexOf("layerslider")&&(i=e.match(/id\=\"(.*?)\"/),o=fusionBuilderText.slider_placeholder),void 0===i||"0"!==i[1]&&""!==i[1]||(t='<div class="fusion-builder-placeholder">'+o+"</div>"),t},htmlToShortcode:function(e,u){var t=jQuery("<div>"+e+"</div>"),d=this;return t.find(".fusion-disable-editing").each(function(){var e,t=jQuery(this).data("id");void 0===(e=jQuery(this).hasClass("fusion-inline-ajax")?FusionPageBuilderApp.extraShortcodes.byId(t).shortcode:FusionPageBuilderViewManager.getView(u).model.inlineCollection.find(function(e){return e.get("cid")==t}).get("inlineElement"))?alert("Problem encountered. This content cannot be live edited."):jQuery(this).replaceWith(e)}),t.find("[data-inline-shortcode]").each(function(){var e,t,i,o,n,a,s,r=jQuery(this).data("element"),l=jQuery(this).html();i=r in fusionAllElements?(e=fusionAllElements[r].params,t=fusionAllElements[r].multi,fusionAllElements[r].shortcode):t=e="",o={},_.each(e,function(e){o[e.param_name]=_.isObject(e.value)?e.default:e.value}),o.open_settings="true",o.element_content=l,n={type:"element",added:"manually",element_type:i,params:o,parent:u,multi:t},a=new FusionPageBuilder.Element(n),s=d.generateElementShortcode(a,!1,!0),jQuery(this).replaceWith(s)}),t.html()},shortcodesToBuilder:function(e,v,y,w,x,F){var P,A,C,t,i,B=[];return w=void 0!==w&&!0===w,""!==e||this.$el.find(".fusion-builder-blank-page-content").length?(jQuery(".fusion-builder-live").removeClass("fusion-builder-blank-page-active"),P=this,i=_.keys(fusionAllElements).join("|"),w&&"undefined"!=typeof fusionVendorShortcodes&&(i+="|"+_.keys(fusionVendorShortcodes).join("|")),A=window.wp.shortcode.regexp(i),C=this.regExpShortcode(i),t=e.match(A),_.each(t,function(e){var t,i,o,n,a,s,r,l,u,d,c=e.match(C),g=c[2],p=""!==c[3]?window.wp.shortcode.attrs(c[3]):"",f=void 0!==c[5]?c[5]:"",m=w?"":FusionPageBuilderViewManager.generateCid(),h={params:{}},b=void 0!==f&&""!==f&&f.match(A);if(t={type:g,element_type:g,cid:m,created:"manually",multi:"",params:{},container:!1,allow_generator:void 0!==fusionAllElements[g]&&void 0!==fusionAllElements[g].allow_generator?fusionAllElements[g].allow_generator:"",inline_editor:P.inlineEditorHelpers.inlineEditorAllowed(g)},-1===g.indexOf("fusion_builder_")&&(void 0!==(l=FusionPageBuilderApp.extraShortcodes.byShortcode(c[0]))?t.markup=l:t.shortcode=c[0]),"fusion_builder_container"!==g&&"fusion_builder_row"!==g&&"fusion_builder_row_inner"!==g&&"fusion_builder_column"!==g&&"fusion_builder_column_inner"!==g||(t.container=!0),"fusion_builder_container"===g&&"fusion_builder_next_page"===g||(t.parent=v),void 0!==x&&x&&(d=FusionPageBuilderApp.getCollectionIndex(x),void 0!==F&&"before"===F&&(d-=1),t.targetElement=x,t.at_index=d),void 0!==F&&F&&(t.targetElementPosition=F),!1===t.container&&"fusion_builder_next_page"!==g&&(-1===g.indexOf("fusion_")&&-1===g.indexOf("layerslider")&&-1===g.indexOf("rev_slider")&&void 0===fusionAllElements[g]||(t.type="element")),"fusion_builder_blank_page"===g&&(t.type="fusion_builder_blank_page"),_.isObject(p.named)){for(i in p.named)o=i,h.params[o]=p.named[i],"fusion_products_slider"===g&&"cat_slug"===i&&(h.params.cat_slug=p.named[i].replace(/\|/g,",")),"gradient_colors"===i&&(delete h.params[o],-1!==p.named[i].indexOf("|")?(h.params.button_gradient_top_color=p.named[i].split("|")[0].replace("transparent","rgba(255,255,255,0)"),h.params.button_gradient_bottom_color=p.named[i].split("|")[1]?p.named[i].split("|")[1].replace("transparent","rgba(255,255,255,0)"):p.named[i].split("|")[0].replace("transparent","rgba(255,255,255,0)")):(h.params.button_gradient_bottom_color=p.named[i].replace("transparent","rgba(255,255,255,0)"),h.params.button_gradient_top_color=h.params.button_gradient_bottom_color)),"gradient_hover_colors"===i&&(delete h.params[o],-1!==p.named[i].indexOf("|")?(h.params.button_gradient_top_color_hover=p.named[i].split("|")[0].replace("transparent","rgba(255,255,255,0)"),h.params.button_gradient_bottom_color_hover=p.named[i].split("|")[1]?p.named[i].split("|")[1].replace("transparent","rgba(255,255,255,0)"):p.named[i].split("|")[0].replace("transparent","rgba(255,255,255,0)")):(h.params.button_gradient_bottom_color_hover=p.named[i].replace("transparent","rgba(255,255,255,0)"),h.params.button_gradient_top_color_hover=h.params.button_gradient_bottom_color_hover)),"overlay_color"===i&&""!==p.named[i]&&"fusion_builder_container"===g&&(delete h.params[o],r=void 0!==p.named.overlay_opacity?p.named.overlay_opacity:1,h.params.background_color=jQuery.Color(p.named[i]).alpha(r).toRgbaString()),"overlay_opacity"===i&&delete h.params[o],"scrolling"===i&&"fusion_blog"===g&&(delete h.params.paging,"no"===(void 0!==p.named.paging?p.named.paging:"")&&"pagination"===p.named.scrolling&&(h.params.scrolling="no")),"fusion_portfolio"===g&&("layout"===i&&("grid"===p.named[i]&&p.named.hasOwnProperty("boxed_text")?p.named.boxed_text="no_text":"grid-with-text"===p.named[i]&&(h.params[i]="grid")),"boxed_text"===i&&(h.params.text_layout=p.named[i],delete h.params[i]),"content_length"===i&&"full-content"===p.named[i]&&(h.params[i]="full_content")),"fusion_pricing_table"===g&&("backgroundcolor"!==i||p.named.hasOwnProperty("background_color_hover")||(h.params.background_color_hover=p.named.bordercolor)),"padding"!==i||"fusion_widget_area"!==g&&"fusion_builder_column"!==g&&"fusion_builder_column_inner"!==g||(1===(u=p.named[i].split(" ")).length&&(h.params.padding_top=u[0],h.params.padding_right=u[0],h.params.padding_bottom=u[0],h.params.padding_left=u[0]),2===u.length&&(h.params.padding_top=u[0],h.params.padding_right=u[1],h.params.padding_bottom=u[0],h.params.padding_left=u[1]),3===u.length&&(h.params.padding_top=u[0],h.params.padding_right=u[1],h.params.padding_bottom=u[2],h.params.padding_left=u[1]),4===u.length&&(h.params.padding_top=u[0],h.params.padding_right=u[1],h.params.padding_bottom=u[2],h.params.padding_left=u[3]),delete h.params[i]);t=_.extend(t,h)}b||(t.params.element_content=f),"fusion_builder_row"!==g&&"fusion_builder_row_inner"!==g||(t.element_content=f),"fusion_builder_column"!==g&&"fusion_builder_column_inner"!==g||(t.column_shortcode=c[0]),g in fusionMultiElements&&(t.multi="multi_element_parent",P.checkChildUI(g,t)),void 0!==fusionAllElements[g]&&void 0!==fusionAllElements[g].option_dependency&&(n=fusionAllElements[g].option_dependency,a=h.params[n],s=h.params.element_content,h.params[a]=s),b&&!1===t.container&&"fusion_builder_next_page"!==g&&(t.params.element_content=f),void 0!==y&&g===y&&(t.multi="multi_element_child",void 0!==fusionAllElements[g].selectors&&(t.selectors=jQuery.extend(!0,{},fusionAllElements[g].selectors))),"fusion_checklist"===g&&void 0!==t.params.element_content&&-1!==t.params.element_content.indexOf("<li>")&&-1===t.params.element_content.indexOf("[fusion_li_item")&&(t.params.element_content=t.params.element_content.replace(/<ul>/g,""),t.params.element_content=t.params.element_content.replace(/<\/ul>/g,""),t.params.element_content=t.params.element_content.replace(/<li>/g,"[fusion_li_item]"),t.params.element_content=t.params.element_content.replace(/<\/li>/,"[/fusion_li_item]")),w?B.push({content:c[0],settings:t}):"multi_element_child"!==t.multi&&P.collection.add([t]),b&&(g in fusionMultiElements?P.shortcodesToBuilder(f,m,fusionMultiElements[g]):!0===t.container&&("fusion_builder_row_inner"!==g&&"fusion_builder_column_inner"!==g||t.parent?P.shortcodesToBuilder(f,m):P.shortcodesToBuilder(f,!1,!1,!0)))}),w?B:void 0):(this.blankPage=!0,this.createBuilderLayout("[fusion_builder_blank_page][/fusion_builder_blank_page]"),jQuery(".fusion-builder-live").addClass("fusion-builder-blank-page-active"),void FusionApp.sidebarView.openOption("post_title","po"))},checkChildUI:function(e,t){void 0!==fusionAllElements[e].child_ui&&(t.child_ui=fusionAllElements[e].child_ui)},addBuilderElement:function(t){var e,i,o,n={model:t,collection:FusionPageBuilderElements};switch(t.get("type")){case"fusion_builder_blank_page":e=new FusionPageBuilder.BlankPageView(n),FusionPageBuilderViewManager.addView(t.get("cid"),e),_.isUndefined(t.get("view"))?this.$el.find("#fusion_builder_container").append(e.render().el):t.get("view").$el.after(e.render().el);break;case"fusion_builder_container":""!==FusionPageBuilderApp.targetContainerCID&&(t.attributes.view=FusionPageBuilderViewManager.getView(FusionPageBuilderApp.targetContainerCID),FusionPageBuilderApp.targetContainerCID=""),e=new FusionPageBuilder.ContainerView(n),FusionPageBuilderViewManager.addView(t.get("cid"),e),_.isUndefined(t.get("view"))?(this.$el.find("#fusion_builder_container").append(e.render().el),this.$el.find(".fusion-builder-blank-page").remove()):void 0===t.get("targetElementPosition")||"after"===t.get("targetElementPosition")?t.get("view").$el.after(e.render().el):t.get("view").$el.before(e.render().el);break;case"element":case"fusion_builder_column":case"fusion_builder_column_inner":case"fusion_builder_row_inner":this.addToChildCollection(t),"fusion_builder_row_inner"===t.get("type")&&"manually"===t.get("created")&&"row_inner"===t.get("element_type")&&t.set("view",FusionPageBuilderViewManager.getView(t.get("parent")),{silent:!0});break;case"fusion_builder_row":this.collection.find(function(e){return e.get("cid")==t.get("parent")}).children.add([t]);break;case"generated_element":"fusion_builder_column_inner"!==t.get("element_type")&&"fusion_builder_column"!==t.get("element_type")&&(n.attributes={"data-modal_view":"element_settings"},o={model:t,collection:FusionPageBuilderElements,attributes:{"data-cid":t.get("cid")}},i=void 0!==t.get("multi")&&"multi_element_parent"===t.get("multi")?void 0!==FusionPageBuilder[t.get("element_type")]?(this.checkChildUI(t.get("element_type"),o.model.attributes),new(FusionPageBuilder[t.get("element_type")])(o)):(this.checkChildUI(t.get("element_type"),o.model.attributes),new FusionPageBuilder.ParentElementView(o)):void 0!==FusionPageBuilder[t.get("element_type")]?new(FusionPageBuilder[t.get("element_type")])(o):"fusion_builder_row_inner"===t.get("element_type")?new FusionPageBuilder.InnerRowView(o):new FusionPageBuilder.ElementView(o),FusionPageBuilderViewManager.addView(t.get("cid"),i),i.render().el,e=void 0!==(e=fusionAllElements[t.get("element_type")].custom_settings_view_name)&&""!==e?new FusionPageBuilder[e](n):new FusionPageBuilder.ElementSettingsView(n),this.generateElementSettings(e));break;case"fusion_builder_next_page":e=new FusionPageBuilder.NextPage(n),FusionPageBuilderViewManager.addView(t.get("cid"),e),_.isUndefined(t.get("appendAfter"))?this.$el.find(".fusion-builder-container:last-child").after(e.render().el):t.get("appendAfter").next().next().hasClass("fusion-builder-next-page")||t.get("appendAfter").after(e.render().el)}_.isUndefined(t.get("targetElement"))||t.unset("targetElement")},addToChildCollection:function(t){var e,i;t instanceof Backbone.Model?(e=this.collection.find(function(e){return e.get("cid")==t.get("parent")}),i=t.get("at_index"),t.unset("at_index")):(e=this.collection.find(function(e){return e.get("cid")==t.parent}),i=t.at_index,delete t.at_index),"new"===i||void 0===i||isNaN(i)?e.children.add([t]):e.children.add([t],{at:i})},getCollectionIndex:function(t){var i,e,o="new";return void 0!==t&&!1!==t&&(void 0!==t.data("parent-cid")?(e=FusionPageBuilderApp.collection.find(function(e){return e.get("cid")===t.data("parent-cid")}),i=e.children.find(function(e){return e.get("cid")===t.data("cid")})):void 0!==(i=FusionPageBuilderApp.collection.find(function(e){return e.get("cid")===t.data("cid")})).get("parent")&&i.get("parent")&&(e=FusionPageBuilderApp.collection.find(function(e){return e.get("cid")===i.get("parent")})),e&&(o=e.children.indexOf(i)+1)),o},onDropCollectionUpdate:function(e,t,i){var o=FusionPageBuilderViewManager.getView(e.get("parent"));o.model.children.remove(e,{silent:!0}),i!==e.get("parent")?(e.set("parent",i),FusionPageBuilderViewManager.getView(i).model.children.add(e,{at:t,silent:!0})):o.model.children.add(e,{at:t,silent:!0}),o.model.children.trigger("sort")},generateElementSettings:function(o){FusionPageBuilderApp.SettingsHelpers.shouldRenderSettings(o)&&jQuery(o.render().el).dialog({title:fusionAllElements[o.model.get("element_type")].name,width:FusionApp.dialog.dialogData.width,height:FusionApp.dialog.dialogData.height,position:FusionApp.dialog.dialogData.position,dialogClass:"fusion-builder-dialog fusion-builder-settings-dialog",minWidth:360,dragStop:function(e,t){FusionApp.dialog.saveDialogPosition(t.offset)},resizeStop:function(e,t){FusionApp.dialog.saveDialogSize(t.size)},open:function(e,t){var i=jQuery(e.target).closest(".ui-dialog");o.$el.find(".has-group-options").length&&i.addClass("fusion-builder-group-options")},dragStart:function(e,t){jQuery(e.target).trigger("click")},beforeClose:function(e,t){o.closeGeneratorModal()},buttons:{Insert:function(){o.insertGeneratedShortcode()},Cancel:function(){o.closeGeneratorModal()}}})},builderToShortcodes:function(){var i="",t=this;this.$el.find(".fusion-builder-container").each(function(){var e=jQuery(this).find(".fusion-builder-container-content");i+=t.generateElementShortcode(jQuery(this),!0),e.find(".fusion_builder_row").each(function(){var e=jQuery(this);i+="[fusion_builder_row]",e.find(".fusion-builder-column-outer").each(function(){var e=jQuery(this).data("cid"),t=FusionPageBuilderViewManager.getView(e);i+=t.getColumnContent()}),i+="[/fusion_builder_row]"}),i+="[/fusion_builder_container]",jQuery(this).next().hasClass("fusion-builder-next-page")&&(i+="[fusion_builder_next_page]")}),FusionApp.setPost("post_content",i)},generateElementShortcode:function(e,t,i){var o,n,a,s,r,l,u,d,c,g,p,f,m,h,b,_,v,y,w,x,F,P,A="",C="";for(g in o=!0===i?e:(a=void 0===(n=e).data("cid")?n.find(".fusion-builder-data-cid").data("cid"):n.data("cid"),n.hasClass("fusion-builder-live-child-element")?(F=void 0===n.data("parent-cid")?n.find(".fusion-builder-data-cid").data("parent-cid"):n.data("parent-cid"),FusionPageBuilderElements.find(function(e){return e.get("cid")==F}).children.find(function(e){return e.get("cid")==a})):FusionPageBuilderElements.find(function(e){return e.get("cid")==a})),void 0!==(P=FusionPageBuilderViewManager.getView(a))&&"function"==typeof P.beforeGenerateShortcode&&P.beforeGenerateShortcode(),s=void 0!==o?o.get("element_type"):"undefined",l="",r=o.attributes,(u=void 0!==fusionAllElements[s].remove_from_atts?fusionAllElements[s].remove_from_atts:[]).push("undefined"),d=void 0!==fusionAllElements[s].option_dependency?fusionAllElements[s].option_dependency:"",r)if("params"===(f=g))if(m=void 0!==o.get(f)?o.get(f):"","params"===f)for(h in m)"element_content"===(b=h)?(C=_=void 0!==m[h]?m[h]:"",void 0!==m[d]&&(C=void 0!==m[c=void 0!==m[d=fusionAllElements[s].option_dependency]?m[d]:""]?m[c]:"")):((v="")!==d&&(p=b,c=void 0!==m[d]?m[d]:"",void 0!==fusionAllElements[s].params[p]&&void 0!==fusionAllElements[s].params[p].dependency&&(w=void 0!==(y=fusionAllElements[s].params[p].dependency).element?y.element:"",x=void 0!==y.value?y.value:"",w===d&&x!==c&&(v="",v=p))),-1<jQuery.inArray(h,u)||v===h||(null===(_=void 0!==m[h]?m[h]:"")&&(_=""),A+=" "+h+'="'+_+'"'));else""!==m&&(A+=" "+f+'="'+m+'"');return l="["+s+A,""===C&&"fusion_text"!==s&&"fusion_code"!==s&&void 0!==r.type&&"element"===r.type?(t=!0,l+=" /]"):l+="]",t||(l+=C+"[/"+s+"]"),l},layoutLoaded:function(){FusionEvents.trigger("fusion-history-clear"),this.reRenderElements=!0},getElementType:function(e){return"fusion_builder_container"===e||"fusion_builder_column"===e||"fusion_builder_column_inner"===e?e:e in fusionMultiElements?"parent_element":-1!==_.values(fusionMultiElements).indexOf(e)?"child_element":"fusion_builder_row_inner"===e?"fusion_builder_row_inner":"element"},clearBuilderLayout:function(e){this.$el.find(".fusion-builder-blank-page").each(function(){var e=jQuery(this),t=FusionPageBuilderViewManager.getView(e.data("cid"));void 0!==t&&t.removeBlankPageHelper()}),this.$el.find(".fusion-builder-container").each(function(){var e=jQuery(this),t=FusionPageBuilderViewManager.getView(e.data("cid"));void 0!==t&&t.removeContainer(!1,!0)}),this.$el.find(".fusion-builder-next-page").each(function(){var e=FusionPageBuilderViewManager.getView(jQuery(this).data("cid"));void 0!==e&&e.removeNextPage()}),e&&!0===this.blankPage&&(this.$el.find(".fusion-builder-blank-page").length||(this.createBuilderLayout("[fusion_builder_blank_page][/fusion_builder_blank_page]"),jQuery(".fusion-builder-live").addClass("fusion-builder-blank-page-active")),this.blankPage=!1)},base64Encode:function(e){var t,i,o,n,a,s,r=this._keyStr,l=0,u=0,d="",c=[];if(!e)return e;for(e=unescape(encodeURIComponent(e));t=(a=e.charCodeAt(l++)<<16|e.charCodeAt(l++)<<8|e.charCodeAt(l++))>>18&63,i=a>>12&63,o=a>>6&63,n=63&a,c[u++]=r.charAt(t)+r.charAt(i)+r.charAt(o)+r.charAt(n),l<e.length;);return d=c.join(""),((s=e.length%3)?d.slice(0,s-3):d)+"===".slice(s||3)},base64Decode:function(e){var t,i,o,n,a,s,r="",l=0;if(void 0===e||!e||""===e)return e;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=this._keyStr.indexOf(e.charAt(l++))<<2|(n=this._keyStr.indexOf(e.charAt(l++)))>>4,i=(15&n)<<4|(a=this._keyStr.indexOf(e.charAt(l++)))>>2,o=(3&a)<<6|(s=this._keyStr.indexOf(e.charAt(l++))),r+=String.fromCharCode(t),64!=a&&(r+=String.fromCharCode(i)),64!=s&&(r+=String.fromCharCode(o));return r=this.utf8Decode(r)},utf8Decode:function(e){for(var t,i="",o=0,n=0,a=0;o<e.length;)(n=e.charCodeAt(o))<128?(i+=String.fromCharCode(n),o++):191<n&&n<224?(a=e.charCodeAt(o+1),i+=String.fromCharCode((31&n)<<6|63&a),o+=2):(a=e.charCodeAt(o+1),t=e.charCodeAt(o+2),i+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&t),o+=3);return i},setContent:function(e,t){void 0!==window.tinyMCE&&window.tinyMCE.get(e)&&!window.tinyMCE.get(e).isHidden()&&(window.tinyMCE.get(e).getParam("wpautop",!0)&&void 0!==window.switchEditors&&(t=window.switchEditors.wpautop(t)),window.tinyMCE.get(e).setContent(t,{format:"html"})),jQuery("#"+e+":visible").val(t).trigger("change")},isTinyMceActive:function(){return"undefined"!=typeof tinyMCE&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden()},previewToggle:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery("body"),t=this;this.previewMode=e.hasClass("fusion-builder-preview-mode"),this.$el.find(".fusion-scrolling-section-edit").length&&this.toggleScrollingSections(),void 0!==jQuery("#fb-preview")[0].contentWindow.avadaNiceScrollVars?this.toggleNiceScroll():FusionEvents.once("fusion-iframe-loaded",function(){t.toggleNiceScroll()})},toggleNiceScroll:function(){"1"!==jQuery("#fb-preview")[0].contentWindow.avadaNiceScrollVars.smooth_scrolling&&1!==jQuery("#fb-preview")[0].contentWindow.avadaNiceScrollVars.smooth_scrolling&&!0!==jQuery("#fb-preview")[0].contentWindow.avadaNiceScrollVars.smooth_scrolling||(this.previewMode?(jQuery("#fb-preview")[0].contentWindow.jQuery("html").niceScroll({background:"#555",scrollspeed:60,mousescrollstep:40,cursorwidth:9,cursorborder:"0px",cursorcolor:"#303030",cursorborderradius:8,preservenativescrolling:!0,cursoropacitymax:1,cursoropacitymin:1,autohidemode:!1,zindex:999999,horizrailenabled:!1}),jQuery("#fb-preview")[0].contentWindow.jQuery("html").addClass("no-overflow-y")):this.previewMode||(void 0!==jQuery("#fb-preview")[0].contentWindow.jQuery("html").getNiceScroll&&jQuery("#fb-preview")[0].contentWindow.jQuery("html").getNiceScroll().remove(),jQuery("#fb-preview")[0].contentWindow.jQuery("html").removeClass("no-overflow-y")))},toggleScrollingSections:function(){this.previewMode?this.createScrollingSections():this.destroyScrollingSections()},reInitScrollingSections:function(){this.destroyScrollingSections(),this.createScrollingSections()},scrollingContainers:function(){var e=this.$el.find(".fusion-builder-container "),t={},i=!1,o=0;this.$el.find(".fusion-scrolling-section-edit").length&&(e.each(function(){jQuery(this).find(".fusion-scrolling-section-edit").length?(i=!0,void 0===t[o]&&(t[o]=[]),t[o].push(jQuery(this))):i&&(o++,i=!1)}),_.each(t,function(e){var t,i="";for(t=e.length;0<t;t--)i+='<li><a href="#" class="fusion-scroll-section-link"><span class="fusion-scroll-section-link-bullet"></span></a></li>';_.each(e,function(e){e.find(".fusion-scroll-section-nav ul").html(i)})}))},createScrollingSections:function(){var e=this.$el.find(".fusion-builder-container "),t="right"===FusionApp.settings.header_position.toLowerCase()||jQuery("#fb-preview")[0].contentWindow.jQuery("body").hasClass("rtl")?"scroll-navigation-left":"scroll-navigation-right",i={},o=!1,n=0;e.each(function(){jQuery(this).find(".fusion-scrolling-section-edit").length?(o=!0,void 0===i[n]&&(i[n]=[]),i[n].push(jQuery(this))):o&&(n++,o=!1)}),_.each(i,function(e,r){var l='<div id="fusion-scroll-section-'+r+'" class="fusion-scroll-section" data-section="'+r+'">',u='<nav id="fusion-scroll-section-nav-'+r+'" class="fusion-scroll-section-nav '+t+'" data-section="'+r+'"><ul>',d=!1;_.each(e,function(e,t){var i,o,n,a,s;i=1===(t+=1)?" active":"",n=(o=e).find(".fusion-scrolling-section-edit").clone(),a=o.find(".fusion-builder-section-name").val(),s='<li><a href="#'+("fusion-scroll-section-element-"+r+"-"+t)+'" class="fusion-scroll-section-link" data-name="'+a+'" data-element="'+t+'"><span class="fusion-scroll-section-link-bullet"></span></a></li>',1===t&&(d=o),n.find(".fusion-scroll-section-nav, .fusion-builder-insert-column, .fusion-builder-container-add").remove(),n.find(".hundred-percent-height").removeClass("hundred-percent-height").css({height:"","min-height":""}),n.addClass("hundred-percent-height-scrolling hundred-percent-height"),u+=s,l+='<div class="fusion-scroll-section-element'+i+'" data-section="'+r+'" data-element="'+t+'">'+n.outerHTML()+"</div>",o.addClass("fusion-temp-hidden-container"),o.hide()}),l+=u+="</ul></nav>",l+="</div>",d&&d.before(l)}),jQuery("#fb-preview")[0].contentWindow.initScrollingSections(),jQuery("#fb-preview").contents().scrollTop(0)},destroyScrollingSections:function(){this.$el.find(".fusion-scroll-section").remove(),this.$el.find(".fusion-temp-hidden-container").show().removeClass("fusion-temp-hidden-container")},toggleDroppablesVisibility:function(){"undefined"!=typeof FusionApp&&"on"===FusionApp.preferencesData.droppables_visible?jQuery("#fb-preview")[0].contentWindow.jQuery("body").removeClass("fusion-hide-droppables"):jQuery("#fb-preview")[0].contentWindow.jQuery("body").addClass("fusion-hide-droppables")},toggleStickyHeader:function(){"undefined"!=typeof FusionApp&&"off"===FusionApp.preferencesData.sticky_header?fusionTriggerEvent("fusion-disable-sticky-header"):1===Number(FusionApp.settings.header_sticky)&&fusionTriggerEvent("fusion-init-sticky-header")},toggleTooltips:function(){"undefined"!=typeof FusionApp&&"off"===FusionApp.preferencesData.tooltips?(jQuery("body").addClass("fusion-hide-all-tooltips"),jQuery("#fb-preview")[0].contentWindow.jQuery("body").addClass("fusion-hide-all-tooltips")):(jQuery("body").removeClass("fusion-hide-all-tooltips"),jQuery("#fb-preview")[0].contentWindow.jQuery("body").removeClass("fusion-hide-all-tooltips"))},toggleTransparentHeader:function(){var e=""===fusionSanitize.getPageOption("combined_header_bg_color")?FusionApp.settings.header_bg_color:fusionSanitize.getPageOption("combined_header_bg_color");"undefined"!=typeof FusionApp&&"off"===FusionApp.preferencesData.transparent_header?jQuery("#fb-preview")[0].contentWindow.jQuery("html").removeClass("avada-header-color-not-opaque"):jQuery.Color(e).alpha()<1&&jQuery("#fb-preview")[0].contentWindow.jQuery("html").addClass("avada-header-color-not-opaque")},sizesHide:function(e){"fusion-builder-column-size"!==jQuery(e.target).parent().attr("class")&&jQuery("#fb-preview")[0].contentWindow.jQuery("body .column-sizes:visible").each(function(){jQuery(this).parent().find(".fusion-builder-column-size").trigger("click")})},wireFrameToggled:function(){this.wireframeActive?this.enableSortableContainers():this.disableSortableContainers()},enableSortableContainers:function(){void 0!==this.$el.sortable("instance")?this.$el.sortable("enable"):this.sortableContainers()},disableSortableContainers:function(){void 0!==this.$el.sortable("instance")&&this.$el.sortable("disable")},sortableContainers:function(){this.$el.sortable({handle:".fusion-builder-section-header",items:".fusion-builder-container, .fusion-builder-next-page",cancel:".fusion-builder-section-name, .fusion-builder-settings, .fusion-builder-clone, .fusion-builder-remove, .fusion-builder-section-add, .fusion-builder-add-element, .fusion-builder-insert-column, #fusion_builder_controls, .fusion-builder-save-element",cursor:"move",update:function(){FusionEvents.trigger("fusion-content-changed"),FusionPageBuilderApp.scrollingContainers(),FusionEvents.trigger("fusion-history-save-step",fusionBuilderText.full_width_section+" order changed")}})},setStackedContentClass:function(){void 0!==FusionApp.settings&&this.$el.width()<FusionApp.settings.content_break_point?this.$el.addClass("fusion-stacked-content"):this.$el.removeClass("fusion-stacked-content")},disableDocumentWrite:function(){!1===this.previewDocumentWrite&&(this.previewDocumentWrite=document.getElementById("fb-preview").contentWindow.document.write,document.getElementById("fb-preview").contentWindow.document.write=function(){}),!1===this.documentWrite&&(this.documentWrite=document.write,document.write=function(){})},enableDocumentWrite:function(){var e=this;setTimeout(function(){!1!==e.documentWrite&&(document.write=e.documentWrite),!1!==e.previewDocumentWrite&&(document.getElementById("fb-preview").contentWindow.document.write=e.previewDocumentWrite)},500)}})}(jQuery);FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_counter_circle=FusionPageBuilder.ChildElementView.extend({onRender:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),void 0!==this.model.attributes.childSelectors&&(this.model.attributes.childSelectors.class+=" fusion-builder-child-element-content",this.setElementAttributes(this.$el.find(".fusion-builder-child-element-content"),this.model.attributes.childSelectors))},afterPatch:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),void 0!==this.model.attributes.childSelectors&&(this.model.attributes.childSelectors.class+=" fusion-builder-child-element-content",this.setElementAttributes(this.$el.find(".fusion-builder-child-element-content"),this.model.attributes.childSelectors)),this.refreshJs()},filterTemplateAtts:function(e){var t={};return this.computeAtts(e.values),t.cid=this.model.get("cid"),t.parent=this.model.get("parent"),t.output=e.values.element_content,t},computeAtts:function(e){var t,i,o,n="",a="",s="",r={class:"fusion-counter-circle counter-circle counter-circle-content"};e.size=_.fusionValidateAttrValue(e.size,""),"yes"===e.scales&&(n=!0),"yes"===e.countdown&&(a=!0),""!==e.class&&(r.class+=" "+e.class),""!==e.id&&(r.id=e.id),e.size=parseFloat(e.size),i=11*(t=e.size/220),o=50*t,r["data-percent"]=e.value,r["data-countdown"]=a,r["data-filledcolor"]=e.filledcolor,r["data-unfilledcolor"]=e.unfilledcolor,r["data-scale"]=n,r["data-size"]=e.size.toString(),r["data-speed"]=e.speed.toString(),r["data-strokesize"]=i.toString(),r.style="font-size:"+o+"px;height:"+e.size+"px;width:"+e.size+"px;",(s={class:"counter-circle-wrapper",style:"height:"+e.size+"px;width:"+e.size+"px;"})["data-originalsize"]=e.size.toString(),this.model.set("selectors",s),this.model.set("childSelectors",r)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_counters_circle=FusionPageBuilder.ParentElementView.extend({afterPatch:function(){this.appendChildren(".fusion-counters-circle"),this._refreshJs()},filterTemplateAtts:function(e){var t=this.computeAtts(e.values);return(e={}).countersCircleAtts=t,e},computeAtts:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-counters-circle counters-circle"});return""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id+=" "+e.id),t.class+=" fusion-child-element",t["data-empty"]=this.emptyPlaceholderText,t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_gallery=FusionPageBuilder.ParentElementView.extend({imageMap:{images:{}},onInit:function(){this.fusionIsotope=new FusionPageBuilder.IsotopeManager({selector:".fusion-gallery-layout-grid, .fusion-gallery-layout-masonry",layoutMode:"packery",itemSelector:".fusion-gallery-column",isOriginLeft:!jQuery("body.rtl").length,resizable:!0,initLayout:!0,view:this})},onRender:function(){var e=this.$el.find(".fusion-gallery-column"),t=this;imagesLoaded(e,function(){t.fusionIsotope.updateLayout(),t.setOutlineControlsPosition()})},setOutlineControlsPosition:function(){var e=this.model.get("cid"),t=this.model.get("params"),i=parseFloat(t.column_spacing)/2+"px",o="";this.$el.children("style").remove(),o+='<style type="text/css">',o+='.fusion-builder-live:not(.fusion-builder-ui-wireframe) div[data-cid="'+e+'"] .fusion-builder-live-child-element:hover:after{ margin:'+i+";}",o+='.fusion-builder-live:not(.fusion-builder-ui-wireframe) div[data-cid="'+e+'"] .fusion-builder-live-child-element:hover .fusion-builder-module-controls-container{ bottom: '+i+"; right:"+i+";}",o+="</style>",this.$el.prepend(o)},onGenerateChildElements:function(e){var t=1;this.fusionIsotope.init(),this.addImagesToImageMap(e,!1,!1),_.each(this.model.children,function(e){e.set("counter",t),t++})},addImagesToImageMap:function(e,t,i,o){var n=this,a={};t=void 0===t||t,i=void 0===i||i,_.each(e,function(e){var t=void 0!==e.get?e.get("params"):e.params;void 0!==e.get?e.get("cid"):e.cid,t.image,void 0!==n.imageMap.images[t.image_id]&&!o||(a[t.image_id]=t)}),_.isEmpty(a)||jQuery.ajax({async:t,url:fusionAppConfig.ajaxurl,type:"post",dataType:"json",data:{action:"get_fusion_gallery",children:a,fusion_load_nonce:fusionAppConfig.fusion_load_nonce,gallery:n.model.get("params")},success:function(e){n.updateImageMap(e,o),n.model.set("query_data",e),i&&n.reRender()}})},updateImageMap:function(e,i){var o=this.imageMap;_.each(e.images,function(e,t){void 0!==o.images[t]&&!i||(o.images[t]=e)}),this.imageMap=o},afterPatch:function(){this.appendChildren(".fusion-gallery-container"),this.fusionIsotope.reInit(),this.checkVerticalImages(),this.setOutlineControlsPosition()},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.values=e.values,t.query_data=e.query_data,t.attr=this.buildAttr(e.values),t},checkVerticalImages:function(){var e=this.$el.find(".fusion-gallery-layout-grid, .fusion-gallery-layout-masonry");e.hasClass("fusion-gallery-layout-masonry")&&0<e.find(".fusion-grid-column:not(.fusion-grid-sizer)").not(".fusion-element-landscape").length?e.addClass("fusion-masonry-has-vertical"):e.removeClass("fusion-masonry-has-vertical")},validateValues:function(e){e.column_spacing=parseFloat(e.column_spacing)/2+"px",e.bordersize=_.fusionValidateAttrValue(e.bordersize,"px"),e.border_radius=_.fusionValidateAttrValue(e.border_radius,"px")},buildAttr:function(e){var t,i=this.model.children.length,o=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-gallery fusion-gallery-container fusion-child-element fusion-grid-"+e.columns+" fusion-columns-total-"+i+" fusion-gallery-layout-"+e.layout});return e.column_spacing&&(t=-1*parseFloat(e.column_spacing),o.style="margin:"+t+"px;"),o["data-empty"]=this.emptyPlaceholderText,o}}),_.extend(FusionPageBuilder.Callback.prototype,{fusion_gallery_image:function(t,i,e,o,n,a,s,r){var l,u={},d=FusionPageBuilderViewManager.getView(s.attributes.parent),c=jQuery.extend(!0,{},s.attributes.params);c[t]=i,l=c.image_id,void 0===d.imageMap.images[l]&&void 0!==i&&""!==i&&(u[l]=c),_.isEmpty(u)?(o.skip||void 0===t||r.changeParam(t,i),r.reRender()):jQuery.ajax({async:!0,url:fusionAppConfig.ajaxurl,type:"post",dataType:"json",data:{action:"get_fusion_gallery",children:u,fusion_load_nonce:fusionAppConfig.fusion_load_nonce,gallery:d.model.get("params")},success:function(e){d.updateImageMap(e),void 0!==e.images[i]&&void 0!==e.images[i].image_data&&"image_id"===t&&void 0!==e.images[i].image_data.url&&(o.skip||r.changeParam("image",e.images[i].image_data.url)),r.changeParam(t,i),r.reRender()}})}}),_.extend(FusionPageBuilder.Callback.prototype,{fusion_gallery_images:function(e,t,i,o,n,a,s,r){r.model.attributes.params[e]=t,r.addImagesToImageMap(r.model.children.models,!0,!0,!0)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_gallery_image=FusionPageBuilder.ChildElementView.extend({onRender:function(){var e=this,t=FusionPageBuilderViewManager.getView(this.model.get("parent"));void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),setTimeout(function(){t.fusionIsotope.append(e.$el),t.checkVerticalImages()},50)},beforePatch:function(){},beforeRemove:function(){var e=FusionPageBuilderViewManager.getView(this.model.get("parent"));e.fusionIsotope.remove(self.$el),e.checkVerticalImages()},afterPatch:function(){var e=this.model.get("parent"),t=FusionPageBuilderViewManager.getView(this.model.get("parent"));void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),setTimeout(function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-element-render-fusion_gallery",e),t.fusionIsotope.updateLayout()},100)},filterTemplateAtts:function(e){var t={},i=FusionPageBuilderViewManager.getView(this.model.get("parent")).imageMap.images[this.model.attributes.params.image_id],o=e.parentValues,n="";return this.validateValues(e.values),this.validateValues(e.parentValues),t.values=e.values,t.imageData=i,t.galleryLayout=o.layout,t.galleryLightbox=o.lightbox,t.galleryColumns=o.columns,t.imageWrapperAttr=this.buildImageWrapperAttr(o),t.counter=this.model.get("counter"),t.imagesAttr=this.buildImagesAttr(e.values),void 0!==i&&void 0!==i.element_orientation_class&&!1!==i.element_orientation_class?n=i.element_orientation_class:this.$el.removeClass("fusion-element-landscape"),this.$el.addClass("fusion-grid-column fusion-gallery-column "+n),t},validateValues:function(e){e.column_spacing=parseFloat(e.column_spacing)/2+"px",e.bordersize=_.fusionValidateAttrValue(e.bordersize,"px"),e.border_radius=_.fusionValidateAttrValue(e.border_radius,"px")},buildAttr:function(e){var t,i=e.image_ids.split(",").length,o=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-gallery fusion-gallery-container fusion-grid-"+e.columns+" fusion-columns-total-"+i+" fusion-gallery-layout-"+e.layout});return e.column_spacing&&(t=-1*parseFloat(e.column_spacing),o.style="margin:"+t+"px;"),o},buildImageWrapperAttr:function(e){var t={class:"fusion-gallery-image",style:""};return""!==e.bordersize&&0!==e.bordersize&&(t.style+="border:"+e.bordersize+" solid "+e.bordercolor+";","0"!=e.border_radius&&"0px"!==e.border_radius&&"px"!==e.border_radius&&(t.style+="-webkit-border-radius:"+e.border_radius+";border-radius:"+e.border_radius+";",("50%"===e.border_radius||100<parseInt(e.border_radius,10))&&(t.style+="-webkit-mask-image:-webkit-radial-gradient(circle, white, black);"))),"liftup"===e.hover_type&&(t.class=" fusion-gallery-image-liftup"),t},buildImagesAttr:function(e){var t,i,o,n,a={},s=this.model.get("cid"),r=this.model.attributes.params.image_id,l=FusionPageBuilderViewManager.getView(this.model.get("parent")).imageMap.images[r];return void 0===l&&(l={}),t=0,o=i=!1,n=jQuery.Color(e.bordercolor),a={},"masonry"===e.layout&&(a.masonryWrapper={style:"",class:"fusion-masonry-element-container"},l.url&&(a.masonryWrapper.style+="background-image:url("+l.url+");"),void 0!==l.image_data&&!0!==l.image_data.specific_element_orientation_class&&(l.element_orientation_class=_.fusionGetElementOrientationClass({imageWidth:l.image_data.width,imageHeight:l.image_data.height},e.gallery_masonry_grid_ratio,e.gallery_masonry_width_double)),l.element_base_padding=_.fusionGetElementBasePadding(l.element_orientation_class),l.element_base_padding&&(void(t=0)!==l.element_orientation_class&&!1!==l.element_orientation_class&&(o=-1!==l.element_orientation_class.indexOf("fusion-element-landscape"),i=-1!==l.element_orientation_class.indexOf("fusion-element-portrait")),(o||i)&&(t=2*parseFloat(e.column_spacing)),e.bordersize&&"transparent"!==e.bordercolor&&0!==n.alpha()&&(o||i)&&(t+=2*parseFloat(e.bordersize)),a.masonryWrapper.style+=o&&i?"padding-top:calc((100% - "+t+"px) * "+l.element_base_padding+" + "+t+"px);":o?"padding-top:calc((100% - "+t+"px) * "+l.element_base_padding+");":i?"padding-top:calc(100%  * "+l.element_base_padding+" + "+t+"px);":"padding-top:calc(100%  * "+l.element_base_padding+");")),a.images={style:"",class:""},"liftup"!==e.hover_type&&(a.images.class+=" hover-type-"+e.hover_type),""!==e.column_spacing&&(a.images.style="padding:"+e.column_spacing+";"),e.lightbox&&"no"!==e.lightbox&&(a.link={href:l.pic_link,class:"fusion-lightbox"},a.link["data-rel"]="iLightbox[gallery-"+s+"]"),a}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_separator=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.values=e.values,t.attr=this.buildAttr(e.values),t.iconWrapperAttr=this.buildIconWrapperAttr(e.values),t.iconAttr=this.buildIconAttr(e.values),t},validateValues:function(e){e.border_size=_.fusionValidateAttrValue(e.border_size,"px"),e.width=_.fusionValidateAttrValue(e.width,"px"),e.top_margin=_.fusionValidateAttrValue(e.top_margin,"px"),e.bottom_margin=_.fusionValidateAttrValue(e.bottom_margin,"px"),"0"===e.icon_circle&&(e.icon_circle="no"),""!==e.style?e.style_type=e.style:"default"===e.style_type&&(e.style_type=fusionAllElements.fusion_separator.defaults.style_type),e.style_type=e.style_type.replace(/ /g,"|"),""!==e.bottom&&(e.bottom_margin=_.fusionValidateAttrValue(e.bottom,"px")),""!==e.color&&(e.sep_color=e.color),""!==e.top&&(e.top_margin=_.fusionValidateAttrValue(e.top,"px"),""===e.bottom&&"none"!==e.style&&(e.bottom_margin=_.fusionValidateAttrValue(e.top,"px")))},buildAttr:function(e){var i,t,o;return i=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-separator "+e.class,style:""}),""!==e.width&&"100%"!==e.width||(i.class+=" fusion-full-width-sep"),t=e.style_type.split("|"),-1===jQuery.inArray("none",t)&&-1===jQuery.inArray("single",t)&&-1===jQuery.inArray("double",t)&&-1===jQuery.inArray("shadow",t)&&t.push("single"),jQuery.each(t,function(e,t){i.class+=" sep-"+t}),e.sep_color&&("shadow"===e.style_type?(o="background:radial-gradient(ellipse at 50% -50% , "+e.sep_color+" 0px, rgba(255, 255, 255, 0) 80%) repeat scroll 0 0 rgba(0, 0, 0, 0);",i.style=o,i.style+=o.replace("radial-gradient","-webkit-radial-gradient"),i.style+=o.replace("radial-gradient","-moz-radial-gradient"),i.style+=o.replace("radial-gradient","-o-radial-gradient")):"none"!==e.style_type&&(i.style="border-color:"+e.sep_color+";")),-1!==jQuery.inArray("single",t)&&(i.style+="border-top-width:"+e.border_size+";"),-1!==jQuery.inArray("double",t)&&(i.style+="border-top-width:"+e.border_size+";border-bottom-width:"+e.border_size+";"),"center"===e.alignment?i.style+="margin-left: auto;margin-right: auto;":"right"===e.alignment&&(i.style+="float:right;",i.class+=" fusion-clearfix"),i.style+="margin-top:"+e.top_margin+";",""!==e.bottom_margin&&(i.style+="margin-bottom:"+e.bottom_margin+";"),""!==e.width&&(i.style+="width:100%;max-width:"+e.width+";"),i.id=e.id,i},buildIconWrapperAttr:function(e){var t,i,o=e.style_type.split("|"),n={class:"icon-wrapper"};return t="no"===e.icon_circle?"transparent":e.sep_color,n.style="border-color:"+t+";",e.icon_circle_color&&"no"!==e.icon_circle&&(n.style+="background-color:"+e.icon_circle_color+";"),-1!==jQuery.inArray("single",o)&&(i=parseInt(e.border_size,10)/2,n.style+="margin-top:-"+i+"px;"),n},buildIconAttr:function(e){return{class:_.fusionFontAwesome(e.icon),style:"color:"+e.sep_color+";"}}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_title=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.headingAttr=this.buildHeadingAttr(e.values),t.separatorAttr=this.builderSeparatorAttr(e.values),t.style=this.buildStyleBlock(e.values,e.extras),t.cid=this.model.get("cid"),t.output=e.values.element_content,t.style_type=e.values.style_type,t.size=e.values.size,t.content_align=e.values.content_align,t},validateValues:function(e){e.margin_top=_.fusionValidateAttrValue(e.margin_top,"px"),e.margin_bottom=_.fusionValidateAttrValue(e.margin_bottom,"px"),e.margin_top_mobile=_.fusionValidateAttrValue(e.margin_top_mobile,"px"),e.margin_bottom_mobile=_.fusionValidateAttrValue(e.margin_bottom_mobile,"px"),"default"===e.style_type&&(e.style_type=fusionAllElements.fusion_title.defaults.style_type),1===e.style_type.split(" ").length&&(e.style_type+=" solid"),void 0!==e.element_content&&(e.element_content=e.element_content.trim(),e.element_content=e.element_content.replace(/(<p[^>]+?>|<p>|<\/p>)/gim,"")),void 0!==e.font_size&&""!==e.font_size&&(e.font_size=_.fusionGetValueWithUnit(e.font_size)),void 0!==e.letter_spacing&&""!==e.letter_spacing&&(e.letter_spacing=_.fusionGetValueWithUnit(e.letter_spacing))},buildStyleBlock:function(e,t){var i="";return""===e.margin_top_mobile&&""===e.margin_bottom_mobile||"0px"===e.margin_top_mobile&&"20px"===e.margin_bottom_mobile||(i+='<style type="text/css">',i+="@media only screen and (max-width:"+t.content_break_point+"px) {",i+=".fusion-body .fusion-title.fusion-title-cid"+this.model.get("cid")+"{margin-top:"+e.margin_top_mobile+"!important;margin-bottom:"+e.margin_bottom_mobile+"!important;}",i+="}",i+="</style>"),i},buildAttr:function(e){var t,i="two",o=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-title title fusion-title-cid"+this.model.get("cid"),style:""});return-1!==e.style_type.indexOf("underline")?(t=e.style_type.split(" "),_.each(t,function(e){o.class+=" sep-"+e}),e.sep_color&&(o.style="border-bottom-color:"+e.sep_color+";")):-1!==e.style_type.indexOf("none")&&(o.class+=" fusion-sep-none"),"center"===e.content_align&&(o.class+=" fusion-title-center"),"1"==e.size?i="one":"2"==e.size?i="two":"3"==e.size?i="three":"4"==e.size?i="four":"5"==e.size?i="five":"6"==e.size&&(i="six"),o.class+=" fusion-title-size-"+i,void 0!==e.font_size&&""!==e.font_size&&(o.style+="font-size:"+e.font_size+";"),""!==e.margin_top&&(o.style+="margin-top:"+e.margin_top+";"),""!==e.margin_bottom&&(o.style+="margin-bottom:"+e.margin_bottom+";"),""===e.margin_top&&""===e.margin_bottom&&(o.style+=" margin-top:0px; margin-bottom:0px",o.class+=" fusion-title-default-margin"),""!==e.class&&(o.class+=" "+e.class),""!==e.id&&(o.id=e.id),o},buildHeadingAttr:function(e){var t={class:"title-heading-"+e.content_align,style:""};return""===e.margin_top&&""===e.margin_bottom||(t.style+="margin:0;"),""!==e.font_size&&(t.style+="font-size:1em;"),void 0!==e.line_height&&""!==e.line_height&&(t.style+="line-height:"+e.line_height+";"),void 0!==e.letter_spacing&&""!==e.letter_spacing&&(t.style+="letter-spacing:"+e.letter_spacing+";"),void 0!==e.text_color&&""!==e.text_color&&(t.style+="color:"+e.text_color+";"),""!==e.style_tag&&(t.style+=e.style_tag),t=_.fusionInlineEditor({cid:this.model.get("cid"),overrides:{color:"text_color","font-size":"font_size","line-height":"line_height","letter-spacing":"letter_spacing",tag:"size"}},t)},builderSeparatorAttr:function(e){var t={class:"title-sep"},i=e.style_type.split(" ");return _.each(i,function(e){t.class+=" sep-"+e}),e.sep_color&&(t.style="border-color:"+e.sep_color+";"),t},onCancel:function(){this.resetTypography()},afterPatch:function(){this.resetTypography()},resetTypography:function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-typography-reset",this.model.get("cid")),jQuery("#fb-preview").width()<800&&setTimeout(function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("resize")},50)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_testimonials=FusionPageBuilder.ParentElementView.extend({afterPatch:function(){this.generateChildElements(),this._refreshJs()},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.styles=this.buildStyles(e.values),t.attr=this.buildAttr(e.values),t.paginationAttr=this.buildPaginationAttr(e.values),t.navigation=e.values.navigation,t},validateValues:function(e){e.random="yes"===e.random||"1"===e.random?1:0,"clean"===e.design&&""===e.navigation?e.navigation="yes":"classic"===e.design&&""===e.navigation&&(e.navigation="no")},buildStyles:function(e){var t="",i=this.model.get("cid");return t+="#fusion-testimonials-cid"+i+" a{border-color:"+e.textcolor+";}",t+="#fusion-testimonials-cid"+i+" a:hover, #fusion-testimonials-cid"+i+" .activeSlide{background-color: "+e.textcolor+";}",t+=".fusion-testimonials."+e.design+".fusion-testimonials-cid"+i+" .author:after{border-top-color:"+e.backgroundcolor+" !important;}"},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-testimonials "+e.design+" fusion-testimonials-cid"+this.model.get("cid")+" "+e.class});return t["data-random"]=e.random,t["data-speed"]=e.speed,t.id=e.id,t},buildPaginationAttr:function(){return{class:"testimonial-pagination",id:"fusion-testimonials-cid"+this.model.get("cid")}}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_testimonial=FusionPageBuilder.ChildElementView.extend({onRender:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors))},afterPatch:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),this._refreshJs()},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),this.buildReviewAttr(e.values),t.values=e.values,t.parentValues=e.parentValues,t.imageAttr=this.buildImageAttr(e.values),t.thumbnailAttr=this.buildThumbnailAttr(e),t.blockquoteAttr=this.buildBlockquoteAttr(e),t.quoteAttr=this.buildQuoteAttr(e),t.authorAttr=this.buildAuthorAttr(e),t.cid=this.model.get("cid"),t.parent=this.model.get("parent"),t.content=e.values.element_content,t},validateValues:function(e){"round"===e.image_border_radius?e.image_border_radius="50%":e.image_border_radius=_.fusionValidateAttrValue(e.image_border_radius,"px"),void 0!==e.gender&&""!==e.gender&&(e.avatar=e.gender),"image"!==e.avatar||e.image||(e.avatar="none")},buildReviewAttr:function(e){var t={class:"review "};"none"===e.avatar?t.class+="no-avatar":"image"===e.avatar?t.class+="avatar-image":t.class+=e.avatar,this.model.set("selectors",t)},buildImageAttr:function(e){var t={class:"testimonial-image",src:e.image,alt:""};return"image"===e.avatar&&(t.style="-webkit-border-radius: "+e.image_border_radius+";-moz-border-radius: "+e.image_border_radius+";border-radius: "+e.image_border_radius+";"),t},buildThumbnailAttr:function(e){var t=e.values,i=e.parentValues,o={class:"testimonial-thumbnail"};return"image"!==t.avatar&&(o.class+=" doe",o.style="color:"+i.textcolor+";"),o},buildBlockquoteAttr:function(e){var t=e.parentValues,i={style:"background-color:"+t.backgroundcolor+";"};return"clean"!==t.design||"transparent"!==t.backgroundcolor&&0!==jQuery.Color(t.backgroundcolor).alpha()||(i.style+="margin: -25px;"),i},buildQuoteAttr:function(e){var t=e.parentValues;return{style:"background-color:"+t.backgroundcolor+";color:"+t.textcolor+";"}},buildAuthorAttr:function(e){return{class:"author",style:"color:"+e.parentValues.textcolor+";"}}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_tooltip=FusionPageBuilder.ElementView.extend({afterPatch:function(){this._refreshJs()},filterTemplateAtts:function(e){var t={};return t.attr=this.buildAttr(e.values),t.cid=this.model.get("cid"),t.content=e.values.element_content,t},buildAttr:function(e){var t={class:"fusion-tooltip tooltip-shortcode "+e.class};return t.id=e.id,t["data-animation"]=e.animation,t["data-delay"]=e.delay,t["data-placement"]=e.placement,t.title=e.title,t["data-title"]=e.title,t["data-toggle"]="tooltip",t["data-trigger"]=e.trigger,t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_sharing=FusionPageBuilder.ElementView.extend({beforePatch:function(){jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el).find('.fusion-social-networks [data-toggle="tooltip"]').tooltip("destroy")},afterPatch:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el).find('.fusion-social-networks [data-toggle="tooltip"]');setTimeout(function(){e.tooltip({container:"body"})},150)},filterTemplateAtts:function(e){var t={};return this.validateValuesExtras(e.values,e.extras),t.shortcodeAttr=this.buildShortcodeAttr(e.values),t.socialNetworksAttr=this.buildSocialNetworksAttr(e.values),t.taglineAttr=this.buildTaglineAttr(e.values),t.icons=this.buildIcons(e.values),t.tagline=e.values.tagline,t},validateValuesExtras:function(e,t){t.linktarget=t.linktarget?"_blank":"_self",e.icons_boxed_radius=_.fusionValidateAttrValue(e.icons_boxed_radius,"px")},buildShortcodeAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"share-box fusion-sharing-box"});return"yes"===e.icons_boxed&&(t.class+=" boxed-icons"),""!==e.backgroundcolor&&(t.style="background-color:"+e.backgroundcolor+";","transparent"!==e.backgroundcolor&&0!==jQuery.Color(e.backgroundcolor).alpha()||(t.style+="padding:0;")),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.class+=" "+e.id),t["data-title"]=e.title,t["data-description"]=e.description,t["data-link"]=e.link,t["data-image"]=e.pinterest_image,t},buildSocialNetworksAttr:function(e){var t={class:"fusion-social-networks"};return"yes"===e.icons_boxed&&(t.class+=" boxed-icons"),""===e.tagline&&(t.style="text-align: inherit;"),t},buildTaglineAttr:function(e){var t={class:"tagline"};return""!==e.tagline_color&&(t.style="color:"+e.tagline_color+";"),t=_.fusionInlineEditor({param:"tagline",cid:this.model.get("cid"),toolbar:!1},t)},buildIconAttr:function(e){var t={class:"tagline"};return""!==e.tagline_color&&(t.style="color:"+e.tagline_color+";"),t},buildIcons:function(e){var t,i,o,n,a,s,r,l,u,d,c,g,p,f,m,h="",b=e.icon_colors,v=e.box_colors,y=!1;for("brand"===e.color_type&&(y=!0,(p=_.fusionSocialIcons(!1,!0)).mail={label:"Email Address",color:"#000000"}),b=b.split("|"),v=v.split("|"),t=b.length,i=v.length,n=(o=e.social_networks.split("|")).length,a=0;a<n;a++){switch(f=o[a],!0===y?g={social_network:f,icon_color:"yes"===e.icons_boxed?"#ffffff":p[f].color,box_color:"yes"===e.icons_boxed?p[f].color:""}:(g={social_network:f,icon_color:a<b.length?b[a]:"",box_color:a<v.length?v[a]:""},1===t&&(g.icon_color=b[0]),1===i&&(g.box_color=v[0])),s=e.description,r=e.link,l=e.title,u=_.fusionRawUrlEncode(e.pinterest_image),c={class:"fusion-social-network-icon fusion-tooltip fusion-"+g.social_network+" fusion-icon-"+g.social_network},d="",g.social_network){case"facebook":d="https://m.facebook.com/sharer.php?u="+r,cssua.ua.mobile&&(d="http://www.facebook.com/sharer.php?m2w&s=100&p&#91;url&#93;="+r+"&p&#91;images&#93;&#91;title&#93;="+_.fusionRawUrlEncode(l));break;case"twitter":d="https://twitter.com/share?text="+_.fusionRawUrlEncode(l)+"&url="+_.fusionRawUrlEncode(r);break;case"linkedin":d="https://www.linkedin.com/shareArticle?mini=true&url="+_.fusionRawUrlEncode(r)+"&amp;title="+_.fusionRawUrlEncode(l)+"&amp;summary="+_.fusionRawUrlEncode(s);break;case"reddit":d="http://reddit.com/submit?url="+r+"&amp;title="+l;break;case"tumblr":d="http://www.tumblr.com/share/link?url="+_.fusionRawUrlEncode(r)+"&amp;name="+_.fusionRawUrlEncode(l)+"&amp;description="+_.fusionRawUrlEncode(s);break;case"pinterest":d="http://pinterest.com/pin/create/button/?url="+_.fusionRawUrlEncode(r)+"&amp;description="+_.fusionRawUrlEncode(s)+"&amp;media="+u;break;case"vk":d="http://vkontakte.ru/share.php?url="+_.fusionRawUrlEncode(r)+"&amp;title="+_.fusionRawUrlEncode(l)+"&amp;description="+_.fusionRawUrlEncode(s);break;case"mail":d="mailto:?subject="+_.fusionRawUrlEncode(l)+"&body="+_.fusionRawUrlEncode(r)}c.href=d,c.target=e.linktarget&&"mail"!==g.social_network?"_blank":"_self","_blank"===c.target&&(c.rel="noopener noreferrer"),c.style=g.icon_color?"color:"+g.icon_color+";":"",e.icons_boxed&&"yes"===e.icons_boxed&&g.box_color&&(c.style+="background-color:"+g.box_color+";border-color:"+g.box_color+";"),("yes"===e.icons_boxed&&e.icons_boxed_radius||"0"===e.icons_boxed_radius)&&("round"===e.icons_boxed_radius&&(e.icons_boxed_radius="50%"),c.style+="border-radius:"+e.icons_boxed_radius+";"),c["data-placement"]=e.tooltip_placement,m=g.social_network,c["data-title"]=_.fusionUcFirst(m),c.title=_.fusionUcFirst(m),c["aria-label"]=_.fusionUcFirst(m),"none"!==e.tooltip_placement&&(c["data-toggle"]="tooltip"),h+="<a "+_.fusionGetAttributes(c)+"></a>"}return h}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_section_separator=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),this.extras=e.extras,t.attr=this.buildAtts(e.values),t.attrCandyArrow=this.buildCandyArrowAtts(e.values),t.attrCandy=this.buildCandyAtts(e.values),t.attrSVG=this.buildSVGAtts(e.values),t.attrButton=this.buildButtonAtts(e.values),t.attrRoundedSplit=this.buildRoundedSplitAtts(e.values),t.values=e.values,t},validateValues:function(e){isNaN(e.bordersize)||(e.bordersize=_.fusionGetValueWithUnit(e.bordersize)),e.borderSizeWithoutUnits=parseInt(e.bordersize.match(/\d+/),10),"horizon"===e.divider_type?e.yMin="top"===e.divider_candy?"-0.5":"0":"hills_opacity"===e.divider_type?e.yMin="top"===e.divider_candy?"-0.5":"0":"waves"===e.divider_type?e.yMin="top"===e.divider_candy?"54":"1":"waves_opacity"===e.divider_type&&(e.yMin="top"===e.divider_candy?"0":"1")},buildAtts:function(e){var t,i,o,n,a,s,r,l,u,d,c,g,p,f,m,h,b,v,y,w,x,F,P,A,C,B=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-section-separator section-separator"}),k=this.model.get("parent");return B.style="","triangle"===e.divider_type?""!==e.bordercolor&&("bottom"===e.divider_candy?B.style="border-bottom:"+e.bordersize+" solid "+e.bordercolor+";":"top"===e.divider_candy?B.style="border-top:"+e.bordersize+" solid "+e.bordercolor+";":-1!==e.divider_candy.indexOf("top")&&-1!==e.divider_candy.indexOf("bottom")&&(B.style="border:"+e.bordersize+" solid "+e.bordercolor+";")):"bigtriangle"===e.divider_type||"slant"===e.divider_type||"big-half-circle"===e.divider_type||"clouds"===e.divider_type||"curved"===e.divider_type?B.style="padding:0;":"horizon"!==e.divider_type&&"waves"!==e.divider_type&&"waves_opacity"!==e.divider_type&&"hills"!==e.divider_type&&"hills_opacity"!==e.divider_type||(B.style="font-size:0;line-height:0;"),"rounded-split"===e.divider_type&&(B.class+=" rounded-split-separator"),""!==e.class&&(B.class+=" "+e.class),""!==e.id&&(B.id=e.id),_.isUndefined(k)||(s=(a=FusionPageBuilderElements.find(function(e){return e.get("cid")==k})).attributes.params.type,r=jQuery.extend(!0,{},fusionAllElements.fusion_builder_column.defaults,_.fusionCleanParameters(a.get("params"))),n=FusionPageBuilderElements.find(function(e){return e.get("cid")==a.attributes.parent}),o=FusionPageBuilderElements.find(function(e){return e.get("cid")==n.attributes.parent}),i=fusionAllElements.fusion_builder_container.defaults,FusionPageBuilderApp.$el.find("#main").hasClass("width-100")&&(i.padding_top=this.extras.container_padding_100.top,i.padding_right=this.extras.container_padding_100.right,i.padding_bottom=this.extras.container_padding_100.bottom,i.padding_left=this.extras.container_padding_100.left),t=jQuery.extend(!0,{},i,_.fusionCleanParameters(o.get("params"))),_.isUndefined(o.attributes)||"fusion_builder_container"!==o.attributes.type||(l=void 0!==t.padding_left?t.padding_left:"",u=void 0!==t.padding_right?t.padding_right:"","1_1"!==s&&(l=_.fusionSingleDimension(r.padding_left,"left"),u=_.fusionSingleDimension(r.padding_right,"right")),l="0"===l||0===l?"0px":l,u="0"===u||0===u?"0px":u,C=100-(c=parseFloat(l))-(d=parseFloat(u)),-1!==l.indexOf("%")&&(g=c/C*100),-1!==u.indexOf("%")&&(p=d/C*100),h="100vw","boxed"===this.extras.layout.toLowerCase()&&(h=this.extras.site_width),"top"!==this.extras.header_position&&(h=h+" - "+parseFloat(this.extras.side_header_width)+"px"),FusionPageBuilderApp.$el.find("#main").hasClass("width-100")&&"no"===t.hundred_percent&&"1_1"===s?-1!==l.indexOf("px")&&-1!==u.indexOf("px")?(w="px",A=Math.abs((c-d)/2)+w,m="boxed"===this.extras.layout.toLowerCase()?(f="-"+l,"-"+u):(d<c?(l="- "+A,u="+ "+A):c<d?(l="+ "+A,u="- "+A):c===d&&(u=l=""),f="calc( ("+h+" - 100% ) / -2 "+l+" )","calc( ("+h+" - 100% ) / -2  "+u+" )"),B.class+=" fusion-section-separator-with-offset"):-1!==l.indexOf("%")&&-1!==u.indexOf("%")?"boxed"===this.extras.layout.toLowerCase()?(w="%",F=this.extras.hundredp_padding,f="calc( ( 100% - "+2*(P=parseFloat(F))+(x=F.replace(P,""))+" ) * "+-.01*g+" )",m="calc( ( 100% - "+2*P+x+" ) * "+-.01*p+" )"):(f="calc( ("+h+" - 100% "+(y=" - "+(c+d)+(w="vw"))+") / -2 - "+c+w+" )",m="calc( ("+h+" - 100% "+y+") / -2  - "+d+w+" )",B.class+=" fusion-section-separator-with-offset"):(-1!==(b=l).indexOf("%")&&"boxed"!==this.extras.layout.toLowerCase()&&(b=c+"vw"),-1!==(v=u).indexOf("%")&&"boxed"!==this.extras.layout.toLowerCase()&&(v=d+"vw"),f="calc( ("+h+" - 100% - "+l+" - "+u+") / -2 - "+b+" )",m="calc( ("+h+" - 100% - "+l+" - "+u+") / -2 - "+v+" )"):(f=-1!==l.indexOf("%")?(l=g+"%",-1!==u.indexOf("%")&&(u=p+"%"),"calc( (100% + "+l+" + "+u+") * "+c+" / -100 )"):"-"+l,m=-1!==u.indexOf("%")?(u=p+"%",-1!==l.indexOf("%")&&(l=g+"%"),"calc( (100% + "+l+" + "+u+") * "+d+" / -100 )"):"-"+u),B.style+="margin-left:"+f+";",B.style+="margin-right:"+m+";")),B},buildCandyAtts:function(e){var t={class:"divider-candy"};return"bottom"===e.divider_candy?(t.class+=" bottom",t.style="bottom:-"+(e.borderSizeWithoutUnits+20)+"px;border-bottom:1px solid "+e.bordercolor+";border-left:1px solid "+e.bordercolor+";"):"top"===e.divider_candy?(t.class+=" top",t.style="top:-"+(e.borderSizeWithoutUnits+20)+"px;border-bottom:1px solid "+e.bordercolor+";border-left:1px solid "+e.bordercolor+";"):-1!==e.divider_candy.indexOf("top")&&-1!==e.divider_candy.indexOf("bottom")&&(t.class+=" both",t.style="background-color:"+e.backgroundcolor+";border:1px solid "+e.bordercolor+";"),-1!==e.divider_candy.indexOf("top")&&-1!==e.divider_candy.indexOf("bottom")&&(t.class+=" triangle"),t},buildCandyArrowAtts:function(e){var t={class:"divider-candy-arrow"},i=e.borderSizeWithoutUnits;return 1===i&&(i=0),"bottom"===e.divider_candy?(t.class+=" bottom",t.style="top:"+i+"px;border-top-color: "+e.backgroundcolor+";"):"top"===e.divider_candy&&(t.class+=" top",t.style="bottom:"+i+"px;border-bottom-color: "+e.backgroundcolor+";"),t},buildSVGAtts:function(e){var t={display:"block"};return"bigtriangle"!==e.divider_type&&"slant"!==e.divider_type&&"big-half-circle"!==e.divider_type&&"clouds"!==e.divider_type&&"curved"!==e.divider_type||(t.style="fill:"+e.backgroundcolor+";padding:0;"),"slant"===e.divider_type&&"bottom"===e.divider_candy&&(t.style="fill:"+e.backgroundcolor+";padding:0;margin-bottom:-3px;display:block"),"horizon"!==e.divider_type&&"hills"!==e.divider_type&&"hills_opacity"!==e.divider_type&&"waves"!==e.divider_type&&"waves_opacity"!==e.divider_type||(t.style="fill:"+e.backgroundcolor),t},buildButtonAtts:function(e){var t={};return""!==e.icon&&(t={class:"section-separator-icon icon "+_.fusionFontAwesome(e.icon),style:"color:"+e.icon_color+";"},e.icon_color||(e.icon_color=e.bordercolor),1<e.borderSizeWithoutUnits&&("bottom"===e.divider_candy?t.style+="bottom:-"+(e.borderSizeWithoutUnits+10)+"px;top:auto;":"top"===e.divider_candy&&(t.style+="top:-"+(e.borderSizeWithoutUnits+10)+"px;"))),t},buildRoundedSplitAtts:function(e){var t={};return"rounded-split"===e.divider_type&&(t={class:"rounded-split "+e.divider_candy,style:"background-color:"+e.backgroundcolor+";"}),t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_modal=FusionPageBuilder.ElementView.extend({onInit:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el);e.on("shown.bs.modal",function(){jQuery("body").addClass("fusion-builder-no-ui fusion-dialog-ui-active"),e.closest(".fusion-builder-column").css("z-index","auto"),e.closest("#main").css("z-index","auto"),e.closest(".fusion-row").css("z-index","auto"),e.closest(".fusion-builder-container").css("z-index","auto")}),e.on("hide.bs.modal",function(){jQuery("body").removeClass("fusion-builder-no-ui fusion-dialog-ui-active"),e.closest(".fusion-builder-column").css("z-index",""),e.closest("#main").css("z-index",""),e.closest(".fusion-row").css("z-index",""),e.closest(".fusion-builder-container").css("z-index","")})},onSettingsOpen:function(){var e=this,t=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find(".fusion-modal"));this.disableDroppableElement(),jQuery(this.$el).closest(".fusion-builder-live-element").css("cursor","default"),jQuery(this.$el).closest(".fusion-builder-column").css("z-index","auto"),jQuery(this.$el).closest(".fusion-row").css("z-index","auto"),jQuery(this.$el).closest(".fusion-builder-container").css("z-index","auto"),setTimeout(function(){jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-footer-parallax").length&&"fixed"===jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-footer-parallax").css("position")&&(jQuery("#fb-preview")[0].contentWindow.jQuery("#main").css("z-index","auto"),jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-footer-parallax").css("z-index","-1"),jQuery("#fb-preview")[0].contentWindow.jQuery("#sliders-container").find('.tfs-slider[data-parallax="1"]').length&&jQuery("#fb-preview")[0].contentWindow.jQuery("#sliders-container").css("z-index","auto"))},1),t.addClass("in").show(),t.find('button[data-dismiss="modal"], .fusion-button[data-dismiss="modal"]').one("click",function(){window.FusionEvents.trigger("fusion-close-settings-"+e.model.get("cid"))})},onSettingsClose:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find(".fusion-modal"));e.find('button[data-dismiss="modal"], .fusion-button[data-dismiss="modal"]').off("click"),this.enableDroppableElement(),jQuery(this.$el).closest(".fusion-builder-live-element").css("cursor",""),jQuery(this.$el).closest(".fusion-builder-column").css("z-index",""),jQuery(this.$el).closest(".fusion-row").css("z-index",""),jQuery(this.$el).closest(".fusion-builder-container").css("z-index",""),jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-footer-parallax").length&&(jQuery("#fb-preview")[0].contentWindow.jQuery("#main").css("z-index",""),jQuery("#fb-preview")[0].contentWindow.jQuery(".fusion-footer-parallax").css("z-index",""),jQuery("#fb-preview")[0].contentWindow.jQuery("#sliders-container").css("z-index","")),e.removeClass("in").hide()},afterPatch:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find(".fusion-modal"));jQuery('.fusion-builder-module-settings[data-element-cid="'+this.model.get("cid")+'"]').length&&(e.addClass("in").show(),e.find(".full-video, .video-shortcode, .wooslider .slide-content").fitVids())},filterTemplateAtts:function(e){var t={};return t.attrModal=this.buildModalAttr(e.values),t.attrDialog=this.buildDialogAttr(e.values),t.attrContent=this.buildContentAttr(e.values),t.attrButton=this.buildButtonAttr(e.values),t.attrHeading=this.buildHeadingAttr(e.values),t.attrFooterButton=this.buildHFooterButtonAttr(e.values),t.attrBody=this.buildBodyAttr(e.values),t.borderColor=e.values.border_color,t.title=e.values.title,t.showFooter=e.values.show_footer,t.closeText=e.extras.close_text,t.elementContent=e.values.element_content,t.name=e.values.name,t.label=window.fusionAllElements[this.model.get("element_type")].name,t.icon=window.fusionAllElements[this.model.get("element_type")].icon,t.cid=this.model.get("cid"),t},buildModalAttr:function(e){var t={class:"fusion-modal modal fade modal-"+this.model.get("cid"),tabindex:"-1",role:"dialog",style:"z-index: 9999999; background: rgba(0,0,0,0.5);","aria-labelledby":"modal-heading-"+this.model.get("cid"),"aria-hidden":"true"};return""!==e.name&&(t.class+=" "+e.name),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildDialogAttr:function(e){var t={class:"modal-dialog"};return t.class+="small"===e.size?" modal-sm":" modal-lg",t},buildContentAttr:function(e){var t={class:"modal-content fusion-modal-content"};return""!==e.background&&(t.style="background-color:"+e.background),t},buildBodyAttr:function(){var e={class:"modal-body"};return e=_.fusionInlineEditor({cid:this.model.get("cid")},e)},buildButtonAttr:function(){return{class:"close",type:"button","data-dismiss":"modal","aria-hidden":"true"}},buildHeadingAttr:function(){var e={class:"modal-title",id:"modal-heading-"+this.model.get("cid"),"data-dismiss":"modal","aria-hidden":"true"};return e=_.fusionInlineEditor({cid:this.model.get("cid"),param:"title","disable-return":!0,"disable-extra-spaces":!0,toolbar:!1},e)},buildHFooterButtonAttr:function(){return{class:"fusion-button button-default button-medium button default medium","data-dismiss":"modal"}}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_code=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return t.content=e.params.element_content,t.label=window.fusionAllElements[this.model.get("element_type")].name,t.icon=window.fusionAllElements[this.model.get("element_type")].icon,t.cid=this.model.get("cid"),t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_alert=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.buttonStyles=this.buildButtonStyles(e.values),t.contentAttr=this.buildContentAttr(e.values),t.contentStyles=this.buildContentStyles(e.values),t.cid=this.model.get("cid"),t.values=e.values,t},validateValues:function(e){switch(e.alert_class="info",e.type){case"general":e.alert_class="info",e.icon&&"none"===e.icon||(e.icon="fa-info-circle");break;case"error":e.alert_class="danger",e.icon&&"none"===e.icon||(e.icon="fa-exclamation-triangle");break;case"success":e.alert_class="success",e.icon&&"none"===e.icon||(e.icon="fa-check-circle");break;case"notice":e.alert_class="warning",e.icon&&"none"===e.icon||(e.icon="fa-lg fa-cog");break;case"blank":e.alert_class="blank";break;case"custom":e.alert_class="custom"}void 0!==e.element_content&&(e.element_content=e.element_content.trim(),e.element_content=e.element_content.replace(/(<p[^>]+?>|<p>|<\/p>)/gim,""))},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-alert alert fusion-live-alert fusion-alert-cid"+this.model.get("cid"),style:""}),i=e.alert_class;return"capitalize"===e.text_transform&&(i+=" fusion-alert-capitalize"),"yes"===e.dismissable&&(i+=" alert-dismissable"),t.class+=" alert-"+i,t.class+=" fusion-alert-"+e.text_align,t.class+=" "+e.type,"yes"===e.box_shadow&&(t.class+=" alert-shadow"),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t=_.fusionAnimations(e,t)},buildContentStyles:function(e){var t,i,o=e.alert_class,n={},a="",s=this.model.get("cid");return"custom"===o?(e.border_size=parseFloat(e.border_size)+"px",n.background_color=e.background_color,n.accent_color=e.accent_color,n.border_size=e.border_size):(t="var(--"+o+"_bg_color)",i="var(--"+o+"_accent_color)",n.background_color=t,n.accent_color=i,n.border_size=parseFloat(window.fusionAllElements.fusion_alert.defaults.border_size)+"px"),a='<style type="text/css">',a+=".fusion-alert.alert.fusion-alert-cid"+s+"{",a+="background-color:"+n.background_color+";",a+="color:"+n.accent_color+";",a+="border-color:"+n.accent_color+";",a+="border-width:"+n.border_size+";",a+="}",a+="</style>"},buildContentAttr:function(){return _.fusionInlineEditor({cid:this.model.get("cid"),"disable-return":!0,"disable-extra-spaces":!0,toolbar:"simple"},{class:"fusion-alert-content"})},buildButtonStyles:function(e){return"custom"===e.alert_class?"color:"+e.accent_color+";border-color:"+e.accent_color+";":""}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_map=FusionPageBuilder.ElementView.extend({jsVars:{},initMap:function(){var e=this.$el;void 0===e||_.isEmpty(this.jsVars)||_.isEmpty(this.jsVars.json_addresses)||jQuery("#fb-preview")[0].contentWindow.jQuery(e.find("#map_"+this.model.get("cid"))).fusion_maps({addresses:this.jsVars.json_addresses,animations:this.jsVars.animation,infobox_background_color:this.jsVars.infobox_background_color,infobox_styling:this.jsVars.infobox,infobox_text_color:this.jsVars.infobox_text_color,map_style:this.jsVars.map_style,map_type:this.jsVars.type,marker_icon:this.jsVars.icon,overlay_color:this.jsVars.overlay_color,overlay_color_hsl:this.jsVars.overlay_color_hsl,pan_control:this.jsVars.zoom_pancontrol,show_address:this.jsVars.popup,scale_control:this.jsVars.scale,scrollwheel:this.jsVars.scrollwheel,zoom:parseInt(this.jsVars.zoom,10),zoom_control:this.jsVars.zoom_pancontrol})},onRender:function(){var e=this;jQuery("#fb-preview").on("load",function(){e.initMap()})},afterPatch:function(){var e,t;_.isEmpty(this.jsVars)||_.isEmpty(this.jsVars.json_addresses)||(e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find("#map_"+this.model.get("cid")))[0].cloneNode(),t=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find(".fusion-builder-element-content")),jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find("#map_"+this.model.get("cid"))).remove(),jQuery(t).append(e),this.initMap())},filterTemplateAtts:function(e){var t,i,o={};return this.validateValues(e.values),"js"===e.values.api_type?i=this.buildJsVars(e.values,e.extras):"embed"===e.values.api_type?t=this.buildEmbedHtml(e.values,e.extras):"static"===e.values.api_type&&(t=this.buildStaticHtml(e.values,e.extras)),o.googleMapShortcode=this.buildGoogleMapShortcode(e),o.jsVars=i,o.html=t,o.id=e.values.id,o.apiType=e.values.api_type,o.address=e.values.address,o.cid=this.model.get("cid"),this.jsVars=i,o},validateValues:function(e){e.width=_.fusionValidateAttrValue(e.width,"px"),e.height=_.fusionValidateAttrValue(e.height,"px"),""===e.address&&(e.address="latlng=0,0")},buildGoogleMapShortcode:function(e){var t=_.fusionVisibilityAtts(e.values.hide_on_mobile,{class:"shortcode-map fusion-google-map fusion-maps-"+e.values.api_type+"-type"});return""!==e.values.class&&(t.class+=" "+e.values.class),t.id="map_"+this.model.get("cid"),t.style="height:"+e.values.height+";width:"+e.values.width+";",t},buildJsVars:function(e,t){var i,o,n,a,s,r,l,u,d,c,g,p={},f=e.address,m=e.map_style,h=e.icon,b=e.animation,v=e.infobox,y=e.overlay_color,w=e.infobox_background_color,x=e.infobox_text_color,F=e.infobox_content,P=e.type,A=e.zoom,C=[],B=[];if(""!==f){(c=f.split("|")).length&&(f=c),n=c.length;try{F&&""!==F&&FusionPageBuilderApp.base64Encode(FusionPageBuilderApp.base64Decode(F))===F&&(F=FusionPageBuilderApp.base64Decode(F))}catch(e){}if(o=-1===jQuery.inArray(e.map_style,["default","theme"])&&"default"!==e.infobox?F.split("|"):[],i=[],""!==e.icon&&(i=e.icon.split("|")),"theme"===e.map_style?(r=[(a=jQuery.Color(t.primary_color)).red(),a.green(),a.blue()],h="theme",b="yes",v=m="custom",y=t.primary_color,w="rgba("+r[0]+", "+r[1]+", "+r[2]+", 0.8)",x="#747474",140<a.lightness()&&(x="#fff")):"custom"===e.map_style&&0===jQuery.Color(e.overlay_color).alpha()&&(y=""),"custom"===e.map_style&&""!==e.icon&&"theme"!==e.icon&&i&&1===i.length)for(d=i[0],g=0;g<n;g++)i[g]=d;if("theme"===e.icon&&"custom"===e.map_style)for(g=0;g<n;g++)i[g]=t.theme_icon;if(_.each(f,function(e){e=e.trim().split("\n").filter(function(e){return String(e).trim()}).join("<br/>").replace(/\r/g,"").replace(/\n/g,""),C.push({address:e})}),!C)return;for(g=0;g<n;g++)0===f[g].indexOf("latlng=")&&(f[g]=C[g].address);if(F=f,o){for(g=0;g<n;g++)o[g]||(o[g]=f[g]);F=o}l=t.cached_addresses,_.each(f,function(e,t){B.push({address:e,infobox_content:_.unescape(F[t])}),i&&i[t]&&(B[t].marker=i[t]),-1!==e.indexOf("latlng=")?(B[t].address=e.replace("latlng=",""),u=B[t].address.split(","),B[t].coordinates=!0,B[t].latitude=u[0],B[t].longitude=u[1],B[t].cache=!1,-1!==F[t].indexOf("latlng=")&&(B[t].infobox_content=""),l[B[t].latitude.trim()+","+B[t].longitude.trim()]&&(B[t].geocoded_address=l[B[t].latitude.trim()+","+B[t].longitude].address.trim(),B[t].cache=!0)):(B[t].coordinates=!1,B[t].cache=!1,l[B[t].address.trim()]&&(B[t].latitude=l[B[t].address.trim()].latitude,B[t].longitude=l[B[t].address.trim()].longitude,B[t].cache=!0))}),s={hue:(a=jQuery.Color(y)).hue(),sat:100*a.saturation(),lum:100*a.lightness()},p.json_addresses=B,p.infobox_background_color=w,p.infobox=v,p.infobox_text_color=x,p.map_style=m,p.type=P,p.icon=h,p.overlay_color=y,p.overlay_color_hsl=s,p.zoom=A,p.animation="yes"===b&&"true",p.zoom_pancontrol="yes"===e.zoom_pancontrol&&"true",p.popup="yes"===e.popup&&"true",p.scale="yes"===e.scale&&"true",p.scrollwheel="yes"===e.scrollwheel&&"true"}return p},buildEmbedHtml:function(e,t){var i="",o=e.embed_address;return o&&(o=o.replace(/ /g,"+"),-1!==e.width.indexOf("px")&&(e.width=parseInt(e.width,10)),i='<iframe width="'+e.width+'" height="'+parseInt(e.height,10)+'" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?key='+t.gmap_api+"&q="+o+"&maptype="+e.embed_map_type+"&zoom="+e.zoom+'" allowfullscreen></iframe>'),i},buildStaticHtml:function(e,t){var i,o,n,a,s,r,l,u,d,c="",g="",p=e.address;if(p){for(i=p.split("|"),o=e.icon_static?e.icon_static.split("|"):[],n=[],a=i.length,d=0;d<a;d++)i[d]=i[d].trim(),0===i[d].indexOf("latlng=")?i[d]=i[d].replace("latlng=",""):(i[d]=i[d].split(",").map(function(e){return e.trim()}).join(","),i[d]=i[d].replace(" ","+")),void 0!==o[d]?("theme"===o[d]&&(o[d]=t.amms_icon),(0<o[d].indexOf("://")||0===o[d].indexOf("//"))&&(o[d]="icon:"+o[d]),o[d]=o[d].trim(),o[d]=o[d].replace(",","|")+"|"):o[d]="",n.push(o[d]+i[d]);e.static_map_color&&(g+="&style=feature:all|hue:0x"+(s=e.static_map_color.replace("#",""))+"|saturation:"+(l=200*(r=jQuery.Color(e.static_map_color)).saturation()-100)+"|lightness:"+(u=200*r.lightness()-100)+"|visibility:simplified",g+="&style=feature:administrative|hue:0x"+s+"|saturation:"+l+"|lightness:"+u+"|visibility:simplified",g+="&style=feature:landscape|hue:0x"+s+"|saturation:"+l+"|lightness:"+u+"|visibility:simplified",g+="&style=feature:poi|hue:0x"+s+"|saturation:"+l+"|lightness:"+u+"|visibility:simplified",g+="&style=feature:road|hue:0x"+s+"|saturation:"+l+"|lightness:"+u+"|visibility:simplified",g+="&style=feature:transit|hue:0x"+s+"|saturation:"+l+"|lightness:"+u+"|visibility:simplified",g+="&style=feature:water|hue:0x"+s+"|saturation:"+l+"|lightness:"+u+"|visibility:simplified"),c='<img width="'+parseInt(e.width,10)+'" height="'+parseInt(e.height,10)+'" src="https://maps.googleapis.com/maps/api/staticmap?key='+t.gmap_api+"&center="+i[0]+"&maptype="+e.type+"&zoom="+e.zoom+"&size="+parseInt(e.width,10)+"x"+parseInt(e.height,10)+"&markers="+n.join("&markers=")+g+'&scale=2">'}return c}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_fontawesome=FusionPageBuilder.ElementView.extend({onRender:function(){this.afterPatch()},afterPatch:function(){var e=this.model.get("params");this.$el.removeClass("fusion-element-alignment-right fusion-element-alignment-left"),void 0===e.alignment||"right"!==e.alignment&&"left"!==e.alignment||this.$el.addClass("fusion-element-alignment-"+e.alignment)},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.cid=this.model.get("cid"),t.alignment=e.values.alignment,t.output=e.values.element_content,t},validateValues:function(e){e.font_size=_.fusionValidateAttrValue(this.convertDeprecatedSizes(e.size),"")},convertDeprecatedSizes:function(e){switch(e){case"small":return"10px";case"medium":return"18px";case"large":return"40px";default:return e}},buildAttr:function(e){var t=!1,i={};return e.circle_yes_font_size=.88*e.font_size,e.line_height=1.76*e.font_size,e.icon_margin=.5*e.font_size,(void 0===e.margin_left||""===e.margin_top&&""===e.margin_right&&""===e.margin_bottom&&""===e.margin_left)&&(t=!0),i={class:"fontawesome-icon "+_.fusionFontAwesome(e.icon)+" circle-"+e.circle},(i=_.fusionVisibilityAtts(e.hide_on_mobile,i)).style="","yes"===e.circle?(e.circlebordercolor&&(i.style+="border-color:"+e.circlebordercolor+";"),e.circlecolor&&(i.style+="background-color:"+e.circlecolor+";"),i.style+="font-size:"+e.circle_yes_font_size+"px;",i.style+="line-height:"+e.line_height+"px;height:"+e.line_height+"px;width:"+e.line_height+"px;"):i.style+="font-size:"+e.font_size+"px;",t?("left"===e.alignment?e.icon_margin_position="right":"right"===e.alignment?e.icon_margin_position="left":e.icon_margin_position=FusionPageBuilderApp.$el.hasClass("rtl")?"left":"right","center"===e.alignment?i.style+="margin-left:0;margin-right:0;":i.style+="margin-"+e.icon_margin_position+":"+e.icon_margin+"px;"):(e.margin_top&&(i.style+="margin-top:"+e.margin_top+";"),e.margin_right&&(i.style+="margin-right:"+e.margin_right+";"),e.margin_bottom&&(i.style+="margin-bottom:"+e.margin_bottom+";"),e.margin_left&&(i.style+="margin-left:"+e.margin_left+";")),e.iconcolor&&(i.style+="color:"+e.iconcolor+";"),e.rotate&&(i.class+=" fa-rotate-"+e.rotate),"yes"===e.spin&&(i.class+=" fa-spin"),e.flip&&(i.class+=" fa-flip-"+e.flip),e.class&&(i.class+=" "+e.class),e.id&&(i.id=e.id),i=_.fusionAnimations(e,i)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_button=FusionPageBuilder.ElementView.extend({onRender:function(){this.afterPatch()},afterPatch:function(){var e=this.model.get("params"),t=e.stretch;"default"!==t&&""!=t||(t=fusionAllElements.fusion_button.defaults.stretch),this.$el.removeClass("fusion-element-alignment-right fusion-element-alignment-left fusion-element-alignment-block"),"yes"!==t?void 0!==e.alignment&&""!==e.alignment?this.$el.addClass("fusion-element-alignment-"+e.alignment):jQuery("body.rtl").length?this.$el.addClass("fusion-element-alignment-right"):this.$el.addClass("fusion-element-alignment-left"):this.$el.addClass("fusion-element-alignment-block")},filterTemplateAtts:function(e){var t={};return this.extrasCheck(e.values,e.extras),this.buildValues(e.values),t.wrapperAttr=this.buildWrapperAttr(e.values),t.attr=this.buildAttr(e.values),t.IconAttr=this.buildIconAttr(e.values),t.buttonStyles=this.buildButtonStyles(e.values),t.textAttr=this.buildTextAttr(e.values),t.values=e.values,t},extrasCheck:function(e,t){var i,o;-1!==e.color.indexOf("scheme-")&&"object"==typeof t&&"object"==typeof t.custom_color_schemes&&(i=e.color.replace("scheme-",""),void 0!==(o=t.custom_color_schemes[i])?(e.accent_color=void 0!==o.values.button_accent_color?o.values.button_accent_color.toLowerCase():"#ffffff",e.accent_hover_color=void 0!==o.values.button_accent_hover_color?o.values.button_accent_hover_color.toLowerCase():"#ffffff",e.bevel_color=void 0!==o.values.button_bevel_color?o.values.button_bevel_color.toLowerCase():"#54770F",e.gradient_colors=o.values.button_gradient_top_color+"|"+o.values.button_gradient_bottom_color,e.gradient_hover_colors=o.values.button_gradient_top_color_hover+"|"+o.values.button_gradient_bottom_color_hover):e.color="default")},buildValues:function(e){var t,i,o=e.button_gradient_top_color,n=e.button_gradient_bottom_color,a=e.button_gradient_top_color_hover,s=e.button_gradient_bottom_color_hover;""===e.gradient_colors&&(e.gradient_colors=e.button_gradient_top_color.toLowerCase()+"|"+e.button_gradient_bottom_color.toLowerCase()),""===e.gradient_hover_colors&&(e.gradient_hover_colors=e.button_gradient_top_color_hover.toLowerCase()+"|"+e.button_gradient_bottom_color_hover.toLowerCase()),e.border_width=parseInt(e.border_width,10)+"px","default"===e.color&&(e.accent_color=void 0!==e.button_accent_color&&""!==e.button_accent_color?e.button_accent_color.toLowerCase():"#ffffff",e.accent_hover_color=void 0!==e.button_accent_hover_color&&""!==e.button_accent_hover_color?e.button_accent_hover_color.toLowerCase():"#ffffff",e.bevel_color=void 0!==e.button_bevel_color&&""!==e.button_bevel_color?e.button_bevel_color.toLowerCase():"#54770F",e.gradient_colors=o.toLowerCase()+"|"+n.toLowerCase(),e.gradient_hover_colors=a.toLowerCase()+"|"+s.toLowerCase()),t=e.border_color,i=e.text_color,""!==t&&(e.border_color=t),""!==i&&(e.text_color=t),""!==e.modal&&(e.link="#"),e.type=e.type.toLowerCase()},buildWrapperAttr:function(e){var t={class:"fusion-button-wrapper"},i=void 0!==e.stretch&&(""===e.stretch||"default"===e.stretch)||void 0===e.stretch;return!i&&"yes"===e.stretch||i&&"yes"===fusionAllElements.fusion_button.defaults.stretch?t.class+=" fusion-align-block":e.alignment&&(t.class+=" fusion-align"+e.alignment),t},buildAttr:function(e){var t,i=this.model.get("params"),o=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-button button-"+e.type+" button-"+e.color+" button-cid"+this.model.get("cid"),style:""}),n="button-"+e.size,a="fusion-button-span-"+e.stretch,s="fusion-button-"+e.shape,r="";return(void 0!==i.size&&""===i.size||void 0===i.size)&&(n="fusion-button-default-size"),(void 0===i.stretch||""!==i.stretch&&"default"!==i.stretch)&&void 0!==i.stretch||(a="fusion-button-default-span"),(void 0===i.shape||""!==i.shape&&"default"!==i.shape)&&void 0!==i.shape||(s="fusion-button-default-shape"),(void 0===i.type||""!==i.type&&"default"!==i.type)&&void 0!==i.type||(r="fusion-button-default-type"),o.class+=" "+n+" "+a+" "+s+" "+r,o.target=e.target,"_blank"===e.target?o.rel="noopener noreferrer":"lightbox"===e.target&&(o.rel="iLightbox"),void 0!==e.link_attributes&&""!==e.link_attributes&&(t=e.link_attributes.split(" "),_.each(t,function(e){var t=e.split("=");_.isUndefined(t[0])||(_.isUndefined(t[1])?o[t[0]]="valueless_attribute":(t[1]=t[1].trim().replace(/{/g,"[").replace(/}/g,"]").replace(/'/g,"").trim(),"rel"===t[0]?o.rel+=" "+t[1]:o[t[0]]=t[1]))})),o.title=e.title,o.href=e.link,""!==e.modal&&(o.data_toggle="modal",o.data_target=".fusion-modal."+e.modal),""!==e.class&&(o.class+=" "+e.class),""!==e.id&&(o.id+=" "+e.id),o=_.fusionAnimations(e,o)},buildIconAttr:function(e){var t={class:_.fusionFontAwesome(e.icon)};return"yes"!==e.icon_divider&&(t.class+=" button-icon-"+e.icon_position),e.icon_color&&e.icon_color!==e.accent_color&&(t.style="color:"+e.icon_color+";"),t},buildTextAttr:function(e){var t={class:"fusion-button-text"};return""!==e.icon&&"yes"===e.icon_divider&&(t.class+=" fusion-button-text-"+e.icon_position),t=_.fusionInlineEditor({cid:this.model.get("cid"),"disable-return":!0,"disable-extra-spaces":!0,toolbar:"simple"},t)},buildButtonStyles:function(e){var t,i,o,n,a,s,r,l=this.model.get("params"),u="",d="",c="cid"+this.model.get("cid"),g="",p="",f="",m="",h="",b="",_="",v="";return"custom"!==e.color&&"default"!==e.color&&(-1===e.color.indexOf("scheme-")||""===e.bevel_color&&""===e.accent_color&&""===e.accent_hover_color&&""===e.border_width&&""===e.gradient_colors)||(t=e.text_color,i=e.border_color,"3d"===e.type&&""!==e.bevel_color&&("small"===e.size?v=0:"medium"===e.size?v=1:"large"===e.size?v=2:"xlarge"===e.size&&(v=3),s="0px "+(2+v)+"px 0px "+e.bevel_color+",",r="1px "+(4+v)+"px "+(4+v)+"px 3px rgba(0,0,0,0.3)","small"===e.size&&(r=r.replace("3px","2px")),f="-webkit-box-shadow: "+(a="inset 0px 1px 0px #fff,"+s+r)+";-moz-box-shadow: "+a+";box-shadow: "+a+";"),"default"!==e.color&&(t?p+="color:"+t+";":e.accent_color&&(p+="color:"+e.accent_color+";"),""!==i?g+="border-color:"+i+";":e.accent_color&&(g+="border-color:"+e.accent_color+";"),""!==t?h+="color:"+t+";":""!==e.accent_hover_color?h+="color:"+e.accent_hover_color+";":""!==e.accent_color&&(h+="color:"+e.accent_color+";"),""!==i?m+="border-color:"+i+";":""!==e.accent_hover_color?m+="border-color:"+e.accent_hover_color+";":""!==e.accent_color&&(m+="border-color:"+e.accent_color+";"),""!==p&&(u+=".fusion-button.button-"+c+" .fusion-button-text, .fusion-button.button-"+c+" i {"+p+"}"),""!==e.accent_color&&(u+=".fusion-button.button-"+c+" .fusion-button-icon-divider{border-color:"+e.accent_color+";}"),""!==h&&(u+=".fusion-button.button-"+c+":hover .fusion-button-text, .fusion-button.button-"+c+".hover .fusion-button-text, .fusion-button.button-"+c+":hover i, .fusion-button.button-"+c+".hover i, .fusion-button.button-"+c+":focus .fusion-button-text, .fusion-button.button-"+c+":focus i,.fusion-button.button-"+c+":active .fusion-button-text, .fusion-button.button-"+c+":active{"+h+"}"),""!==e.accent_hover_color&&(u+=".fusion-button.button-"+c+":hover .fusion-button-icon-divider, .fusion-button.button-"+c+".hover .fusion-button-icon-divider, .fusion-button.button-"+c+":hover .fusion-button-icon-divider, .fusion-button.button-"+c+".hover .fusion-button-icon-divider, .fusion-button.button-"+c+":active .fusion-button-icon-divider{border-color:"+e.accent_hover_color+";}")),""===e.border_width||"custom"!==e.color||void 0!==l.border_width&&""===l.border_width||(g+="border-width:"+e.border_width+";",m+="border-width:"+e.border_width+";"),""!==g&&(u+=".fusion-button.button-"+c+" {"+g+"}"),""!==f&&(u+=".fusion-button.button-"+c+".button-3d{"+f+"}.button-"+c+".button-3d:active{"+f+"}"),""!==m&&(u+=".fusion-button.button-"+c+":hover, .fusion-button.button-"+c+".hover, .fusion-button.button-"+c+":focus, .fusion-button.button-"+c+":active{"+m+"}"),""!==e.gradient_colors&&"default"!==e.color&&(n="",1===(n=-1!==e.gradient_colors.indexOf(";")?e.gradient_colors.split(";"):e.gradient_colors.split("|")).length||""===n[1]||n[0]===n[1]?b+="background:"+n[0]+";":(b+="background: "+n[0]+";",b+="background-image: -webkit-gradient( linear, left bottom, left top, from( "+n[1]+" ), to( "+n[0]+" ) );",b+="background-image: -webkit-linear-gradient( bottom, "+n[1]+", "+n[0]+" );",b+="background-image:   -moz-linear-gradient( bottom, "+n[1]+", "+n[0]+" );",b+="background-image:     -o-linear-gradient( bottom, "+n[1]+", "+n[0]+" );",b+="background-image: linear-gradient( to top, "+n[1]+", "+n[0]+" );"),u+=".fusion-button.button-"+c+"{"+b+"}"),e.gradient_hover_colors&&"default"!==e.color&&(o="",1==(o=-1!==e.gradient_hover_colors.indexOf(";")?e.gradient_hover_colors.split(";"):e.gradient_hover_colors.split("|")).length||""===o[1]||o[0]===o[1]?_+="background: "+o[0]+";":(_+="background: "+o[0]+";",_+="background-image: -webkit-gradient( linear, left bottom, left top, from( "+o[1]+" ), to( "+o[0]+" ) );",_+="background-image: -webkit-linear-gradient( bottom, "+o[1]+", "+o[0]+" );",_+="background-image:   -moz-linear-gradient( bottom, "+o[1]+", "+o[0]+" );",_+="background-image:     -o-linear-gradient( bottom, "+o[1]+", "+o[0]+" );",_+="background-image: linear-gradient( to top, "+o[1]+", "+o[0]+" );"),u+=".fusion-button.button-"+c+":hover, .fusion-button.button-"+c+".hover, .button-"+c+":focus,.fusion-button.button-"+c+":active{"+_+"}")),""!==e.text_transform&&(u+=".fusion-button.button-"+c+" .fusion-button-text{text-transform:"+e.text_transform+"}"),""!==u&&(d='<style type="text/css">'+u+"</style>"),d}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_imageframe=FusionPageBuilder.ElementView.extend({onRender:function(){this.afterPatch()},afterPatch:function(){var e=this.model.get("params"),t=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find(".fusion-lightbox"));this.$el.removeClass("fusion-element-alignment-right fusion-element-alignment-left"),void 0===e.align||"right"!==e.align&&"left"!==e.align||this.$el.addClass("fusion-element-alignment-"+e.align),"object"==typeof jQuery("#fb-preview")[0].contentWindow.avadaLightBox&&(void 0!==this.iLightbox&&this.iLightbox.destroy(),t.length&&(this.iLightbox=t.iLightBox(jQuery("#fb-preview")[0].contentWindow.avadaLightBox.prepare_options("single"))))},filterTemplateAtts:function(e){return void 0!==e.values.element_content&&(this.validateValues(e.values),e.attr=this.buildAttr(e.values),e.contentAttr=this.buildContentAttr(e.values),e.linkAttr=this.buildLinktAttr(e.values),e.borderRadius=this.buildBorderRadius(e.values),e.imgStyles=this.buildImgStyles(e),this.buildElementContent(e),e.liftupClasses=this.buildLiftupClasses(e),e.liftupStyles=this.buildLiftupStyles(e)),e},validateValues:function(e){e.borderradius=_.fusionValidateAttrValue(e.borderradius,"px"),e.bordersize=_.fusionValidateAttrValue(e.bordersize,"px"),e.blur=_.fusionValidateAttrValue(e.blur,"px"),e.style||(e.style=e.style_type),e.borderradius&&"bottomshadow"===e.style&&(e.borderradius="0"),"round"===e.borderradius&&(e.borderradius="50%")},buildAttr:function(e){var t,i,o=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-imageframe fusion-imageframe-align-"+e.align,style:""}),n=e.stylecolor?e.stylecolor:"",a=0===n.indexOf("#")?jQuery.Color(n).alpha(.3).toRgbaString():jQuery.Color(n).toRgbaString(),s=e.blur,r=parseInt(s,10)+4+"px";return e.style||(e.style=e.style_type),(t=jQuery.Color(n)).red(),t.green(),t.blue(),(i="")!=e.bordersize&&"0"!=e.bordersize&&"0px"!==e.bordersize&&(i+="border:"+e.bordersize+" solid "+e.bordercolor+";"),"0"!=e.borderradius&&"0px"!==e.borderradius&&(i+="-webkit-border-radius:"+e.borderradius+";-moz-border-radius:"+e.borderradius+";border-radius:"+e.borderradius+";",("50%"===e.borderradius||100<parseFloat(e.borderradius))&&(i+="-webkit-mask-image: -webkit-radial-gradient(circle, white, black);")),"glow"===e.style?i+="-moz-box-shadow: 0 0 "+s+" "+a+";-webkit-box-shadow: 0 0 "+s+" "+a+";box-shadow: 0 0 "+s+" "+a+";":"dropshadow"===e.style&&(i+="-moz-box-shadow: "+s+" "+s+" "+r+" "+a+";-webkit-box-shadow: "+s+" "+s+" "+r+" "+a+";box-shadow: "+s+" "+s+" "+r+" "+a+";"),""!==i&&(o.style+=i),o.class+=" imageframe-"+e.style+" imageframe-cid"+this.model.get("cid"),"bottomshadow"===e.style&&(o.class+=" element-bottomshadow"),"liftup"!==e.hover_type&&("left"===e.align?o.style+="margin-right:25px;float:left;":"right"===e.align&&(o.style+="margin-left:25px;float:right;"),o.class+=" hover-type-"+e.hover_type),""!==e.max_width&&(o.style+="max-width:"+e.max_width),void 0!==e.class&&""!==e.class&&(o.class+=" "+e.class),void 0!==e.id&&""!==e.id&&(o.id=e.id),o=_.fusionAnimations(e,o)},buildLinktAttr:function(e){var t={};return"yes"===e.lightbox?(""!==e.lightbox_image&&(e.pic_link=e.lightbox_image),t.href=e.pic_link,t.class="fusion-lightbox imageframe-shortcode-link",""!==e.gallery_id||"0"===e.gallery_id?t["data-rel"]="iLightbox["+e.gallery_id+"]":t["data-rel"]="iLightbox[image-"+this.model.get("cid")+"]"):e.link&&(t.class="fusion-no-lightbox",t.href=e.link,t.target=e.linktarget,"_blank"===e.linktarget&&(t.rel="noopener noreferrer")),t},buildContentAttr:function(e){var t={},i="";return e.image_id="",e.element_content?((i=e.element_content.match(/(src=["\'](.*?)["\'])/))&&1<i.length?i=i[2]:-1===e.element_content.indexOf("<img")&&""!==e.element_content&&(i=e.element_content),void 0!==i&&i&&""!==i?(i=i.replace("&#215;","x"),t.src=i,e.pic_link=i,"no"===e.lightbox&&e.link,t.title="",t.alt=e.alt,t):void 0):"No Image Set"},buildBorderRadius:function(e){var t="";return e.borderradius&&""!==e.borderradius&&0!==e.borderradius&&"0"!==e.borderradius&&"0px"!==e.borderradius&&(t+="-webkit-border-radius:{"+e.borderradius+"};-moz-border-radius:{"+e.borderradius+"};border-radius:{"+e.borderradius+"};"),t},buildImgStyles:function(e){var t="";return""!==e.borderRadius&&(t=' style="'+e.borderRadius+'"'),t},buildElementContent:function(e){var t,i="img-responsive";e.values.element_content="<img "+_.fusionGetAttributes(e.contentAttr)+" />",""!==e.values.image_id&&(i+=" wp-image-"+e.values.image_id),(t=e.values.element_content.match(/(class=["\'](.*?)["\'])/))&&1<t.length&&(i+=" "+t[2]),i='class="'+i+'"',t&&void 0!==t[0]?e.values.element_content=e.values.element_content.replace(t[0],i+e.imgStyles):e.values.element_content=e.values.element_content.replace("/>",i+e.imgStyles+"/>"),""!==e.values.lightbox_image&&(e.values.pic_link=e.values.lightbox_image),"yes"!==e.values.lightbox&&!e.values.link||(e.values.element_content="<a "+_.fusionGetAttributes(e.linkAttr)+">"+e.values.element_content+"</a>")},buildLiftupClasses:function(e){var t="",i=this.model.get("cid");return"liftup"!==e.values.hover_type&&("bottomshadow"!==e.values.style_type||"none"!==e.values.hover_type&&"zoomin"!==e.values.hover_type&&"zoomout"!==e.values.hover_type)||("liftup"===e.values.hover_type?(t="imageframe-liftup","left"===e.values.align?t+=" fusion-imageframe-liftup-left":"right"===e.values.align&&(t+=" fusion-imageframe-liftup-right"),e.borderRadius&&(t+=" imageframe-cid"+i)):t+="fusion-image-frame-bottomshadow image-frame-shadow-cid"+i,t+=" imageframe-cid"+i),t},buildLiftupStyles:function(e){var t,i="<style>",o=this.model.get("cid");return e.borderRadius&&(i+=".imageframe-liftup.imageframe-cid"+o+":before{"+e.borderRadius+"}"),""!==e.values.max_width&&(i+=".imageframe-cid"+o+"{max-width:"+e.values.max_width+"}"),"liftup"!==e.values.hover_type&&("bottomshadow"!==e.values.style_type||"none"!==e.values.hover_type&&"zoomin"!==e.values.hover_type&&"zoomout"!==e.values.hover_type)||(t=0===e.values.stylecolor.indexOf("#")?jQuery.Color(e.values.stylecolor).alpha(.4).toRgbaString():jQuery.Color(e.values.stylecolor).toRgbaString(),"liftup"===e.values.hover_type?"bottomshadow"===e.values.style_type&&(i+=".element-bottomshadow.imageframe-cid"+o+":before, .element-bottomshadow.imageframe-cid"+o+":after{",i+="-webkit-box-shadow: 0 17px 10px "+t+";box-shadow: 0 17px 10px "+t+";}"):(i+=".imageframe-cid"+o+"{display: inline-block}",i+=".element-bottomshadow.imageframe-cid"+o+":before, .element-bottomshadow.imageframe-cid"+o+":after{",i+="-webkit-box-shadow: 0 17px 10px "+t+";box-shadow: 0 17px 10px "+t+";}")),i+="</style>"}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.layerslider=FusionPageBuilder.ElementView.extend({afterPatch:function(){window.FusionApp.injectScripts(this.model.get("cid"))},filterTemplateAtts:function(e){return void 0!==e.markup&&void 0!==e.markup.output&&(e.markup.output=window.FusionApp.removeScripts(e.markup.output,this.model.get("cid"))),e}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.rev_slider=FusionPageBuilder.ElementView.extend({filterRenderContent:function(e){return this.filterDuplicates(this.disableInlineScripts(e))},filterOutput:function(e){return this.filterDuplicates(e)},filterDuplicates:function(e){return jQuery("#fb-preview").contents().find('rs-module-wrap[data-alias="'+this.model.get("params").alias+'"]').length?'<div class="fusion-builder-placeholder">'+window.fusionBuilderText.duplicate_slider_revolution+"</div>":e},disableInlineScripts:function(e){return-1!==e.indexOf("rev_slider_error")&&-1!==e.indexOf("<script")&&-1!==e.indexOf("<\/script>")&&(e=e.replace("<script","\x3c!--<script").replace("<\/script>","<\/script>--\x3e")),e}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_person=FusionPageBuilder.ElementView.extend({beforePatch:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el).find('[data-toggle="tooltip"]');e.length&&"function"==typeof e.tooltip&&e.tooltip("destroy")},afterPatch:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el).find('[data-toggle="tooltip"]');setTimeout(function(){e.length&&"function"==typeof e.tooltip&&e.tooltip({container:"body"})},150),this._refreshJs()},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.imageAttr=this.buildImageAttr(e.values),t.hrefAttr=this.buildHrefAttr(e.values),t.wrapperAttr=this.buildWrapperAttr(e.values),t.imageContainerAttr=this.buildImageContainerAttr(e.values),t.styles=this.buildStyles(e.values),t.socialAttr=this.buildSocialAttr(e.values),t.descAttr=this.buildDescAttr(e.values),t.socialNetworks=this.getSocialNetworks(e.values),t.icons=_.fusionBuildSocialLinks(t.socialNetworks,this.personIconAttr,e.values),t.cid=this.model.get("cid"),t.values=e.values,t},validateValues:function(e){e.pic_style_blur=_.fusionValidateAttrValue(e.pic_style_blur,"px"),e.pic_bordersize=_.fusionValidateAttrValue(e.pic_bordersize,"px"),e.pic_borderradius=_.fusionValidateAttrValue(e.pic_borderradius,"px"),e.social_icon_boxed_radius=_.fusionValidateAttrValue(e.social_icon_boxed_radius,"px"),e.social_icon_font_size=_.fusionValidateAttrValue(e.social_icon_font_size,"px"),e.social_icon_padding=_.fusionValidateAttrValue(e.social_icon_padding,"px"),"round"===e.pic_borderradius&&(e.pic_borderradius="50%"),this.stylecolor="#"===e.pic_style_color.charAt(0)?jQuery.Color(e.pic_style_color).alpha(.3).toRgbaString():jQuery.Color(e.pic_style_color).toRgbaString()},buildAttr:function(e){var t=this.model.get("cid"),i=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-person fusion-person-"+t+" person fusion-person-"+e.content_alignment+" fusion-person-icon-"+e.icon_position});return""!==e.class&&(i.class+=" "+e.class),""!==e.id&&(i.id=e.id),i},buildImageAttr:function(e){var t={class:"person-img img-responsive",style:""};return t.src=e.picture,t.alt=e.name,t},buildHrefAttr:function(e){var t={href:e.pic_link};return"yes"===e.lightbox?(t.class="lightbox-shortcode",t.href=e.picture):t.target=e.linktarget,t},buildStyles:function(e){var t="";return"bottomshadow"===e.pic_style&&(t+=".fusion-person-"+this.model.get("cid")+" .element-bottomshadow:before, .fusion-person-"+this.model.get("cid")+" .element-bottomshadow:after{",t+="-webkit-box-shadow: 0 17px 10px "+this.stylecolor+";box-shadow: 0 17px 10px "+this.stylecolor+";}"),"liftup"===e.hover_type&&""!==e.pic_borderradius&&e.pic_borderradius&&(t+=".fusion-person-"+this.model.get("cid")+" .imageframe-liftup:before{",t+="-webkit-border-radius:"+e.pic_borderradius+";-moz-border-radius:"+e.pic_borderradius+";border-radius:"+e.pic_borderradius+";"),""!==t&&(t="<style>"+t+"</style>"),t},buildWrapperAttr:function(e){var t={class:"person-shortcode-image-wrapper"};return"liftup"===e.hover_type&&(t.class+=" imageframe-liftup"),t},buildImageContainerAttr:function(e){var t={class:"person-image-container",style:""},i="",o=e.pic_style_blur,n=parseInt(o,10)+4+"px";return""!==e.hover_type&&"liftup"!==e.hover_type&&(t.class+=" hover-type-"+e.hover_type),"round"===e.pic_borderradius&&(e.pic_borderradius="50%"),"0px"!==e.pic_borderradius&&""!==e.pic_borderradius&&"bottomshadow"===e.pic_style&&(e.pic_style="none"),"glow"===e.pic_style?t.class+=" glow":"dropshadow"===e.pic_style?t.class+=" dropshadow":"bottomshadow"===e.pic_style&&(t.class+=" element-bottomshadow"),"glow"===e.pic_style?i+="-webkit-box-shadow: 0 0 "+o+" "+this.stylecolor+";box-shadow: 0 0 "+o+" "+this.stylecolor+";":"dropshadow"===e.pic_style&&(i+="-webkit-box-shadow: "+o+" "+o+" "+n+" "+this.stylecolor+";box-shadow: "+o+" "+o+" "+n+" "+this.stylecolor+";"),""!==e.pic_borderradius&&(i+="-webkit-border-radius:"+e.pic_borderradius+";-moz-border-radius:"+e.pic_borderradius+";border-radius:"+e.pic_borderradius+"; overflow:hidden;"),""!==e.pic_bordersize&&(i+="border:"+e.pic_bordersize+" solid "+e.pic_bordercolor+";"),t.style+=i,t},buildSocialAttr:function(e){var t={class:"fusion-social-networks"};return"yes"===e.social_icon_boxed&&(t.class+=" boxed-icons"),t},buildDescAttr:function(e){var t={class:"person-desc"};return e.background_color&&"transparent"!==e.background_color&&0!==jQuery.Color(e.background_color).alpha()&&(t.style="background-color:"+e.background_color+";padding:40px;margin-top:0;"),t},personIconAttr:function(e,t){var i={class:"fusion-social-network-icon fusion-tooltip fusion-"+e.social_network+" fusion-icon-"+e.social_network},o="",n="",a="";return i["aria-label"]="fusion-"+e.social_network,o=e.social_link,n=t.target,"mail"===e.social_network&&void 0!==e.social_link&&(o="mailto:"+e.social_link.replace("mailto:",""),n="_self"),i.href=o,"_blank"===(i.target=n)&&(i.rel="noopener noreferrer"),(i.style="")!==e.icon_color&&(i.style="color:"+e.icon_color+";"),"yes"===t.social_icon_boxed&&""!==e.box_color&&(i.style+="background-color:"+e.box_color+";border-color:"+e.box_color+";"),("yes"===t.social_icon_boxed&&""!==t.social_icon_boxed_radius||"0"===t.social_icon_boxed_radius)&&("round"===t.social_icon_boxed_radius&&(t.social_icon_boxed_radius="50%"),i.style+="border-radius:"+t.social_icon_boxed_radius+";"),""!==t.social_icon_font_size&&(i.style+="font-size:"+t.social_icon_font_size+";"),"yes"===t.social_icon_boxed&&""!==t.social_icon_padding&&(i.style+="padding:"+t.social_icon_padding+";"),i["data-placement"]=t.social_icon_tooltip,a="youtube"===(a=e.social_network).toLowerCase()?"YouTube":a,i["data-title"]=_.fusionUcFirst(a),i.title=_.fusionUcFirst(a),"none"!==t.social_icon_tooltip&&(i["data-toggle"]="tooltip"),i},getSocialNetworks:function(e){var t=_.fusionGetSocialNetworks(e);return t=_.fusionSortSocialNetworks(t,e)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_vimeo=FusionPageBuilder.ElementView.extend({afterPatch:function(){this._refreshJs()},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.attrSrc=this.buildAttrSrc(e.values),t.values=e.values,t},validateValues:function(e){var t=e.id.match(/(?:https?:\/\/)?(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/);t&&2<t.length&&(e.id=t[3]),e.height=_.fusionValidateAttrValue(e.height,""),e.width=_.fusionValidateAttrValue(e.width,"")},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-video fusion-vimeo",style:""});return"yes"===e.center?t.class+=" center-video":t.style+="max-width:"+e.width+"px;max-height:"+e.height+"px;",""!==e.alignment&&(t.class+=" fusion-align"+e.alignment,t.style+=" width:100%"),"true"!=e.autoplay&&"yes"!==e.autoplay||(t["data-autoplay"]="1"),""!==e.class&&(t.class+=" "+e.class),""!==e.css_id&&(t.id=e.css_id),t},buildAttrSrc:function(e){var t={class:"video-shortcode"};return"yes"===e.center&&(t.style="max-width:"+e.width+"px;max-height:"+e.height+"px;"),t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_postslider=FusionPageBuilder.ElementView.extend({flexsliderVars:{},onRender:function(){this.afterPatch()},beforePatch:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find(".fusion-post-slider.fusion-flexslider"));void 0!==e.data("flexslider")&&(this.flexsliderVars=e.data("flexslider").vars,e.flexslider("destroy"))},afterPatch:function(){var e=this,t=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find(".fusion-post-slider.fusion-flexslider")),i="0"!==FusionApp.settings.slideshow_smooth_height;_.isEmpty(e.flexsliderVars)||(e.flexsliderVars.controlNav="attachments"!==e.model.attributes.params.layout||"thumbnails"),e.flexsliderVars.smoothHeight=i,0<t.length&&setTimeout(function(){void 0!==t.flexslider&&t.flexslider(e.flexsliderVars)},300)},filterTemplateAtts:function(e){var t={};return t.sliderAttr=this.buildSliderAttr(e.values),void 0!==e.query_data&&(t.datasets=this.buildDatasetAttr(e.values,e.query_data)),t.thumbAttr=this.buildThumbAttr(e.values),t.cid=this.model.get("cid"),t.query_data=e.query_data,t.values=e.values,t},buildSliderAttr:function(e){var t={class:"fusion-flexslider fusion-post-slider fusion-flexslider-loading flexslider-"+e.layout};return t=_.fusionVisibilityAtts(e.hide_on_mobile,t),"yes"===e.lightbox&&"attachments"===e.layout&&(t.class+=" flexslider-lightbox"),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildDatasetAttr:function(i,e){var o=this,n={};return _.each(e.datasets,function(e,t){n[t]={},n[t].link_attributes=o.buildLinkAttr(e,i.layout),n[t].image_attributes=o.buildImageAttr(e),"attachments"===i.layout?n[t].li_attributes=o.buildListElementAttr(e):n[t].title_link_attributes=o.buildTitleLinkAttr(e)}),n},buildLinkAttr:function(e,t){var i={};return"attachments"===t?(i.href=e.image,i["data-title"]=e.title,i["data-caption"]=e.caption,i.title=e.title,i["data-rel"]="prettyPhoto[flex_"+this.model.get("cid")+"]"):"posts"!==t&&"posts-with-excerpt"!==t||(i.href=e.permalink,i["data-title"]=e.title_attribute),i},buildImageAttr:function(e){var t={};return t.src=e.image,t.alt=e.alt,t},buildListElementAttr:function(e){var t={};return t["data-thumb"]=e.thumb,t},buildTitleLinkAttr:function(e){var t={};return t.href=e.permalink,t},buildThumbAttr:function(e){var t={class:"flexslider"};return"attachments"===e.layout&&(t.class+=" fat"),t}})}),_.extend(FusionPageBuilder.Callback.prototype,{fusion_post_slider_query:function(e,t,i,o,n,a,s,r){r.changeParam(e,t),i.params.post_id="","attachments"===i.params.layout&&(i.params.post_id=FusionApp.data.postDetails.post_id),jQuery.ajax({url:fusionAppConfig.ajaxurl,type:"post",dataType:"json",data:{action:"get_fusion_post_slider",params:i.params},success:function(e){s.set("query_data",e),r.reRender()}})}});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_login=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){return this.extras=e.extras,e.values.action="login",e.loginShortCodeAttr=this.buildLoginShortCodeAttr(e.values),e.loginShortcodeFormAttr=this.buildLoginShortcodeFormAttr(e.values),e.loginShortcodeButton=this.buildLoginShortcodeButtonAttr(e.values),e.loggedIn=!0,e.styles=this.buildLoginStyle(e.values),e.cid=this.model.get("cid"),e},buildLoginShortCodeAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-login-box fusion-login-box-cid"+this.model.get("cid")+" fusion-login-box-"+e.action+" fusion-login-align-"+e.text_align+" fusion-login-field-layout-"+e.form_field_layout});return""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildLoginShortcodeFormAttr:function(e){var t={class:"fusion-login-form"};return""!==e.form_background_color&&(t.style="background-color:"+e.form_background_color+";"),t.name=e.action+"form",t.id=e.action+"form",t.method="post",t.action="",t},buildLoginShortcodeButtonAttr:function(e){var t={class:"fusion-login-button fusion-button button-default button-"+this.extras.button_size};return"yes"!==e.button_fullwidth&&(t.class+=" fusion-login-button-no-fullwidth"),t.type="submit",t.name="wp-submit",t},buildLoginStyle:function(e){var t="",i=this.model.get("cid");return""!==e.heading_color&&(t+=".fusion-login-box-cid"+i+" .fusion-login-heading{color:"+e.heading_color+";}"),""!==e.caption_color&&(t+=".fusion-login-box-cid"+i+" .fusion-login-caption{color:"+e.caption_color+";}"),""!==e.link_color&&(t+=".fusion-login-box-cid"+i+" a{color:"+e.link_color+";}"),""!==t&&(t='<style type="text/css">'+t+"</style>"),e.label_class="yes"===e.show_labels?"fusion-login-label":"fusion-hidden-content",t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_register=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){return this.extras=e.extras,e.values.action="register",e.loginShortCodeAttr=this.buildLoginShortCodeAttr(e.values),e.loginShortcodeFormAttr=this.buildLoginShortcodeFormAttr(e.values),e.loginShortcodeButton=this.buildLoginShortcodeButtonAttr(e.values),e.loggedIn=!0,e.styles=this.buildRegisterStyles(e.values),e.cid=this.model.get("cid"),e},buildLoginShortCodeAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-login-box fusion-login-box-cid"+this.model.get("cid")+" fusion-login-box-"+e.action+" fusion-login-align-"+e.text_align+" fusion-login-field-layout-"+e.form_field_layout});return""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildLoginShortcodeFormAttr:function(e){var t={class:"fusion-login-form"};return""!==e.form_background_color&&(t.style="background-color:"+e.form_background_color+";"),t.name=e.action+"form",t.id=e.action+"form",t.method="post",t.action="",t},buildLoginShortcodeButtonAttr:function(e){var t={class:"fusion-login-button fusion-button button-default button-"+this.extras.button_size};return"yes"!==e.button_fullwidth&&(t.class+=" fusion-login-button-no-fullwidth"),t.type="submit",t.name="wp-submit",t},buildRegisterStyles:function(e){var t="",i=this.model.get("cid");return""!==e.heading_color&&(t+=".fusion-login-box-cid"+i+" .fusion-login-heading{color:"+e.heading_color+";}"),""!==e.caption_color&&(t+=".fusion-login-box-cid"+i+" .fusion-login-caption{color:"+e.caption_color+";}"),""!==e.link_color&&(t+=".fusion-login-box-cid"+i+" a{color:"+e.link_color+";}"),""!==t&&(t='<style type="text/css">'+t+"</style>"),e.label_class="yes"===e.show_labels?"fusion-login-label":"fusion-hidden-content",t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_lost_password=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){return this.extras=e.extras,e.values.action="lostpassword",e.loginShortCodeAttr=this.buildLoginShortCodeAttr(e.values),e.loginShortcodeFormAttr=this.buildLoginShortcodeFormAttr(e.values),e.loginShortcodeButton=this.buildLoginShortcodeButtonAttr(e.values),e.loggedIn=!0,e.styles=this.buildForgotPassStyles(e.values),e.cid=this.model.get("cid"),e},buildLoginShortCodeAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-login-box fusion-login-box-cid"+this.model.get("cid")+" fusion-login-box-"+e.action+" fusion-login-align-"+e.text_align});return""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildLoginShortcodeFormAttr:function(e){var t={class:"fusion-login-form"};return""!==e.form_background_color&&(t.style="background-color:"+e.form_background_color+";"),t.name=e.action+"form",t.id=e.action+"form",t.method="post",t.action="",t},buildLoginShortcodeButtonAttr:function(e){var t={class:"fusion-login-button fusion-button button-default button-"+this.extras.button_size};return"yes"!==e.button_fullwidth&&(t.class+=" fusion-login-button-no-fullwidth"),t.type="submit",t.name="wp-submit",t},buildForgotPassStyles:function(e){var t="",i=this.model.get("cid");return""!==e.heading_color&&(t+=".fusion-login-box-cid"+i+" .fusion-login-heading{color:"+e.heading_color+";}"),""!==e.caption_color&&(t+=".fusion-login-box-cid"+i+" .fusion-login-caption{color:"+e.caption_color+";}"),""!==e.link_color&&(t+=".fusion-login-box-cid"+i+" a{color:"+e.link_color+";}"),""!==t&&(t='<style type="text/css">'+t+"</style>"),e.label_class="yes"===e.show_labels?"fusion-login-label":"fusion-hidden-content",t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_featured_products_slider=FusionPageBuilder.ElementView.extend({afterPatch:function(){this._refreshJs()},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.wooFeaturedProductsSliderShortcode={},t.wooFeaturedProductsSliderShortcodeCarousel={},t.product_list=!1,t.placeholder=!1,void 0!==e.query_data&&void 0!==e.query_data.products?(t.wooFeaturedProductsSliderShortcode=this.buildWooFeaturedProductsSliderShortcodeAttr(e.values),t.wooFeaturedProductsSliderShortcodeCarousel=this.buildWooFeaturedProductsSliderShortcodeCarousel(e.values),t.product_list=this.buildProductList(e.values,e.extras,e.query_data)):void 0!==e.query_data&&void 0!==e.query_data.placeholder&&(t.placeholder=e.query_data.placeholder),t.show_nav=e.values.show_nav,t},validateValues:function(e){e.column_spacing=_.fusionValidateAttrValue(e.column_spacing,"")},buildWooFeaturedProductsSliderShortcodeAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-woo-featured-products-slider fusion-woo-slider"});return""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildWooFeaturedProductsSliderShortcodeCarousel:function(e){var t={class:"fusion-carousel"};return"title_below_image"===e.carousel_layout?(t.class+=" fusion-carousel-title-below-image",t["data-metacontent"]="yes"):t.class+=" fusion-carousel-title-on-rollover",t["data-autoplay"]=e.autoplay,t["data-columns"]=e.columns,t["data-itemmargin"]=e.column_spacing,t["data-itemwidth"]=180,t["data-touchscroll"]=e.mouse_scroll,t["data-imagesize"]=e.picture_size,t["data-scrollitems"]=e.scroll_items,t},buildProductList:function(n,e,a){var s="yes"===n.show_cats?"enable":"disable",r="yes"===n.show_price,l="yes"===n.show_buttons,u="fusion-"+e.design_class+"-product-image-wrapper",d="fixed"===n.picture_size?"shop_single":"full",c="";return _.each(a.products,function(e){var t=e.image_data,i=jQuery.inArray(e.id,a.items_in_cart),o="";t.image_size=d,"title_on_rollover"===n.carousel_layout?(t.image_size=d,t.display_woo_price=r,t.display_woo_buttons=l,t.display_post_categories=s,t.display_post_title="enable",t.display_rollover="yes",o=_.fusionFeaturedImage(t)):(t.image_size=d,t.display_woo_price=!1,t.display_woo_buttons=l,t.display_post_categories="disable",t.display_post_title="disable",(t.display_rollover="yes")===n.show_buttons||(t.display_rollover="no"),o=_.fusionFeaturedImage(t),o+='<h4 class="fusion-carousel-title">',o+='<a href="'+e.permalink+'" target="_self">'+e.title+"</a>",o+="</h4>",o+='<div class="fusion-carousel-meta">',!0!==s&&"enable"!=s||(o+=e.terms),1!=r&&"enable"!==r||(o+='<div class="fusion-carousel-price">'+e.price+"</div>"),o+="</div>"),c+=-1!==i?'<li class="fusion-carousel-item"><div class="'+u+' fusion-item-in-cart"><div class="fusion-carousel-item-wrapper">'+o+"</div></div></li>":'<li class="fusion-carousel-item"><div class="'+u+'"><div class="fusion-carousel-item-wrapper">'+o+"</div></div></li>"}),c}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_highlight=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return t.attr=this.buildAttr(e.values),t.output=e.values.element_content,t},buildAttr:function(e){var t={class:"fusion-highlight"},i=100*jQuery.Color(e.color).lightness();return t.class+=50<i?" light":" dark",""!==e.class&&(t.class+=" "+e.class),"yes"===e.rounded&&(t.class+=" rounded"),""!==e.id&&(t.id=e.id),"black"===e.color?t.class+=" highlight2":t.class+=" highlight1",t.style="background-color:"+e.color+";",t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_syntax_highlighter=FusionPageBuilder.ElementView.extend({onRender:function(){var e=this;setTimeout(function(){e.fusionSyntaxHighlighter(e.$el.find("textarea")[0])},500)},beforePatch:function(){this.syntaxHighlighter.toTextArea(),this.$el.find(".CodeMirror").remove()},afterPatch:function(){jQuery(this.$el.find("textarea")[0]).val(this.output),this.fusionSyntaxHighlighter(this.$el.find("textarea")[0])},fusionSyntaxHighlighter:function(e){var t,i;(i={}).readOnly=void 0!==jQuery(e).attr("data-readonly")&&jQuery(e).attr("data-readonly"),i.lineNumbers=void 0!==jQuery(e).attr("data-linenumbers")&&jQuery(e).attr("data-linenumbers"),i.lineWrapping=void 0!==jQuery(e).attr("data-linewrapping")&&jQuery(e).attr("data-linewrapping"),i.theme=void 0!==jQuery(e).attr("data-theme")?jQuery(e).attr("data-theme"):"default",i.mode=void 0!==jQuery(e).attr("data-mode")?jQuery(e).attr("data-mode"):"text/html",t=wp.CodeMirror.fromTextArea(e,i),jQuery(e).addClass("code-mirror-initialized"),jQuery(e).data("code-mirror",t),t.setSize("100%","auto"),jQuery(document).trigger("resize"),jQuery(e).closest(".fusion-syntax-highlighter-container").css("opacity","1"),this.syntaxHighlighter=t},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),this.extras=e.extras,t.syntaxAttr=this.buildSyntaxAttr(e.values),t.textareaAttr=this.buildTextareaAttr(e.values),t.syntaxHighlighterCopyCodeTitleAttr=this.buildSyntaxHighlighterCopyCodeTitleAttr(e.values),t.styles=this.buildStyles(e.values),t.cid=this.model.get("cid"),t.output=e.values.element_content,this.output=e.values.element_content,t.wp_enqueue_code_editor=e.extras.wp_enqueue_code_editor,t.copy_to_clipboard=e.values.copy_to_clipboard,t.copy_to_clipboard_text=e.values.copy_to_clipboard_text,t},validateValues:function(e){e.margin_top=_.fusionValidateAttrValue(e.margin_top,"px"),e.margin_left=_.fusionValidateAttrValue(e.margin_left,"px"),e.margin_bottom=_.fusionValidateAttrValue(e.margin_bottom,"px"),e.margin_right=_.fusionValidateAttrValue(e.margin_right,"px"),e.border_size=_.fusionValidateAttrValue(e.border_size,"px"),e.font_size=_.fusionValidateAttrValue(e.font_size,"px"),""===e.theme&&(e.background_color=this.extras.syntax_highlighter_background_color),void 0!==e.element_content&&""!==e.element_content&&(e.element_content&&FusionPageBuilderApp.base64Encode(FusionPageBuilderApp.base64Decode(e.element_content))===e.element_content&&(e.element_content=FusionPageBuilderApp.base64Decode(e.element_content)),e.element_content=e.element_content.replace(/<br \/>/g,""))},buildSyntaxAttr:function(e){var t,i=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-syntax-highlighter-container",style:""});return i.class+=" fusion-syntax-highlighter-cid"+this.model.get("cid"),t="default"===e.theme||"elegant"===e.theme?"light":"dark",i.class+=" fusion-syntax-highlighter-theme-"+t,void 0!==e.class&&""!==e.class&&(i.class+=" "+e.class),void 0!==e.id&&""!==e.id&&(i.id=e.id),void 0!==e.margin_top&&""!==e.margin_top&&(i.style+="margin-top:"+e.margin_top+";"),void 0!==e.margin_left&&""!==e.margin_left&&(i.style+="margin-left:"+e.margin_left+";"),void 0!==e.margin_bottom&&""!==e.margin_bottom&&(i.style+="margin-bottom:"+e.margin_bottom+";"),void 0!==e.margin_right&&""!==e.margin_right&&(i.style+="margin-right:"+e.margin_right+";"),void 0!==e.font_size&&""!==e.font_size&&(i.style+="font-size:"+e.font_size+";"),void 0!==e.border_size&&""!==e.border_size&&(i.style+="border-width:"+e.border_size+";",""!==e.border_style&&(i.style+="border-style:"+e.border_style+";"),""!==e.border_color&&(i.style+="border-color:"+e.border_color+";")),this.extras.wp_enqueue_code_editor||""===e.background_color||(i.style+="background-color:"+e.background_color+";",i.style+="padding: 0 1em"),i},buildTextareaAttr:function(e){var t,i={class:"fusion-syntax-highlighter-textarea",id:"fusion_syntax_highlighter_"+this.model.get("cid"),style:""},o={readOnly:"nocursor",lineNumbers:"yes"===e.line_numbers||"",lineWrapping:"break"===e.line_wrapping||"",theme:e.theme};return""!==e.language&&(t="json"===e.language||"xml"===e.language?"application":"text",o.mode=t+"/"+e.language),_.each(o,function(e,t){i["data-"+t]=e}),i},buildSyntaxHighlighterCopyCodeTitleAttr:function(e){var t={class:"syntax-highlighter-copy-code-title",style:""};return t["data-id"]="fusion_syntax_highlighter_"+this.model.get("cid"),e.font_size&&(t.style+="font-size:"+e.font_size+";"),t},buildStyles:function(e){var t='<style type="text/css" scopped="scopped">',i=this.model.get("cid");return e.background_color&&""!==e.background_color&&(t+=".fusion-syntax-highlighter-cid"+i+" > .CodeMirror, .fusion-syntax-highlighter-cid"+i+" > .CodeMirror .CodeMirror-gutters { background-color:"+e.background_color+";}"),"no"!==e.line_numbers&&(t+=".fusion-syntax-highlighter-cid"+i+" > .CodeMirror .CodeMirror-gutters { background-color: "+e.line_number_background_color+"; }",t+=".fusion-syntax-highlighter-cid"+i+" > .CodeMirror .CodeMirror-linenumber { color: "+e.line_number_text_color+"; }"),t+="</style>"}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_tabs=FusionPageBuilder.ParentElementView.extend({onRender:function(){var e=this;jQuery(window).on("load",function(){e._refreshJs()})},afterPatch:function(){var t=this,e=window.FusionPageBuilderViewManager.getChildViews(this.model.get("cid"));this.appendChildren(".nav-tabs"),_.each(e,function(e){t.appendContents(e)}),this._refreshJs()},refreshJs:function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-element-render-fusion_tabs",this.model.attributes.cid),this.checkActiveTab()},getActiveTab:function(){var t=this,e=window.FusionPageBuilderViewManager.getChildViews(this.model.get("cid"));_.each(e,function(e){e.$el.hasClass("active")&&t.model.set("activeTab",e.model.get("cid"))})},checkActiveTab:function(){var t=this,e=window.FusionPageBuilderViewManager.getChildViews(this.model.get("cid"));void 0!==this.model.get("activeTab")?(_.each(e,function(e){e.checkActive()}),t.$el.find(".fusion-extra-"+this.model.get("activeTab")).addClass("active in")):_.each(e,function(e){e.isFirstChild()&&t.$el.find(".fusion-extra-"+e.model.get("cid")).addClass("active in")})},filterTemplateAtts:function(e){return e.tabsShortcode=this.buildTabsShortcodeAttrs(e.values),e.styleTag=this.buildStyleTag(e.values),e.justifiedClass=this.setJustifiedClass(e.values),this.model.set("first",!0),e.cid=this.model.get("cid"),e},buildTabsShortcodeAttrs:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-tabs fusion-tabs-cid"+this.model.get("cid")+" "+e.design});return"yes"!==e.justified&&"vertical"!==e.layout&&(t.class+=" nav-not-justified"),""!==e.icon_position&&(t.class+=" icon-position-"+e.icon_position),""!==e.class&&(t.class+=" "+e.class),t.class+="vertical"===e.layout?" vertical-tabs":" horizontal-tabs",""!==e.id&&(t.id=e.id),t},buildStyleTag:function(e){var t=this.model.get("cid"),i=".fusion-tabs.fusion-tabs-cid"+t+" .nav-tabs li a.tab-link{border-top-color:"+e.inactivecolor+";background-color:"+e.inactivecolor+";}";return"clean"!==e.design?(i+=".fusion-tabs.fusion-tabs-cid"+t+" .nav-tabs{background-color:"+e.backgroundcolor+";}",i+=".fusion-tabs.fusion-tabs-cid"+t+" .nav-tabs li.active a.tab-link,.fusion-tabs.fusion-tabs-cid"+t+" .nav-tabs li.active a.tab-link:hover,.fusion-tabs.fusion-tabs-cid"+t+" .nav-tabs li.active a.tab-link:focus{border-right-color:"+e.backgroundcolor+";}"):i="#wrapper .fusion-tabs.fusion-tabs-cid"+t+".clean .nav-tabs li a.tab-link{border-color:"+e.bordercolor+";}.fusion-tabs.fusion-tabs-cid"+t+" .nav-tabs li a.tab-link{background-color:"+e.inactivecolor+";}",i+=".fusion-tabs.fusion-tabs-cid"+t+" .nav-tabs li.active a.tab-link,.fusion-tabs.fusion-tabs-cid"+t+" .nav-tabs li.active a.tab-link:hover,.fusion-tabs.fusion-tabs-cid"+t+" .nav-tabs li.active a.tab-link:focus{background-color:"+e.backgroundcolor+";}",i+=".fusion-tabs.fusion-tabs-cid"+t+" .nav-tabs li a.tab-link:hover{background-color:"+e.backgroundcolor+";border-top-color:"+e.backgroundcolor+";}",i+=".fusion-tabs.fusion-tabs-cid"+t+" .tab-pane{background-color:"+e.backgroundcolor+";}",i='<style type="text/css">'+(i+=".fusion-tabs.fusion-tabs-cid"+t+" .nav,.fusion-tabs.fusion-tabs-cid"+t+" .nav-tabs,.fusion-tabs.fusion-tabs-cid"+t+" .tab-content .tab-pane{border-color:"+e.bordercolor+";}")+"</style>"},setJustifiedClass:function(e){var t="";return"yes"===e.justified&&"vertical"!==e.layout&&(t=" nav-justified"),t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_tab=FusionPageBuilder.ChildElementView.extend({onRender:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors))},beforePatch:function(){window.FusionPageBuilderViewManager.getView(this.model.get("parent")).getActiveTab()},afterPatch:function(){var e=window.FusionPageBuilderViewManager.getView(this.model.get("parent"));this.updateExtraContents(),void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),this.refreshJs(),e._refreshJs()},filterTemplateAtts:function(e){return e.tabsShortcodeTab=this.buildTabsShortcodeTabAttr(e.values),e.tabsShortcodeIcon=this.buildTabsShortcodeIconAttr(e),e.tabsShortcodeLink=this.buildTabsShortcodeLinkAttr(e.values),e.justifiedClass=this.setJustifiedClass(e.values),e.cid=this.model.get("cid"),e.parent=this.model.get("parent"),e.parentValues=this.getParentValues(e),e.output=e.values.element_content,e},checkActive:function(){var e=window.FusionPageBuilderViewManager.getView(this.model.get("parent"));void 0!==e.model.get("activeTab")&&(e.model.get("activeTab")===this.model.get("cid")?this.$el.addClass("active"):this.$el.removeClass("active"))},buildTabsShortcodeTabAttr:function(){var e;return(e={class:"tab-pane fade fusion-extra-"+this.model.get("cid")}).id="tabcid"+this.model.get("cid"),e},buildTabsShortcodeIconAttr:function(e){var t=e.parentValues,i=e.values,o={class:"fontawesome-icon "+_.fusionFontAwesome(i.icon)};return t.icon_size&&(o.style="font-size: "+t.icon_size+"px"),o},buildTabsShortcodeLinkAttr:function(e){var t={class:"tab-link"},i="string"==typeof e.title?e.title.replace(/\s+/g,"").toLowerCase():"";return t["data-toggle"]="tab",t.id="fusion-tab-"+i,t.href="#tabcid"+this.model.get("cid"),t},setJustifiedClass:function(e){var t="";return"yes"===e.justified&&"vertical"!==e.layout&&(t=" nav-justified"),t},getParentValues:function(t){var e=FusionPageBuilderElements.find(function(e){return e.get("cid")==t.parent});return jQuery.extend(!0,{},fusionAllElements.fusion_tabs.defaults,_.fusionCleanParameters(e.get("params")))}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_table=FusionPageBuilder.ElementView.extend({beforePatch:function(){var e,t,i,o,n,a,s=this.model.get("params");e=void 0===this.$el.find('[data-param="element_content"]').html()?s.element_content:this.$el.find('[data-param="element_content"]').html(),n=jQuery.parseHTML(e.trim()),a=jQuery(n).find("th").length,t=parseInt(s.fusion_table_columns,10),o=jQuery(n).attr("class").replace(/[^\d.]/g,""),i=s.fusion_table_type,t===a&&o===i||(n=this.generateTable(n,t,a),window.FusionPageBuilderApp.setContent("element_content",jQuery(n).prop("outerHTML")))},filterTemplateAtts:function(e){var t,i,o,n={},a=e.params,s=this.buildAttr(a);return void 0!==a.fusion_table_type&&""!==a.fusion_table_type&&(a.element_content=a.element_content.replace(/<div class="table-\d">/g,"<div "+_.fusionGetAttributes(s)+">")),t=jQuery.parseHTML(a.element_content.trim()),o=jQuery(t).find("th").length,void 0!==a.fusion_table_columns&&""!==a.fusion_table_columns&&(i=parseInt(a.fusion_table_columns,10),t=this.generateTable(t,i,o),a.element_content=jQuery(t).prop("outerHTML")),n.cid=this.model.get("cid"),n.element_content=a.element_content,n},buildAttr:function(e){var t,i={};return void 0!==e.fusion_table_type&&""!==e.fusion_table_type&&("1"!==(t=e.element_content.charAt(19))&&"2"!==t||t===e.fusion_table_type||(e.fusion_table_type=t),i=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"table-"+e.fusion_table_type}),i=_.fusionAnimations(e,i),""!==e.class&&(i.class+=" "+e.class),""!==e.id&&(i.id=e.id)),i},generateTable:function(e,t,i){var o;if(i<t)for(o=i+1;o<=t;o++)jQuery(e).find("thead tr").append('<th align="left">Column '+o+"</th>"),jQuery(e).find("tbody tr").each(function(){jQuery(this).append('<td align="left">Column '+o+" Value</td>")});else if(t<i)for(o=t+1;o<=i;o++)jQuery(e).find("thead th").last().remove(),jQuery(e).find("tbody tr").each(function(){jQuery(this).find("td").last().remove()});return e}})}),jQuery(document).ready(function(){jQuery("#fusion_table_type, #fusion_table_columns").live("change",function(){var e,t=jQuery("#fusion_table_type").val(),i=jQuery("#fusion_table_columns").val(),o='<div class="'+["","table-1","table-2"][t]+'"><table width="100%"><thead><tr>';for(e=1;e<=i;e++)o+='<th align="left">Column '+e+"</th>";for(o+="</tr></thead><tr>",e=1;e<=i;e++)o+='<td align="left">Column '+e+" Value</td>";o+="</tr></tbody></table></div>",setTimeout(function(){!0===FusionPageBuilderApp.shortcodeGenerator?FusionPageBuilderApp.fusionBuilderSetContent("generator_element_content",o):FusionPageBuilderApp.fusionBuilderSetContent("element_content",o)},100)})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_progress=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.attrBar=this.buildBarAttr(e.values),t.attrSpan=this.buildSpanAttr(e.values),t.attrEditor=this.buildInlineEditorAttr(e.values),t.attrContent=this.buildContentAttr(e.values),t.cid=this.model.get("cid"),t.values=e.values,t},validateValues:function(e){e.filledbordersize=_.fusionValidateAttrValue(e.filledbordersize,"px")},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-progressbar",style:""});return"above_bar"===e.text_position?t.class+=" fusion-progressbar-text-above-bar":"below_bar"===e.text_position?t.class+=" fusion-progressbar-text-below-bar":t.class+=" fusion-progressbar-text-on-bar",""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildInlineEditorAttr:function(){var e={class:"fusion-progressbar-text"};return e=_.fusionInlineEditor({cid:this.model.get("cid"),"disable-return":!0,"disable-extra-spaces":!0,toolbar:"simple"},e)},buildContentAttr:function(e){var t={class:"progress progress-bar-content",role:"progressbar",style:""};return t.style+="width:"+e.percentage+"%;",t.style+="background-color:"+e.filledcolor+";",""!==e.filledbordersize&&""!==e.filledbordercolor&&(t.style+="border: "+e.filledbordersize+" solid "+e.filledbordercolor+";"),t},buildBarAttr:function(e){var t={class:"fusion-progressbar-bar progress-bar",style:""};return t.style+="background-color:"+e.unfilledcolor+";",""!==e.height&&(t.style+="height:"+e.height+";"),"yes"===e.striped&&(t.class+=" progress-striped"),"yes"===e.animated_stripes&&(t.class+=" active"),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildSpanAttr:function(e){var t={class:"progress-title",style:""};return t.style+="color:"+e.textcolor+";",t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_recent_posts=FusionPageBuilder.ElementView.extend({onRender:function(){var e=this;jQuery("#fb-preview")[0].contentWindow.jQuery(document).ready(function(){e.afterPatch()})},beforePatch:function(){var e=this.$el.find(".fusion-recent-posts .flexslider");_.each(e,function(e){void 0!==(e=jQuery("#fb-preview")[0].contentWindow.jQuery(e)).data("flexslider")&&e.flexslider("destroy")})},afterPatch:function(){var e=this.$el.find(".fusion-recent-posts .flexslider");setTimeout(function(){_.each(e,function(e){"function"==typeof(e=jQuery("#fb-preview")[0].contentWindow.jQuery(e)).flexslider&&e.flexslider()})},300)},validateValues:function(e){e.excerpt="hide"===e.excerpt?"no":e.excerpt},filterTemplateAtts:function(e){var t=3,i={},o={},n={},a={},s={},r={class:"fusion-flexslider flexslider"};return this.validateValues(e.values),void 0!==this.model.attributes.query_data&&void 0!==this.model.attributes.query_data.posts&&(""!==e.values.columns&&(t=12/parseInt(e.values.columns,10)),n.class="fusion-column column col col-lg-"+t+" col-md-"+t+" col-sm-"+t,"5"===e.values.columns&&(n.class="fusion-column column col-lg-2 col-md-2 col-sm-2"),n=_.fusionAnimations(e.values,n),"thumbnails-on-side"===e.values.layout&&(r.class+=" floated-slideshow"),""!==e.values.hover_type&&(r.class+=" flexslider-hover-type-"+e.values.hover_type),""!==e.values.hover_type&&(a.class="hover-type-"+e.values.hover_type),o=_.fusionVisibilityAtts(e.values.hide_on_mobile,{class:"fusion-recent-posts avada-container layout-"+e.values.layout+" layout-columns-"+e.values.columns}),""!==e.values.class&&(o.class+=" "+e.values.class),""!==e.values.id&&(o.id=e.values.id),s.class="fusion-columns columns fusion-columns-"+e.values.columns+" columns-"+e.values.columns),"auto"===e.values.picture_size?e.values.image_size="full":"default"===e.values.layout?e.values.image_size="recent-posts":e.values.image_size="portfolio-five",i.metaInfoSettings={},i.metaInfoSettings.post_meta="yes"===e.values.meta,i.metaInfoSettings.post_meta_author="yes"===e.values.meta_author,i.metaInfoSettings.post_meta_date="yes"===e.values.meta_date,i.metaInfoSettings.post_meta_cats="yes"===e.values.meta_categories,i.metaInfoSettings.post_meta_tags="yes"===e.values.meta_tags,i.metaInfoSettings.post_meta_comments="yes"===e.values.meta_comments,i.metaInfoSettings.disable_date_rich_snippet_pages=e.extras.disable_date_rich_snippet_pages,i.query_data=e.query_data,i.extras=e.extras,i.values=e.values,i.recentPostsShortcode=o,i.recentPostsShortcodeColumn=n,i.recentPostsShortcodeImgLink=a,i.recentPostsShortcodeSection=s,i.recentPostsShortcodeSlideshow=r,i}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_products_slider=FusionPageBuilder.ElementView.extend({afterPatch:function(){this._refreshJs()},filterTemplateAtts:function(e){var t={wooProductSliderShortcode:{},wooProductSliderShortcodeCarousel:{},productList:!1,placeholder:!1};return t.showNav=e.values.show_nav,this.validateValues(e.values),void 0!==e.query_data&&void 0!==e.query_data.products?(t.wooProductSliderShortcode=this.buildWooProductSliderShortcodeAttr(e.values),t.wooProductSliderShortcodeCarousel=this.buildWooProductSliderShortcodeCarousel(e.values),t.productList=this.buildProductList(e.values,e.extras,e.query_data)):void 0!==e.query_data&&void 0!==e.query_data.placeholder&&(t.placeholder=e.query_data.placeholder),t},validateValues:function(e){e.column_spacing=_.fusionValidateAttrValue(e.column_spacing,"")},buildWooProductSliderShortcodeAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-woo-product-slider fusion-woo-slider"});return""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildWooProductSliderShortcodeCarousel:function(e){var t={class:"fusion-carousel"};return"title_below_image"===e.carousel_layout?(t.class+=" fusion-carousel-title-below-image",t["data-metacontent"]="yes"):t.class+=" fusion-carousel-title-on-rollover",t["data-autoplay"]=e.autoplay,t["data-columns"]=e.columns,t["data-itemmargin"]=e.column_spacing,t["data-itemwidth"]=180,t["data-touchscroll"]=e.mouse_scroll,t["data-imagesize"]=e.picture_size,t["data-scrollitems"]=e.scroll_items,t},buildProductList:function(n,e,a){var s,r,l,u="",d="fusion-"+e.box_design+"-product-image-wrapper",c="full";return s="yes"===n.show_cats?"enable":"disable",r="yes"===n.show_price,l="yes"===n.show_buttons,"fixed"===n.picture_size&&(c="portfolio-five"),_.each(a.products,function(e){var t=jQuery.inArray(e.id,a.items_in_cart),i="",o=e.image_data;o.image_size=c,"title_on_rollover"===n.carousel_layout?(o.image_size=c,o.display_woo_price=r,o.display_woo_buttons=l,o.display_post_categories=s,o.display_post_title="enable",o.display_rollover="yes",i=_.fusionFeaturedImage(o)):(o.image_size=c,o.display_woo_price=!1,o.display_woo_buttons=l,o.display_post_categories="disable",o.display_post_title="disable",(o.display_rollover="yes")===n.show_buttons||(o.display_rollover="no"),i=_.fusionFeaturedImage(o),i+='<h4 class="fusion-carousel-title">',i+='<a href="'+e.permalink+'" target="_self">'+e.title+"</a>",i+="</h4>",i+='<div class="fusion-carousel-meta">',!0!==s&&"enable"!==s||(i+=e.terms),!0!==r&&"enable"!==r||(i+='<div class="fusion-carousel-price">'+e.price+"</div>"),i+="</div>"),u+=-1!==t?'<li class="fusion-carousel-item"><div class="'+d+' fusion-item-in-cart"><div class="fusion-carousel-item-wrapper">'+i+"</div></div></li>":'<li class="fusion-carousel-item"><div class="'+d+'"><div class="fusion-carousel-item-wrapper">'+i+"</div></div></li>"}),u}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_slider=FusionPageBuilder.ParentElementView.extend({afterPatch:function(){this.generateChildElements(),this._refreshJs()},filterTemplateAtts:function(e){var t,i={},o=window.FusionPageBuilderApp.findShortcodeMatches(e.params.element_content,"fusion_slide");return this.model.attributes.showPlaceholder=!1,1<=o.length&&(t=o[0].match(window.FusionPageBuilderApp.regExpShortcode("fusion_slide")),this.model.attributes.showPlaceholder=void 0===t[5]||""===t[5]||"undefined"===t[5]),this.validateValues(e.values),i.sliderShortcode=this.buildSliderAttr(e.values),i},validateValues:function(e){e.width=_.fusionValidateAttrValue(e.width,"px"),e.height=_.fusionValidateAttrValue(e.height,"px")},buildSliderAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-slider-sc flexslider"});return!0===this.model.attributes.showPlaceholder&&(t.class+=" fusion-show-placeholder"),""!==e.hover_type&&(t.class+=" flexslider-hover-type-"+e.hover_type),t.style="max-width:"+e.width+";height:"+e.height+";",""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_slide=FusionPageBuilder.ChildElementView.extend({beforeRemove:function(){var e=window.FusionPageBuilderViewManager.getView(this.model.get("parent"));void 0!==jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.closest(".flexslider:not(.tfs-slider)")).data("flexslider")&&jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.closest(".flexslider:not(.tfs-slider)")).flexslider("destroy"),!1===e.model.attributes.showPlaceholder&&1===e.model.children.length&&(this.$el.closest(".fusion-slider-sc").addClass("fusion-show-placeholder"),e.model.attributes.showPlaceholder=!0)},onRender:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.model.attributes.selectors.class+="video"===this.model.attributes.params.type?" video":" image",this.setElementAttributes(this.$el,this.model.attributes.selectors))},afterPatch:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.model.attributes.selectors.class+="video"===this.model.attributes.params.type?" video":" image",this.setElementAttributes(this.$el,this.model.attributes.selectors)),this._refreshJs()},beforePatch:function(){var e=window.FusionPageBuilderViewManager.getView(this.model.get("parent"));!0===e.model.attributes.showPlaceholder&&("undefined"!==this.model.attributes.params.image&&""!==this.model.attributes.params.image||"undefined"!==this.model.attributes.params.video&&""!==this.model.attributes.params.video)&&(this.$el.closest(".fusion-slider-sc").removeClass("fusion-show-placeholder"),e.model.attributes.showPlaceholder=!1)},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.sliderShortcodeSlideLink=this.buildSlideLinkAttr(e.values),t.sliderShortcodeSlideLi=this.buildLiAttr(e.values),t.sliderShortcodeSlideImg=this.buildImgAttr(e.values),t.sliderShortcodeSlideImgWrapper=this.buildSlideImgWrapperAttr(e.values),t.link=e.values.link,t.type=e.values.type,t.video=e.values.video,t.elementContent=e.values.element_content,t.cid=this.model.get("cid"),t.parent=this.model.get("parent"),t},validateValues:function(e){e.alt="",e.title="",e.src=e.element_content?e.element_content.replace("&#215;","x"):""},buildSlideLinkAttr:function(e){var t={};return"yes"===e.lightbox&&(t.class="lightbox-enabled",t["data-rel"]="prettyPhoto[gallery_slider_"+this.model.get("cid")+"]"),t.href=e.link,t.target=e.linktarget,"_blank"===t.target&&(t.rel="noopener noreferrer"),t.title=e.title,t},buildLiAttr:function(e){var t={class:"video"===e.type?"video":"image"};return this.model.set("selectors",t),t},buildImgAttr:function(e){return{src:e.image,alt:e.alt}},buildSlideImgWrapperAttr:function(){var e,t,i={},o=this.model.get("parent");return o&&(e=FusionPageBuilderElements.find(function(e){return e.get("cid")==o}),""!==(t=jQuery.extend(!0,{},fusionAllElements.fusion_slider.defaults,_.fusionCleanParameters(e.get("params")))).hover_type&&(i={class:"fusion-image-hover-element hover-type-"+t.hover_type})),i}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_images=FusionPageBuilder.ParentElementView.extend({imageMap:{},initialData:!1,afterPatch:function(){this.appendChildren(".fusion-carousel-holder"),this._refreshJs()},onRender:function(){var e=FusionPageBuilderViewManager.getView(this.model.get("parent"));setTimeout(function(){e&&"function"==typeof e._equalHeights&&e._equalHeights()},500)},filterTemplateAtts:function(e){var t,i,o={},n=window.FusionPageBuilderApp.findShortcodeMatches(e.params.element_content,"fusion_image");return this.model.attributes.showPlaceholder=!1,1<=n.length&&(i=""!==(t=n[0].match(window.FusionPageBuilderApp.regExpShortcode("fusion_image")))[3]?window.wp.shortcode.attrs(t[3]):"",this.model.attributes.showPlaceholder=void 0===i.named||void 0===i.named.image),this.validateValues(e.values),this.extras=e.extras,o.attr=this.buildAttr(e.values),o.attrCarousel=this.buildCarouselAttr(e.values),o.show_nav=e.values.show_nav,o},validateValues:function(e){e.column_spacing=_.fusionValidateAttrValue(e.column_spacing,"px")},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-image-carousel",style:""});return t.class+=" fusion-image-carousel-"+e.picture_size,!0===this.model.attributes.showPlaceholder&&(t.class+=" fusion-show-placeholder"),"yes"===e.lightbox&&(t.class+=" lightbox-enabled"),"yes"===e.border&&(t.class+=" fusion-carousel-border"),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildCarouselAttr:function(e){var t={class:"fusion-carousel",style:""};return t["data-autoplay"]=e.autoplay,t["data-columns"]=e.columns,t["data-itemmargin"]=e.column_spacing.toString(),t["data-itemwidth"]="180",t["data-touchscroll"]=e.mouse_scroll,t["data-imagesize"]=e.picture_size,t["data-scrollitems"]=e.scroll_items,t},onGenerateChildElements:function(e){this.addImagesToImageMap(e,!1,!1)},addImagesToImageMap:function(e,t,i){var n=this,a={};t=void 0===t||t,i=void 0===i||i,n.initialData=!0,_.each(e,function(e){var t=void 0!==e.get?e.get("params"):e.params,i=void 0!==e.get?e.get("cid"):e.cid,o=t.image;void 0===n.imageMap[o]&&o&&(a[i]=t)}),_.isEmpty(a)?i&&n.reRender():jQuery.ajax({async:t,url:window.fusionAppConfig.ajaxurl,type:"post",dataType:"json",data:{action:"get_fusion_image_carousel_children_data",children:a,fusion_load_nonce:window.fusionAppConfig.fusion_load_nonce},success:function(e){n.updateImageMap(e),_.each(e,function(e,t){void 0===n.imageMap[t]&&(n.imageMap[t]=e)}),n.model.set("query_data",e),i&&n.reRender()}})},updateImageMap:function(e){var i=this.imageMap;_.each(e,function(e,t){void 0===i[t]&&(i[t]=e)})}}),_.extend(FusionPageBuilder.Callback.prototype,{fusion_carousel_images:function(e,t,i,o,n,a,s,r){r.model.attributes.params[e]=t,r.addImagesToImageMap(r.model.children.models,!0,r.initialData)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_image=FusionPageBuilder.ChildElementView.extend({onRender:function(){var e=this.model.get("query_data");void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),void 0!==e&&window.FusionPageBuilderViewManager.getView(this.model.get("parent")).updateImageMap(e)},beforePatch:function(){var e=window.FusionPageBuilderViewManager.getView(this.model.get("parent"));!0===e.model.attributes.showPlaceholder&&"undefined"!==this.model.attributes.params.image&&""!==this.model.attributes.params.image&&(this.$el.closest(".fusion-image-carousel").removeClass("fusion-show-placeholder"),e.model.attributes.showPlaceholder=!1)},beforeRemove:function(){var e=window.FusionPageBuilderViewManager.getView(this.model.get("parent"));!1===e.model.attributes.showPlaceholder&&1===e.model.children.length&&(this.$el.closest(".fusion-image-carousel").addClass("fusion-show-placeholder"),e.model.attributes.showPlaceholder=!0)},afterPatch:function(){var e=this.model.get("parent"),t=this.model.get("query_data");void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),setTimeout(function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-element-render-fusion_images",e)},10),void 0!==t&&window.FusionPageBuilderViewManager.getView(this.model.get("parent")).updateImageMap(t),this.refreshJs()},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),this.buildAttr(e.values),this.extras=e.extras,this.wrapperSelector(),t.attrCarouselLink=this.buildCarouselLinkAttr(e),t.attrImageWrapper=this.buildImageWrapperAttr(e),t.attrItemWrapper=this.buildItemWrapperAttr(e),t.imageElement=this.buildImageElement(e),t.cid=this.model.get("cid"),t.parent=this.model.get("parent"),t.output=e.values.element_content,t.mouseScroll=e.values.mouse_scroll,t.link=e.values.link,t.lightbox=e.parentValues.lightbox,t},validateValues:function(e){void 0!==e.element_content&&(e.element_content=e.element_content.trim(),e.element_content=e.element_content.replace(/(<p[^>]+?>|<p>|<\/p>)/gim,""))},buildAttr:function(){this.model.set("selectors",{class:"fusion-carousel-item"})},buildItemWrapperAttr:function(){return{class:"fusion-carousel-item-wrapper"}},buildImageElement:function(e){var t="full",i=e.values,o=e.parentValues,n=e.query_data,a=window.FusionPageBuilderViewManager.getView(this.model.get("parent"));return"fixed"===o.picture_size&&(t="portfolio-two","6"!==o.columns&&"5"!==o.columns&&"4"!==o.columns||(t="blog-medium")),void 0!==n&&void 0!==n[i.image]?n[i.image][t]:void 0!==a.imageMap[i.image]?a.imageMap[i.image][t]:'<img src="'+i.image+'" alt="'+i.alt+'"/>'},wrapperSelector:function(){this.model.set("selectors",{class:"fusion-carousel-item"})},buildCarouselLinkAttr:function(e){var t={},i=e.values,o=e.parentValues,n=e.query_data;return"yes"===o.lightbox&&(i.link&&null!==i.link||(i.link=i.image),t["data-rel"]="iLightbox[image_carousel_"+this.model.get("parent")+"]",void 0!==n&&void 0!==n.image_data&&(t["data-caption"]=n.image_data.caption,t["data-title"]=n.image_data.title,t["aria-label"]=n.image_data.title)),t.href=i.link,t.target=i.linktarget,"_blank"===i.linktarget&&(t.rel="noopener noreferrer"),t},buildImageWrapperAttr:function(e){var t={class:"fusion-image-wrapper"},i=e.parentValues;return i.hover_type&&(t.class+=" hover-type-"+i.hover_type),t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_one_page_text_link=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return t.onePageTextLinkShortcode=this.buildShortcodeAttr(e.values),t.elementContent=e.values.element_content,t.inline=void 0!==e.inlineElement,t.cid=e.cid,t.label=window.fusionAllElements[this.model.get("element_type")].name,t.icon=window.fusionAllElements[this.model.get("element_type")].icon,t},buildShortcodeAttr:function(e){var t={class:"fusion-one-page-text-link"};return""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t.href=e.link,t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_dropcap=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.output=e.values.element_content,t},validateValues:function(e){void 0!==e.element_content&&(e.element_content=e.element_content.trim(),e.element_content=e.element_content.replace(/(<p[^>]+?>|<p>|<\/p>)/gim,""))},buildAttr:function(e){var t=this.model.get("params"),i={class:"fusion-dropcap dropcap",style:""},o=void 0!==t.color&&""===t.color||void 0===t.color;return"yes"===e.boxed?(i.class+=" dropcap-boxed",!e.boxed_radius&&"0"!==e.boxed_radius||(e.boxed_radius="round"===e.boxed_radius?"50%":e.boxed_radius,i.style="border-radius:"+e.boxed_radius+";"),o||(i.style+="background-color:"+e.color+";")):o||(i.style+="color:"+e.color+";"),""!==e.class&&(i.class+=" "+e.class),""!==e.id&&(i.id=e.id),i}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_flip_boxes=FusionPageBuilder.ParentElementView.extend({afterPatch:function(){this.generateChildElements(),this._refreshJs()},filterTemplateAtts:function(e){var t=this.computeAtts(e.values);return(e={}).flipBoxesShortcode=t,e},computeAtts:function(e){var t;return e.columns=Math.min(6,e.columns),(t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-flip-boxes flip-boxes row fusion-columns-"+e.columns})).class+=" flip-effect-"+e.flip_effect,"yes"===e.equal_heights&&(t.class+=" equal-heights"),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id+=" "+e.id),t.class+=" fusion-child-element",t["data-empty"]=this.emptyPlaceholderText,t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_flip_box=FusionPageBuilder.ChildElementView.extend({onRender:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors))},afterPatch:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),this.refreshJs()},filterTemplateAtts:function(e){var t=this.computeAtts(e.values);return e.cid=this.model.get("cid"),e.parent=this.model.get("parent"),e.flipBoxShortcodeBackBox=t.flipBoxShortcodeBackBox,e.flipBoxAttributes=t.flipBoxAttributes,e.flipBoxShortcodeFrontBox=t.flipBoxShortcodeFrontBox,e.icon_output=t.icon_output,e.title_front_output=t.title_front_output,e.title_back_output=t.title_back_output,e.icon_output=t.icon_output,e},computeAtts:function(e){var t,i,o,n,a=this.model.get("parent"),s=FusionPageBuilderElements.find(function(e){return e.get("cid")==a}),r=void 0!==s?jQuery.extend(!0,{},fusionAllElements.fusion_flip_boxes.defaults,_.fusionCleanParameters(s.get("params"))):{},l=this.model.get("params"),u="",d={},c="",g="",p="",f="",m="",h="",b="",v="",y="";return e.border_size=_.fusionValidateAttrValue(e.border_size,"px"),e.border_radius=_.fusionValidateAttrValue(e.border_radius,"px"),e.image_width=_.fusionValidateAttrValue(e.image_width,""),e.image_height=_.fusionValidateAttrValue(e.image_height,""),""===l.image&&""!==l.icon&&(e.image=!1),"round"===e.border_radius&&(e.border_radius="50%"),v=m=c="",(u={class:"fusion-flip-box"}).class+=" flip-"+e.flip_direction,e.image&&e.image_width&&e.image_height?c='<img src="'+e.image+'" width="'+e.image_width+'" height="'+e.image_height+'" alt="'+e.alt+'" />':e.icon&&(e.image?d.class="image":e.icon&&(d.class=_.fusionFontAwesome(e.icon)),e.icon_color&&(d.style="color:"+e.icon_color+";"),e.icon_flip&&(d.class+=" fa-flip-"+e.icon_flip),e.icon_rotate&&(d.class+=" fa-rotate-"+e.icon_rotate),"yes"===e.icon_spin&&(d.class+=" fa-spin"),e.animation_type&&"yes"!==e.icon_spin&&(g=_.fusionGetAnimations({type:e.animation_type,direction:e.animation_direction,speed:e.animation_speed,offset:e.animation_offset}),(u=jQuery.extend(u,g)).class+=" "+u.animation_class,delete u.animation_class),c="<i "+_.fusionGetAttributes(d)+"></i>"),""!==c&&(p={class:"flip-box-grafix"},e.image?p.class+=" flip-box-image":"yes"===e.circle?(p.class+=" flip-box-circle",e.circle_color&&(p.style="background-color:"+e.circle_color+";"),e.circle_border_color&&(p.style+="border-color:"+e.circle_border_color+";")):p.class+=" flip-box-no-circle",c="<div "+_.fusionGetAttributes(p)+">"+c+"</div>"),""!==e.title_front&&(f={class:"flip-box-heading"},e.text_front||(f.class+=" without-text"),e.title_front_color&&(f.style="color:"+e.title_front_color+";"),m="<h2 "+_.fusionGetAttributes(f)+">"+e.title_front+"</h2>"),""!==e.title_back&&(h={class:"flip-box-heading-back"},e.title_back_color&&(h.style="color:"+e.title_back_color+";"),v="<h3 "+_.fusionGetAttributes(h)+">"+e.title_back+"</h3>"),e.text_front,i={class:"flip-box-front",style:""},e.background_color_front&&(i.style+="background-color:"+e.background_color_front+";"),e.border_color&&(i.style+="border-color:"+e.border_color+";"),e.border_radius&&(i.style+="border-radius:"+e.border_radius+";"),e.border_size&&(i.style+="border-style:solid;border-width:"+e.border_size+";"),e.text_front_color&&(i.style+="color:"+e.text_front_color+";"),r.flip_duration&&(i.style+="transition-duration:"+r.flip_duration+"s;"),e.background_image_front&&(i.style+="background-image: url('"+e.background_image_front+"');",e.background_color_front&&(n=jQuery.Color(e.background_color_front).alpha())<1&&0!==n&&(i.style+="background-blend-mode: overlay;")),b={class:"flip-box-back",style:""},e.background_color_back&&(b.style+="background-color:"+e.background_color_back+";"),e.border_color&&(b.style+="border-color:"+e.border_color+";"),e.border_radius&&(b.style+="border-radius:"+e.border_radius+";"),e.border_size&&(b.style+="border-style:solid;border-width:"+e.border_size+";"),e.text_back_color&&(b.style+="color:"+e.text_back_color+";"),r.flip_duration&&(b.style+="transition-duration:"+r.flip_duration+"s;"),e.background_image_back&&(b.style+="background-image: url('"+e.background_image_back+"');",e.background_color_back&&(n=jQuery.Color(e.background_color_back).alpha())<1&&0!==n&&(b.style+="background-blend-mode: overlay;")),y=1,r.columns&&(y=12/parseInt(r.columns,10)),t={class:"fusion-flip-box-wrapper fusion-column col-lg-"+y+" col-md-"+y+" col-sm-"+y},5===parseInt(r.columns,10)&&(t.class="fusion-flip-box-wrapper col-lg-2 col-md-2 col-sm-2"),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),this.model.set("selectors",t),(o={}).flipBoxShortcodeBackBox=b,o.flipBoxAttributes=u,o.flipBoxShortcodeFrontBox=i,o.icon_output=c,o.title_front_output=m,o.title_back_output=v,o.icon_output=c,o}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_accordion=FusionPageBuilder.ParentElementView.extend({filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.toggleShortcode=this.buildToggleAttr(e.values),t.toggleShortcodePanelGroup=this.buildPanelGroupAttr(e.values),t.styles=this.buildStyles(e.values),t},validateValues:function(e){e.icon_size=_.fusionValidateAttrValue(e.icon_size,"px"),e.border_size=_.fusionValidateAttrValue(e.border_size,"px"),e.title_font_size=_.fusionValidateAttrValue(e.title_font_size,"px")},buildToggleAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"accordian fusion-accordian"});return" "!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildPanelGroupAttr:function(e){var t={class:"panel-group fusion-child-element",id:"accordion-cid"+this.model.get("cid")};return"right"===e.icon_alignment&&(t.class+=" fusion-toggle-icon-right"),"0"!==e.icon_boxed_mode&&"no"!==e.icon_boxed_mode||(t.class+=" fusion-toggle-icon-unboxed"),t["data-empty"]=this.emptyPlaceholderText,t},buildStyles:function(e){var t="",i=this.model.get("cid");return""!==e.title_font_size&&(t+=".fusion-accordian  #accordion-cid"+i+" .panel-title a{ font-size: "+e.title_font_size+";}"),""!==e.icon_size&&(t+=".fusion-accordian  #accordion-cid"+i+" .panel-title a .fa-fusion-box:before{ font-size: "+e.icon_size+"; width: "+e.icon_size+";}"),""!==e.icon_color&&(t+=".fusion-accordian  #accordion-cid"+i+" .panel-title a .fa-fusion-box{ color: "+e.icon_color+";}"),"right"===e.icon_alignment&&(t+=".fusion-accordian  #accordion-cid"+i+".fusion-toggle-icon-right .fusion-toggle-heading{ margin-right: "+(parseInt(e.icon_size,10)+18)+"px;}"),"1"!==e.icon_boxed_mode&&"yes"!==e.icon_boxed_mode||_.isEmpty(e.icon_box_color)||(t+=".fusion-accordian  #accordion-cid"+i+" .fa-fusion-box { background-color: "+e.icon_box_color+";border-color: "+e.icon_box_color+";}"),_.isEmpty(e.toggle_hover_accent_color)||(t+=".fusion-accordian  #accordion-cid"+i+" .panel-title a:hover, #accordion-cid"+i+" .fusion-toggle-boxed-mode:hover .panel-title a { color: "+e.toggle_hover_accent_color+";}",t+=".fusion-accordian  #accordion-cid"+i+" .panel-title a.hover, #accordion-cid"+i+" .fusion-toggle-boxed-mode.hover .panel-title a { color: "+e.toggle_hover_accent_color+";}","1"===e.icon_boxed_mode||"yes"===e.icon_boxed_mode?(t+=".fusion-accordian  #accordion-cid"+i+" .panel-title .active .fa-fusion-box,",t+=".fusion-accordian  #accordion-cid"+i+" .panel-title a:hover .fa-fusion-box { background-color: "+e.toggle_hover_accent_color+"!important;border-color: "+e.toggle_hover_accent_color+"!important;}",t+=".fusion-accordian  #accordion-cid"+i+" .panel-title a.hover .fa-fusion-box { background-color: "+e.toggle_hover_accent_color+"!important;border-color: "+e.toggle_hover_accent_color+"!important;}"):(t+=".fusion-accordian  #accordion-cid"+i+" .fusion-toggle-boxed-mode:hover .panel-title a .fa-fusion-box{ color: "+e.toggle_hover_accent_color+";}",t+=".fusion-accordian  #accordion-cid"+i+".fusion-toggle-icon-unboxed .fusion-panel .panel-title a:hover .fa-fusion-box{ color: "+e.toggle_hover_accent_color+" !important;}",t+=".fusion-accordian  #accordion-cid"+i+" .fusion-toggle-boxed-mode.hover .panel-title a .fa-fusion-box{ color: "+e.toggle_hover_accent_color+";}",t+=".fusion-accordian  #accordion-cid"+i+".fusion-toggle-icon-unboxed .fusion-panel .panel-title a.hover .fa-fusion-box{ color: "+e.toggle_hover_accent_color+" !important;}")),"1"!=e.boxed_mode&&"yes"!==e.boxed_mode||(""!==e.hover_color&&(t+="#accordion-cid"+i+" .fusion-panel:hover, #accordion-cid"+i+" .fusion-panel.hover{ background-color: "+e.hover_color+" }"),t+="#accordion-cid"+i+" .fusion-panel {",""!==e.border_color&&(t+=" border-color:"+e.border_color+";"),""!==e.border_size&&(t+=" border-width:"+e.border_size+";"),""!==e.background_color&&(t+=" background-color:"+e.background_color+";"),t+=" }"),t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_toggle=FusionPageBuilder.ChildElementView.extend({onRender:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors))},afterPatch:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),this.refreshJs()},filterTemplateAtts:function(e){var t={},i=this.model.get("parent"),o=FusionPageBuilderElements.find(function(e){return e.get("cid")==i}),n=jQuery.extend(!0,{},fusionAllElements.fusion_accordion.defaults,_.fusionCleanParameters(o.get("params")));return this.validateValues(e.values),t.toggleShortcodeCollapse=this.buildCollapseAttr(e.values),t.toggleShortcodeDataToggle=this.buildDataToggleAttr(e.values,n,o),t.headingAttr=this.buildHeadingAttr(e.values),t.contentAttr=this.buildContentAttr(e.values),t.title=e.values.title,t.elementContent=e.values.element_content,this.buildPanelAttr(e.values,n),t.cid=this.model.get("cid"),t.parent=this.model.get("parent"),t},validateValues:function(e){e.toggle_class="yes"===e.open?"in":""},buildCollapseAttr:function(e){return{id:("#accordion-"+this.model.get("cid")).replace("#",""),class:"panel-collapse collapse "+e.toggle_class}},buildPanelAttr:function(e,t){var i={class:"fusion-panel panel-default"};return"1"==t.boxed_mode||"yes"===t.boxed_mode?i.class+=" fusion-toggle-no-divider fusion-toggle-boxed-mode":"0"!=t.divider_line&&"no"!==t.divider_line||(i.class+=" fusion-toggle-no-divider"),this.model.set("selectors",i),i},buildDataToggleAttr:function(e,t,i){var o={},n="#accordion-"+this.model.get("cid");return"yes"===e.open&&(o.class="active"),o["data-toggle"]="collapse","toggles"!==t.type&&(o["data-parent"]="#accordion-cid"+i.attributes.cid),o["data-target"]=n,o.href=n,o},buildHeadingAttr:function(){var e={class:"fusion-toggle-heading"};return e=_.fusionInlineEditor({cid:this.model.get("cid"),param:"title","disable-return":!0,"disable-extra-spaces":!0,toolbar:!1},e)},buildContentAttr:function(){var e={class:"panel-body toggle-content"};return e=_.fusionInlineEditor({cid:this.model.get("cid")},e)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_chart=FusionPageBuilder.ParentElementView.extend({chartDatasets:[],beforePatch:function(){this.$el.find("canvas").replaceWith('<canvas width="100" height="100"></canvas>')},afterPatch:function(){this.generateChildElements(),this._refreshJs()},filterTemplateAtts:function(e){var t={};return this.chartDatasets=FusionPageBuilderApp.findShortcodeMatches(e.params.element_content,"fusion_chart_dataset"),t.showPlaceholder=0===this.chartDatasets.length,t.showPlaceholder?(e.values.type="bar",this.model.attributes.params.type="bar",e.values.x_axis_labels="Val 1|Val 2|Val 3",this.model.attributes.params.x_axis_labels="Val 1|Val 2|Val 3",e.values.legend_text_colors="#ffffff|#ffffff|#ffffff",this.model.attributes.params.legend_text_colors="#ffffff|#ffffff|#ffffff",e.values.bg_colors="#03a9f4|#8bc34a|#ff9800",this.model.attributes.params.bg_colors="#03a9f4|#8bc34a|#ff9800",e.values.border_colors="#03a9f4|#8bc34a|#ff9800",this.model.attributes.params.border_colors="#03a9f4|#8bc34a|#ff9800",this.model.attributes.params.element_content='[fusion_chart_dataset title="Data Set 1" legend_text_color="#ffffff" background_color="#00bcd4" border_color="#00bcd4" values="5|7|9"][/fusion_chart_dataset]'):this.validateValues(e.values),t.chartShortcode=this.buildChartAttr(e.values),t.styles=this.buildStyles(e.values),t.title=e.values.title,t.chartLegendPosition=e.values.chart_legend_position,t},validateValues:function(e){e.chart_padding={top:void 0!==e.padding_top&&""!==e.padding_top?e.padding_top:0,right:void 0!==e.padding_right&&""!==e.padding_right?e.padding_right:0,bottom:void 0!==e.padding_bottom&&""!==e.padding_bottom?e.padding_bottom:0,left:void 0!==e.padding_left&&""!==e.padding_left?e.padding_left:0},""===e.chart_type&&(e.chart_type="bar")},buildChartAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{id:"fusion-chart-cid"+this.model.get("cid"),class:"fusion-chart fusion-child-element"});return e.chart_type&&-1!==["bar","horizontalBar","line","pie","doughnut","radar","polarArea"].indexOf(e.chart_type)?t["data-type"]=e.chart_type:t["data-type"]=this.$el.find("#"+t.id).data("type"),""!==e.chart_legend_position&&"off"!==e.chart_legend_position&&(t.class+=" legend-"+e.chart_legend_position,t["data-chart_legend_position"]=e.chart_legend_position),""!==e.x_axis_labels&&(t["data-x_axis_labels"]=e.x_axis_labels),""!==e.x_axis_label&&(t["data-x_axis_label"]=e.x_axis_label),""!==e.y_axis_label&&(t["data-y_axis_label"]=e.y_axis_label),""!==e.show_tooltips&&(t["data-show_tooltips"]=e.show_tooltips),""!==e.bg_colors&&(t["data-bg_colors"]=e.bg_colors),""!==e.border_colors&&(t["data-border_colors"]=e.border_colors),""!==e.legend_labels&&(t["data-legend_labels"]=e.legend_labels),""!==e.chart_border_size&&(t["data-border_size"]=e.chart_border_size),""!==e.chart_border_type&&(t["data-border_type"]=e.chart_border_type),""!==e.chart_fill&&(t["data-chart_fill"]=e.chart_fill),""!==e.chart_point_style&&(t["data-chart_point_style"]=e.chart_point_style),""!==e.chart_point_size&&(t["data-chart_point_size"]=e.chart_point_size),""!==e.chart_point_bg_color&&(t["data-chart_point_bg_color"]=e.chart_point_bg_color),""!==e.chart_point_border_color&&(t["data-chart_point_border_color"]=e.chart_point_border_color),""!==e.chart_axis_text_color&&(t["data-chart_axis_text_color"]=e.chart_axis_text_color),""!==e.chart_gridline_color&&(t["data-chart_gridline_color"]=e.chart_gridline_color),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildStyles:function(e){var t,i,o,n,a,s="",r=0,l=[],u=this.model.get("cid");if(""!==e.chart_bg_color&&(s+="#fusion-chart-cid"+u+"{background-color: "+e.chart_bg_color+";}"),e.chart_padding&&"object"==typeof e.chart_padding&&(s+="#fusion-chart-cid"+u+"{padding: "+e.chart_padding.top+" "+e.chart_padding.right+" "+e.chart_padding.bottom+" "+e.chart_padding.left+";}"),void 0!==this.model&&void 0!==this.model.children&&((r=this.model.children.length)?_.each(this.model.children.models,function(e,t){l[t]=e.attributes.params.legend_text_color}):void 0!==this.model.attributes.params.element_content&&(_.each(this.chartDatasets,function(e){n=e.match(FusionPageBuilderApp.regExpShortcode("fusion_chart_dataset")),a=""!==n[3]?window.wp.shortcode.attrs(n[3]):"",l.push(a.named.legend_text_color)}),r=this.chartDatasets.length)),""!==e.legend_text_colors)for(i=(t="pie"===e.chart_type||"doughnut"===e.chart_type||"polarArea"===e.chart_type||("bar"===e.chart_type||"horizontalBar"===e.chart_type)&&1===r?e.legend_text_colors.split("|"):l).length,o=0;o<i;o++)""!==t[o]&&(s+="#fusion-chart-cid"+u+" .fusion-chart-legend-wrap li:nth-child("+(o+1)+") span{color: "+t[o]+";}");return s}})}),_.extend(FusionPageBuilder.Callback.prototype,{chartShortcodeFilter:function(e,t,i,o){var n="",a=!1,s=[],r=[],l=[],u=[],d={},c=[];if(o)return a=jQuery('[data-cid="'+o.model.get("cid")+'"] .fusion-table-builder'),d=jQuery.extend(!0,{},o.model.get("params")),a.find("thead tr:first-child th").each(function(e){var t=jQuery(this).find("input").val();1<e&&s.push(t)}),d.x_axis_labels!==s.join("|")&&c.push({id:"x_axis_labels",value:s.join("|"),label:fusionBuilderText.x_axis_label}),a.find("thead tr:nth-child(2) th").each(function(e){3<e&&(u.push(jQuery(this).find(".fusion-builder-option:first-child input").val()),r.push(jQuery(this).find(".fusion-builder-option:nth-child(2) input").val()),l.push(jQuery(this).find(".fusion-builder-option:nth-child(3) input").val()))}),void 0!==d.legend_text_colors&&d.legend_text_colors!==u.join("|")&&c.push({id:"legend_text_colors",value:u.join("|"),label:fusionBuilderText.legend_text_color}),void 0!==d.bg_colors&&d.bg_colors!==r.join("|")&&c.push({id:"bg_colors",value:r.join("|"),label:fusionBuilderText.background_color}),void 0!==d.border_colors&&d.border_colors!==l.join("|")&&c.push({id:"border_colors",value:l.join("|"),label:fusionBuilderText.border_color}),a.find("tbody tr").each(function(){var e=jQuery(this),i=[];n+="[fusion_chart_dataset",e.find("td").each(function(e){var t=jQuery(this).find("input").val();switch(e){case 0:n+=' title="'+t+'"';break;case 1:n+=' legend_text_color="'+t+'"';break;case 2:n+=' background_color="'+t+'"';break;case 3:n+=' border_color="'+t+'"';break;default:i.push(t)}}),n+=' values="'+i.join("|")+'" /]'}),d.element_content.trim()!==n.trim()&&c.push({id:"element_content",value:n,label:fusionBuilderText.chart_dataset}),_.each(c,function(e){o.changeParam(e.id,e.value,e.label)}),{render:!0}}});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_chart_dataset=FusionPageBuilder.ChildElementView.extend({onRender:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors))},afterPatch:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),this.refreshJs()},filterTemplateAtts:function(e){var t={},i=window.fusionAllElements[this.model.get("element_type")];return e.values=jQuery.extend(!0,{},i.defaults,_.fusionCleanParameters(e.params)),t.chartDatasetShortcode=this.buildDatasetAttr(e.values),t},buildDatasetAttr:function(e){var t={class:"fusion-chart-dataset"};return e.title?t["data-label"]=e.title:t["data-label"]=" ",""!==e.values&&(t["data-values"]=e.values),""!==e.background_color&&(t["data-background_color"]=e.background_color),""!==e.border_color&&(t["data-border_color"]=e.border_color),t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_image_before_after=FusionPageBuilder.ElementView.extend({onInit:function(){this.listenTo(FusionEvents,"fusion-preview-toggle",this.previewToggle),this.listenTo(FusionEvents,"fusion-wireframe-toggle",this.previewToggle),this.listenTo(FusionEvents,"fusion-iframe-loaded",this.initElement)},initElement:function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-element-render-fusion_image_before_after",this.model.attributes.cid)},previewToggle:function(){FusionPageBuilderApp.wireframeActive||(jQuery("#fb-preview")[0].contentWindow.jQuery("body").hasClass("fusion-builder-preview-mode")?this.disableDroppableElement():this.enableDroppableElement())},beforePatch:function(){this.$el.css("min-height",this.$el.outerHeight()+"px")},afterPatch:function(){var e=this;this._refreshJs(),setTimeout(function(){e.$el.css("min-height","0px")},300)},filterTemplateAtts:function(e){var t={};return""===e.values.before_image&&""===e.values.after_image||(this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.attrWrapper=this.buildWrapperAttr(e.values),t.attrBeforeImage=this.buildBeforeImageAttr(e.values),t.attrAfterImage=this.buildAfterImageAttr(e.values),t.attrOverlay=this.buildOverlayAttr(e.values),t.attrHandle=this.buildHandleAttr(e.values),t.styles=this.buildStyles(e.values),t.values=e.values),t},validateValues:function(e){e.offset=parseInt(e.offset,10)/100,e.font_size=_.fusionValidateAttrValue(e.font_size,"px")},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-image-before-after-element",style:""}),i=this.model.get("cid");return"switch"===e.type?t.class+=" fusion-image-switch":"before_after"===e.type&&(t.class+=" fusion-image-before-after fusion-image-before-after-container",!e.offset&&0!=e.offset||(t["data-offset"]=e.offset.toString()),e.orientation&&(t["data-orientation"]=e.orientation),e.handle_movement&&("drag_click"===e.handle_movement?(t["data-move-with-handle-only"]="true",t["data-click-to-move"]="true"):"drag"===e.handle_movement?t["data-move-with-handle-only"]="true":"hover"===e.handle_movement&&(t["data-move-slider-on-hover"]="true"))),t.class+=" fusion-image-before-after-cid"+i,""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t=_.fusionAnimations(e,t)},buildWrapperAttr:function(e){var t={class:"fusion-image-before-after-wrapper"},i=this.model.get("cid");return e.orientation&&(t.class+=" fusion-image-before-after-"+e.orientation),t.class+=" fusion-image-before-after-wrapper-cid"+i,t},buildBeforeImageAttr:function(e){return{class:"before_after"===e.type?"fusion-image-before-after-before":"fusion-image-switch-before",src:e.before_image,alt:""}},buildAfterImageAttr:function(e){return{class:"before_after"===e.type?"fusion-image-before-after-after":"fusion-image-switch-after",src:e.after_image,alt:""}},buildOverlayAttr:function(e){var t={class:"fusion-image-before-after-overlay"};return e.label_placement&&""!==e.label_placement&&(t.class+=" before-after-overlay-"+e.label_placement),t},buildHandleAttr:function(e){var t={class:"fusion-image-before-after-handle"};return e.handle_type&&"default"!==e.handle_type&&(t.class+=" fusion-image-before-after-handle-"+e.handle_type),t},buildStyles:function(e){var t="",i="",o="",n="",a=this.model.get("cid");return""!==e.handle_color&&"before_after"===e.type&&(t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle {",t+="border-color:"+(i=e.handle_color)+";",t+="}","horizontal"===e.orientation?(t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-left-arrow {",t+="border-right-color:"+i+";",t+="}",t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-right-arrow {",t+="border-left-color:"+i+";",t+="}",e.handle_type&&""!==e.handle_type&&"diamond"===e.handle_type?(t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle-diamond .fusion-image-before-after-left-arrow::before {",t+="border-color:"+i+" !important;",t+="}"):e.handle_type&&""!==e.handle_type&&"circle"===e.handle_type&&(t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle-circle {",t+="background:"+i+" !important;",t+="}",t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle-circle .fusion-image-before-after-left-arrow::before {",t+="border-color:"+(o=jQuery.Color(i)).alpha(.6).toRgbaString()+" !important;",t+="}",t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle-circle .fusion-image-before-after-left-arrow {",t+="border-right-color:"+_.fusionAutoCalculateAccentColor(i)+" !important;",t+="}",t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle-circle .fusion-image-before-after-right-arrow {",t+="border-left-color:"+_.fusionAutoCalculateAccentColor(i)+" !important;",t+="}")):"vertical"===e.orientation&&(t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-up-arrow {",t+="border-bottom-color:"+i+";",t+="}",t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-down-arrow {",t+="border-top-color:"+i+";",t+="}",e.handle_type&&""!==e.handle_type&&"diamond"===e.handle_type?(t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle-diamond .fusion-image-before-after-left-arrow::before {",t+="border-color:"+i+" !important;",t+="}"):e.handle_type&&""!==e.handle_type&&"circle"===e.handle_type&&(t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle-circle {",t+="background:"+i+" !important;",t+="}",t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle-circle .fusion-image-before-after-down-arrow::before {",t+="border-color:"+(o=jQuery.Color(i)).alpha(.6).toRgbaString()+" !important;",t+="}",t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle-circle .fusion-image-before-after-up-arrow {",t+="border-bottom-color:"+_.fusionAutoCalculateAccentColor(i)+" !important;",t+="}",t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle-circle .fusion-image-before-after-down-arrow {",t+="border-top-color:"+_.fusionAutoCalculateAccentColor(i)+" !important;",t+="}")),t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle::after {",t+="background:"+i+";","vertical"!==e.orientation&&(t+="box-shadow: 0 3px 0 "+i+", 0 0 12px rgba(51,51,51,.5);"),t+="}",t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle::before {",t+="background:"+i+";","vertical"!==e.orientation&&(t+="box-shadow: 0 3px 0 "+i+", 0 0 12px rgba(51,51,51,.5);"),t+="}"),e.handle_bg&&""!==e.handle_bg&&"before_after"===e.type&&(n=e.handle_bg,"circle"!==e.handle_type&&"arrows"!==e.handle_type&&("diamond"!==e.handle_type?t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-handle {":(t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-down-arrow:before,",t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-left-arrow:before {"),t+="background:"+n+";",t+="}")),e.font_size&&""!==e.font_size&&"before_after"===e.type&&(t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-before-label:before",t+=",.fusion-image-before-after-cid"+a+" .fusion-image-before-after-after-label:before","out-image-up-down"===e.label_placement&&(t+=",.fusion-image-before-after-wrapper-cid"+a+" .fusion-image-before-after-before-label:before",t+=",.fusion-image-before-after-wrapper-cid"+a+" .fusion-image-before-after-after-label:before"),t+="{",t+="font-size:"+e.font_size+";",t+="}"),e.accent_color&&""!==e.accent_color&&"before_after"===e.type&&(i=e.accent_color,o=jQuery.Color(i),t+=".fusion-image-before-after-cid"+a+" .fusion-image-before-after-before-label:before",t+=",.fusion-image-before-after-cid"+a+" .fusion-image-before-after-after-label:before","out-image-up-down"===e.label_placement&&(t+=",.fusion-image-before-after-wrapper-cid"+a+" .fusion-image-before-after-before-label:before",t+=",.fusion-image-before-after-wrapper-cid"+a+" .fusion-image-before-after-after-label:before"),t+="{",t+="color:"+i+";","out-image-up-down"!==e.label_placement&&(t+="background:"+o.alpha(.15).toRgbaString()+";"),t+="}"),"switch"===e.type&&e.transition_time&&(t+=".fusion-image-switch.fusion-image-before-after-cid"+a+" img{",t+="transition: "+e.transition_time+"s ease-in-out;",t+="}",-1!==e.before_image.indexOf(".png")&&-1!==e.after_image.indexOf(".png")&&(t+=".fusion-image-switch.fusion-image-before-after-cid"+a+":hover img:first-child{",t+="opacity: 1;",t+="}")),t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_counters_box=FusionPageBuilder.ParentElementView.extend({afterPatch:function(){this.appendChildren(".fusion-counters-box"),this._refreshJs()},filterTemplateAtts:function(e){var t;return this.validateValues(e.values,e.params),t=this.buildAtts(e.values),(e={}).countersBoxShortcode=t,e},validateValues:function(e,t){(e=jQuery.extend(!0,{},fusionAllElements.fusion_counters_box.defaults,_.fusionCleanParameters(t))).title_size=_.fusionValidateAttrValue(e.title_size,""),e.icon_size=_.fusionValidateAttrValue(e.icon_size,""),e.body_size=_.fusionValidateAttrValue(e.body_size,""),e.columns=Math.min(6,e.columns)},buildAtts:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-counters-box counters-box row fusion-clearfix fusion-columns-"+e.columns});return""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id+=" "+e.id),t.class+=" fusion-child-element",t["data-empty"]=this.emptyPlaceholderText,t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_counter_box=FusionPageBuilder.ChildElementView.extend({onRender:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.model.attributes.selectors.class+="video"===this.model.attributes.params.type?" video":" image",this.setElementAttributes(this.$el,this.model.attributes.selectors))},afterPatch:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.model.attributes.selectors.class+="video"===this.model.attributes.params.type?" video":" image",this.setElementAttributes(this.$el,this.model.attributes.selectors)),this._refreshJs()},filterTemplateAtts:function(e){var t,i,o,n=e.values.element_content,a=this.model.get("parent"),s=FusionPageBuilderElements.find(function(e){return e.get("cid")==a}),r=jQuery.extend(!0,{},fusionAllElements.fusion_counters_box.defaults,_.fusionCleanParameters(s.get("params")));return this.validateValues(e.values,e.params),this.validateParentValues(r),t=this.buildContainerAtts(e.values,r),o=this.buildCounterWrapper(e.values,r),i=this.buildContentAttr(r),this.setSelectors(e.values,r),(e={}).counterBoxContainer=t,e.counterWrapper=o,e.counterBoxShortcodeContent=i,e.cid=this.model.get("cid"),e.parent=a,e.output=n,e},validateValues:function(e,t){(e=jQuery.extend(!0,{},fusionAllElements.fusion_counter_box.defaults,_.fusionCleanParameters(t))).value=e.value.replace(",","."),e.float=e.value.split("."),void 0!==e.float[1]&&(e.decimals=e.float[1].length)},validateParentValues:function(e){e.title_size=_.fusionValidateAttrValue(e.title_size,""),e.icon_size=_.fusionValidateAttrValue(e.icon_size,""),e.body_size=_.fusionValidateAttrValue(e.body_size,""),e.columns=Math.min(6,e.columns)},buildContainerAtts:function(e,t){var i={class:"counter-box-container"};return i.style="border: 1px solid "+t.border_color+";",i},buildCounterWrapper:function(e,t){var i,o,n,a,s,r,l=e.unit?'<span class="unit">'+e.unit+"</span>":"",u="up"===e.direction?0:e.value,d="",c=0;return e.value=e.value.replace(",","."),void 0!==(r=e.value.split("."))[1]&&(c=r[1].length),n={class:"display-counter","data-value":e.value,"data-delimiter":e.delimiter,"data-direction":e.direction,"data-decimals":c},n=_.fusionInlineEditor({cid:this.model.get("cid"),param:"value",toolbar:!1,"disable-return":!0,"disable-extra-spaces":!0},n),i="<span "+_.fusionGetAttributes(n)+">"+u+"</span>",(e.icon||t.icon)&&(o=e.icon?e.icon:t.icon,s={class:"counter-box-icon fontawesome-icon "+_.fusionFontAwesome(o),style:"font-size:"+t.icon_size+"px;"},d="<i "+_.fusionGetAttributes(s)+"></i>"),i="prefix"===e.unit_pos?d+l+i:d+i+l,a={class:"content-box-percentage content-box-counter",style:"color:"+t.color+";font-size:"+t.title_size+"px;line-height:normal;"},"<div "+_.fusionGetAttributes(a)+">"+i+"</div>"},buildContentAttr:function(e){var t={class:"counter-box-content",style:"color:"+e.body_color+";font-size:"+e.body_size+"px;"};return t=_.fusionInlineEditor({cid:this.model.get("cid"),param:"element_content",toolbar:"simple","disable-return":!0,"disable-extra-spaces":!0},t)},setSelectors:function(e,t){var i,o=1,n={};void 0!==t.columns&&""!==t.columns&&0!==t.columns&&(o=12/t.columns),n.class="fusion-counter-box fusion-column col-counter-box counter-box-wrapper col-lg-"+o+" col-md-"+o+" col-sm-"+o,"5"!==t.columns&&5!==t.columns||(n.class="fusion-counter-box fusion-column col-counter-box counter-box-wrapper col-lg-2 col-md-2 col-sm-2"),"yes"===t.icon_top&&(n.class+=" fusion-counter-box-icon-top"),""!==e.class&&(n.class+=" "+e.class),""!==e.id&&(n.id=e.id),t.animation_type&&(i=_.fusionGetAnimations({offset:t.animation_offset}),(n=jQuery.extend(n,i)).class+=" "+n.animation_class,delete n.animation_class),this.model.set("selectors",n)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_widget_area=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={},i=void 0!==e.values.name?e.values.name.replace(/-/g,"_"):"";return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.styles=this.buildStyling(e.values),t.widgetArea=!1,"undefined"!==e.query_data&&void 0!==e.query_data[i]&&(t.widgetArea=e.query_data[i]),t},validateValues:function(e){e=_.fusionGetPadding(e)},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-widget-area fusion-content-widget-area",style:""}),i=this.model.get("cid");return t.class+=" fusion-widget-area-cid"+i,""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildStyling:function(e){var t="",i=this.model.get("cid");return""!==e.background_color&&(t+=".fusion-widget-area-cid"+i+" {background-color:"+e.background_color+";}"),""!==e.padding&&(-1===e.padding.indexOf("%")&&-1===e.padding.indexOf("px")&&(e.padding=e.padding+"px"),t+=".fusion-widget-area-cid"+i+" {padding:"+_.fusionGetValueWithUnit(e.padding)+";}"),""!==e.title_color&&(t+=".fusion-widget-area-cid"+i+" .widget h4 {color:"+e.title_color+";}",t+=".fusion-widget-area-cid"+i+" .widget .heading h4 {color:"+e.title_color+";}"),""!==e.title_size&&(t+=".fusion-widget-area-cid"+i+" .widget h4 {font-size:"+e.title_size+";}",t+=".fusion-widget-area-cid"+i+" .widget .heading h4 {font-size:"+e.title_size+";}"),t}}),_.extend(FusionPageBuilder.Callback.prototype,{fusion_widget_area:function(i,o,e,n,t,a,s,r){var l,u=jQuery.extend(!0,{},e.params),d={};if(void 0===i||n.skip||(u[i]=o),d.params=jQuery.extend(!0,{},window.fusionAllElements[e.element_type].defaults,_.fusionCleanParameters(u)),void 0!==i&&void 0!==o&&(l=o.replace(/-/g,"_")),void 0!==s.query_data&&void 0!==s.query_data[l]&&void 0!==r)return r.reRender(),!0;jQuery.ajax({url:window.fusionAppConfig.ajaxurl,type:"post",dataType:"json",data:{action:"get_widget_area",model:d,fusion_load_nonce:window.fusionAppConfig.fusion_load_nonce},success:function(e){var t;void 0!==s&&void 0!==s.get("query_data")?(t=s.get("query_data"))[l]=e[l]:t=e,s.set("query_data",t),n.skip||void 0===i||r.changeParam(i,o),"generated_element"!==s.get("type")&&r.reRender()}})}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_content_boxes=FusionPageBuilder.ParentElementView.extend({imageMap:{},initialData:!1,afterPatch:function(){this.generateChildElements(),this._refreshJs()},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.styles=this.buildStyles(e.values),t},validateValues:function(e){void 0!==e.image_width?e.image_width=e.image_width?e.image_width:"35":e.image_width=e.image_max_width,e.title_size=_.fusionValidateAttrValue(e.title_size,"px",!1),e.icon_circle_radius=_.fusionValidateAttrValue(e.icon_circle_radius,"px"),e.icon_size=_.fusionValidateAttrValue(e.icon_size,"px"),e.margin_top=_.fusionValidateAttrValue(e.margin_top,"px"),e.margin_bottom=_.fusionValidateAttrValue(e.margin_bottom,"px"),e.margin_bottom=_.fusionValidateAttrValue(e.margin_bottom,"px"),e.circlebordersize=_.fusionValidateAttrValue(e.circlebordersize,"px"),e.outercirclebordersize=_.fusionValidateAttrValue(e.outercirclebordersize,"px"),e.linktarget&&(e.link_target=e.linktarget),"timeline-vertical"===e.layout&&(e.columns=1),"timeline-vertical"!==e.layout&&"timeline-horizontal"!==e.layout||(e.animation_delay=350,e.animation_speed=.25,e.animation_type="fade",e.animation_direction="")},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-content-boxes content-boxes",style:""}),i=this.model.get("cid"),o=this.model.children.length,n=e.columns;return""===n||"0"===n?(n=o,n=Math.max(6,n)):6<n&&(n=6),t.class+=" columns row",t.class+=" fusion-columns-"+n,t.class+=" fusion-columns-total-"+o,t.class+=" fusion-content-boxes-cid"+i,t.class+=" content-boxes-"+e.layout,t.class+=" content-"+e.icon_align,"timeline-horizontal"!==e.layout&&"clean-vertical"!==e.layout||(t.class+=" content-boxes-icon-on-top"),"timeline-vertical"===e.layout&&(t.class+=" content-boxes-icon-with-title"),"clean-horizontal"===e.layout&&(t.class+=" content-boxes-icon-on-side"),""!==e.animation_delay&&(t["data-animation-delay"]=e.animation_delay,t.class+=" fusion-delayed-animation"),t.class+=" fusion-child-element",t.style+="margin-top:"+e.margin_top+";",t.style+="margin-bottom:"+e.margin_bottom+";",""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t=_.fusionAnimations(e,t)},buildStyles:function(e){var t="",i=this.model.get("cid"),o="";return""!==e.title_color&&(t+=".fusion-content-boxes-cid"+i+" .heading .content-box-heading{color:"+e.title_color+";}"),t+=".fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-link-icon-hover .heading .content-box-heading, .fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-link-icon-hover .heading .heading-link .content-box-heading,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-box-hover .heading .content-box-heading,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-box-hover .heading .heading-link .content-box-heading,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-link-icon-hover.link-area-box .fusion-read-more,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-link-icon-hover.link-area-box .fusion-read-more::after,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-link-icon-hover.link-area-box .fusion-read-more::before,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .fusion-read-more:hover:after,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .fusion-read-more:hover:before,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .fusion-read-more:hover,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-box-hover.link-area-box .fusion-read-more,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-box-hover.link-area-box .fusion-read-more::after,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-box-hover.link-area-box .fusion-read-more::before,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-link-icon-hover .icon .circle-no, .fusion-content-boxes-cid"+i+" .heading .heading-link:hover .content-box-heading { color: "+e.hover_accent_color+";}",t+=".fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-box-hover .icon .circle-no {color: "+e.hover_accent_color+" !important;}",t+=".fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-box.link-area-box-hover .fusion-content-box-button {",t+="background: "+fusionAllElements.fusion_button.defaults.button_gradient_top_color_hover+";",t+="color: "+fusionAllElements.fusion_button.defaults.button_accent_hover_color+";",fusionAllElements.fusion_button.defaults.button_gradient_top_color_hover!==fusionAllElements.fusion_button.defaults.button_gradient_bottom_color_hover&&(t+="background-image: -webkit-gradient( linear, left bottom, left top, from( "+fusionAllElements.fusion_button.defaults.button_gradient_bottom_color_hover+" ), to( "+fusionAllElements.fusion_button.defaults.button_gradient_top_color_hover+" ) );",t+="background-image: linear-gradient( to top, "+fusionAllElements.fusion_button.defaults.button_gradient_bottom_color_hover+", "+fusionAllElements.fusion_button.defaults.button_gradient_top_color_hover+" )"),t+="}",t+=".fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-box.link-area-box-hover .fusion-content-box-button .fusion-button-text {",t+="color: "+fusionAllElements.fusion_button.defaults.button_accent_hover_color+";",t+="}",o=e.hover_accent_color,"transparent"!==e.circlecolor&&0!==jQuery.Color(e.circlecolor).alpha()||(o="transparent"),t+=".fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-link-icon-hover .heading .icon > span,",t+=".fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-link-icon-hover .heading .icon i.circle-yes { background-color: "+o+" !important;}",t+=".fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-box-hover .heading .icon > span,",t+=".fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-link-icon-hover .heading .icon i.circle-yes { border-color: "+e.hover_accent_color+" !important; }","pulsate"===e.icon_hover_type&&""!==e.hover_accent_color&&(t+=".fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-link-icon-hover.icon-hover-animation-pulsate .fontawesome-icon:after,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-box-hover.icon-hover-animation-pulsate .fontawesome-icon:after,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-link-icon-hover.icon-wrapper-hover-animation-pulsate .icon span:after,.fusion-content-boxes-cid"+i+" .fusion-content-box-hover .link-area-box-hover.icon-wrapper-hover-animation-pulsate .icon span:after {-webkit-box-shadow:0 0 0 2px rgba(255,255,255,0.1), 0 0 10px 10px "+e.hover_accent_color+", 0 0 0 10px rgba(255,255,255,0.5);-moz-box-shadow:0 0 0 2px rgba(255,255,255,0.1), 0 0 10px 10px "+e.hover_accent_color+", 0 0 0 10px rgba(255,255,255,0.5);box-shadow: 0 0 0 2px rgba(255,255,255,0.1), 0 0 10px 10px "+e.hover_accent_color+", 0 0 0 10px rgba(255,255,255,0.5);}"),t},onGenerateChildElements:function(e){this.addImagesToImageMap(e,!1,!1)},addImagesToImageMap:function(e,t,i){var a=this,s={};t=void 0===t||t,i=void 0===i||i,a.initialData=!0,_.each(e,function(e){var t=void 0!==e.get?e.get("params"):e.params,i=void 0!==e.get?e.get("cid"):e.cid,o=void 0!==t.image_id&&""!==t.image_id&&t.image_id,n=void 0!==t.image&&""!==t.image&&t.image;(o||n)&&(o&&void 0!==a.imageMap[o]||n&&void 0!==a.imageMap[n]||(s[i]=t))}),_.isEmpty(s)?i&&a.reRender():jQuery.ajax({async:t,url:window.fusionAppConfig.ajaxurl,type:"post",dataType:"json",data:{action:"get_fusion_content_boxes_children_data",children:s,fusion_load_nonce:window.fusionAppConfig.fusion_load_nonce},success:function(e){a.updateImageMap(e),i&&a.reRender()}})},updateImageMap:function(e){var i=this;_.each(e,function(e,t){void 0===i.imageMap[t]&&(i.imageMap[t]=e)})}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_content_box=FusionPageBuilder.ChildElementView.extend({resetTypography:function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("fusion-typography-reset",this.model.get("cid")),jQuery("#fb-preview").width()<800&&setTimeout(function(){jQuery("#fb-preview")[0].contentWindow.jQuery("body").trigger("resize")},50)},onRender:function(){var e=this.model.get("query_data");void 0!==e&&window.FusionPageBuilderViewManager.getView(this.model.get("parent")).updateImageMap(e),void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors))},afterPatch:function(){var e=this.model.get("query_data");void 0!==e&&window.FusionPageBuilderViewManager.getView(this.model.get("parent")).updateImageMap(e),this.resetTypography(),void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors)),this.refreshJs()},onCancel:function(){this.resetTypography()},filterTemplateAtts:function(e){var t={};return this.validateValues(e),this.extras=e.extras,this.buildAttr(e),t.attrShortcodeIcon=this.buildShortcodeIconAttr(e),t.attrShortcodeIconParent=this.buildShortcodeIconParentAttr(e),t.attrShortcodeIconWrapper=this.buildShortcodeIconWrapperAttr(e),t.attrContentBoxHeading=this.buildContentBoxHeadingAttr(e),t.attrHeadingWrapper=this.buildContentBoxHeadingWrapperAttr(e),t.attrContentContainer=this.buildContentContainerAttr(e),t.attrShortcodeTimeline=this.buildShortcodeTimelineAttr(e),t.attrContentWrapper=this.buildContentWrapperAttr(e),t.attrHeadingLink=this.contentBoxShortcodeAttrs(!1,"heading-link",e),t.attrReadMore=this.contentBoxShortcodeAttrs(!0,"fusion-read-more",e),t.attrButton=this.contentBoxShortcodeAttrs(!0,!1,e),t.styles=this.buildStyles(e),t.cid=this.model.get("cid"),t.output=e.values.element_content,t.parentCid=e.parent,t.values=e.values,t.parentValues=e.parentValues,t},validateValues:function(e){var t=e.values,i=e.parentValues,o=this.model.get("params"),n=e.query_data,a=window.FusionPageBuilderViewManager.getView(this.model.get("parent")),s=!1;void 0!==o.image&&""!==o.image||void 0===o.icon||""===o.icon||(t.image=""),void 0!==o.image_width&&o.image_width?t.image_width=o.image_width:t.image_width=t.image_max_width,t.image_width=_.fusionValidateAttrValue(t.image_width,""),void 0===t.image||""===t.image&&""===t.image_id?(t.image_width=-1===t.image_width||""===t.image_width?"35":t.image_width,t.image_height="35"):(void 0!==n&&void 0!==n[t.image]?s=n[t.image]:void 0!==n&&void 0!==n[t.image_id]?s=n[t.image_id]:void 0!==a.imageMap[t.image]?s=a.imageMap[t.image]:void 0!==a.imageMap[t.image_id]&&(s=a.imageMap[t.image_id]),s&&""!==s.height?(t.image_width=-1===t.image_width||""===t.image_width?s.width:t.image_width,t.image_height=s.width?parseFloat(t.image_width)/parseFloat(s.width)*parseFloat(s.height):t.image_width):(t.image_width="35",t.image_height="35")),t.linktarget&&(t.link_target=t.linktarget),"parent"===i.settings_lvl&&(t.backgroundcolor=i.backgroundcolor,t.circlecolor=i.circlecolor,t.circlebordercolor=i.circlebordercolor,t.circlebordersize=i.circlebordersize,t.outercirclebordercolor=i.outercirclebordercolor,t.outercirclebordersize=i.outercirclebordersize,t.iconcolor=i.iconcolor,t.animation_type=i.animation_type,t.animation_direction=i.animation_direction,t.animation_speed=i.animation_speed,t.link_target=i.link_target),"timeline-vertical"===i.layout&&(i.columns=1),"timeline-vertical"!==i.layout&&"timeline-horizontal"!==i.layout||(t.animation_speed=.25,t.animation_type="fade",t.animation_direction=""),t.circlebordersize=_.fusionValidateAttrValue(t.circlebordersize,"px")},buildAttr:function(e){var t,i={class:"fusion-column content-box-column",style:""},o=this.model.get("cid"),n=e.values,a=e.parentValues,s=1,r=a.columns,l="";""===r||"0"===r?r=1:6<r&&(r=6),t=12/(r=parseInt(r,10)),r<s&&(s=1),i.class+=" content-box-column content-box-column-cid-"+o,i.class+=" col-lg-"+t,i.class+=" col-md-"+t,i.class+=" col-sm-"+t,5===r&&(i.class="fusion-column content-box-column content-box-column-cid-"+o+" col-lg-2 col-md-2 col-sm-2"),i.class+=" fusion-content-box-hover ","timeline-vertical"!==a.layout&&"timeline-horizontal"!==a.layout||(i.class+=" fusion-appear"),n.circlebordercolor&&(l=n.circlebordercolor),n.outercirclebordercolor&&(l=n.outercirclebordercolor),n.circlebordercolor||n.outercirclebordercolor||(l="#f6f6f6"),1==parseFloat(o)/parseFloat(r)&&(i.class+=" content-box-column-first-in-row"),e.last&&(i.class+=" content-box-column-last"),parseFloat(o)===parseFloat(r)&&(i.class+=" content-box-column-last-in-row"),l&&-1!==jQuery.inArray(a.layout,["clean-vertical","clean-horizontal"])&&(i.style+="border-color:"+l+";"),""!==n.class&&(i.class+=" "+n.class),""!==n.id&&(i.id=n.id),this.model.set("selectors",i)},buildShortcodeIconAttr:function(e){var t={class:"",style:""},i=e.values,o=e.parentValues;return i.image?(t.class="image","icon-boxed"===o.layout&&i.image_width&&i.image_height&&(t.style="margin-left:-"+parseFloat(i.image_width)/2+"px;",t.style+="top:-"+(parseFloat(i.image_height)/2+50)+"px;")):i.icon&&(t.class="fontawesome-icon "+_.fusionFontAwesome(i.icon),i.circle||(i.circle=o.circle),"yes"===o.icon_circle?(t.class+=" circle-yes",i.circlebordercolor&&(t.style+="border-color:"+i.circlebordercolor+";"),i.circlebordersize&&(t.style+="border-width:"+i.circlebordersize+";"),i.circlecolor&&(t.style+="background-color:"+i.circlecolor+";"),t.style+="height:"+2*parseFloat(o.icon_size)+"px;width:"+2*parseFloat(o.icon_size)+"px;line-height:"+2*parseFloat(o.icon_size)+"px;","icon-boxed"!==o.layout||""!==i.outercirclebordercolor&&""!==i.outercirclebordersize&&""===parseFloat(i.outercirclebordersize)||(t.style+="top:-"+(50+parseFloat(o.icon_size))+"px;margin-left:-"+parseFloat(o.icon_size)+"px;"),"round"===o.icon_circle_radius&&(o.icon_circle_radius="100%"),t.style+="border-radius:"+o.icon_circle_radius+";",i.outercirclebordercolor&&i.outercirclebordersize&&0!==parseFloat(i.outercirclebordersize)&&(t.style+="position:relative;",t.style+="top:auto;",t.style+="left:auto;",t.style+="margin:0;",t.style+="box-sizing: content-box;")):(t.class+=" circle-no",t.style+="background-color:transparent;border-color:transparent;height:auto;width: "+_.fusionGetValueWithUnit(o.icon_size)+";line-height:normal;","icon-boxed"===o.layout&&(t.style+="position:relative;left:auto;right:auto;top:auto;margin-left:auto;margin-right:auto;")),i.iconcolor&&(t.style+="color:"+i.iconcolor+";"),i.iconflip&&(t.class+=" fa-flip-"+i.iconflip),i.iconrotate&&(t.class+=" fa-rotate-"+i.iconrotate),"yes"===i.iconspin&&(t.class+=" fa-spin"),t.style+="font-size:"+o.icon_size+";"),t},buildShortcodeIconParentAttr:function(e){var t={class:"icon",style:""},i=e.values,o=e.parentValues,n="";return"yes"!==o.icon_circle&&"icon-boxed"===o.layout&&(t.style+="position:absolute;width: 100%;top:-"+(50+parseFloat(o.icon_size)/2)+"px;"),"timeline-vertical"!==o.layout||"right"!==o.icon_align||i.outercirclebordercolor&&i.circlebordersize||(t.style+="padding-left:20px;"),o.animation_delay&&(n=o.animation_delay,t.style+="-webkit-animation-duration: "+n+"ms;",t.style+="animation-duration: "+n+"ms;"),t},buildShortcodeIconWrapperAttr:function(e){var t={class:"icon",style:""},i=e.values,o=e.parentValues,n="",a="";return i.icon&&(t.class="","yes"===o.icon_circle&&(t.style+="height:"+2*(parseFloat(o.icon_size)+parseFloat(i.circlebordersize))+"px;",t.style+="width:"+2*(parseFloat(o.icon_size)+parseFloat(i.circlebordersize))+"px;",t.style+="line-height:"+(parseFloat(o.icon_size)+2*parseFloat(i.circlebordersize))+"px;",i.outercirclebordercolor&&(t.style+="border-color:"+i.outercirclebordercolor+";"),i.outercirclebordersize&&0!==parseFloat(i.outercirclebordersize)&&(t.style+="border-width:"+parseFloat(i.outercirclebordersize)+"px;"),t.style+="border-style:solid;",i.circlebordercolor&&(t.style+="background-color:"+i.circlebordercolor+";"),"icon-boxed"===o.layout&&(t.style+="position:absolute;",t.style+="top:-"+(50+parseFloat(o.icon_size)+parseFloat(i.circlebordersize))+"px;",t.style+="margin-left:-"+(parseFloat(o.icon_size)+parseFloat(i.circlebordersize))+"px;"),"round"===o.icon_circle_radius&&(o.icon_circle_radius="100%"),-1!==jQuery.inArray(o.layout,["icon-on-side","timeline-vertical","clean-horizontal"])&&(n="margin-right","right"===o.icon_align&&(n="margin-left"),a="20px","timeline-vertical"===o.layout&&"right"===o.icon_align&&(a="10px"),t.style+=n+":"+a+";"),t.style+="box-sizing:content-box;",t.style+="border-radius:"+o.icon_circle_radius+";")),t},buildContentBoxHeadingAttr:function(e){var t={class:"content-box-heading"},i=e.values,o=e.parentValues,n="",a="";return o.title_size&&(n=parseFloat(o.title_size),t.style="font-size:"+n+"px;line-height:"+(n+5)+"px;",t["data-fontsize"]=n,t["data-lineheight"]=n+5,t["data-inline-fontsize"]=n+"px",t["data-inline-lineheight"]=n+5+"px"),"right"===o.icon_align&&""!==t.style&&-1!==jQuery.inArray(o.layout,["icon-on-side","icon-with-title","timeline-vertical","clean-horizontal"])?t.style+=" text-align:"+o.icon_align+";":"left"===o.icon_align&&jQuery("body").hasClass("rtl")&&""===t.style&&-1!==jQuery.inArray(o.layout,["icon-on-side","icon-with-title","timeline-vertical","clean-horizontal"])&&(t.style+=" text-align:"+o.icon_align+";"),"icon-on-side"!==o.layout&&"clean-horizontal"!==o.layout||(""!==i.image&&""!==i.image_width&&""!==i.image_height?"right"===o.icon_align?t.style+="padding-right:"+(parseFloat(i.image_width)+20)+"px;":t.style+="padding-left:"+(parseFloat(i.image_width)+20)+"px;":""!==i.icon&&(a="yes"===o.icon_circle?2*(parseFloat(o.icon_size)+parseFloat(i.circlebordersize)+parseFloat(i.outercirclebordersize)):o.icon_size,"right"===o.icon_align?t.style+="padding-right:"+(parseFloat(a)+20)+"px;":t.style+="padding-left:"+(parseFloat(a)+20)+"px;")),t=_.fusionInlineEditor({cid:this.model.get("cid"),param:"title","disable-return":!0,"disable-extra-spaces":!0,toolbar:!1},t)},buildContentBoxHeadingWrapperAttr:function(e){var t={class:"heading"},i=e.values,o=e.parentValues;return""===i.icon&&""===i.image||(t.class+=" heading-with-icon"),""!==o.icon_align&&(t.class+=" icon-"+o.icon_align),t},buildContentContainerAttr:function(e){var t={class:"content-container",style:""},i=e.values,o=e.parentValues,n="",a="";return-1!==jQuery.inArray(o.layout,["icon-on-side","timeline-vertical","clean-horizontal"])&&i.image&&i.image_width&&i.image_height?("clean-horizontal"===o.layout?t.style+="padding-left:"+(parseFloat(i.image_width)+20)+"px;":"right"===o.icon_align?t.style+="padding-right:"+(parseFloat(i.image_width)+20)+"px;":t.style+="padding-left:"+(parseFloat(i.image_width)+20)+"px;","timeline-vertical"===o.layout&&(n=i.image_height)>parseFloat(o.title_size)&&0<n-parseFloat(o.title_size)-15&&(t.style+="margin-top:-"+(n-parseFloat(o.title_size))+"px;")):-1!==jQuery.inArray(o.layout,["icon-on-side","timeline-vertical","clean-horizontal"])&&i.icon&&(a="yes"===o.icon_circle?2*(parseFloat(o.icon_size)+parseFloat(i.circlebordersize)+parseFloat(i.outercirclebordersize)):o.icon_size,"clean-horizontal"===o.layout?t.style+="padding-left:"+(parseFloat(a)+20)+"px;":"right"===o.icon_align?t.style+="padding-right:"+(parseFloat(a)+20)+"px;":t.style+="padding-left:"+(parseFloat(a)+20)+"px;","timeline-vertical"===o.layout&&a>parseFloat(o.title_size)&&0<a-parseFloat(o.title_size)-15&&("timeline-vertical"===o.layout?t.style+="margin-top:-"+(parseFloat(a)-parseFloat(o.title_size))/2+"px;":t.style+="margin-top:-"+(parseFloat(a)-parseFloat(o.title_size))+"px;")),"right"===o.icon_align&&""!==t.style&&-1!==jQuery.inArray(o.layout,["icon-on-side","icon-with-title","timeline-vertical","clean-horizontal"])?t.style+=" text-align:"+o.icon_align+";":"right"===o.icon_align&&""===t.style&&-1!==jQuery.inArray(o.layout,["icon-on-side","icon-with-title","timeline-vertical","clean-horizontal"])&&(t.style+=" text-align:"+o.icon_align+";"),o.body_color&&(t.style+="color:"+o.body_color+";"),t=_.fusionInlineEditor({cid:this.model.get("cid")},t)},buildShortcodeTimelineAttr:function(e){var t={class:""},i=e.values,o=e.parentValues,n="",a="",s="",r="";return"timeline-horizontal"===o.layout?(t.class="content-box-shortcode-timeline",t.style="",a=("yes"===o.icon_circle?0!==parseFloat(i.outercirclebordersize)?2*(parseFloat(o.icon_size)+parseFloat(i.circlebordersize)+parseFloat(i.outercirclebordersize)):2*parseFloat(o.icon_size):parseFloat(o.icon_size))/2,i.backgroundcolor&&"transparent"!==i.backgroundcolor&&0!==jQuery.Color(i.backgroundcolor).alpha()&&(a+=35),i.circlebordercolor&&(n=i.circlebordercolor),i.outercirclebordercolor&&i.outercirclebordersize&&(n=i.outercirclebordercolor),i.circlebordercolor||i.outercirclebordercolor||(n="#f6f6f6"),n&&(t.style+="border-color:"+n+";"),a&&(t.style+="top:"+parseFloat(a)+"px;")):"timeline-vertical"===o.layout&&(t.class="content-box-shortcode-timeline-vertical",t.style="",s=(a="yes"===o.icon_circle?parseFloat(i.outercirclebordersize)?2*(parseFloat(o.icon_size)+parseFloat(i.circlebordersize)+parseFloat(i.outercirclebordersize)):2*parseFloat(o.icon_size):parseFloat(o.icon_size))/2,i.backgroundcolor&&"transparent"!==i.backgroundcolor&&0!==jQuery.Color(i.backgroundcolor).alpha()&&(a+=35,s+=35),i.circlebordercolor&&(n=i.circlebordercolor),i.outercirclebordercolor&&i.outercirclebordersize&&(n=i.outercirclebordercolor),i.circlebordercolor||i.outercirclebordercolor||(n="#f6f6f6"),n&&(t.style+="border-color:"+n+";"),s&&("right"===o.icon_align?t.style+="right:"+parseFloat(s)+"px;":t.style+="left:"+parseFloat(s)+"px;"),a&&(t.style+="top:"+a+"px;")),o.animationDelay&&(r=o.animation_delay,t.style+="-webkit-transition-duration: "+r+"ms;",t.style+="animation-duration: "+r+"ms;"),t},buildContentWrapperAttr:function(e){var t={class:"col content-wrapper"},i=e.values,o=e.parentValues;return i.backgroundcolor||(i.backgroundcolor=o.backgroundcolor),i.backgroundcolor&&(t.style="background-color:"+i.backgroundcolor+";","transparent"!==i.backgroundcolor&&0!==jQuery.Color(i.backgroundcolor).alpha()&&(t.class+="-background")),"icon-boxed"===o.layout&&(t.class+=" content-wrapper-boxed"),i.link&&"box"===o.link_area&&(t["data-link"]=i.link,t["data-link-target"]=i.link_target),t.class+=" link-area-"+o.link_area,i.link&&o.link_type&&(t.class+=" link-type-"+o.link_type),i.outercirclebordercolor&&i.outercirclebordersize&&parseFloat(i.outercirclebordersize)&&(t.class+=" content-icon-wrapper-yes"),i.outercirclebordercolor&&i.outercirclebordersize&&0!==parseFloat(i.outercirclebordersize)&&"pulsate"===o.icon_hover_type?t.class+=" icon-wrapper-hover-animation-"+o.icon_hover_type:t.class+=" icon-hover-animation-"+o.icon_hover_type,i.textcolor&&(t.style+="color:"+i.textcolor+";"),"none"!==i.animation_type&&void 0!==i.animation_class&&(t.class+=" "+i.animation_class),t=""===i.animation_type?_.fusionAnimations(o,t):_.fusionAnimations(i,t)},buildStyles:function(e){var t="",i=(this.model.get("cid"),e.values),o=e.parentValues,n=e.parentCid,a="",s="",r="";return"transparent"!==i.circlecolor&&0!==jQuery.Color(i.backgroundcolor).alpha()||(s=!0),!0===s?(a=r=o.hover_accent_color,"transparent"!==i.circlecolor&&0!==jQuery.Color(i.circlecolor).alpha()||(a="transparent"),t+=".fusion-content-boxes-cid"+n+" .fusion-content-box-hover .heading-link:hover .icon i.circle-yes,.fusion-content-boxes-cid"+n+" .fusion-content-box-hover .link-area-box:hover .heading-link .icon i.circle-yes,.fusion-content-boxes-cid"+n+" .fusion-content-box-hover .link-area-link-icon-hover .heading .icon i.circle-yes,.fusion-content-boxes-cid"+n+" .fusion-content-box-hover .link-area-box-hover .heading .icon i.circle-yes { background-color: "+a+" !important; border-color: "+r+" !important;}"):!1===s&&(t+=".fusion-content-boxes-cid"+n+" .fusion-content-box-hover .heading-link:hover .icon i.circle-yes,.fusion-content-boxes-cid"+n+" .fusion-content-box-hover .link-area-box:hover .heading-link .icon i.circle-yes,.fusion-content-boxes-cid"+n+" .fusion-content-box-hover .link-area-link-icon-hover .heading .icon i.circle-yes,.fusion-content-boxes-cid"+n+" .fusion-content-box-hover .link-area-box-hover .heading .icon i.circle-yes {background-color: "+(r=o.hover_accent_color)+" !important;border-color: "+r+" !important;}"),t},contentBoxShortcodeAttrs:function(e,t,i){var o={class:"",style:""},n="",a="",s=i.values,r=i.parentValues,l=i.extras;return s.link&&(o.href=s.link),s.link_target&&(o.target=s.link_target),"_blank"===s.link_target&&(o.rel="noopener noreferrer"),"button"!==r.link_type&&"button-bar"!==r.link_type||!e||(o.class+="fusion-read-more-button fusion-content-box-button fusion-button button-default button-"+l.button_size.toLowerCase()+" button-"+l.button_shape.toLowerCase()+" button-"+l.button_type.toLowerCase()),"button-bar"===r.link_type&&"timeline-vertical"===r.layout&&e?(n=35,s.backgroundcolor&&"transparent"!==s.backgroundcolor&&0!==jQuery.Color(s.backgroundcolor).alpha()&&(n+=35),s.image&&s.image_width&&s.image_height?a=s.image_width:s.icon&&(a="yes"===r.icon_circle?2*(r.icon_size+parseFloat(s.circlebordersize)+parseFloat(s.outercirclebordersize)):r.icon_size),"right"===r.icon_align?o.style+="margin-right:"+(parseFloat(a)+parseFloat(n))+"px;":o.style+="margin-left:"+(parseFloat(a)+parseFloat(n))+"px;",o.style+="width:calc(100% - "+(a+n+15)+"px);"):-1!==jQuery.inArray(r.layout,["icon-on-side","clean-horizontal","timeline-vertical"])&&-1!==jQuery.inArray(r.link_type,["text","button"])&&e?(n=20,s.image&&s.image_width&&s.mage_height?a=s.image_width:s.icon&&(a="yes"===r.icon_circle?2*(parseFloat(r.icon_size)+parseFloat(s.circlebordersize)+parseFloat(s.outercirclebordersize)):r.icon_size),"text"===r.link_type||"button"===r.link_type?("right"===r.icon_align?(o.style+="float:"+r.icon_align+";",o.style+="margin-right:"+(parseFloat(a)+parseFloat(n))+"px;"):o.style+="margin-left:"+(parseFloat(a)+n)+"px;","yes"===r.button_span&&(o.style+="width:calc( 100% - "+(parseFloat(a)+parseFloat(n))+"px );")):"right"===r.icon_align?o.style+="margin-right:"+(parseFloat(a)+parseFloat(n))+"px;":o.style+="margin-left:"+(parseFloat(a)+parseFloat(n))+"px;"):"icon-with-title"===r.layout&&(o.style+="float:"+r.icon_align+";"),-1===jQuery.inArray(r.layout,["icon-on-side","clean-horizontal","timeline-vertical"])&&"button"===r.link_type&&"yes"===r.button_span&&(o.style+="width: 100%;"),t&&(o.class+=" "+t),o}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_social_links=FusionPageBuilder.ElementView.extend({beforePatch:function(){jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find(".fusion-tooltip")).tooltip("destroy")},afterPatch:function(){this._refreshJs()},filterTemplateAtts:function(e){var t,i,o,n=e.values;return this.validateValuesExtras(e.values,e.extras),t=this.buildShortcodeAttr(e.values),i=this.buildSocialNetworksAttr(e.values),o=this.buildIcons(e.values),(e={}).socialLinksShortcode=t,e.socialLinksShortcodeSocialNetworks=i,e.icons=o,e.alignment=n.alignment,e},validateValuesExtras:function(e,t){e.linktarget=e.linktarget?"_blank":"_self",e.social_media_icons_icon=t.social_media_icons.icon,e.social_media_icons_url=t.social_media_icons.url,e.icons_boxed_radius=_.fusionValidateAttrValue(e.icons_boxed_radius,"px"),""==e.color_type&&(e.box_colors=e.social_links_box_color,e.icon_colors=e.social_links_icon_color)},buildShortcodeAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-social-links"});return""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildSocialNetworksAttr:function(e){var t={class:"fusion-social-networks"};return"yes"===e.icons_boxed&&(t.class+=" boxed-icons"),t},buildIcons:function(e){var t=_.fusionGetSocialNetworks(e);return t=_.fusionSortSocialNetworks(t,e),_.fusionBuildSocialLinks(t,this.socialLinksIconAttr,e)},socialLinksIconAttr:function(e,t){var i,o,n={class:"",style:""};return i=_.fusionUcFirst(e.social_network),"custom_"===e.social_network.substr(0,7)&&(n.class+="custom ",i=e.social_network.replace("custom_",""),e.social_network=i.toLowerCase()),n.class+="fusion-social-network-icon fusion-tooltip fusion-"+e.social_network+" fusion-icon-"+e.social_network,n["aria-label"]="fusion-"+e.social_network,o=e.social_link,n.target=t.linktarget,"_blank"===t.linktarget&&(n.rel="noopener noreferrer"),"mail"===e.social_network&&(o="http"===e.social_link.substr(0,4)?e.social_link:"mailto:"+e.social_link.replace("mailto:",""),n.target="_self"),n.href=o,void 0!==e.icon_color&&""!==e.icon_color&&(n.style="color:"+e.icon_color+";"),"yes"===t.icons_boxed&&void 0!==e.box_color&&(n.style+="background-color:"+e.box_color+";border-color:"+e.box_color+";"),("yes"===t.icons_boxed&&t.icons_boxed_radius||"0"===t.icons_boxed_radius)&&(t.icons_boxed_radius="round"===t.icons_boxed_radius?"50%":t.icons_boxed_radius,n.style+="border-radius:"+t.icons_boxed_radius+";"),"none"!==t.tooltip_placement.toLowerCase()&&(n["data-placement"]=t.tooltip_placement.toLowerCase(),i="youtube"===i.toLowerCase()?"YouTube":i,n["data-title"]=i,n["data-toggle"]="tooltip"),n.title=i,n}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_modal_text_link=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return t.modalTextShortcode=this.buildShortcodeAttr(e.values),t.output=e.values.element_content,t.name=e.values.name,t.label=window.fusionAllElements[this.model.get("element_type")].name,t.icon=window.fusionAllElements[this.model.get("element_type")].icon,t.cid=this.model.get("cid"),t},buildShortcodeAttr:function(e){var t={class:"fusion-modal-text-link"};return""!==e.name&&(t["data-toggle"]="modal",t["data-target"]=".fusion-modal."+e.name),void 0!==e.class&&""!==e.class&&(t.class+=" "+e.class),void 0!==e.id&&""!==e.id&&(t.id=e.id),t.href="#",t=_.fusionInlineEditor({cid:this.model.get("cid"),"disable-return":!0,"disable-extra-spaces":!0,toolbar:!0},t)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_popover=FusionPageBuilder.ElementView.extend({beforePatch:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find('[data-toggle~="popover"]'));e.removeData(),e.remove()},afterPatch:function(){this._refreshJs()},filterTemplateAtts:function(e){var t={};return t.attr=this.computeAttr(e.values),t.styles=this.computeStyles(e.values),t.cid=this.model.get("cid"),t.parent=this.model.get("parent"),t.inline=void 0!==e.inlineElement,t.content=e.values.element_content,t.label=window.fusionAllElements[this.model.get("element_type")].name,t.icon=window.fusionAllElements[this.model.get("element_type")].icon,t},computeAttr:function(e){var t=this.model.get("cid"),i={class:"fusion-popover popover-"+t};return"default"===e.placement&&(e.placement=fusionAllElements.fusion_popover.defaults.placement),""!==e.class&&(i.class+=" "+e.class),""!==e.id&&(i.id=e.id),i["data-animation"]=e.animation,i["data-class"]="fusion-popover-"+t,i["data-content"]=e.content,i["data-delay"]=e.delay,i["data-placement"]=e.placement.toLowerCase(),i["data-title"]=e.title,i["data-toggle"]="popover",i["data-trigger"]=e.trigger,i},computeStyles:function(e){var t,i,o=this.model.get("cid");return"default"===e.placement&&(e.placement=fusionAllElements.fusion_popover.defaults.placement),i=e.content_bg_color,"bottom"===e.placement&&(i=e.title_bg_color),t='<style type="text/css">',""!==e.bordercolor&&(t+=".fusion-popover-"+o+"."+e.placement+" .arrow{border-"+e.placement+"-color:"+e.bordercolor+";}",t+=".fusion-popover-"+o+"{border-color:"+e.bordercolor+";}"),t+=".fusion-popover-"+o+" .popover-title{",""!==e.title_bg_color&&(t+="background-color:"+e.title_bg_color+";"),""!==e.textcolor&&(t+="color:"+e.textcolor+";"),""!==e.bordercolor&&(t+="border-color:"+e.bordercolor+";"),t+="}",t+=".fusion-popover-"+o+" .popover-content{",""!==e.content_bg_color&&(t+="background-color:"+e.content_bg_color+";"),""!==e.textcolor&&(t+="color:"+e.textcolor+";"),t+="}",""!==i&&(t+=".fusion-popover-"+o+"."+e.placement+" .arrow:after{border-"+e.placement+"-color:"+i+";}"),t+="</style>"}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_events=FusionPageBuilder.ElementView.extend({afterPatch:function(){this._refreshJs()},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.attrEventsColumn=this.buildattrEventsColumn(e.values),t.eventsList={},void 0!==e.query_data&&void 0!==e.query_data.posts&&(t.eventsList=this.buildEventsList(e)),void 0!==e.query_data&&void 0!==e.query_data.max_num_pages&&void 0!==e.query_data.paged&&(t.paginationCode=this.buildPagination(e)),t.query_data=e.query_data,t.load_more_text=e.extras.load_more_text,t.load_more=e.values.load_more&&-1!=e.values.posts_per_page,t},validateValues:function(e){e=_.fusionGetPadding(e)},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-events-shortcode",style:""});return"no"!==e.pagination&&(t.class+=" fusion-events-pagination-"+e.pagination.replace("_","-")),"-1"!==e.column_spacing&&(t.style+="margin-left: -"+e.column_spacing/2+"px;",t.style+="margin-right: -"+e.column_spacing/2+"px;"),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildPagination:function(e){var t=e.extras.pagination_global,i=e.extras.pagination_start_end_range_global,o=e.extras.pagination_range_global,n="",a="",s="",r=e.query_data,l=e.values;return-1==l.number_posts&&(l.pagination="no"),l.load_more=!1,"no"!==l.pagination&&"load_more_button"===l.pagination&&(l.load_more=!0,l.pagination="infinite"),"no"!==l.pagination&&(n=r.paged,a=r.max_num_pages,s=_.fusionPagination(a,n,o,l.pagination,t,i)),s},buildattrEventsColumn:function(e){var t="",i=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-layout-column",style:""});switch(e.columns){case"1":t="full-one";break;case"2":t="one-half";break;case"3":t="one-third";break;case"4":t="one-fourth";break;case"5":t="one-fifth";break;case"6":t="one-sixth"}return t+="-1"!==e.column_spacing?" fusion-spacing-no":" fusion-spacing-yes","-1"===e.column_spacing&&-1===e.column_spacing||(i.style+="padding: "+e.column_spacing/2+"px;"),i.class+=" fusion-"+t,i},buildEventsList:function(t){var i="",o=t.query_data,n=t.values,a=!1,s="",r="yes"===n.strip_html,l=parseInt(n.columns,10),u=1,d={},c=this;return _.each(o.posts,function(e){d=c.buildattrEventsColumn(t.values),u===l&&(a=!0),l<u&&(a=!(u=1)),1===l&&(a=!0),""!=(s=a?" fusion-column-last":"")&&(d.class+=s),i+="<div "+_.fusionGetAttributes(d)+">",i+='<div class="fusion-column-wrapper">',i+='<div class="fusion-events-thumbnail hover-type-'+o.ec_hover_type+'">',i+='<a href="'+e.permalink+'" class="url" rel="bookmark" aria-label="'+e.title+'">',i+=e.thumbnail,i+="</a>",i+="</div>",i+='<div class="fusion-events-content-wrapper" style="padding:'+n.padding+';">',i+='<div class="fusion-events-meta">',i+='<h2><a href="'+e.permalink+'" class="url" rel="bookmark">'+e.title+"</a></h2>",i+="<h4>"+e.tribe_events_event_schedule_details+"</h4>",i+="</div>","no_text"!==n.content_length&&(i+='<div class="fusion-events-content">',"excerpt"===n.content_length?i+=_.fusionGetFixedContent(e.content,"yes",n.excerpt_length,r):i+=_.fusionGetFixedContent(e.content,"no"),i+="</div>"),i+="</div>",i+="</div>",i+="</div>",a&&(i+='<div class="fusion-clearfix"></div>',a=!1),u++}),i}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_countdown=FusionPageBuilder.ElementView.extend({onRender:function(){var e=this;jQuery(window).on("load",function(){e.afterPatch()})},beforeRemove:function(){this.beforePatch()},beforePatch:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find(".fusion-countdown-counter-wrapper"));e.stopCountDown(),e.removeData()},afterPatch:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find(".fusion-countdown-counter-wrapper"));setTimeout(function(){e.stopCountDown(),e.fusion_countdown()},300)},filterTemplateAtts:function(e){var t,i,o,n,a,s,r,l,u,d,c;return this.validateValues(e.values),t=this.buildWrapperAtts(e.values),i=this.buildCounterAtts(e.values,e.extras),o=this.buildLinkAtts(e.values,e.extras),s=this.buildDashHtml(e.values,e.extras),r=this.buildStyles(e.values),n=this.buildHeadingAttr(e.values),a=this.buildSubHeadingAttr(e.values),l=e.values.heading_text,u=e.values.subheading_text,d=e.values.link_text,c=e.values.element_content,(e={}).wrapperAttributes=t,e.counterAttributes=i,e.countdownShortcodeLink=o,e.dashhtml=s,e.styles=r,e.headingAttr=n,e.subHeadingAttr=a,e.heading_text=l,e.subheading_text=u,e.link_text=d,e.element_content=c,e.cid=this.model.get("cid"),e},validateValues:function(e){e.border_radius=_.fusionValidateAttrValue(e.border_radius,"px"),"default"===e.link_target&&(e.link_target=fusionAllElements.fusion_countdown.link_target)},buildWrapperAtts:function(e){var t={class:"countdown-shortcode fusion-countdown fusion-countdown-cid"+this.model.get("cid")};return t=_.fusionVisibilityAtts(e.hide_on_mobile,t),e.background_image||e.background_color&&"transparent"!==e.background_color||(t.class+=" fusion-no-bg"),e.class&&(t.class+=" "+e.class),e.id&&(t.id=e.id),t},buildCounterAtts:function(e,t){var i,o,n,a,s,r={class:"fusion-countdown-counter-wrapper countdown-shortcode-counter-wrapper",id:"fusion-countdown-cid"+this.model.get("cid")};return"site_time"===e.timezone&&(r["data-gmt-offset"]=t.gmt_offset),e.countdown_end&&(o=new Date(e.countdown_end),a=o.getMonth()+1,s=2,n=(i="000000000"+a).substr(i.length-s),r["data-timer"]=o.getFullYear()+"-"+n+"-"+o.getDate()+"-"+o.getHours()+"-"+o.getMinutes()+"-"+o.getSeconds()),r["data-omit-weeks"]="yes"===e.show_weeks?"0":"1",r},buildLinkAtts:function(e){var t={class:"fusion-countdown-link",target:e.link_target,href:e.link_url};return"_blank"===e.link_target&&(t.rel="noopener noreferrer"),t},buildDashHtml:function(i,e){var o="",n="",t=[{show:i.show_weeks,class:"weeks",shortname:e.weeks_text,longname:e.weeks_text},{show:"yes",class:"days",shortname:e.days_text,longname:e.days_text},{show:"yes",class:"hours",shortname:e.hrs_text,longname:e.hours_text},{show:"yes",class:"minutes",shortname:e.min_text,longname:e.minutes_text},{show:"yes",class:"seconds",shortname:e.sec_text,longname:e.seconds_text}];return i.counter_box_color&&"transparent"!==i.counter_box_color||(o=" fusion-no-bg"),jQuery.each(t,function(e,t){"yes"===t.show&&(n+='<div class="fusion-dash-wrapper '+o+'">',n+='<div class="fusion-dash fusion-dash-'+t.class+'">',"days"===t.class&&(n+='<div class="fusion-thousand-digit fusion-digit">0</div>'),"weeks"!==t.class&&"days"!==t.class||(n+='<div class="fusion-hundred-digit fusion-digit">0</div>'),n+='<div class="fusion-digit">0</div><div class="fusion-digit">0</div>',n+='<div class="fusion-dash-title">'+t[i.dash_titles+"name"]+"</div>",n+="</div></div>")}),n},buildStyles:function(e){var t="",i=this.model.get("cid");return e.background_image?(t+=".fusion-countdown-cid"+i+" {",t+="background:url("+e.background_image+") "+e.background_position+" "+e.background_repeat+" "+e.background_color+";","no-repeat"===e.background_repeat&&(t+="-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;"),t+="}"):e.background_color&&(t+=".fusion-countdown-cid"+i+" {background-color:"+e.background_color+";}"),e.border_radius&&(t+=".fusion-countdown-cid"+i+", .fusion-countdown-cid"+i+" .fusion-dash {border-radius:"+e.border_radius+";}"),e.heading_text_color&&(t+=".fusion-countdown-cid"+i+" .fusion-countdown-heading {color:"+e.heading_text_color+";}"),e.subheading_text_color&&(t+=".fusion-countdown-cid"+i+" .fusion-countdown-subheading {color:"+e.subheading_text_color+";}"),e.counter_text_color&&(t+=".fusion-countdown-cid"+i+" .fusion-countdown-counter-wrapper {color:"+e.counter_text_color+";}"),e.counter_box_color&&(t+=".fusion-countdown-cid"+i+" .fusion-dash {background-color:"+e.counter_box_color+";}"),e.link_text_color&&(t+=".fusion-countdown-cid"+i+" .fusion-countdown-link {color:"+e.link_text_color+";}"),t},buildHeadingAttr:function(){return _.fusionInlineEditor({cid:this.model.get("cid"),param:"heading_text","disable-return":!0,"disable-extra-spaces":!0,toolbar:!1},{class:"fusion-countdown-heading"})},buildSubHeadingAttr:function(){return _.fusionInlineEditor({cid:this.model.get("cid"),param:"subheading_text","disable-return":!0,"disable-extra-spaces":!0,toolbar:!1},{class:"fusion-countdown-subheading"})}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_menu_anchor=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return t.attr=this.buildAttr(e.values),t.name=e.values.name,t.label=window.fusionAllElements[this.model.get("element_type")].name,t.icon=window.fusionAllElements[this.model.get("element_type")].icon,t},buildAttr:function(e){var t={class:"fusion-menu-anchor",id:e.name};return""!==e.class&&(t.class+=" "+e.class),t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_checklist=FusionPageBuilder.ParentElementView.extend({filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.checklistShortcode=this.buildChecklistAttr(e.values),this.buildExtraVars(e.values),t.values=e.values,t.cid=this.model.get("cid"),t},validateValues:function(e){e.size=_.fusionValidateAttrValue(e.size,"px"),"small"===e.size?e.size="13px":"medium"===e.size?e.size="18px":"large"===e.size?e.size="40px":-1===e.size.indexOf("px")&&(e.size=e.size+"px"),e.circle=1==e.circle?"yes":e.circle},buildChecklistAttr:function(e){var t={};return t.class="fusion-checklist fusion-checklist-"+this.model.get("cid"),t=_.fusionVisibilityAtts(e.hide_on_mobile,t),this.font_size=parseFloat(e.size),this.line_height=1.7*this.font_size,t.style="font-size:"+this.font_size+"px;line-height:"+this.line_height+"px;","yes"===e.divider&&(t.class+=" fusion-checklist-divider"),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t.class+=" fusion-child-element",t["data-empty"]=this.emptyPlaceholderText,t},buildExtraVars:function(){var e={};e.font_size=this.font_size,e.line_height=this.line_height,e.circle_yes_font_size=.88*e.font_size,e.icon_margin=.7*e.font_size,e.icon_margin_position=jQuery("body").hasClass("rtl")?"left":"right",e.content_margin=e.line_height+e.icon_margin,e.content_margin_position=jQuery("body").hasClass("rtl")?"right":"left",this.model.set("extras",e)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_li_item=FusionPageBuilder.ChildElementView.extend({filterTemplateAtts:function(e){var t={},i=this.model.get("parent"),o=FusionPageBuilderElements.find(function(e){return e.get("cid")==i});return this.parentValues=jQuery.extend(!0,{},fusionAllElements.fusion_checklist.defaults,_.fusionCleanParameters(o.get("params"))),this.parentExtras=o.get("extras"),t.checklistShortcodeSpan=this.buildChecklistShortcodeSpanAttr(e.values),t.checklistShortcodeIcon=this.buildChecklistShortcodeIconAttr(e.values),t.checklistShortcodeItemContent=this.buildChecklistShortcodeItemContentAttr(e.values),t.cid=this.model.get("cid"),t.parent=i,t.output=e.values.element_content,t},buildChecklistShortcodeSpanAttr:function(e){var t,i={style:""},o="circle-no";return this.parentValues.circle=1==this.parentValues.circle?"yes":this.parentValues.circle,("yes"===e.circle||"yes"===this.parentValues.circle&&"no"!==e.circle)&&(o="circle-yes",t=e.circlecolor&&""!==e.circlecolor?e.circlecolor:this.parentValues.circlecolor,i.style="background-color:"+t+";",i.style+="font-size:"+this.parentExtras.circle_yes_font_size+"px;"),i.class="icon-wrapper "+o,i.style+="height:"+this.parentExtras.line_height+"px;",i.style+="width:"+this.parentExtras.line_height+"px;",i.style+="margin-"+this.parentExtras.icon_margin_position+":"+this.parentExtras.icon_margin+"px;",i},buildChecklistShortcodeIconAttr:function(e){return{class:"fusion-li-icon "+(e.icon&&""!==e.icon?_.fusionFontAwesome(e.icon):_.fusionFontAwesome(this.parentValues.icon)),style:"color:"+(e.iconcolor&&""!==e.iconcolor?e.iconcolor:this.parentValues.iconcolor)+";"}},buildChecklistShortcodeItemContentAttr:function(){var e={class:"fusion-li-item-content",style:"margin-"+this.parentExtras.content_margin_position+":"+this.parentExtras.content_margin+"px;"};return e=_.fusionInlineEditor({cid:this.model.get("cid"),"data-disable-return":!0,"data-disable-extra-spaces":!0},e)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_youtube=FusionPageBuilder.ElementView.extend({afterPatch:function(){this._refreshJs()},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.attrSrc=this.buildAttrSrc(e.values),t.id=e.values.id,t.api_params=e.values.api_params,t.width=e.values.width,t.height=e.values.height,t},validateValues:function(e){var t;e.height=_.fusionValidateAttrValue(e.height,""),e.width=_.fusionValidateAttrValue(e.width,""),(t=e.id.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/))&&11===t[2].length&&(e.id=t[2])},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-video fusion-youtube",style:""});return"yes"===e.center?t.class+=" center-video":t.style+="max-width:"+e.width+"px;max-height:"+e.height+"px;",""!==e.alignment&&(t.class+=" fusion-align"+e.alignment,t.style+=" width:100%"),"true"!=e.autoplay&&"yes"!==e.autoplay||(t["data-autoplay"]="1"),e.class&&""!==e.class&&(t.class+=" "+e.class),""!==e.css_id&&(t.id=e.css_id),t},buildAttrSrc:function(e){var t={class:"video-shortcode"};return"yes"===e.center&&(t.style="max-width:"+e.width+"px;max-height:"+e.height+"px;"),t}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_soundcloud=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),t.attr=this.buildAttr(e.values),t.values=e.values,t},validateValues:function(e){e.width=_.fusionValidateAttrValue(e.width,"px"),e.height=_.fusionValidateAttrValue(e.height,"px"),e.autoplay="yes"===e.auto_play?"true":"false",e.comments="yes"===e.comments?"true":"false","visual"===e.layout?(e.visual="true",e.height&&""!==e.height||(e.height="450")):(e.visual="false",e.height&&""!==e.height||(e.height="166")),e.height=parseInt(e.height,10),e.show_related="yes"===e.show_related?"false":"true",e.show_reposts="yes"===e.show_reposts?"true":"false",e.show_user="yes"===e.show_user?"true":"false",e.color&&(e.color=jQuery.Color(e.color).toHexString(),e.color=e.color.replace("#",""))},buildAttr:function(e){var t={class:"fusion-soundcloud"};return""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t=_.fusionVisibilityAtts(e.hide_on_mobile,t)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_text=FusionPageBuilder.ElementView.extend({beforePatch:function(){void 0!==this.model.attributes.params.element_content&&""!==this.model.attributes.params.element_content||(this.model.attributes.params.element_content=fusionBuilderText.text_placeholder)},afterPatch:function(){this._refreshJs()},filterTemplateAtts:function(e){var t={};return t.attr=this.buildAttr(e.values),t.cid=this.model.get("cid"),t.output=_.autop(e.values.element_content),t},buildAttr:function(t){var i=_.fusionVisibilityAtts(t.hide_on_mobile,{class:"fusion-text",style:""});return"default"===t.rule_style&&(t.rule_style=fusionAllElements.fusion_text.defaults.rule_style),1<t.columns&&(i.class+=" fusion-text-split-columns fusion-text-columns-"+t.columns,_.each(["-webkit-","-moz-",""],function(e){i.style+=" "+e+"column-count:"+t.columns+";","none"!==t.column_spacing&&t.column_spacing&&(i.style+=" "+e+"column-gap:"+_.fusionValidateAttrValue(t.column_spacing,"px")+";"),"none"!==t.column_min_width&&t.column_min_width&&(i.style+=" "+e+"column-width:"+_.fusionValidateAttrValue(t.column_min_width,"px")+";"),"none"!==t.rule_style&&(i.style+=" "+e+"column-rule:"+t.rule_size+"px "+t.rule_style+" "+t.rule_color+";")})),void 0!==t.class&&""!==t.class&&(i.class+=" "+t.class),void 0!==t.id&&""!==t.id&&(i.id=t.id),i=_.fusionInlineEditor({cid:this.model.get("cid")},i)}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_tagline_box=FusionPageBuilder.ElementView.extend({filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),this.extras=e.extras,this.attrButton=this.buildButtonAttr(e.values),t.attr=this.buildAttr(e.values),t.attrReadingBox=this.buildReadingBoxAttr(e.values),t.desktopAttrButton=this.buildDesktopButtonAttr(e.values),t.mobileAttrButton=this.buildMobileButtonAttr(e.values),t.titleAttr=this.buildTitleAttr(e.values),t.buttonSpanAttr=this.buildButtonSpanAttr(e.values),t.descriptionAttr=this.buildDescriptionAttr(e.values),t.contentAttr=this.buildContentAttr(e.values),t.cid=this.model.get("cid"),t.values=e.values,t},validateValues:function(e){e.border=_.fusionValidateAttrValue(e.border,"px"),e.modal&&(e.link="#"),e.button_type&&(e.button_type=e.button_type.toLowerCase());try{FusionPageBuilderApp.base64Encode(FusionPageBuilderApp.base64Decode(e.description))===e.description&&(e.description=FusionPageBuilderApp.base64Decode(e.description),e.description=_.unescape(e.description)),FusionPageBuilderApp.base64Encode(FusionPageBuilderApp.base64Decode(e.title))===e.title&&(e.title=FusionPageBuilderApp.base64Decode(e.title),e.title=_.unescape(e.title))}catch(e){}},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-reading-box-container reading-box-container-"+this.model.get("cid"),style:""});return t=_.fusionAnimations(e,t),!e.margin_top&&"0"!==e.margin_top||(t.style+="margin-top:"+_.fusionGetValueWithUnit(e.margin_top)+";"),!e.margin_bottom&&"0"!==e.margin_bottom||(t.style+="margin-bottom:"+_.fusionGetValueWithUnit(e.margin_bottom)+";"),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildReadingBoxAttr:function(e){var t={class:"reading-box"};return"right"===e.content_alignment?t.class+=" reading-box-right":"center"===e.content_alignment&&(t.class+=" reading-box-center"),"yes"===e.shadow&&(t.class+=" element-bottomshadow"),t.style="background-color:"+e.backgroundcolor+";",t.style+="border-width:"+e.border+";",t.style+="border-color:"+e.bordercolor+";","none"!==e.highlightposition&&(3<parseInt(e.border,10)?t.style+="border-"+e.highlightposition+"-width:"+e.border+";":t.style+="border-"+e.highlightposition+"-width:3px;",t.style+="border-"+e.highlightposition+"-color:"+this.extras.primary_color+";"),t.style+="border-style:solid;",t},buildButtonAttr:function(e){var t={class:"button fusion-button button-"+e.buttoncolor+" button-"+e.button_shape+" fusion-button-"+e.button_size+" button-"+e.button_size+" button-"+e.button_type};return t.class=t.class.toLowerCase(),"right"===e.content_alignment?t.class+=" continue-left":"center"===e.content_alignment?t.class+=" continue-center":t.class+=" continue-right","flat"===e.button_type&&(t.style="-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;"),t.href=e.link,t.target=e.linktarget,"_blank"===t.target&&(t.rel="noopener noreferrer"),""!==e.modal&&(t["data-toggle"]="modal",t["data-target"]="."+e.modal),t},buildTitleAttr:function(){return _.fusionInlineEditor({cid:this.model.get("cid"),param:"title","disable-return":!0,"disable-extra-spaces":!0,encoding:!0,toolbar:!1},{})},buildButtonSpanAttr:function(){return _.fusionInlineEditor({cid:this.model.get("cid"),param:"button","disable-return":!0,"disable-extra-spaces":!0,toolbar:!1},{})},buildDescriptionAttr:function(e){var t={class:"reading-box-description"};return""!==e.title&&(t.class+=" fusion-reading-box-additional"),t=_.fusionInlineEditor({cid:this.model.get("cid"),param:"description","disable-return":!0,"disable-extra-spaces":!0,encoding:!0,toolbar:"simple"},t)},buildContentAttr:function(e){var t={class:"reading-box-additional"};return""===e.description&&""!==e.title&&(t.class+=" fusion-reading-box-additional"),t=_.fusionInlineEditor({cid:this.model.get("cid")},t)},buildDesktopButtonAttr:function(e){var t=jQuery.extend(!0,{},this.attrButton),i="";return""!==e.description&&void 0!==e.element_content&&""!==e.element_content&&(i=" fusion-desktop-button-margin"),t.class+=" fusion-desktop-button fusion-tagline-button continue"+i,t},buildMobileButtonAttr:function(){var e=jQuery.extend(!0,{},this.attrButton);return e.class+=" fusion-mobile-button",e}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_pricing_table=FusionPageBuilder.ParentElementView.extend({onInit:function(){var e=this.model.get("params");void 0===e.background_color_hover&&void 0!==e.bordercolor&&""!==e.bordercolor&&(e.background_color_hover=e.bordercolor)},onRender:function(){var e=6,t=this.model.get("params");void 0===t.columns&&void 0!==this.model.children&&this.model.children.length&&(this.model.children.length<6&&(e=this.model.children.length),t.columns=e,this.model.set("params",t),this.updateColumnWidths())},childViewAdded:function(){this.updateColumnWidths()},childViewRemoved:function(){this.updateColumnWidths()},childViewCloned:function(){this.updateColumnWidths()},updateColumnWidths:function(){var e,t,i=this.model.get("params"),n=void 0!==this.model.children?this.model.children.length:0;6<n&&(n=6),i.columns=n,this.model.set("params",i),e=jQuery.extend(!0,{},window.fusionAllElements[this.model.get("element_type")].defaults,_.fusionCleanParameters(i)),t=this.computeTableData(e),this.$el.find(".fusion-child-element").attr("class",t.class),this.model.children.each(function(e){var t=e.attributes.cid,i=window.FusionPageBuilderViewManager.getView(t),o=jQuery.extend(!0,{},window.fusionAllElements[i.model.get("element_type")].defaults,_.fusionCleanParameters(i.model.get("params")));i.buildColumnWrapperAttr(o,n),i.onRender()})},filterTemplateAtts:function(e){return{styles:this.computeStyles(e.values),tableData:this.computeTableData(e.values)}},computeTableData:function(e){var t="sep",i=this.model.get("cid"),o={};return"1"==e.type&&(t="full"),6<e.columns&&(e.columns=6),o.class="fusion-child-element fusion-pricing-table pricing-table-cid"+i+" "+t+"-boxed-pricing row fusion-columns-"+e.columns+" columns-"+e.columns+" fusion-clearfix",o["data-empty"]=this.emptyPlaceholderText,o=_.fusionVisibilityAtts(e.hide_on_mobile,o),void 0!==e.class&&""!==e.class&&(o.class+=" "+e.class),void 0!==e.id&&""!==e.id&&(o.id=e.id),o},computeStyles:function(e){var t=this.model.get("cid");return'<style type="text/css">.pricing-table-cid'+t+" .panel-container, .pricing-table-cid"+t+" .standout .panel-container,.pricing-table-cid"+t+".full-boxed-pricing { background-color: "+e.bordercolor+";}.pricing-table-cid"+t+" .list-group .list-group-item,.pricing-table-cid"+t+" .list-group .list-group-item:last-child{ background-color:"+e.backgroundcolor+"; border-color:"+e.dividercolor+";}.pricing-table-cid"+t+".full-boxed-pricing .panel-wrapper:hover .panel-heading,.full-boxed-pricing .panel-wrapper.hover .panel-heading,.pricing-table-cid"+t+" .panel-wrapper:hover .list-group-item,.pricing-table-cid"+t+" .panel-wrapper.hover .list-group-item { background-color:"+e.background_color_hover+";}.pricing-table-cid"+t+".full-boxed-pricing .panel-heading{ background-color:"+e.backgroundcolor+";}.pricing-table-cid"+t+" .fusion-panel, .pricing-table-cid"+t+" .panel-wrapper:last-child .fusion-panel,.pricing-table-cid"+t+" .standout .fusion-panel, .pricing-table-cid"+t+"  .panel-heading,.pricing-table-cid"+t+" .panel-body, .pricing-table-cid"+t+" .panel-footer{ border-color:"+e.dividercolor+";}.pricing-table-cid"+t+" .panel-body,.pricing-table-cid"+t+" .panel-footer{ background-color:"+e.bordercolor+";}.pricing-table-cid"+t+".sep-boxed-pricing .panel-heading h3{color:"+e.heading_color_style_2+";}.pricing-table-cid"+t+".full-boxed-pricing.fusion-pricing-table .panel-heading h3{color:"+e.heading_color_style_1+";}.pricing-table-cid"+t+".fusion-pricing-table .panel-body .price .decimal-part{color:"+e.pricing_color+";}.pricing-table-cid"+t+".fusion-pricing-table .panel-body .price .integer-part{color:"+e.pricing_color+";}.pricing-table-cid"+t+" ul.list-group li{color:"+e.body_text_color+";}</style>"}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_pricing_column=FusionPageBuilder.ChildElementView.extend({onInit:function(){this.setPriceParams(),this.setFooterContent(),this.setFeatureRows(),this.clearInvalidParams()},beforeGenerateShortcode:function(){var e=this.model.get("params"),t=this.model.get("priceParams"),i="[fusion_pricing_price",o=this.getFeaturedRows(),n=this.model.get("footerContent");_.each(t,function(e,t){i+=" "+t+'="'+e+'"'}),i+="][/fusion_pricing_price]",_.each(o,function(e){i+="[fusion_pricing_row]"+e+"[/fusion_pricing_row]"}),void 0!==n&&""!==n&&(i+="[fusion_pricing_footer]"+n+"[/fusion_pricing_footer]"),e.element_content=i,this.model.set("params",e)},setPriceParams:function(){var e,t,i=this.model.get("params"),o=void 0!==i.element_content?i.element_content:"",n=FusionPageBuilderApp.regExpShortcode("fusion_pricing_price"),a=o.match(n);a&&a.length?(o=a[0],t="object"==typeof(e=""!==a[3]?window.wp.shortcode.attrs(a[3]):"").named?e.named:{},this.model.set("priceParams",jQuery.extend(!0,{},t))):this.model.set("priceParams",{})},setFooterContent:function(){var e=this.model.get("params"),t=void 0!==e.element_content?e.element_content:"",i=FusionPageBuilderApp.regExpShortcode("fusion_pricing_footer"),o=t.match(i);o?(o[0],this.model.set("footerContent",o[5])):this.model.set("footerContent","")},setFeatureRows:function(){var e=this.model.get("params"),t=void 0!==e.element_content?e.element_content:"",i=FusionPageBuilderApp.findShortcodeMatches(t,"fusion_pricing_row"),o=[];"object"==typeof i&&i&&i.length&&(_.each(i,function(e){var t="";void 0!==e.match(FusionPageBuilderApp.regExpShortcode("fusion_pricing_row"))[5]&&(t=e.match(FusionPageBuilderApp.regExpShortcode("fusion_pricing_row"))[5]),o.push(t)}),o=o.join("|"),this.model.set("featureRows",o))},clearInvalidParams:function(){var e=this.model.get("params");delete e.currency,delete e.currency_position,delete e.price,delete e.time,e.footer_content=!1,e.feature_rows=!1,this.model.set("params",e)},onRender:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors))},afterPatch:function(){void 0!==this.model.attributes.selectors&&(this.model.attributes.selectors.class+=" "+this.className,this.setElementAttributes(this.$el,this.model.attributes.selectors))},filterTemplateAtts:function(e){var t={},i=this.getPriceValues();return t.title=e.values.title,t.cid=this.model.get("cid"),t.titleAttr=this.buildTitleAttr(),this.buildColumnWrapperAttr(e.values,e.parentValues.columns),t.price=i.price.split("."),t.currencyPosition=i.currency_position,t.currency=i.currency,t.time=i.time,t.currencyClasses=this.getCurrencyClasses(i),t.timeClasses=this.getTimeClasses(i),t.featureRows=this.getFeaturedRows(),t.footerContent=this.model.get("footerContent"),t},getFeaturedRows:function(){var e=this.model.get("featureRows");return void 0===e?[]:-1===e.indexOf("|")?[e]:e.split("|")},getPriceValues:function(){var e=this.model.get("priceParams");return jQuery.extend(!0,{},{currency:"",currency_position:"left",price:"",time:""},_.fusionCleanParameters(e))},getCurrencyClasses:function(e){var t={class:"currency"};return"right"===e.currency_position&&(t.class+=" pos-right",-1!==e.price.indexOf(".")&&(t.class+=" price-without-decimal")),t},getTimeClasses:function(e){var t={class:"time"};return""!==e.time&&(-1===e.price.indexOf(".")&&(t.class+=" price-without-decimal"),"right"===e.currency_position&&(t.class+=" pos-right")),t},buildTitleAttr:function(){var e=this.model.get("cid"),t={class:"title-row"};return _.fusionInlineEditor({cid:e,param:"title","disable-return":!0,"disable-extra-spaces":!0,toolbar:!1},t),t},buildColumnWrapperAttr:function(e,t){var i={class:"panel-wrapper fusion-column column"};t="5"==t?2:12/parseInt(t,10),i.class+=" col-lg-"+t+" col-md-"+t+" col-sm-"+t,i.class+=" fusion-pricingtable-column","yes"===e.standout&&(i.class+=" standout"),void 0!==e.class&&""!==e.class&&(i.class+=" "+e.class),void 0!==e.id&&""!==e.id&&(i.id=e.id),this.model.set("selectors",i)}}),_.extend(FusionPageBuilder.Callback.prototype,{fusionPricingTablePrice:function(e,t,i,o){var n=o.model.get("priceParams");return n[e]=t,o.model.set("priceParams",n),{render:!0}}}),_.extend(FusionPageBuilder.Callback.prototype,{fusionPricingTableFooter:function(e,t,i,o){return o.model.set("footerContent",t),{render:!0}}}),_.extend(FusionPageBuilder.Callback.prototype,{fusionPricingTableRows:function(e,t,i,o){return o.model.set("featureRows",t),{render:!0}}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_blog=FusionPageBuilder.ElementView.extend({regularImagesFound:!1,afterPatch:function(){this._refreshJs()},filterTemplateAtts:function(e){var t={};return this.validateValues(e.values),this.extras=e.extras,t.attr=this.buildAttr(e.values),t.styles=this.buildStyles(e.values),t.blogPosts="",this.regularImagesFound=!1,void 0!==e.query_data&&void 0!==e.query_data.posts&&(t.blogPosts=this.buildBlogPosts(e),!0===this.regularImagesFound&&(t.attr.class+=" fusion-masonry-has-vertical")),void 0!==e.query_data&&void 0!==e.query_data.max_num_pages&&(t.attrPostsContainer=this.buildPostsContainerAttr(e),void 0!==e.query_data.paged&&(t.paginationCode=this.buildPagination(e))),t.load_more_text=e.extras.load_more_text,t.load_more=e.values.load_more&&-1!==e.values.number_posts,t.cid=this.model.get("cid"),t.values=e.values,t.query_data=e.query_data,t},validateValues:function(e){e.blog_grid_column_spacing=_.fusionValidateAttrValue(e.blog_grid_column_spacing,""),e.scrolling="undefined"!==e.paging&&"no"==e.paging&&"pagination"===e.scrolling?"no":e.scrolling,-1==e.number_posts&&(e.scrolling="no"),"large alternate"===e.layout?e.layout="large-alternate":"medium alternate"===e.layout&&(e.layout="medium-alternate"),e.load_more=!1,"no"!==e.scrolling&&"load_more_button"===e.scrolling&&(e.load_more=!0,e.scrolling="infinite"),void 0!==e.excerpt_length&&(e.excerpt_words=e.excerpt_length),"0"===e.blog_grid_column_spacing&&(e.blog_grid_column_spacing="0.0"),"object"!=typeof e.blog_grid_padding&&(e.blog_grid_padding={top:"",right:"",bottom:"",left:""}),void 0!==e.padding_top&&""!==e.padding_top&&(e.blog_grid_padding.top=e.padding_top),void 0!==e.padding_right&&""!==e.padding_right&&(e.blog_grid_padding.right=e.padding_right),void 0!==e.padding_bottom&&""!==e.padding_bottom&&(e.blog_grid_padding.bottom=e.padding_bottom),void 0!==e.padding_left&&""!==e.padding_left&&(e.blog_grid_padding.left=e.padding_left),e.blog_grid_padding=[_.fusionGetValueWithUnit(e.blog_grid_padding.top),_.fusionGetValueWithUnit(e.blog_grid_padding.right),_.fusionGetValueWithUnit(e.blog_grid_padding.bottom),_.fusionGetValueWithUnit(e.blog_grid_padding.left)],e.padding="object"==typeof e.blog_grid_padding?e.blog_grid_padding.join(" "):e.blog_grid_padding},buildAttr:function(e){var t=_.fusionVisibilityAtts(e.hide_on_mobile,{class:"fusion-blog-shortcode fusion-blog-archive",style:""}),i="",o=this.model.get("cid");return i="fusion-blog-layout-"+e.layout,"timeline"===e.layout?i="fusion-blog-layout-timeline-wrapper":"grid"!==e.layout&&"masonry"!==e.layout||(i="fusion-blog-layout-grid-wrapper"),!e.content_alignment||"grid"!==e.layout&&"masonry"!==e.layout&&"timeline"!==e.layout||(t.class+=" fusion-blog-layout-"+e.content_alignment),t.class+=" fusion-blog-shortcode-cid"+o,t.class+=" "+i,t.class+=" fusion-blog-"+e.scrolling,"yes"!==e.thumbnail&&(t.class+=" fusion-blog-no-images"),"0"!=e.blog_grid_column_spacing&&"0px"!==e.blog_grid_column_spacing||(t.class+=" fusion-no-col-space"),""!==e.class&&(t.class+=" "+e.class),""!==e.id&&(t.id=e.id),t},buildPostsContainerAttr:function(e){var t={class:"fusion-posts-container",style:""},i=e.values,o=e.extras,n=e.query_data,a="";return t.class+=" fusion-posts-container-"+i.scrolling,this.metaInfoCombined||(t.class+=" fusion-no-meta-info"),i.load_more&&(t.class+=" fusion-posts-container-load-more"),o.image_rollover&&(t.class+=" fusion-blog-rollover"),t["data-pages"]=n.max_num_pages,"grid"!==i.layout&&"masonry"!==i.layout||(t.class+=" fusion-blog-layout-grid fusion-blog-layout-grid-"+i.blog_grid_columns+" isotope","masonry"===i.layout&&(t.class+=" fusion-blog-layout-masonry",n.regular_images_found&&(t.class+=" fusion-blog-layout-masonry-has-vertical")),void 0===i.blog_grid_column_spacing&&0!==parseInt(i.blog_grid_column_spacing,10)||(t["data-grid-col-space"]=i.blog_grid_column_spacing),a=-1*parseFloat(i.blog_grid_column_spacing)/2,t.style="margin: "+a+"px "+a+"px 0;height:500px;"),"grid"===i.layout&&"yes"===i.equal_heights&&(t.class+=" fusion-blog-equal-heights"),t},buildPagination:function(e){var t=e.extras.pagination_global,i=e.extras.pagination_start_end_range_global,o=e.extras.pagination_range_global,n="",a="",s="",r=e.query_data,l=e.values;return-1==l.number_posts&&(l.scrolling="no"),"timeline"===l.layout&&(l.post_count=1),"no"!==l.scrolling&&(n=r.paged,a=r.max_num_pages,s=_.fusionPagination(a,n,o,l.scrolling,t,i)),s},buildBlogPosts:function(e){var o,n,a,s,r,l="",t=e.query_data,u=e.values,d=e.extras,c="",g={},p=1,f=null,m=null,h="",b={},v="",y="",w={},x="",F="",P="yes"===u.meta_all,i="yes"===u.meta_author,A="yes"===u.meta_categories,C="yes"===u.meta_comments,B="yes"===u.meta_date,k="yes"===u.meta_link,j="yes"===u.meta_tags,E="yes"===u.strip_html,V="yes"===u.thumbnail,Q="yes"===e.params.show_title||"yes"===e.params.title,S="yes"===u.title_link,T={},z="",$="",M="",I="",D="",R={},W="",O="",L="",H="",G={},U="",N="",q="",J="fusion-alignright",Y="",X={},Z={},K="";return"timeline"===u.layout&&(p=1,m=f=null),this.metaInfoCombined=P*(i+B+A+j+C+k),o=this.metaInfoCombined,n="yes"===u.excerpt&&u.excerpt_words<1?1:0,T.post_meta=P,T.post_meta_author=i,T.post_meta_date=B,T.post_meta_cats=A,T.post_meta_tags=j,T.post_meta_comments=C,T.disable_date_rich_snippet_pages=d.disable_date_rich_snippet_pages,a=o*(i+B+A+j),s=o*(C||k),r="no"===u.excerpt||"yes"===u.excerpt&&!n,_.each(t.posts,function(e){var t,i="";if(z=U=q="",c="blog-large",c=FusionPageBuilderApp.$el.hasClass("has-sidebar")?"blog-large":"full",c="medium"===u.layout||"medium-alternate"===u.layout?"blog-medium":c,c=void 0!==e.slideshow.featured_image_height&&void 0!==e.slideshow.featured_image_width&&""!==e.slideshow.featured_image_height&&""!==e.slideshow.featured_image_width&&"auto"!==e.slideshow.featured_image_height&&"auto"!==e.slideshow.featured_image_width?"full":c,c="auto"===e.slideshow.featured_image_height||"auto"===e.slideshow.featured_image_width?"full":c,c="grid"===u.layout||"timeline"===u.layout?"full":c,e.slideshow.image_size=c,"timeline"===u.layout&&((g={}).prev_post_month=f,g.post_month=e.post_month,g.prev_post_year=m,g.post_year=e.post_year,h="",g.prev_post_month==g.post_month&&g.prev_post_year==g.post_year||(1<p&&(h="</div>"),h+='<h3 class="fusion-timeline-date" style="background-color:'+u.grid_element_color+';">'+e.timeline_date_format+"</h3>",h+='<div class="fusion-collapse-month">'),l+=h),(b={}).id="post-"+e.id,b.class="post fusion-post-"+u.layout,"masonry"===u.layout&&(!0!==e.slideshow.image_data.masonry_data.specific_element_orientation_class&&(e.slideshow.image_data.masonry_data.element_orientation_class=_.fusionGetElementOrientationClass({imageWidth:e.slideshow.image_data.masonry_data.image_width,imageHeight:e.slideshow.image_data.masonry_data.image_height},u.blog_masonry_grid_ratio,u.blog_masonry_width_double)),e.slideshow.image_data.masonry_data.element_base_padding=_.fusionGetElementBasePadding(e.slideshow.image_data.masonry_data.element_orientation_class),"fusion-element-landscape"!==e.slideshow.image_data.masonry_data.element_orientation_class&&(this.regularImagesFound=!0),b.class+=" fusion-post-grid",b.class+=" "+e.slideshow.image_data.masonry_data.element_orientation_class),"timeline"===u.layout&&(v=" fusion-right-column",0<p%2&&(v=" fusion-left-column"),b.class+=" fusion-clearfix"+v,b.style="border-color:"+u.grid_element_color+";"),!1!==e.post_video&&(b.class+=" has-post-thumbnail"),!1!==e.post_class&&(b.class+=e.post_class),y="<article "+_.fusionGetAttributes(b)+">\n",l+=y,w={class:"fusion-post-wrapper",style:""},"masonry"===u.layout?(x=jQuery.Color(u.grid_box_color),F=x.toRgbaString(),0===x.alpha()&&(F=x.toHexString()),0===x.alpha()||"transparent"===u.grid_element_color?(w.class+=" fusion-masonary-is-transparent ",w.style+="border:none;"):w.style+="border:1px solid "+u.grid_element_color+";border-bottom-width:3px;",w.style+="background-color:"+F+";",w.style+="border-color:"+u.grid_element_color+";",o||!n||Q||(w.style+=" display:none;")):"grid"===u.layout?(x=jQuery.Color(u.grid_box_color),F=x.toRgbaString(),0===jQuery.Color(u.grid_element_color).alpha()||"transparent"===u.grid_element_color?w.style+="border:none;":w.style+="border:1px solid "+u.grid_element_color+";border-bottom-width:3px;",w.style+="background-color:"+F+";",w.style+="border-color:"+u.grid_element_color+";",o||!n||Q||(w.style+=" display:none;")):"timeline"===u.layout&&(x=jQuery.Color(u.grid_box_color),F=x.toRgbaString(),w.style="background-color:"+F+";"),"grid"!==u.layout&&"timeline"!==u.layout&&"masonry"!==u.layout||(l+="<div "+_.fusionGetAttributes(w)+">"),V&&"medium-alternate"!==u.layout&&(z="masonry"!==u.layout?_.fusionGetBlogSlideshow(e.slideshow):(e.slideshow.image_data.layout=u.layout,e.slideshow.image_data.masonry_data.blog_grid_column_spacing=parseFloat(u.blog_grid_column_spacing),_.fusionFeaturedImage(e.slideshow.image_data))),"medium-alternate"===u.layout||"large-alternate"===u.layout){switch(z+='<div class="fusion-date-and-formats">',I='<div class="fusion-date-box updated">',I+='<span class="fusion-date">'+e.alternate_date_format_day+"</span>",I+='<span class="fusion-month-year">'+e.alternate_date_format_month_year+"</span>",I+="</div>",e.format){case"gallery":D="images";break;case"link":D="link";break;case"image":D="image";break;case"quote":D="quotes-left";break;case"video":D="film";break;case"audio":D="headphones";break;case"chat":D="bubbles";break;default:D="pen"}I+='<div class="fusion-format-box">',I+='<i class="fusion-icon-'+D+'"></i>',z+=I+="</div>",z+="</div>",V&&"medium-alternate"===u.layout&&(z+=_.fusionGetBlogSlideshow(e.slideshow)),P&&($=_.fusionRenderPostMetadata("alternate",T,e.meta_data))}"grid"!==u.layout&&"timeline"!==u.layout&&"masonry"!==u.layout||("masonry"!==u.layout&&(Q&&a&&(r||s)||Q&&!a&&s)&&(Z={class:"fusion-content-sep"},K=(K=u.grid_separator_style_type).split("|"),jQuery.each(K,function(e,t){Z.class+=" sep-"+t}),Z.style="border-color:"+u.grid_separator_color,M="<div "+_.fusionGetAttributes(Z)+"></div>"),P&&($=_.fusionRenderPostMetadata("grid_timeline",T,e.meta_data)),R.class="fusion-post-content-wrapper","masonry"===u.layout?(R.style="background-color:inherit;",R.style+="padding: "+u.padding+";",o||!n||Q||(R.style+=" display:none;")):"grid"===u.layout&&(R.style="background-color:inherit;",R.style+="padding: "+u.padding+";",o||Q||!n&&"hide"!==u.excerpt||(R.style+=" display:none;")),z+="<div "+_.fusionGetAttributes(R)+">"),z+='<div class="fusion-post-content post-content">',Q&&(W=S?(L=e.link_icon_target,H=e.post_links_target,"yes"!==L&&"yes"!==H||(O=' target="_blank" rel="noopener noreferrer"'),'<a href="'+e.permalink+'"'+O+">"+e.title+"</a>"):e.title),"timeline"===u.layout&&(z+='<div class="fusion-timeline-circle" style="background-color:'+u.grid_element_color+';"></div>',z+='<div class="fusion-timeline-arrow" style="color:'+u.grid_element_color+';"></div>'),G.class="blog-shortcode-post-title",d.disable_date_rich_snippet_pages&&(G.class+=" entry-title"),U=z+"<h2 "+_.fusionGetAttributes(G)+">"+W+"</h2>"+$+M,l+=U,"hide"!==u.excerpt&&(N=e.content.has_custom_excerpt?_.fusionGetFixedContent(e.content,u.excerpt,Number.MAX_SAFE_INTEGER,E):_.fusionGetFixedContent(e.content,u.excerpt,u.excerpt_words,E)),l+='<div class="fusion-post-content-container">'+N+"</div>",k&&u.meta_read&&(J="fusion-alignright","grid"!==u.layout&&"timeline"!==u.layout&&"masonry"!==u.layout||(J="fusion-alignleft"),L=e.link_icon_target,H=e.post_links_target,"yes"!==L&&"yes"!==H||(X.target="_blank",X.rel="noopener noreferrer"),X.href=e.permalink,q+='<div class="'+J+'">',q+="<a "+_.fusionGetAttributes(X)+">",q+='<span class="fusion-read-more">'+d.read_more_text+"</span>",q+="</a>",q+="</div>","large-alternate"!==u.layout&&"medium-alternate"!==u.layout||(q='<div class="fusion-meta-info">'+q+"</div>")),C&&(Y='<div class="fusion-alignright">'+e.timeline_comments+"</div>"),"grid"!==u.layout&&"timeline"!==u.layout&&"masonry"!==u.layout||(i+="</div>",0<o&&(t=q,i+='<div class="fusion-meta-info">'+(t+=Y)+"</div>")),i+="</div>",i+='<div class="fusion-clearfix"></div>',0<o&&-1!==jQuery.inArray(u.layout,["large","medium"])&&(i+='<div class="fusion-meta-info">'+_.fusionRenderPostMetadata("standard",T,e.meta_data)+q+"</div>"),P&&-1!==jQuery.inArray(u.layout,["large-alternate","medium-alternate"])&&(i+=q),l+=i,"grid"!==u.layout&&"timeline"!==u.layout&&"masonry"!==u.layout||(l+="</div>\n"),l+="</article>\n","timeline"===u.layout&&(f=e.post_month,m=e.post_year,p++,u.post_count++)}),l},buildStyles:function(e){var t="",i=this.model.get("cid");return t+=".fusion-blog-shortcode-cid"+i+" .fusion-blog-layout-grid .fusion-post-grid{padding:"+parseFloat(e.blog_grid_column_spacing)/2+"px;}",t+=".fusion-blog-shortcode-cid"+i+" .fusion-posts-container{margin-left: -"+parseFloat(e.blog_grid_column_spacing)/2+"px !important; margin-right:-"+parseFloat(e.blog_grid_column_spacing)/2+"px !important;}"}})});FusionPageBuilder=FusionPageBuilder||{};jQuery,jQuery(document).ready(function(){FusionPageBuilder.fusion_lightbox=FusionPageBuilder.ElementView.extend({onRender:function(){this.afterPatch()},afterPatch:function(){var e=jQuery("#fb-preview")[0].contentWindow.jQuery(this.$el.find('[data-rel="iLightbox"]'));"object"==typeof jQuery("#fb-preview")[0].contentWindow.avadaLightBox&&(void 0!==this.iLightbox&&this.iLightbox.destroy(),e.length&&(this.iLightbox=e.iLightBox(jQuery("#fb-preview")[0].contentWindow.avadaLightBox.prepare_options("single"))))},filterTemplateAtts:function(e){return e.name=e.params.alt_text,e.label=window.fusionAllElements[this.model.get("element_type")].name,e.icon=window.fusionAllElements[this.model.get("element_type")].icon,e}})}),_.extend(FusionPageBuilder.Callback.prototype,{lightboxShortcodeFilter:function(e,t){var i=t.$el,o=e.params.id,n=e.params.class,a=e.params.description,s=i.find("#type").val(),r=""===s||void 0===s?i.find("#full_image").val():i.find("#video_url").val(),l=i.find("#thumbnail_image").val(),u=e.params.alt_text,d="";return""!==l&&(d='<a id="'+o+'" class="'+n+'" title="'+a+'" href="'+r+'"'+(r?' data-rel="iLightbox"':"")+'><img src="'+l+'" alt="'+u+'" /></a>'),e.params.element_content=d,e}});