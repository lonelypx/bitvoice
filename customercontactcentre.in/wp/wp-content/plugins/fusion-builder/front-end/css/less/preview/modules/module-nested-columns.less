.fusion-builder-live {
  &.nested-ui-active {
		.fusion-builder-live-element:not( .editing ) {
  		opacity:0.2;
  	}
  	.fusion-nested-columns {
  		&.editing {
  			.fusion-builder-live-element {
  				opacity: 1;
  			}
  			&:after {
		  		content:"";
		  		top: 0;
		  		left: 0;
		  		width: 100%;
		  		height: 100%;
		  		box-shadow: 0 0 150px 150px rgba(0,0,0, 0.2) !important;
		  		position: absolute;
		  	}
  		}
  	}

    .fusion-builder-add-element,
    .fusion-builder-container-add,
    .fusion-builder-insert-column,
    .fusion-builder-live-child-element:after {
      display: none !important;
    }
    .fusion-builder-empty-container {
      .fusion-builder-insert-column {
        display: block !important;
      }
      .fusion-builder-module-controls-container {
        background: #3464d1;
      }
    }

    .fusion-column-wrapper:not( .fusion-column-has-shadow ),
    .fusion-fullwidth {
      box-shadow: inset 0 0 0 2px rgba(60, 185, 240, 0) !important;
      transition: box-shadow 0.2s ease;
    }

    .fusion-builder-column-outer>.fusion-builder-module-controls-container {
      display: none !important;
    }

    .fusion_builder_row_inner.editing {
      box-shadow:0 0 0 3px rgba(52, 100, 209, 0.5);
      border-radius: 4px;
    }

    .fusion-builder-column-outer.fusion-builder-editing-child {
      z-index: 12;
    }

    .fusion-builder-column.active .fusion-column-wrapper:after,
    .fusion-builder-column:not(.fusion-builder-editing-child):hover .fusion-column-wrapper:after {
      box-shadow: 0 0 0 3px rgba(52,100,209, 0.5);
    }

    &.nested-columns-edited .fusion-builder-column:hover .fusion-column-wrapper:after,
    .fusion-builder-column.fusion-builder-editing-child:hover .fusion-column-wrapper:after {
      box-shadow: none;
    }

    .fusion-builder-column-inner .fusion-builder-add-element {
      display: none;
    }

    .fusion-nested-columns .fusion-builder-column-inner .fusion-builder-add-element {
      display: none !important;
    }

    .fusion-nested-columns.editing:hover .fusion-builder-column-inner:hover>.fusion-builder-add-element {
      display: none !important;
    }
    .fusion-builder-column:not(.fusion-global-column) {
      .fusion-nested-columns:not(.fusion-global-nested-row) {
        &.editing {
          .fusion-builder-column-inner {
            .fusion-builder-module-controls-container {
              background: #3464d1;
              &:hover {
                .fusion-builder-settings-column {
                  background-color: transparent;
                }
              }
            }
          }
          .fusion-builder-editing-icons {
            background: #3464d1;
            &:hover {
              .fusion-builder-cancel-row {
                background-color: transparent;
              }
            }
          }
        }
      }
    }
    .fusion-builder-column {
      .fusion-column-wrapper {
        &.fusion-column-has-overflow-hidden {
          overflow:visible;
        }
      }
    }

    .fusion-row:not(.fusion-builder-row-editing-child) {
      z-index: 8;
    }
  }

  &:not(.nested-ui-active):not(.fusion-builder-ui-wireframe):not(.fusion-builder-preview-mode) {
    .fusion_builder_row_inner:hover {
      box-shadow:0 0 0 3px rgba(52, 100, 209, 0.5);
      border-radius: 4px;
    }
    .fusion-column-wrapper {
      .fusion-nested-columns {
        .fusion-builder-row-container-inner {
          .fusion-builder-column {
            pointer-events: none;
            .fusion-builder-empty-column {
              padding: 0;
            }
          }
        }
        .fusion-builder-live-element, .fusion-nested-column-content {
          pointer-events: none;
        }
      }
    }
  }

   &.nested-ui-active:not(.fusion-builder-ui-wireframe):not(.fusion-builder-preview-mode) {
       .fusion-nested-columns:not(.editing) {
         .fusion-builder-column {
           pointer-events: none;
           .fusion-builder-empty-column {
             padding: 0;
           }
         }
       }
   }

  .fusion_builder_row_inner {
    &.fusion-nested-columns {
      clear: both;
    }
  }

  .fusion-builder-column:not(.fusion-builder-editing-child) {
    &:hover {
      .fusion-builder-row-container-inner {
        .fusion-builder-column-inner {
          .fusion-column-wrapper {
            &:after {
              box-shadow: 0 0 0 3px rgba(255,255,255, 0) !important;
            }
          }
        }
      }
    }
    .fusion-builder-module-controls-type-row-nested {
      background: #3464d1;
    }
  }

  .fusion-row-overlay {
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    z-index: 9;
    background: transparent;
  }

  .fusion_builder_row_inner.editing .fusion-row-overlay {
    z-index: 0;
    background: transparent;
  }

  .fusion_builder_row_inner.editing {
    .fusion-builder-row-content {
      position: relative;
      z-index: 1;
    }

    .fusion-builder-nested-columns-settings {
      &:after {
        clear: both;
        content: " ";
        display: table;
      }
    }
  }

  &.avada-footer-fx-parallax-effect {
    #main {
      z-index: 10;
    }
  }

  .fusion-live-search {
    .fusion-search-field {
      z-index: 9;
    }
  }

  .fusion-nested-columns {
    .fusion-builder-editing-icons {
      display: none;
    }

    .fusion-builder-column-inner {
      .fusion-column-wrapper:not( .fusion-column-has-shadow ) {
        box-shadow: none;
      }
    }

    .fusion-builder-column-inner .fusion-builder-empty-column .fusion-builder-module-controls-container .fusion-builder-module-controls .fusion-builder-add-element,
    .fusion-builder-column-inner .fusion-builder-module-controls-container,
    .fusion-builder-live-element .fusion-builder-module-controls-container {
      display: none;
    }

    &.editing {
      .fusion-builder-column-inner {
        &.active,
        &:hover {
          >.fusion-builder-module-controls-container {
            display: block;
            z-index: 999999;
          }
        }

        >.fusion-builder-module-controls-container {
          a {

            &.fusion-builder-row-add-child,
            &.fusion-builder-settings-column {
              display: block;
              opacity: 1;
              width: 33px;
            }

            &.fusion-builder-settings-column {
              background-color: #2a3035;
              border-radius: 4px 0 0 4px;
            }
          }

          &:hover {
            .fusion-builder-settings-column {
              background-color: #198FD9;
            }
          }
        }
      }
    }

    &.editing:hover {

      .fusion-builder-column-inner:hover .fusion-builder-add-element,
      .fusion-builder-column-inner:hover>.fusion-builder-module-controls-container,
      .fusion-builder-live-child-element:hover:after,
      .fusion-builder-live-element:hover>.fusion-builder-module-controls-container {
        display: block !important;
      }

      .fusion-builder-editing-icons {
        position: absolute;
        bottom: -40px;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
        background: #198FD9;
        border-radius: 4px;
        z-index: 99999999;
        display: block;
        box-shadow: 0 4px 12px rgba(0,0,0,.18);

        a {
          width: 33px;
          font-size: 14px;
          line-height: 33px;
          color: #fff;
          display: block;
          float: left;
          text-align: center;
          transition: color 0.1s ease;

          &.fusion-builder-cancel-row {
            border-top-left-radius: 4px;
            border-bottom-left-radius: 4px;
          }
        }

        &:hover {
            a {
                color: rgba(255,255,255,0.6);

                &:hover {
                    color: #fff;
                }
            }

          .fusion-builder-cancel-row {
            background: #198FD9;
          }
        }
      }

      >.fusion-builder-module-controls-container {
        display: none;
      }

      .fusion-builder-column-inner:hover>.fusion-builder-add-element,
      .fusion-builder-column-inner:hover>.fusion-builder-module-controls-container,
      .fusion-builder-nested-element:hover>.fusion-builder-module-controls-container {
        display: block;
      }

      .fusion-builder-column-inner:hover {
        box-shadow: 0 0 0 2px rgba(52,100,209, 0.5) !important;
        transition: box-shadow 0.2s ease;
        border-radius: 4px;
      }
    }


    &.fusion-global-nested-row.editing:hover {
      .fusion-builder-editing-icons {
        &:hover {
          .fusion-builder-cancel-row {
            background: #fe4774;
          }
        }
      }
    }
  }

  &.active {
    >.fusion-builder-module-controls-container .fusion-builder-module-controls {
      a:first-child {
        background-color: #198FD9;
      }
    }

    /* Column Sizes UI */
    .column-sizes {
      font-family: "Noto Sans", Roboto, "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", "Oxygen-Sans", "Ubuntu", "Cantarell", "Helvetica Neue", sans-serif;
      overflow: hidden;
      position: absolute;
      bottom: 100%;
      z-index: 99999999;
      width: 230px;
      background: white;
      border-radius: 4px;
      box-shadow: 0 4px 12px rgba(0,0,0,.18);
      display: block;

      h4 {
        font-weight: 600;
        display: block;
        text-align: center;
        margin: 10px 0;
        text-transform: uppercase;
        font-size: 12px;
        color: #222;
      }

      .column-size {
        width: ~"calc(100% / 6)";
        float: left;
        text-align: center;
        border-right: 1px solid #f1f1f1;
        border-top: 1px solid #f1f1f1;
        color: #222;
        cursor: pointer;
        font-size: 12px;
        padding: 5px 0;
        font-weight: 600;

        &:hover {
          background: #f9f9f9;
        }
      }
    }
  }

  .fusion-builder-row-container-inner {
    float: left;
    width: 100%;
  }

  .fusion-builder-nested-element {
    .fusion-builder-modal-top-container,
    .fusion-builder-modal-bottom-container {
      display: none;
    }
  }

  &:not(.fusion-builder-ui-wireframe) {
    .fusion-global-nested-row {
      .fusion-builder-module-controls-container {
        &.fusion-builder-module-controls-type-row-nested {
          background: transparent;
          box-shadow: none;

          .fusion-builder-module-controls {
            .fusion-builder-module-controls-inner {
              background: #fe4774;
              box-shadow: 0 4px 12px rgba(0,0,0,.18);
              border-radius: 4px;

              &:hover {
                a.fusion-builder-row-settings {
                  background: #fe4774 !important;
                }
              }
            }
          }

          .fusion-builder-element-global {
            background: #fe4774;
            box-shadow: 0 4px 12px rgba(0,0,0,.18);
            border-radius: 4px;
            margin-left: 8px;
            width: 33px;
            opacity: 1;
          }
        }
      }

      .fusion-builder-live-element,
      .fusion-column-wrapper {
        &:after {
          box-shadow: 0 0 0 3px rgba(254, 71, 116, 0.4) !important;
        }
      }

      .fusion-builder-live-element {
        .fusion-builder-module-controls-container {
          background: #fe4774;
          .fusion-builder-module-controls-inner {
            &:hover {
              .fusion-builder-row-settings {
                background: #fe4774;
              }
            }
          }
        }

        .fusion-builder-module-controls {
          &:hover {
            .fusion-builder-settings {
              background: #fe4774 !important;
            }
          }
        }
      }

      .fusion-builder-editing-icons {
        background: #fe4774 !important;

        .fusion-builder-cancel-row {
          &:hover {
            background: #fe4774 !important;
          }
        }
      }
    }

    .fusion-builder-editing-child {
      .fusion-global-nested-row, .fusion-global-column {
        .fusion-builder-column {
          &:hover {
            box-shadow: none !important;
          }

          .fusion-column-wrapper {
            &:after {
              box-shadow:0 0 0 3px rgba(254, 71, 116, 0.4) !important;
            }
          }

          .fusion-builder-module-controls-type-column-nested {
            background: #fe4774;
          }
        }
        &.fusion-builder-nested-element {
          &.editing {
            box-shadow: 0 0 0 3px rgba(254, 71, 116, 0.4) !important;
          }
        }
      }

    }
  }
  &:not(.nested-ui-active) {
    .fusion-nested-columns {
      .fusion-builder-empty-container {
        .fusion-builder-insert-inner-column {
          display: none !important;
        }
      }
    }
  }
}

.fusion-builder-live {
  &.nested-ui-active {
    .fusion-builder-live-element {
      z-index: 0 !important;
    }
    .fusion-global-nested-row {
      .fusion-builder-column {
        .fusion-builder-module-controls-type-column-nested {
          .fusion-builder-controls {
            background: #fe4774 !important;
            border-radius: 0 4px 4px 0;
            &:hover {
              .fusion-builder-settings-column {
                background: #fe4774;
              }
            }
          }
        }
      }
    }
    .fusion-nested-columns {
        &.editing {
            z-index: 9;
        }
      .fusion-builder-live-element {
        z-index: inherit !important;
      }
    }
    .fusion-builder-row-container {
      .fusion-builder-column {
        .fusion-builder-live-element {
          .fusion-builder-module-controls-container {
            display: none;
          }
        }
        &.fusion-builder-column-outer {
          &.fusion-global-column {
            &:hover {
              .fusion-column-wrapper {
                &:after {
                  box-shadow: 0 0 0 3px rgba(254, 71, 116, 0.4);
                }
              }
            }
          }
        }
      }
    }

  }
  .fusion-global-nested-row {
    .fusion-builder-module-controls-type-row-nested {
      background: transparent !important;
      .fusion-builder-controls {
        .fusion-builder-module-controls-inner {
          .fusion-builder-row-settings {
            background: #2a3035 !important;
          }
        }
      }
    }
  }
  .fusion-global-nested-row {
    .fusion-nested-column-content {
      .fusion-builder-empty-column {
        .fusion-builder-module-controls-container {
          background: #fe4774;
        }
      }
    }
  }
  .fusion-global-column {
    .fusion-nested-columns {
      .fusion-builder-module-controls-type-row-nested {
        .fusion-builder-module-controls-inner {
          &:hover {
            .fusion-builder-row-settings {
              background: #fe4774 !important;
            }
          }
        }
      }
    }
    .fusion-builder-module-controls-type-row-nested {
      background: transparent;
      box-shadow: none;
      .fusion-builder-controls {
        .fusion-builder-module-controls-inner {
          background: #fe4774 !important;
          box-shadow: 0 4px 12px rgba(0,0,0,.18);
          border-radius: 4px;
          &:hover {
            .fusion-builder-row-settings {
              background: #fe4774 !important;
            }
          }
        }
      }
    }
  }

  &.nested-ui-active {
    .fusion-global-container, .fusion-global-column {
      .fusion-nested-columns {
        &.editing {
          box-shadow:0 0 0 3px rgba(254, 71, 116, 0.4);
          .fusion-builder-column {
            .fusion-builder-module-controls-type-column-nested {
              .fusion-builder-controls {
                background: #fe4774 !important;
                border-radius: 4px;
                &:hover {
                  .fusion-builder-settings-column {
                    background: #fe4774 !important;
                  }
                }
              }
            }
          }

        }
      }
      .fusion-builder-editing-icons {
        background: #fe4774 !important;
          &:hover {
            .fusion-builder-cancel-row {
              background: #fe4774 !important;
            }
          }
      }
      .fusion-builder-column {
        &.fusion-builder-column-inner {
          &:hover {
            box-shadow:0 0 0 3px rgba(254, 71, 116, 0.4) !important;
          }
        }
      }
      .fusion-builder-empty-column {
        .fusion-builder-module-controls-container {
          background: #fe4774;
        }
      }
    }
    .fusion-nested-columns {
      &.editing {
        .fusion-builder-empty-column {
          .fusion-builder-module-controls-container {
            display: block !important;
            .fusion-builder-controls {
              .fusion-builder-add-element {
                display: block !important;
              }
            }
          }
        }
      }
    }
  }
  &.fusion-builder-ui-wireframe {
    .fusion-row-overlay {
      display: none !important;
    }
  }
}
